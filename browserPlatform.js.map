{
  "version": 3,
  "file": "browserPlatform.js",
  "sources": [
    "../project-structure-compile-babel/src/versionCompare.js",
    "src/platform/type/createImportTracker.js",
    "src/platform/type/browser/browserDetect/util.js",
    "src/platform/type/browser/browserDetect/ie.js",
    "src/platform/type/browser/browserDetect/opera.js",
    "src/platform/type/browser/browserDetect/edge.js",
    "src/platform/type/browser/browserDetect/firefox.js",
    "src/platform/type/browser/browserDetect/chrome.js",
    "src/platform/type/browser/browserDetect/safari.js",
    "src/platform/type/browser/browserDetect/electron.js",
    "src/platform/type/browser/browserDetect/ios.js",
    "src/platform/type/browser/browserDetect/index.js",
    "src/platform/type/browser/hotreload.js",
    "src/platform/type/browser/stringToStringWithLink.js",
    "src/platform/type/browser/browserPlatform.js"
  ],
  "sourcesContent": [
    "const semver = (version) => {\n  if (typeof version === \"number\") {\n    return {\n      major: version,\n      minor: 0,\n      patch: 0,\n    }\n  }\n  if (typeof version === \"string\") {\n    if (version.indexOf(\".\") > -1) {\n      const parts = version.split(\".\")\n      return {\n        major: Number(parts[0]),\n        minor: parts[1] ? Number(parts[1]) : 0,\n        patch: parts[2] ? Number(parts[2]) : 0,\n      }\n    }\n    if (isNaN(version)) {\n      return {\n        major: 0,\n        minor: 0,\n        patch: 0,\n      }\n    }\n    return {\n      major: Number(version),\n      minor: 0,\n      patch: 0,\n    }\n  }\n  throw new TypeError(`version must be a number or a string, got: ${typeof version}`)\n}\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = semver(versionA)\n  const semanticVersionB = semver(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n\nexport const versionEqual = (versionA, versionB) => {\n  return String(versionA) === String(versionB)\n}\n\nexport const versionIsAbove = (versionSupposedAbove, versionSupposedBelow) => {\n  return versionCompare(versionSupposedAbove, versionSupposedBelow) > 0\n}\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n\nexport const versionIsBelowOrEqual = (versionSupposedBelow, versionSupposedAbove) => {\n  return (\n    versionEqual(versionSupposedBelow, versionSupposedAbove) ||\n    versionIsBelow(versionSupposedBelow, versionSupposedAbove)\n  )\n}\n\nexport const versionHighest = (versionA, versionB) => {\n  return versionIsAbove(versionA, versionB) ? versionA : versionB\n}\n\nexport const versionLowest = (versionA, versionB) => {\n  return versionIsBelow(versionA, versionB) ? versionA : versionB\n}\n",
    "export const createImportTracker = () => {\n  const importedMap = {}\n\n  const markFileAsImported = (file) => {\n    importedMap[file] = true\n  }\n\n  const isFileImported = (file) => {\n    return file in importedMap && importedMap[file] === true\n  }\n\n  return { markFileAsImported, isFileImported }\n}\n",
    "export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n\nexport const detect = () => userAgentToBrowser(window.navigator.userAgent)\n",
    "import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) || firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version: firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) || userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n\nexport const detect = () => userAgentToBrowser(window.navigator.userAgent)\n",
    "import { secondMatch } from \"./util.js\"\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n\nexport const detect = () => userAgentToBrowser(window.navigator.userAgent)\n",
    "import { firstMatch } from \"./util.js\"\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n\nexport const detect = () => userAgentToBrowser(window.navigator.userAgent)\n",
    "import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  return null\n}\n\nexport const detect = () => userAgentToBrowser(window.navigator.userAgent)\n",
    "import { userAgentToVersion } from \"./util.js\"\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n\nexport const detect = () => userAgentToBrowser(window.navigator.userAgent)\n",
    "export const detect = () => null // TODO\n",
    "export const detect = () => null // TODO\n",
    "import { detect as ieDetect } from \"./ie.js\"\nimport { detect as operaDetect } from \"./opera.js\"\nimport { detect as edgeDetect } from \"./edge.js\"\nimport { detect as firefoxDetect } from \"./firefox.js\"\nimport { detect as chromeDetect } from \"./chrome.js\"\nimport { detect as safariDetect } from \"./safari.js\"\nimport { detect as electronDetect } from \"./electron.js\"\nimport { detect as iosDetect } from \"./ios.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  operaDetect,\n  ieDetect,\n  edgeDetect,\n  firefoxDetect,\n  chromeDetect,\n  safariDetect,\n  electronDetect,\n  iosDetect,\n])\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  const parts = version.split(\".\")\n  // remove extraneous .\n  return parts.slice(0, 3).join(\".\")\n}\n\nexport const detect = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n",
    "export const open = (url, callback) => {\n  if (typeof window.EventSource !== \"function\") {\n    return\n  }\n\n  const eventSource = new window.EventSource(url, { withCredentials: true })\n  eventSource.onerror = () => {\n    // we could try to reconnect several times before giving up\n    // but dont keep it open as it would try to reconnect forever\n    eventSource.close()\n  }\n  eventSource.addEventListener(\"file-changed\", (e) => {\n    if (e.origin !== url) {\n      return\n    }\n    callback(e.data)\n  })\n}\n",
    "export const link = (url, text = url) => `<a href=\"${url}\">${text}</a>`\n\n// `Error: yo\n// at Object.execute (http://127.0.0.1:57300/build/src/__test__/file-throw.js:9:13)\n// at doExec (http://127.0.0.1:3000/src/__test__/file-throw.js:452:38)\n// at postOrderExec (http://127.0.0.1:3000/src/__test__/file-throw.js:448:16)\n// at http://127.0.0.1:3000/src/__test__/file-throw.js:399:18`.replace(/(?:https?|ftp|file):\\/\\/(.*+)$/gm, (...args) => {\n//   debugger\n// })\nexport const stringToStringWithLink = (source) => {\n  return source.replace(/(?:https?|ftp|file):\\/\\/.*?$/gm, (match) => {\n    // remove lineNumber. columnNumber and possible last ) from url\n    const url = match.replace(/(?::[0-9]+)?:[0-9]*\\)?$/, \"\")\n    // const sourceURL = url.replace(`${remoteRoot}/${remoteCompileDestination}`, remoteRoot)\n\n    return link(url, match)\n  })\n}\n",
    "import { versionIsBelowOrEqual } from \"@dmail/project-structure-compile-babel/src/versionCompare.js\"\nimport { createImportTracker } from \"../createImportTracker.js\"\nimport { detect } from \"./browserDetect/index.js\"\nimport { open } from \"./hotreload.js\"\nimport { stringToStringWithLink, link } from \"./stringToStringWithLink.js\"\n\nconst parseErrorToMeta = (error, { fileToRemoteSourceFile }) => {\n  const parseError = JSON.parse(error.body)\n  const file = parseError.fileName\n  const message = parseError.message\n  const data = message.replace(file, link(`${fileToRemoteSourceFile(file)}`, file))\n\n  return {\n    file,\n    data,\n  }\n}\n\nconst errorToMeta = (error) => {\n  return {\n    data: stringToStringWithLink(error.stack),\n  }\n}\n\nconst browserToGroupId = ({ name, version }, groupMap) => {\n  return Object.keys(groupMap).find((id) => {\n    const { compatMap } = groupMap[id]\n\n    if (name in compatMap === false) {\n      return false\n    }\n    const versionForGroup = compatMap[name]\n    return versionIsBelowOrEqual(versionForGroup, version)\n  })\n}\n\nexport const createBrowserPlatform = ({\n  remoteRoot,\n  compileInto,\n  groupMap,\n  groupMapDefaultId,\n  hotreload = false,\n  hotreloadSSERoot,\n  hotreloadCallback,\n}) => {\n  const browser = detect()\n\n  const compileId = browserToGroupId(browser, groupMap) || groupMapDefaultId\n\n  const compileRoot = `${remoteRoot}/${compileInto}/${compileId}`\n\n  const fileToRemoteCompiledFile = (file) => `${compileRoot}/${file}`\n\n  const fileToRemoteSourceFile = (file) => `${remoteRoot}/${file}`\n\n  // const isRemoteCompiledFile = (string) => string.startsWith(compileRoot)\n\n  const remoteCompiledFileToFile = (remoteCompiledFile) =>\n    remoteCompiledFile.slice(compileRoot.length)\n\n  const { markFileAsImported, isFileImported } = createImportTracker()\n\n  if (hotreload) {\n    const hotreloadPredicate = (file) => {\n      // isFileImported is useful in case the file was imported but is not\n      // in System registry because it has a parse error or insantiate error\n      if (isFileImported(file)) {\n        return true\n      }\n\n      const remoteCompiledFile = fileToRemoteCompiledFile(file)\n      return Boolean(window.System.get(remoteCompiledFile))\n    }\n\n    open(hotreloadSSERoot, (file) => {\n      if (hotreloadPredicate(file)) {\n        hotreloadCallback({ file })\n      }\n    })\n  }\n\n  const rejectionValueToMeta = (error) => {\n    if (error && error.status === 500 && error.reason === \"parse error\") {\n      return parseErrorToMeta(error, { fileToRemoteSourceFile })\n    }\n\n    if (error && error.code === \"MODULE_INSTANTIATE_ERROR\") {\n      const file = remoteCompiledFileToFile(error.url) // to be tested\n      const originalError = error.error\n      return {\n        file,\n        // eslint-disable-next-line no-use-before-define\n        data: rejectionValueToMeta(originalError),\n      }\n    }\n\n    if (error && error instanceof Error) {\n      return errorToMeta(error)\n    }\n\n    return {\n      data: JSON.stringify(error),\n    }\n  }\n\n  const executeFile = (file) => {\n    markFileAsImported(file)\n\n    const remoteCompiledFile = fileToRemoteCompiledFile(file)\n\n    return window.System.import(remoteCompiledFile).catch((error) => {\n      const meta = rejectionValueToMeta(error)\n\n      document.body.innerHTML = `<h1><a href=\"${fileToRemoteSourceFile(\n        file,\n      )}\">${file}</a> import rejected</h1>\n\t<pre style=\"border: 1px solid black\">${meta.data}</pre>`\n\n      return Promise.reject(error)\n    })\n  }\n\n  return { executeFile }\n}\n"
  ],
  "names": [
    "semver",
    "version",
    "major",
    "minor",
    "patch",
    "indexOf",
    "parts",
    "split",
    "Number",
    "isNaN",
    "TypeError",
    "versionCompare",
    "versionA",
    "versionB",
    "semanticVersionA",
    "semanticVersionB",
    "majorDiff",
    "minorDiff",
    "patchDiff",
    "versionEqual",
    "String",
    "versionIsBelow",
    "versionSupposedBelow",
    "versionSupposedAbove",
    "versionIsBelowOrEqual",
    "createImportTracker",
    "importedMap",
    "markFileAsImported",
    "file",
    "isFileImported",
    "firstMatch",
    "regexp",
    "string",
    "match",
    "length",
    "undefined",
    "secondMatch",
    "userAgentToVersion",
    "userAgent",
    "userAgentToBrowser",
    "test",
    "name",
    "detect",
    "window",
    "navigator",
    "detectorCompose",
    "detectors",
    "i",
    "detector",
    "result",
    "operaDetect",
    "ieDetect",
    "edgeDetect",
    "firefoxDetect",
    "chromeDetect",
    "safariDetect",
    "electronDetect",
    "iosDetect",
    "normalizeName",
    "toLowerCase",
    "normalizeVersion",
    "slice",
    "join",
    "open",
    "url",
    "callback",
    "EventSource",
    "eventSource",
    "withCredentials",
    "onerror",
    "close",
    "addEventListener",
    "e",
    "origin",
    "data",
    "link",
    "text",
    "stringToStringWithLink",
    "source",
    "replace",
    "parseErrorToMeta",
    "error",
    "fileToRemoteSourceFile",
    "parseError",
    "JSON",
    "parse",
    "body",
    "fileName",
    "message",
    "errorToMeta",
    "stack",
    "browserToGroupId",
    "groupMap",
    "Object",
    "keys",
    "find",
    "id",
    "compatMap",
    "versionForGroup",
    "createBrowserPlatform",
    "remoteRoot",
    "compileInto",
    "groupMapDefaultId",
    "hotreload",
    "hotreloadSSERoot",
    "hotreloadCallback",
    "browser",
    "compileId",
    "compileRoot",
    "fileToRemoteCompiledFile",
    "remoteCompiledFileToFile",
    "remoteCompiledFile",
    "hotreloadPredicate",
    "Boolean",
    "System",
    "get",
    "rejectionValueToMeta",
    "status",
    "reason",
    "code",
    "originalError",
    "Error",
    "stringify",
    "executeFile",
    "import",
    "catch",
    "meta",
    "document",
    "innerHTML",
    "Promise",
    "reject"
  ],
  "mappings": "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"
}