{
  "version": 3,
  "file": "index.js",
  "sources": [
    "../module-loader/src/browser/fetchUsingXHR.js",
    "../module-loader/src/getNamespaceToRegister.js",
    "../module-loader/src/browser/index.js"
  ],
  "sourcesContent": [
    "// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") {\n    return {}\n  }\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n\n  const headerMap = {}\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst normalizeXhr = (xhr) => {\n  return {\n    status: xhr.status,\n    reason: xhr.statusText,\n    headers: getHeadersFromXHR(xhr),\n    body: xhr.responseText,\n  }\n}\n\nexport const fetchUsingXHR = (url) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    xhr.ontimeout = () => {\n      reject({\n        name: \"REQUEST_TIMEOUT_ERROR\",\n      })\n    }\n\n    xhr.onerror = (error) => {\n      reject(error)\n    }\n\n    xhr.onload = () => {\n      if (xhr.status === 0) {\n        resolve({\n          ...normalizeXhr(xhr),\n          status: 200,\n        })\n\n        return\n      }\n      resolve({\n        ...normalizeXhr(xhr),\n      })\n    }\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState !== 4) {\n        return\n      }\n\n      // in Chrome on file:/// URLs, status is 0\n      if (xhr.status === 0) {\n        if (xhr.responseText) {\n          xhr.onload()\n        }\n        return\n      }\n\n      resolve(normalizeXhr(xhr))\n    }\n\n    xhr.open(\"GET\", url, true)\n    xhr.send(null)\n  })\n}\n",
    "export const getNamespaceToRegister = (getNamespace) => {\n  return [\n    [],\n    (_export) => {\n      return {\n        execute: () => {\n          _export(getNamespace())\n        },\n      }\n    },\n  ]\n}\n",
    "import { fetchUsingXHR } from \"./fetchUsingXHR.js\"\nimport { getNamespaceToRegister } from \"../getNamespaceToRegister.js\"\n\nconst browserSystem = new window.System.constructor()\n\nbrowserSystem.instantiate = (url, parent) => {\n  return fetchUsingXHR(url).then(({ status, headers, reason, body }) => {\n    if (status < 200 || status >= 400) {\n      return Promise.reject({ status, reason, headers, body })\n    }\n\n    if (headers[\"content-type\"] === \"application/javascript\") {\n      body = `${body}\n${\"//#\"} sourceURL=${url}`\n\n      try {\n        window.eval(body)\n      } catch (error) {\n        return Promise.reject({\n          code: \"MODULE_INSTANTIATE_ERROR\",\n          error,\n          url,\n          parent,\n        })\n      }\n\n      return browserSystem.getRegister()\n    }\n\n    if (headers[\"content-type\"] === \"application/json\") {\n      return getNamespaceToRegister(() => {\n        return {\n          default: JSON.parse(body),\n        }\n      })\n    }\n  })\n}\n\nwindow.System = browserSystem\n"
  ],
  "names": [
    "getHeadersFromXHR",
    "xhr",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "headerMap",
    "forEach",
    "line",
    "parts",
    "name",
    "shift",
    "value",
    "join",
    "toLowerCase",
    "normalizeXhr",
    "status",
    "reason",
    "statusText",
    "headers",
    "body",
    "responseText",
    "fetchUsingXHR",
    "url",
    "Promise",
    "resolve",
    "reject",
    "XMLHttpRequest",
    "ontimeout",
    "onerror",
    "error",
    "onload",
    "onreadystatechange",
    "readyState",
    "open",
    "send",
    "getNamespaceToRegister",
    "getNamespace",
    "_export",
    "execute",
    "browserSystem",
    "window",
    "System",
    "constructor",
    "instantiate",
    "parent",
    "then",
    "eval",
    "code",
    "getRegister",
    "default",
    "JSON",
    "parse"
  ],
  "mappings": "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"
}