{"version":3,"file":"main.js","sources":["/src/babelPluginCompatMap/babelPluginCompatMap.js","/node_modules/@jsenv/import-map/src/assertImportMap.js","/node_modules/@jsenv/import-map/src/hasScheme.js","/node_modules/@jsenv/href/src/hrefToScheme/hrefToScheme.js","/node_modules/@jsenv/href/src/hrefToPathname/hrefToPathname.js","/node_modules/@jsenv/href/src/hrefToOrigin/hrefToOrigin.js","/node_modules/@jsenv/href/src/pathnameToDirname/pathnameToDirname.js","/node_modules/@jsenv/import-map/src/resolveUrl/resolveUrl.js","/node_modules/@jsenv/import-map/src/resolveSpecifier/resolveSpecifier.js","/node_modules/@jsenv/bundling/src/generateBabelPluginMapOption/import-meta-commonjs.js","/node_modules/@jsenv/href/src/pathnameToRelativePath/pathnameToRelativePath.js","/node_modules/@jsenv/operating-system-path/src/starts-with-windows-drive-letter.js","/node_modules/@jsenv/operating-system-path/src/replace-slashes-with-backslashes.js","/node_modules/@jsenv/operating-system-path/src/pathname-to-operating-system-path.js","/node_modules/@jsenv/operating-system-path/src/is-windows-path.js","/node_modules/@jsenv/operating-system-path/src/replace-back-slashes-with-slashes.js","/node_modules/@jsenv/operating-system-path/src/operating-system-path-to-pathname.js","/node_modules/@jsenv/operating-system-path/src/pathname-is-inside.js","/node_modules/@jsenv/operating-system-path/src/pathname-to-relative-pathname.js","/src/jsenvCorePath/jsenvCorePath.js","/src/babelHelperMap/babelHelperMap.js","/src/browserScoreMap/browserScoreMap.js","/node_modules/@dmail/helper/src/arrayWithout.js","/node_modules/@dmail/helper/src/arrayWithoutValue.js","/node_modules/@dmail/helper/src/promiseSequence.js","/node_modules/@dmail/helper/src/fileMakeDirname.js","/node_modules/@dmail/helper/src/fileCopy.js","/node_modules/@dmail/helper/src/fileRead.js","/node_modules/@dmail/helper/src/fileStat.js","/node_modules/@dmail/helper/src/fileLStat.js","/node_modules/@dmail/helper/src/fileWrite.js","/node_modules/@dmail/helper/src/folderRead.js","/src/cleanCompileCacheFolderIfObsolete/readCompileCacheFolderMeta.js","/src/cleanCompileCacheFolderIfObsolete/writeCompileCacheFolderMeta.js","/src/cleanCompileCacheFolderIfObsolete/removeFolder.js","/src/cleanCompileCacheFolderIfObsolete/cleanCompileCacheFolderIfObsolete.js","/src/compilationResultToTransformResult/compilationResultToTransformResult.js","/src/semantic-versioning/valueToVersion.js","/src/semantic-versioning/versionCompare.js","/src/semantic-versioning/versionIsBelow.js","/src/semantic-versioning/findHighestVersion.js","/src/computeBabelPluginMapForPlatform/computeBabelPluginMapForPlatform.js","/src/GROUP_ID.js","/src/computeCompileIdFromGroupId/computeCompileIdFromGroupId.js","/src/jsenvPluginCompatMap/jsenvPluginCompatMap.js","/src/computeJsenvPluginMapForPlatform/computeJsenvPluginMapForPlatform.js","/src/findAsyncPluginNameInBabelPluginMap/findAsyncPluginNameInBabelPluginMap.js","/src/generateBabelHelper/generateBabelHelper.js","/src/generateGroupMap/groupHaveSameRequirements.js","/src/generateGroupMap/generatePlatformGroupArray.js","/src/generateGroupMap/composePlatformCompatMap.js","/src/generateGroupMap/composeGroupArray.js","/src/generateGroupMap/generateAllPlatformGroupArray.js","/src/generateGroupMap/platformCompatMapToScore.js","/src/generateGroupMap/generateGroupMap.js","/node_modules/@jsenv/logger/src/createLogger/LOG_LEVELS.js","/node_modules/@jsenv/logger/src/createLogger/createLogger.js","/src/getOrGenerateCompiledFile/locaters.js","/src/getOrGenerateCompiledFile/readCache.js","/src/getOrGenerateCompiledFile/dateToSecondsPrecision.js","/src/getOrGenerateCompiledFile/bufferToEtag.js","/src/getOrGenerateCompiledFile/validateCache.js","/src/getOrGenerateCompiledFile/updateCache.js","/src/getOrGenerateCompiledFile/createLockRegistry.js","/src/getOrGenerateCompiledFile/getOrGenerateCompiledFile.js","/src/nodeVersionScoreMap/nodeVersionScoreMap.js","/node_modules/@jsenv/import-map/src/composeTwoImportMaps/composeTwoImportMaps.js","/src/readProjectImportMap/readProjectImportMap.js","/src/resolvePlatformGroup/resolveGroup.js","/src/resolveBrowserGroup/util.js","/src/resolveBrowserGroup/android.js","/src/resolveBrowserGroup/internet-explorer.js","/src/resolveBrowserGroup/opera.js","/src/resolveBrowserGroup/edge.js","/src/resolveBrowserGroup/firefox.js","/src/resolveBrowserGroup/chrome.js","/src/resolveBrowserGroup/safari.js","/src/resolveBrowserGroup/electron.js","/src/resolveBrowserGroup/ios.js","/src/resolveBrowserGroup/detectBrowser.js","/src/resolveBrowserGroup/resolveBrowserGroup.js","/src/resolveNodeGroup/detectNode.js","/src/resolveNodeGroup/resolveNodeGroup.js","/src/resolvePlatformGroup/resolvePlatformGroup.js","/src/transformJs/babel-plugin-transform-modules-systemjs/index.js","/src/transformJs/ansiToHTML.js","/src/transformJs/ensureRegeneratorRuntimeImportBabelPlugin.js","/src/transformJs/ensureGlobalThisImportBabelPlugin.js","/src/transformJs/transformBabelHelperToImportBabelPlugin.js","/src/transformJs/jsenvTransform.js","/node_modules/@jsenv/url-meta/src/assertUrlLike.js","/node_modules/@jsenv/url-meta/src/applySpecifierPatternMatching/applySpecifierPatternMatching.js","/node_modules/@jsenv/url-meta/src/isPlainObject.js","/node_modules/@jsenv/url-meta/src/metaMapToSpecifierMetaMap/metaMapToSpecifierMetaMap.js","/node_modules/@jsenv/url-meta/node_modules/@jsenv/import-map/src/resolveSpecifier/absoluteSpecifier.js","/node_modules/@jsenv/url-meta/node_modules/@jsenv/href/src/hrefToScheme/hrefToScheme.js","/node_modules/@jsenv/url-meta/node_modules/@jsenv/import-map/src/resolveSpecifier/schemeRelativeSpecifier.js","/node_modules/@jsenv/url-meta/node_modules/@jsenv/import-map/src/resolveSpecifier/originRelativeSpecifier.js","/node_modules/@jsenv/url-meta/node_modules/@jsenv/import-map/src/resolveSpecifier/pathnameRelativeSpecifier.js","/node_modules/@jsenv/url-meta/node_modules/@jsenv/import-map/src/resolveSpecifier/bareSpecifier.js","/node_modules/@jsenv/url-meta/node_modules/@jsenv/import-map/src/resolveSpecifier/resolveSpecifier.js","/node_modules/@jsenv/url-meta/src/assertSpecifierMetaMap.js","/node_modules/@jsenv/url-meta/src/normalizeSpecifierMetaMap/normalizeSpecifierMetaMap.js","/node_modules/@jsenv/url-meta/src/urlToMeta/urlToMeta.js","/src/transformJs/transformJs.js","/src/transformResultToCompilationResult/source-mapping-url.js","/src/transformResultToCompilationResult/transformResultToCompilationResult.js"],"sourcesContent":["// copied from\n// https://github.com/babel/babel/blob/0ee2c42b55e1893f0ae6510916405eb273587844/packages/babel-preset-env/data/plugins.json\n// Because this is an hidden implementation detail of @babel/preset-env\n// it could be deprecated or moved anytime.\n// For that reason it makes more sens to have it inlined here\n// than importing it from an undocumented location.\n// Ideally it would be documented or a separate module\n\nexport const babelPluginCompatMap = {\n  \"transform-template-literals\": {\n    chrome: \"41\",\n    edge: \"13\",\n    firefox: \"34\",\n    node: \"4\",\n    samsung: \"3.4\",\n    opera: \"28\",\n    electron: \"0.24\",\n  },\n  \"transform-literals\": {\n    chrome: \"44\",\n    edge: \"12\",\n    firefox: \"53\",\n    safari: \"9\",\n    node: \"4\",\n    ios: \"9\",\n    samsung: \"4\",\n    opera: \"31\",\n    electron: \"0.31\",\n  },\n  \"transform-function-name\": {\n    chrome: \"51\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6.5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"38\",\n    electron: \"1.2\",\n  },\n  \"transform-arrow-functions\": {\n    chrome: \"47\",\n    edge: \"13\",\n    firefox: \"45\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"34\",\n    electron: \"0.36\",\n  },\n  \"transform-block-scoped-functions\": {\n    chrome: \"41\",\n    edge: \"12\",\n    firefox: \"46\",\n    safari: \"10\",\n    node: \"4\",\n    ie: \"11\",\n    ios: \"10\",\n    samsung: \"3.4\",\n    opera: \"28\",\n    electron: \"0.24\",\n  },\n  \"transform-classes\": {\n    chrome: \"46\",\n    edge: \"13\",\n    firefox: \"45\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-object-super\": {\n    chrome: \"46\",\n    edge: \"13\",\n    firefox: \"45\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-shorthand-properties\": {\n    chrome: \"43\",\n    edge: \"12\",\n    firefox: \"33\",\n    safari: \"9\",\n    node: \"4\",\n    ios: \"9\",\n    samsung: \"4\",\n    opera: \"30\",\n    electron: \"0.29\",\n  },\n  \"transform-duplicate-keys\": {\n    chrome: \"42\",\n    edge: \"12\",\n    firefox: \"34\",\n    safari: \"9\",\n    node: \"4\",\n    ios: \"9\",\n    samsung: \"3.4\",\n    opera: \"29\",\n    electron: \"0.27\",\n  },\n  \"transform-computed-properties\": {\n    chrome: \"44\",\n    edge: \"12\",\n    firefox: \"34\",\n    safari: \"7.1\",\n    node: \"4\",\n    ios: \"8\",\n    samsung: \"4\",\n    opera: \"31\",\n    electron: \"0.31\",\n  },\n  \"transform-for-of\": {\n    chrome: \"51\",\n    edge: \"15\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6.5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"38\",\n    electron: \"1.2\",\n  },\n  \"transform-sticky-regex\": {\n    chrome: \"49\",\n    edge: \"13\",\n    firefox: \"3\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"36\",\n    electron: \"1\",\n  },\n  \"transform-dotall-regex\": {\n    chrome: \"62\",\n    safari: \"11.1\",\n    node: \"8.10\",\n    ios: \"11.3\",\n    samsung: \"8.2\",\n    opera: \"49\",\n    electron: \"3.1\",\n  },\n  \"transform-unicode-regex\": {\n    chrome: \"50\",\n    edge: \"13\",\n    firefox: \"46\",\n    safari: \"12\",\n    node: \"6\",\n    ios: \"12\",\n    samsung: \"5\",\n    opera: \"37\",\n    electron: \"1.1\",\n  },\n  \"transform-spread\": {\n    chrome: \"46\",\n    edge: \"13\",\n    firefox: \"36\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-parameters\": {\n    chrome: \"49\",\n    edge: \"18\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"36\",\n    electron: \"1\",\n  },\n  \"transform-destructuring\": {\n    chrome: \"51\",\n    edge: \"15\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6.5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"38\",\n    electron: \"1.2\",\n  },\n  \"transform-block-scoping\": {\n    chrome: \"49\",\n    edge: \"14\",\n    firefox: \"51\",\n    safari: \"11\",\n    node: \"6\",\n    ios: \"11\",\n    samsung: \"5\",\n    opera: \"36\",\n    electron: \"1\",\n  },\n  \"transform-typeof-symbol\": {\n    chrome: \"38\",\n    edge: \"12\",\n    firefox: \"36\",\n    safari: \"9\",\n    node: \"0.12\",\n    ios: \"9\",\n    samsung: \"3\",\n    opera: \"25\",\n    electron: \"0.2\",\n  },\n  \"transform-new-target\": {\n    chrome: \"46\",\n    edge: \"14\",\n    firefox: \"41\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-regenerator\": {\n    chrome: \"50\",\n    edge: \"13\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"37\",\n    electron: \"1.1\",\n  },\n  \"transform-exponentiation-operator\": {\n    chrome: \"52\",\n    edge: \"14\",\n    firefox: \"52\",\n    safari: \"10.1\",\n    node: \"7\",\n    ios: \"10.3\",\n    samsung: \"6.2\",\n    opera: \"39\",\n    electron: \"1.3\",\n  },\n  \"transform-async-to-generator\": {\n    chrome: \"55\",\n    edge: \"15\",\n    firefox: \"52\",\n    safari: \"11\",\n    node: \"7.6\",\n    ios: \"11\",\n    samsung: \"6.2\",\n    opera: \"42\",\n    electron: \"1.6\",\n  },\n  // copy of transform-async-to-generator\n  // this is not in the babel-preset-env repo\n  // but we need this\n  \"transform-async-to-promises\": {\n    chrome: \"55\",\n    edge: \"15\",\n    firefox: \"52\",\n    safari: \"11\",\n    node: \"7.6\",\n    ios: \"11\",\n    samsung: \"6.2\",\n    opera: \"42\",\n    electron: \"1.6\",\n  },\n  \"proposal-async-generator-functions\": {\n    chrome: \"63\",\n    firefox: \"57\",\n    safari: \"12\",\n    node: \"10\",\n    ios: \"12\",\n    samsung: \"8.2\",\n    opera: \"50\",\n    electron: \"3.1\",\n  },\n  \"proposal-object-rest-spread\": {\n    chrome: \"60\",\n    firefox: \"55\",\n    safari: \"11.1\",\n    node: \"8.3\",\n    ios: \"11.3\",\n    samsung: \"8.2\",\n    opera: \"47\",\n    electron: \"2.1\",\n  },\n  \"proposal-optional-chaining\": {},\n  \"proposal-unicode-property-regex\": {\n    chrome: \"64\",\n    safari: \"11.1\",\n    node: \"10\",\n    ios: \"11.3\",\n    opera: \"51\",\n    electron: \"3.1\",\n  },\n  \"proposal-json-strings\": {\n    chrome: \"66\",\n    firefox: \"62\",\n    safari: \"12\",\n    node: \"10\",\n    ios: \"12\",\n    opera: \"53\",\n    electron: \"3.1\",\n  },\n  \"proposal-optional-catch-binding\": {\n    chrome: \"66\",\n    firefox: \"58\",\n    safari: \"11.1\",\n    node: \"10\",\n    ios: \"11.3\",\n    opera: \"53\",\n    electron: \"3.1\",\n  },\n  \"transform-named-capturing-groups-regex\": {\n    chrome: \"64\",\n    safari: \"11.1\",\n    node: \"10\",\n    ios: \"11.3\",\n    opera: \"51\",\n    electron: \"3.1\",\n  },\n  \"transform-member-expression-literals\": {\n    chrome: \"7\",\n    opera: \"12\",\n    edge: \"12\",\n    firefox: \"2\",\n    safari: \"5.1\",\n    node: \"0.10\",\n    ie: \"9\",\n    android: \"4\",\n    ios: \"6\",\n    phantom: \"2\",\n    samsung: \"2.1\",\n    electron: \"5\",\n  },\n  \"transform-property-literals\": {\n    chrome: \"7\",\n    opera: \"12\",\n    edge: \"12\",\n    firefox: \"2\",\n    safari: \"5.1\",\n    node: \"0.10\",\n    ie: \"9\",\n    android: \"4\",\n    ios: \"6\",\n    phantom: \"2\",\n    samsung: \"2.1\",\n    electron: \"5\",\n  },\n  \"transform-reserved-words\": {\n    chrome: \"13\",\n    opera: \"10.50\",\n    edge: \"12\",\n    firefox: \"2\",\n    safari: \"3.1\",\n    node: \"0.10\",\n    ie: \"9\",\n    android: \"4.4\",\n    ios: \"6\",\n    phantom: \"2\",\n    samsung: \"2.1\",\n    electron: \"0.2\",\n  },\n}\n","export const assertImportMap = (value) => {\n  if (value === null) {\n    throw new TypeError(`an importMap must be an object, got null`)\n  }\n\n  const type = typeof value\n  if (type !== \"object\") {\n    throw new TypeError(`an importMap must be an object, received ${value}`)\n  }\n\n  if (Array.isArray(value)) {\n    throw new TypeError(`an importMap must be an object, received array ${value}`)\n  }\n}\n","export const hasScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n","export const hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n","import { hrefToScheme } from \"../hrefToScheme/hrefToScheme.js\"\n\nexport const hrefToPathname = (href) => {\n  return ressourceToPathname(hrefToRessource(href))\n}\n\nconst hrefToRessource = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return href.slice(\"file://\".length)\n  }\n\n  if (scheme === \"https\" || scheme === \"http\") {\n    // remove origin\n    const afterProtocol = href.slice(scheme.length + \"://\".length)\n    const pathnameSlashIndex = afterProtocol.indexOf(\"/\", \"://\".length)\n    return afterProtocol.slice(pathnameSlashIndex)\n  }\n\n  return href.slice(scheme.length + 1)\n}\n\nconst ressourceToPathname = (ressource) => {\n  const searchSeparatorIndex = ressource.indexOf(\"?\")\n  return searchSeparatorIndex === -1 ? ressource : ressource.slice(0, searchSeparatorIndex)\n}\n","import { hrefToScheme } from \"../hrefToScheme/hrefToScheme.js\"\n\nexport const hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n","export const pathnameToDirname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) return \"\"\n\n  return pathname.slice(0, slashLastIndex)\n}\n","// could be useful: https://url.spec.whatwg.org/#url-miscellaneous\n\nimport { hasScheme } from \"../hasScheme.js\"\nimport { hrefToScheme } from \"@jsenv/href/src/hrefToScheme/hrefToScheme.js\"\nimport { hrefToPathname } from \"@jsenv/href/src/hrefToPathname/hrefToPathname.js\"\nimport { hrefToOrigin } from \"@jsenv/href/src/hrefToOrigin/hrefToOrigin.js\"\nimport { pathnameToDirname } from \"@jsenv/href/src/pathnameToDirname/pathnameToDirname.js\"\n\nexport const resolveUrl = (specifier, baseUrl) => {\n  if (baseUrl) {\n    if (typeof baseUrl !== \"string\") {\n      throw new TypeError(writeBaseUrlMustBeAString({ baseUrl, specifier }))\n    }\n    if (!hasScheme(baseUrl)) {\n      throw new Error(writeBaseUrlMustBeAbsolute({ baseUrl, specifier }))\n    }\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  if (!baseUrl) {\n    throw new Error(writeBaseUrlRequired({ baseUrl, specifier }))\n  }\n\n  // scheme relative\n  if (specifier.slice(0, 2) === \"//\") {\n    return `${hrefToScheme(baseUrl)}:${specifier}`\n  }\n\n  // origin relative\n  if (specifier[0] === \"/\") {\n    return `${hrefToOrigin(baseUrl)}${specifier}`\n  }\n\n  const baseOrigin = hrefToOrigin(baseUrl)\n  const basePathname = hrefToPathname(baseUrl)\n\n  // pathname relative inside\n  if (specifier.slice(0, 2) === \"./\") {\n    const baseDirname = pathnameToDirname(basePathname)\n    return `${baseOrigin}${baseDirname}/${specifier.slice(2)}`\n  }\n\n  // pathname relative outside\n  if (specifier.slice(0, 3) === \"../\") {\n    let unresolvedPathname = specifier\n    const importerFolders = basePathname.split(\"/\")\n    importerFolders.pop()\n\n    while (unresolvedPathname.slice(0, 3) === \"../\") {\n      // when there is no folder left to resolved\n      // we just ignore '../'\n      if (importerFolders.length) {\n        importerFolders.pop()\n      }\n      unresolvedPathname = unresolvedPathname.slice(3)\n    }\n\n    const resolvedPathname = `${importerFolders.join(\"/\")}/${unresolvedPathname}`\n    return `${baseOrigin}${resolvedPathname}`\n  }\n\n  // bare\n  if (basePathname === \"\") {\n    return `${baseOrigin}/${specifier}`\n  }\n  if (basePathname[basePathname.length] === \"/\") {\n    return `${baseOrigin}${basePathname}${specifier}`\n  }\n  return `${baseOrigin}${pathnameToDirname(basePathname)}/${specifier}`\n}\n\nconst writeBaseUrlMustBeAString = ({ baseUrl, specifier }) => `baseUrl must be a string.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlMustBeAbsolute = ({ baseUrl, specifier }) => `baseUrl must be absolute.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlRequired = ({\n  baseUrl,\n  specifier,\n}) => `baseUrl required to resolve relative specifier.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n","import { hasScheme } from \"../hasScheme.js\"\nimport { resolveUrl } from \"../resolveUrl/resolveUrl.js\"\n\nexport const resolveSpecifier = (specifier, importer) => {\n  if (specifier[0] === \"/\" || specifier.startsWith(\"./\") || specifier.startsWith(\"../\")) {\n    return resolveUrl(specifier, importer)\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  return null\n}\n","// eslint-disable-next-line import/no-unresolved\nimport importMap from \"/importMap.json\"\nimport { normalizeImportMap } from \"@jsenv/import-map/src/normalizeImportMap/normalizeImportMap.js\"\nimport { resolveImport } from \"@jsenv/import-map/src/resolveImport/resolveImport.js\"\n\nconst nodeRequire = require\nexport { nodeRequire as require }\n\nconst filenameContainsBackSlashes = __filename.indexOf(\"\\\\\") > -1\n\nexport const url = filenameContainsBackSlashes\n  ? `file://${__filename.replace(/\\\\/g, \"/\")}`\n  : `file://${__filename}`\n\nexport const resolve = (specifier) => {\n  return resolveImport({\n    specifier,\n    importer: url,\n    importMap: memoizedGetImportMap(),\n    defaultExtension: false,\n  })\n}\n\n// better for perf and helps rollup to tree shake this out\n// when import.meta.resolve is not used\nlet memoizedImportMap\nconst memoizedGetImportMap = () => {\n  if (memoizedImportMap) return memoizedImportMap\n  memoizedImportMap = normalizeImportMap(importMap, url)\n  return memoizedImportMap\n}\n","export const pathnameToRelativePath = (pathname, otherPathname) =>\n  pathname.slice(otherPathname.length)\n","export const startsWithWindowsDriveLetter = (string) => {\n  const firstChar = string[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n\n  const secondChar = string[1]\n  if (secondChar !== \":\") return false\n\n  return true\n}\n","export const replaceSlashesWithBackSlashes = (string) => string.replace(/\\//g, \"\\\\\")\n","import { startsWithWindowsDriveLetter } from \"./starts-with-windows-drive-letter.js\"\nimport { replaceSlashesWithBackSlashes } from \"./replace-slashes-with-backslashes.js\"\n\nexport const pathnameToOperatingSystemPath = (pathname) => {\n  if (pathname[0] !== \"/\") throw new Error(`pathname must start with /, got ${pathname}`)\n\n  const pathnameWithoutLeadingSlash = pathname.slice(1)\n  if (\n    startsWithWindowsDriveLetter(pathnameWithoutLeadingSlash) &&\n    pathnameWithoutLeadingSlash[2] === \"/\"\n  ) {\n    return replaceSlashesWithBackSlashes(pathnameWithoutLeadingSlash)\n  }\n\n  // linux mac pathname === operatingSystemFilename\n  return pathname\n}\n","import { startsWithWindowsDriveLetter } from \"./starts-with-windows-drive-letter.js\"\n\nexport const isWindowsPath = (path) => startsWithWindowsDriveLetter(path) && path[2] === \"\\\\\"\n","export const replaceBackSlashesWithSlashes = (string) => string.replace(/\\\\/g, \"/\")\n","import { isWindowsPath } from \"./is-windows-path.js\"\nimport { replaceBackSlashesWithSlashes } from \"./replace-back-slashes-with-slashes.js\"\n\nexport const operatingSystemPathToPathname = (operatingSystemPath) => {\n  if (isWindowsPath(operatingSystemPath)) {\n    return `/${replaceBackSlashesWithSlashes(operatingSystemPath)}`\n  }\n\n  // linux and mac operatingSystemFilename === pathname\n  return operatingSystemPath\n}\n","export const pathnameIsInside = (pathname, otherPathname) =>\n  pathname.startsWith(`${otherPathname}/`)\n","export const pathnameToRelativePathname = (pathname, otherPathname) =>\n  pathname.slice(otherPathname.length)\n","import { resolve } from \"path\"\nimport { hrefToPathname } from \"@jsenv/href\"\nimport {\n  pathnameToOperatingSystemPath,\n  operatingSystemPathToPathname,\n  pathnameToRelativePathname,\n} from \"@jsenv/operating-system-path\"\n\nlet jsenvCorePath\nif (typeof __filename === \"string\") {\n  jsenvCorePath = resolve(__filename, \"../../../\") // get ride of dist/commonjs/main.js\n} else {\n  const selfPathname = hrefToPathname(import.meta.url)\n  const selfPath = pathnameToOperatingSystemPath(selfPathname)\n  jsenvCorePath = resolve(selfPath, \"../../../\") // get ride of src/jsenvCorePath/jsenvCorePath.js\n}\n\nexport { jsenvCorePath }\n\nexport const jsenvCorePathname = operatingSystemPathToPathname(jsenvCorePath)\n\n/**\n * jsenvRelativePathInception is used for the following:\n *\n * You may want to override some file internally used by jsenv.\n * When you do that you must pass a relativePath to a file in your project.\n * If you don't pass a custom file, jsenv must provide a default file.\n *\n * Keep in mind: it is possible for a project to depend indirectly from jsenv\n * so that the jsenv module will not be in project/node_modules/@jsenv/module-name\n * but in project/node_modules/@jsenv/whatever/node_modules/@jsenv/module-name.\n * It means the file is still relative to project but node module resolution\n * would not find the file.\n *\n */\n\nexport const jsenvCoreRelativePathInception = ({ jsenvCoreRelativePath, projectPathname }) => {\n  const jsenvPathname = `${jsenvCorePathname}${jsenvCoreRelativePath}`\n  const relativePath = pathnameToRelativePathname(jsenvPathname, projectPathname)\n  return relativePath\n}\n","// https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-core/src/tools/build-external-helpers.js\n// the list of possible helpers:\n// https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-helpers/src/helpers.js#L13\nimport { jsenvCorePathname } from \"../jsenvCorePath/jsenvCorePath.js\"\n\nconst { list } = import.meta.require(\"@babel/helpers\")\n\nconst babelHelperNameInsideJsenvCoreArray = [\n  \"applyDecoratedDescriptor\",\n  \"arrayWithHoles\",\n  \"arrayWithoutHoles\",\n  \"assertThisInitialized\",\n  \"AsyncGenerator\",\n  \"asyncGeneratorDelegate\",\n  \"asyncIterator\",\n  \"asyncToGenerator\",\n  \"awaitAsyncGenerator\",\n  \"AwaitValue\",\n  \"classCallCheck\",\n  \"classNameTDZError\",\n  \"classPrivateFieldDestructureSet\",\n  \"classPrivateFieldGet\",\n  \"classPrivateFieldLooseBase\",\n  \"classPrivateFieldLooseKey\",\n  \"classPrivateFieldSet\",\n  \"classPrivateMethodGet\",\n  \"classPrivateMethodSet\",\n  \"classStaticPrivateFieldSpecGet\",\n  \"classStaticPrivateFieldSpecSet\",\n  \"classStaticPrivateMethodGet\",\n  \"classStaticPrivateMethodSet\",\n  \"construct\",\n  \"createClass\",\n  \"decorate\",\n  \"defaults\",\n  \"defineEnumerableProperties\",\n  \"defineProperty\",\n  \"extends\",\n  \"get\",\n  \"getPrototypeOf\",\n  \"inherits\",\n  \"inheritsLoose\",\n  \"initializerDefineProperty\",\n  \"initializerWarningHelper\",\n  \"instanceof\",\n  \"interopRequireDefault\",\n  \"interopRequireWildcard\",\n  \"isNativeFunction\",\n  \"iterableToArray\",\n  \"iterableToArrayLimit\",\n  \"iterableToArrayLimitLoose\",\n  \"jsx\",\n  \"newArrowCheck\",\n  \"nonIterableRest\",\n  \"nonIterableSpread\",\n  \"objectDestructuringEmpty\",\n  \"objectSpread\",\n  \"objectSpread2\",\n  \"objectWithoutProperties\",\n  \"objectWithoutPropertiesLoose\",\n  \"possibleConstructorReturn\",\n  \"readOnlyError\",\n  \"set\",\n  \"setPrototypeOf\",\n  \"skipFirstGeneratorNext\",\n  \"slicedToArray\",\n  \"slicedToArrayLoose\",\n  \"superPropBase\",\n  \"taggedTemplateLiteral\",\n  \"taggedTemplateLiteralLoose\",\n  \"tdz\",\n  \"temporalRef\",\n  \"temporalUndefined\",\n  \"toArray\",\n  \"toConsumableArray\",\n  \"toPrimitive\",\n  \"toPropertyKey\",\n  \"typeof\",\n  \"wrapAsyncGenerator\",\n  \"wrapNativeSuper\",\n  \"wrapRegExp\",\n]\n\nconst babelHelperMap = {}\nlist.forEach((babelHelperName) => {\n  if (babelHelperNameInsideJsenvCoreArray.includes(babelHelperName)) {\n    babelHelperMap[\n      babelHelperName\n    ] = `@jsenv/core/helpers/babel/${babelHelperName}/${babelHelperName}.js`\n  } else {\n    babelHelperMap[\n      babelHelperName\n    ] = `file://${jsenvCorePathname}/.babel-helpers/${babelHelperName}.js`\n  }\n})\nexport { babelHelperMap }\n","// https://www.statista.com/statistics/268299/most-popular-internet-browsers/\n// this source of stat is what I found in 5min\n// we could improve these default usage score using better stats\n// and keep in mind this should be updated time to time or even better\n// come from a project specific audience\n\nexport const browserScoreMap = {\n  android: 0.001,\n  chrome: {\n    \"71\": 0.3,\n    \"69\": 0.19,\n    \"0\": 0.01, // it means oldest version of chrome will get a score of 0.01\n  },\n  firefox: {\n    \"61\": 0.3,\n  },\n  edge: {\n    \"12\": 0.1,\n  },\n  electron: 0.001,\n  ios: 0.001,\n  opera: 0.001,\n  other: 0.001,\n  safari: {\n    \"10\": 0.1,\n  },\n}\n","export const arrayWithout = (array, predicate) => {\n  const outputArray = []\n  let i = 0\n  while (i < array.length) {\n    const value = array[i]\n    const index = i\n    i++\n    if (predicate(value, index, outputArray)) continue\n    outputArray.push(value)\n  }\n  return outputArray\n}\n","import { arrayWithout } from \"./arrayWithout.js\"\n\nexport const arrayWithoutValue = (array, valueToRemove) =>\n  arrayWithout(array, (value) => value === valueToRemove)\n","export const promiseSequence = async (callbackArray) => {\n  const values = []\n  const visit = async (index) => {\n    if (index === callbackArray.length) return\n    const callback = callbackArray[index]\n    const value = await callback()\n    values.push(value)\n    await visit(index + 1)\n  }\n  await visit(0)\n  return values\n}\n","import { mkdir, lstat } from \"fs\"\nimport { promiseSequence } from \"./promiseSequence.js\"\n\n// nodejs 10.12.0 https://nodejs.org/api/fs.html#fs_fs_mkdir_path_options_callback\n// export const ensureFolderLeadingTo = (file) => {\n//   return new Promise((resolve, reject) => {\n//     fs.mkdir(path.dirname(file), { resurcive: true }, (error) => {\n//       if (error) {\n//         if (error.code === \"EEXIST\") {\n//           resolve()\n//           return\n//         }\n//         reject(error)\n//         return\n//       }\n//       resolve()\n//     })\n//   })\n// }\n\nexport const fileMakeDirname = (file) => {\n  const fileNormalized = normalizeSeparation(file)\n  // remove first / in case path starts with / (linux)\n  // because it would create a \"\" entry in folders array below\n  // tryig to create a folder at \"\"\n  const fileStartsWithSlash = fileNormalized[0] === \"/\"\n  const pathname = fileStartsWithSlash ? fileNormalized.slice(1) : fileNormalized\n  const folders = pathname.split(\"/\")\n  folders.pop()\n\n  return promiseSequence(\n    folders.map((_, index) => {\n      return () => {\n        const folder = folders.slice(0, index + 1).join(\"/\")\n        return folderMake(`${fileStartsWithSlash ? \"/\" : \"\"}${folder}`)\n      }\n    }),\n  )\n}\n\nconst normalizeSeparation = (file) => file.replace(/\\\\/g, \"/\")\n\nconst folderMake = (folder) =>\n  new Promise((resolve, reject) => {\n    mkdir(folder, async (error) => {\n      if (error) {\n        // au cas ou deux script essayent de crée un dossier peu importe qui y arrive c'est ok\n        if (error.code === \"EEXIST\") {\n          const stat = await fileLastStat(folder)\n          if (stat.isDirectory()) {\n            resolve()\n          } else {\n            reject({ status: 500, reason: \"expect a directory\" })\n          }\n        } else {\n          reject({ status: 500, reason: error.code })\n        }\n      } else {\n        resolve()\n      }\n    })\n  })\n\nconst fileLastStat = (path) =>\n  new Promise((resolve, reject) => {\n    lstat(path, (error, lstat) => {\n      if (error) {\n        reject({ status: 500, reason: error.code })\n      } else {\n        resolve(lstat)\n      }\n    })\n  })\n","import { promisify } from \"util\"\nimport { copyFile } from \"fs\"\nimport { fileMakeDirname } from \"./fileMakeDirname.js\"\n\nconst copyFilePromisified = promisify(copyFile)\n\nexport const fileCopy = async (source, destination) => {\n  await fileMakeDirname(destination)\n  return copyFilePromisified(source, destination)\n}\n","import { promisify } from \"util\"\nimport { readFile } from \"fs\"\n\nconst readFilePromisified = promisify(readFile)\n\nexport const fileRead = async (file) => {\n  const buffer = await readFilePromisified(file)\n  return buffer.toString()\n}\n","import { promisify } from \"util\"\nimport { stat } from \"fs\"\n\nconst statPromisified = promisify(stat)\n\nexport const fileStat = async (file) => {\n  const stat = await statPromisified(file)\n  return stat\n}\n","import { promisify } from \"util\"\nimport { lstat } from \"fs\"\n\nconst lstatPromisified = promisify(lstat)\n\nexport const fileLStat = async (file) => {\n  const lstat = await lstatPromisified(file)\n  return lstat\n}\n","import { promisify } from \"util\"\nimport { writeFile } from \"fs\"\nimport { fileMakeDirname } from \"./fileMakeDirname.js\"\n\nconst writeFilePromisified = promisify(writeFile)\n\nexport const fileWrite = async (file, content) => {\n  await fileMakeDirname(file)\n  return writeFilePromisified(file, content)\n}\n","import { promisify } from \"util\"\nimport { readdir } from \"fs\"\n\nconst readdirPromisified = promisify(readdir)\n\nexport const folderRead = async (folder) => {\n  const ressources = await readdirPromisified(folder)\n  return ressources\n}\n","import { fileRead } from \"@dmail/helper\"\nimport { pathnameToOperatingSystemPath } from \"@jsenv/operating-system-path\"\n\nexport const readCompileCacheFolderMeta = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n}) => {\n  try {\n    const compileCacheFolderMetaFilePath = pathnameToOperatingSystemPath(\n      `${projectPathname}${compileCacheFolderRelativePath}/meta.json`,\n    )\n    const source = await fileRead(compileCacheFolderMetaFilePath)\n    return JSON.parse(source)\n  } catch (e) {\n    if (e && e.code === \"ENOENT\") {\n      return null\n    }\n    throw e\n  }\n}\n","import { fileWrite } from \"@dmail/helper\"\nimport { pathnameToOperatingSystemPath } from \"@jsenv/operating-system-path\"\n\nexport const writeCompileCacheFolderMeta = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileCacheFolderMeta,\n}) => {\n  const cacheMetaMetaFilePath = pathnameToOperatingSystemPath(\n    `${projectPathname}${compileCacheFolderRelativePath}/meta.json`,\n  )\n  await fileWrite(cacheMetaMetaFilePath, JSON.stringify(compileCacheFolderMeta, null, \"  \"))\n}\n","const rimraf = import.meta.require(\"rimraf\")\n\nexport const removeFolder = (foldername) =>\n  new Promise((resolve, reject) =>\n    rimraf(foldername, (error) => {\n      if (error) reject(error)\n      else resolve()\n    }),\n  )\n","import { readFileSync } from \"fs\"\nimport { pathnameToOperatingSystemPath } from \"@jsenv/operating-system-path\"\nimport { jsenvCorePathname } from \"../jsenvCorePath/jsenvCorePath.js\"\nimport { readCompileCacheFolderMeta } from \"./readCompileCacheFolderMeta.js\"\nimport { writeCompileCacheFolderMeta } from \"./writeCompileCacheFolderMeta.js\"\nimport { removeFolder } from \"./removeFolder.js\"\n\nexport const cleanCompileCacheFolderIfObsolete = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  forceObsolete = false,\n  cacheMeta,\n  cleanCallback = () => {},\n}) => {\n  const jsenvCorePackagePath = pathnameToOperatingSystemPath(`${jsenvCorePathname}/package.json`)\n  const jsenvCorePackageVersion = readPackage(jsenvCorePackagePath).version\n\n  const compileCacheFolderMeta = {\n    ...cacheMeta,\n    jsenvCorePackageVersion,\n  }\n\n  const cacheFolderPath = pathnameToOperatingSystemPath(\n    `${projectPathname}${compileCacheFolderRelativePath}`,\n  )\n\n  if (forceObsolete) {\n    cleanCallback(cacheFolderPath)\n    await removeFolder(cacheFolderPath)\n  } else {\n    const previousCompileCacheFolderMeta = await readCompileCacheFolderMeta({\n      projectPathname,\n      compileCacheFolderRelativePath,\n    })\n    if (JSON.stringify(previousCompileCacheFolderMeta) !== JSON.stringify(compileCacheFolderMeta)) {\n      cleanCallback(cacheFolderPath)\n      await removeFolder(cacheFolderPath)\n    }\n  }\n\n  await writeCompileCacheFolderMeta({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileCacheFolderMeta,\n  })\n}\n\nconst readPackage = (packagePath) => {\n  const buffer = readFileSync(packagePath)\n  const string = String(buffer)\n  const packageObject = JSON.parse(string)\n  return packageObject\n}\n","export const compilationResultToTransformResult = ({ compiledSource, assets, assetsContent }) => {\n  const code = compiledSource\n\n  const sourceMapAssetIndex = assets.findIndex((asset) => asset.endsWith(\".map\"))\n  const map =\n    sourceMapAssetIndex === -1 ? undefined : JSON.parse(assetsContent[sourceMapAssetIndex])\n\n  return { code, map }\n}\n","export const valueToVersion = (value) => {\n  if (typeof value === \"number\") {\n    return numberToVersion(value)\n  }\n\n  if (typeof value === \"string\") {\n    return stringToVersion(value)\n  }\n\n  throw new TypeError(createValueErrorMessage({ version: value }))\n}\n\nconst numberToVersion = (number) => {\n  return {\n    major: number,\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst stringToVersion = (string) => {\n  if (string.indexOf(\".\") > -1) {\n    const parts = string.split(\".\")\n    return {\n      major: Number(parts[0]),\n      minor: parts[1] ? Number(parts[1]) : 0,\n      patch: parts[2] ? Number(parts[2]) : 0,\n    }\n  }\n\n  if (isNaN(string)) {\n    return {\n      major: 0,\n      minor: 0,\n      patch: 0,\n    }\n  }\n\n  return {\n    major: Number(string),\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst createValueErrorMessage = ({ value }) => `value must be a number or a string.\nvalue: ${value}`\n","import { valueToVersion } from \"./valueToVersion.js\"\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = valueToVersion(versionA)\n  const semanticVersionB = valueToVersion(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n","import { versionCompare } from \"./versionCompare.js\"\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n","import { versionIsBelow } from \"./versionIsBelow.js\"\n\nexport const findHighestVersion = (...values) => {\n  if (values.length === 0) throw new Error(`missing argument`)\n\n  return values.reduce((highestVersion, value) => {\n    if (versionIsBelow(highestVersion, value)) {\n      return value\n    }\n    return highestVersion\n  })\n}\n","import { babelPluginCompatMap as babelPluginCompatMapFallback } from \"../babelPluginCompatMap/babelPluginCompatMap.js\"\nimport { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const computeBabelPluginMapForPlatform = ({\n  babelPluginMap,\n  babelPluginCompatMap = babelPluginCompatMapFallback,\n  platformName,\n  platformVersion,\n}) => {\n  if (typeof babelPluginMap !== \"object\") {\n    throw new TypeError(`babelPluginMap must be an object, got ${babelPluginMap}`)\n  }\n  if (typeof babelPluginCompatMap !== \"object\") {\n    throw new TypeError(`babelPluginCompatMap must be an object, got ${babelPluginCompatMap}`)\n  }\n  if (typeof platformName !== \"string\") {\n    throw new TypeError(`platformName must be a string, got ${platformName}`)\n  }\n  if (typeof platformVersion !== \"string\") {\n    throw new TypeError(`platformVersion must be a string, got ${platformVersion}`)\n  }\n\n  const babelPluginMapForPlatform = {}\n  Object.keys(babelPluginMap).forEach((key) => {\n    const compatible = platformIsCompatibleWithFeature({\n      platformName,\n      platformVersion,\n      platformCompatMap: key in babelPluginCompatMap ? babelPluginCompatMap[key] : {},\n    })\n    if (!compatible) {\n      babelPluginMapForPlatform[key] = babelPluginMap[key]\n    }\n  })\n  return babelPluginMapForPlatform\n}\n\nconst platformIsCompatibleWithFeature = ({ platformName, platformVersion, platformCompatMap }) => {\n  const platformCompatibleVersion = computePlatformCompatibleVersion({\n    platformCompatMap,\n    platformName,\n  })\n  const highestVersion = findHighestVersion(platformVersion, platformCompatibleVersion)\n  return highestVersion === platformVersion\n}\n\nconst computePlatformCompatibleVersion = ({ platformCompatMap, platformName }) => {\n  return platformName in platformCompatMap ? platformCompatMap[platformName] : \"Infinity\"\n}\n","export const BEST_ID = \"best\"\n\nexport const OTHERWISE_ID = \"otherwise\"\n","import { OTHERWISE_ID } from \"../GROUP_ID.js\"\n\nexport const computeCompileIdFromGroupId = ({ groupId, groupMap }) => {\n  if (typeof groupId === \"undefined\") {\n    if (OTHERWISE_ID in groupMap) return OTHERWISE_ID\n\n    const keys = Object.keys(groupMap)\n    if (keys.length === 1) return keys[0]\n\n    throw new Error(createUnexpectedGroupIdMessage({ groupMap }))\n  }\n\n  if (groupId in groupMap === false)\n    throw new Error(createUnexpectedGroupIdMessage({ groupId, groupMap }))\n\n  return groupId\n}\n\nconst createUnexpectedGroupIdMessage = ({ compileId, groupMap }) => `unexpected groupId.\n--- expected compiled id ----\n${Object.keys(groupMap)}\n--- received compile id ---\n${compileId}`\n","// we could reuse this to get a list of polyfill\n// using https://github.com/babel/babel/blob/master/packages/babel-preset-env/data/built-ins.json#L1\n// adding a featureNameArray to every group\n// and according to that featureNameArray, add these polyfill\n// to the generated bundle\n\nexport const jsenvPluginCompatMap = {}\n","import { jsenvPluginCompatMap as jsenvPluginCompatMapFallback } from \"../jsenvPluginCompatMap/jsenvPluginCompatMap.js\"\nimport { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const computeJsenvPluginMapForPlatform = ({\n  jsenvPluginMap,\n  jsenvPluginCompatMap = jsenvPluginCompatMapFallback,\n  platformName,\n  platformVersion,\n}) => {\n  if (typeof jsenvPluginMap !== \"object\") {\n    throw new TypeError(`jsenvPluginMap must be a object, got ${jsenvPluginMap}`)\n  }\n  if (typeof jsenvPluginCompatMap !== \"object\") {\n    throw new TypeError(`jsenvPluginCompatMap must be a string, got ${jsenvPluginCompatMap}`)\n  }\n  if (typeof platformName !== \"string\") {\n    throw new TypeError(`platformName must be a string, got ${platformName}`)\n  }\n  if (typeof platformVersion !== \"string\") {\n    throw new TypeError(`platformVersion must be a string, got ${platformVersion}`)\n  }\n\n  const jsenvPluginMapForPlatform = {}\n  Object.keys(jsenvPluginMap).forEach((key) => {\n    const compatible = platformIsCompatibleWithFeature({\n      platformName,\n      platformVersion,\n      featureCompat: key in jsenvPluginCompatMap ? jsenvPluginCompatMap[key] : {},\n    })\n    if (!compatible) {\n      jsenvPluginMapForPlatform[key] = jsenvPluginMap[key]\n    }\n  })\n  return jsenvPluginMapForPlatform\n}\n\nconst platformIsCompatibleWithFeature = ({ platformName, platformVersion, featureCompat }) => {\n  const platformCompatibleVersion = computePlatformCompatibleVersion({\n    featureCompat,\n    platformName,\n  })\n  const highestVersion = findHighestVersion(platformVersion, platformCompatibleVersion)\n  return highestVersion === platformVersion\n}\n\nconst computePlatformCompatibleVersion = ({ featureCompat, platformName }) => {\n  return platformName in featureCompat ? featureCompat[platformName] : \"Infinity\"\n}\n","export const findAsyncPluginNameInBabelPluginMap = (babelPluginMap) => {\n  if (\"transform-async-to-promises\" in babelPluginMap) {\n    return \"transform-async-to-promises\"\n  }\n  if (\"transform-async-to-generator\" in babelPluginMap) {\n    return \"transform-async-to-generator\"\n  }\n  return \"\"\n}\n","const { buildExternalHelpers } = import.meta.require(\"@babel/core\")\nconst { getDependencies } = import.meta.require(\"@babel/helpers\")\n\nexport const generateBabelHelper = (name) => {\n  const helpersToBuild = [name]\n\n  /**\n   * we have to ensure we generate helper dependencies too because\n   * some helper contains import like\n   * import \"setPrototypeOf\"\n   * and babel deletes them somehow during buildExternalHelpers\n   *\n   * To fix that we could for instance extract babel helpers into\n   * actual files like we already do for global-this\n   * or regenerator-runtime\n   *\n   * But it means every babel update means updating thoose files too.\n   * for now let's keep it like that\n   */\n\n  const ensureDependencies = (name) => {\n    const dependencies = getDependencies(name)\n    dependencies.forEach((name) => {\n      if (helpersToBuild.includes(name)) {\n        return\n      }\n      helpersToBuild.push(name)\n      ensureDependencies(name)\n    })\n  }\n  ensureDependencies(name)\n\n  return buildExternalHelpers(helpersToBuild, \"module\")\n}\n","export const groupHaveSameRequirements = (leftGroup, rightGroup) => {\n  return (\n    leftGroup.babelPluginRequiredNameArray.join(\"\") ===\n      rightGroup.babelPluginRequiredNameArray.join(\"\") &&\n    leftGroup.jsenvPluginRequiredNameArray.join(\"\") ===\n      rightGroup.jsenvPluginRequiredNameArray.join(\"\")\n  )\n}\n","import { babelPluginCompatMap as babelPluginCompatMapFallback } from \"../babelPluginCompatMap/babelPluginCompatMap.js\"\nimport { jsenvPluginCompatMap as jsenvPluginCompatMapFallback } from \"../jsenvPluginCompatMap/jsenvPluginCompatMap.js\"\nimport { computeBabelPluginMapForPlatform } from \"../computeBabelPluginMapForPlatform/computeBabelPluginMapForPlatform.js\"\nimport { computeJsenvPluginMapForPlatform } from \"../computeJsenvPluginMapForPlatform/computeJsenvPluginMapForPlatform.js\"\nimport { findHighestVersion, versionCompare } from \"../semantic-versioning/index.js\"\nimport { groupHaveSameRequirements } from \"./groupHaveSameRequirements.js\"\n\nexport const generatePlatformGroupArray = ({\n  babelPluginMap,\n  jsenvPluginMap,\n  babelPluginCompatMap = babelPluginCompatMapFallback,\n  jsenvPluginCompatMap = jsenvPluginCompatMapFallback,\n  platformName,\n}) => {\n  const versionArray = []\n  Object.keys(babelPluginMap).forEach((babelPluginKey) => {\n    if (babelPluginKey in babelPluginCompatMap) {\n      const babelPluginCompat = babelPluginCompatMap[babelPluginKey]\n      if (platformName in babelPluginCompat) {\n        const version = String(babelPluginCompat[platformName])\n        if (!versionArray.includes(version)) {\n          versionArray.push(version)\n        }\n      }\n    }\n  })\n  Object.keys(jsenvPluginMap).forEach((jsenvPluginKey) => {\n    if (jsenvPluginKey in jsenvPluginCompatMap) {\n      const jsenvPluginCompat = jsenvPluginCompatMap[jsenvPluginKey]\n      if (platformName in jsenvPluginCompat) {\n        const version = String(jsenvPluginCompat[platformName])\n        if (!versionArray.includes(version)) {\n          versionArray.push(version)\n        }\n      }\n    }\n  })\n  versionArray.push(\"0.0.0\")\n  versionArray.sort(versionCompare)\n\n  const platformGroupArray = []\n\n  versionArray.forEach((version) => {\n    const babelPluginMapForPlatform = computeBabelPluginMapForPlatform({\n      babelPluginMap,\n      babelPluginCompatMap,\n      platformName,\n      platformVersion: version,\n    })\n    const babelPluginRequiredNameArray = Object.keys(babelPluginMap)\n      .filter((babelPluginKey) => babelPluginKey in babelPluginMapForPlatform)\n      .sort()\n    const jsenvPluginMapForPlatform = computeJsenvPluginMapForPlatform({\n      jsenvPluginMap,\n      jsenvPluginCompatMap,\n      platformName,\n      platformVersion: version,\n    })\n    const jsenvPluginRequiredNameArray = Object.keys(jsenvPluginMap)\n      .filter((jsenvPluginKey) => jsenvPluginKey in jsenvPluginMapForPlatform)\n      .sort()\n\n    const group = {\n      babelPluginRequiredNameArray,\n      jsenvPluginRequiredNameArray,\n      platformCompatMap: {\n        [platformName]: version,\n      },\n    }\n\n    const groupWithSameRequirements = platformGroupArray.find((platformGroupCandidate) =>\n      groupHaveSameRequirements(platformGroupCandidate, group),\n    )\n\n    if (groupWithSameRequirements) {\n      groupWithSameRequirements.platformCompatMap[platformName] = findHighestVersion(\n        groupWithSameRequirements.platformCompatMap[platformName],\n        version,\n      )\n    } else {\n      platformGroupArray.push(group)\n    }\n  })\n\n  return platformGroupArray\n}\n","import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const composePlatformCompatMap = (platformCompatMap, secondPlatformCompatMap) => {\n  return objectComposeValue(\n    normalizePlatformCompatMapVersions(platformCompatMap),\n    normalizePlatformCompatMapVersions(secondPlatformCompatMap),\n    (version, secondVersion) => findHighestVersion(version, secondVersion),\n  )\n}\n\nconst normalizePlatformCompatMapVersions = (platformCompatibility) => {\n  return objectMapValue(platformCompatibility, (version) => String(version))\n}\n\nconst objectMapValue = (object, callback) => {\n  const mapped = {}\n\n  Object.keys(object).forEach((key) => {\n    mapped[key] = callback(object[key], key, object)\n  })\n\n  return mapped\n}\n\nconst objectComposeValue = (previous, object, callback) => {\n  const composed = { ...previous }\n\n  Object.keys(object).forEach((key) => {\n    composed[key] = key in composed ? callback(composed[key], object[key]) : object[key]\n  })\n\n  return composed\n}\n","import { composePlatformCompatMap } from \"./composePlatformCompatMap.js\"\nimport { groupHaveSameRequirements } from \"./groupHaveSameRequirements.js\"\n\nexport const composeGroupArray = (...arrayOfGroupArray) => {\n  return arrayOfGroupArray.reduce(groupArrayReducer, [])\n}\n\nconst groupArrayReducer = (previousGroupArray, groupArray) => {\n  const reducedGroupArray = []\n\n  previousGroupArray.forEach((group) => {\n    reducedGroupArray.push(copyGroup(group))\n  })\n\n  groupArray.forEach((group) => {\n    const groupWithSameRequirements = reducedGroupArray.find((existingGroupCandidate) =>\n      groupHaveSameRequirements(group, existingGroupCandidate),\n    )\n    if (groupWithSameRequirements) {\n      groupWithSameRequirements.platformCompatMap = composePlatformCompatMap(\n        groupWithSameRequirements.platformCompatMap,\n        group.platformCompatMap,\n      )\n    } else {\n      reducedGroupArray.push(copyGroup(group))\n    }\n  })\n\n  return reducedGroupArray\n}\n\nconst copyGroup = ({\n  babelPluginRequiredNameArray,\n  jsenvPluginRequiredNameArray,\n  platformCompatMap,\n}) => {\n  return {\n    babelPluginRequiredNameArray: babelPluginRequiredNameArray.slice(),\n    jsenvPluginRequiredNameArray: jsenvPluginRequiredNameArray.slice(),\n    platformCompatMap: { ...platformCompatMap },\n  }\n}\n","import { generatePlatformGroupArray } from \"./generatePlatformGroupArray.js\"\nimport { composeGroupArray } from \"./composeGroupArray.js\"\n\nexport const generateAllPlatformGroupArray = ({\n  babelPluginMap,\n  jsenvPluginMap,\n  babelPluginCompatMap,\n  jsenvPluginCompatMap,\n  platformNames,\n}) => {\n  const arrayOfGroupArray = platformNames.map((platformName) =>\n    generatePlatformGroupArray({\n      babelPluginMap,\n      jsenvPluginMap,\n      babelPluginCompatMap,\n      jsenvPluginCompatMap,\n      platformName,\n    }),\n  )\n  const groupArray = composeGroupArray(...arrayOfGroupArray)\n  return groupArray\n}\n","import { versionCompare, findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const platformCompatMapToScore = (platformCompatMap, platformScoreMap) => {\n  return Object.keys(platformCompatMap).reduce((previous, platformName) => {\n    const platformVersion = platformCompatMap[platformName]\n    return previous + platformToScore(platformName, platformVersion, platformScoreMap)\n  }, 0)\n}\n\nconst platformToScore = (platformName, platformVersion, platformScoreMap) => {\n  if (platformName in platformScoreMap === false) return platformScoreMap.other || 0\n\n  const versionUsageMap = platformScoreMap[platformName]\n  const versionArray = Object.keys(versionUsageMap)\n  if (versionArray.length === 0) return platformScoreMap.other || 0\n\n  const versionArrayAscending = versionArray.sort(versionCompare)\n  const highestVersion = versionArrayAscending[versionArray.length - 1]\n\n  if (findHighestVersion(platformVersion, highestVersion) === platformVersion)\n    return versionUsageMap[highestVersion]\n\n  const closestVersion = versionArrayAscending\n    .reverse()\n    .find((version) => findHighestVersion(platformVersion, version) === platformVersion)\n\n  if (!closestVersion) return platformScoreMap.other || 0\n\n  return versionUsageMap[closestVersion]\n}\n","/*\n\n# featureCompatMap legend\n\n        featureName\n             │\n{ ┌──────────┴────────────┐\n  \"transform-block-scoping\": {─┐\n    \"chrome\": \"10\",            │\n    \"safari\": \"3.0\",           platformCompatMap\n    \"firefox\": \"5.1\"           │\n}────┼─────────┼─────────────┘\n}      │         └─────┐\n  platformName  platformVersion\n\n# group legend\n\n{\n  \"best\": {\n    \"babelPluginRequiredNameArray\" : [\n      \"transform-block-scoping\",\n    ],\n    \"platformCompatMap\": {\n      \"chrome\": \"10\",\n      \"firefox\": \"6\"\n    }\n  }\n}\n\nTake chars below to update legends\n─│┌┐└┘├┤┴┬\n\n*/\n\nimport { generateAllPlatformGroupArray } from \"./generateAllPlatformGroupArray.js\"\nimport { platformCompatMapToScore } from \"./platformCompatMapToScore.js\"\nimport { OTHERWISE_ID, BEST_ID } from \"../GROUP_ID.js\"\n\nexport const generateGroupMap = ({\n  babelPluginMap,\n  // jsenv plugin are for later, for now, nothing is using them\n  jsenvPluginMap = {},\n  babelPluginCompatMap,\n  jsenvPluginCompatMap,\n  platformScoreMap,\n  groupCount = 1,\n  // pass this to true if you don't care if someone tries to run your code\n  // on a platform which is not inside platformScoreMap.\n  platformAlwaysInsidePlatformScoreMap = false,\n  // pass this to true if you think you will always be able to detect\n  // the platform or that if you fail to do so you don't care.\n  platformWillAlwaysBeKnown = false,\n}) => {\n  if (typeof babelPluginMap !== \"object\") {\n    throw new TypeError(`babelPluginMap must be an object, got ${babelPluginMap}`)\n  }\n  if (typeof jsenvPluginMap !== \"object\") {\n    throw new TypeError(`jsenvPluginMap must be an object, got ${jsenvPluginMap}`)\n  }\n  if (typeof platformScoreMap !== \"object\") {\n    throw new TypeError(`platformScoreMap must be an object, got ${platformScoreMap}`)\n  }\n  if (typeof groupCount < 1) {\n    throw new TypeError(`groupCount must be above 1, got ${groupCount}`)\n  }\n\n  const groupWithoutFeature = {\n    babelPluginRequiredNameArray: Object.keys(babelPluginMap),\n    jsenvPluginRequiredNameArray: Object.keys(jsenvPluginMap),\n    platformCompatMap: {},\n  }\n\n  // when we create one group and we cannot ensure\n  // code will be runned on a platform inside platformScoreMap\n  // then we return otherwise group to be safe\n  if (groupCount === 1 && !platformAlwaysInsidePlatformScoreMap) {\n    return {\n      [OTHERWISE_ID]: groupWithoutFeature,\n    }\n  }\n\n  const allPlatformGroupArray = generateAllPlatformGroupArray({\n    babelPluginMap,\n    babelPluginCompatMap,\n    jsenvPluginMap,\n    jsenvPluginCompatMap,\n    platformNames: arrayWithoutValue(Object.keys(platformScoreMap), \"other\"),\n  })\n\n  if (allPlatformGroupArray.length === 0) {\n    return {\n      [OTHERWISE_ID]: groupWithoutFeature,\n    }\n  }\n\n  const groupToScore = ({ platformCompatMap }) =>\n    platformCompatMapToScore(platformCompatMap, platformScoreMap)\n\n  const allPlatformGroupArraySortedByScore = allPlatformGroupArray.sort(\n    (a, b) => groupToScore(b) - groupToScore(a),\n  )\n\n  const length = allPlatformGroupArraySortedByScore.length\n\n  // if we arrive here and want a single group\n  // we take the worst group and consider it's our best group\n  // because it's the lowest platform we want to support\n  if (groupCount === 1) {\n    return {\n      [BEST_ID]: allPlatformGroupArraySortedByScore[length - 1],\n    }\n  }\n\n  const addOtherwiseToBeSafe = !platformAlwaysInsidePlatformScoreMap || !platformWillAlwaysBeKnown\n\n  const lastGroupIndex = addOtherwiseToBeSafe ? groupCount - 1 : groupCount\n\n  const groupArray =\n    length + 1 > groupCount\n      ? allPlatformGroupArraySortedByScore.slice(0, lastGroupIndex)\n      : allPlatformGroupArraySortedByScore\n\n  const groupMap = {}\n  groupArray.forEach((group, index) => {\n    if (index === 0) {\n      groupMap[BEST_ID] = group\n    } else {\n      groupMap[`intermediate-${index + 1}`] = group\n    }\n  })\n  if (addOtherwiseToBeSafe) {\n    groupMap[OTHERWISE_ID] = groupWithoutFeature\n  }\n\n  return groupMap\n}\n\nconst arrayWithoutValue = (array, value) =>\n  array.filter((valueCandidate) => valueCandidate !== value)\n","export const LOG_LEVEL_TRACE = \"trace\"\n\nexport const LOG_LEVEL_INFO = \"info\"\n\nexport const LOG_LEVEL_WARN = \"warn\"\n\nexport const LOG_LEVEL_ERROR = \"error\"\n\nexport const LOG_LEVEL_OFF = \"off\"\n","import {\n  LOG_LEVEL_TRACE,\n  LOG_LEVEL_INFO,\n  LOG_LEVEL_WARN,\n  LOG_LEVEL_ERROR,\n  LOG_LEVEL_OFF,\n} from \"./LOG_LEVELS.js\"\n\nexport const createLogger = ({ logLevel = LOG_LEVEL_INFO } = {}) => {\n  if (logLevel === LOG_LEVEL_TRACE) {\n    return {\n      trace,\n      info,\n      warn,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_INFO) {\n    return {\n      trace: traceDisabled,\n      info,\n      warn,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_WARN) {\n    return {\n      trace: traceDisabled,\n      info: infoDisabled,\n      warn,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_ERROR) {\n    return {\n      trace: traceDisabled,\n      info: infoDisabled,\n      warn: warnDisabled,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_OFF) {\n    return {\n      trace: traceDisabled,\n      info: infoDisabled,\n      warn: warnDisabled,\n      error: errorDisabled,\n    }\n  }\n\n  throw new Error(createUnexpectedLogLevelMessage({ logLevel }))\n}\n\nconst createUnexpectedLogLevelMessage = ({ logLevel }) => `unexpected logLevel.\n--- logLevel ---\n${logLevel}\n--- allowed log levels ---\n${LOG_LEVEL_OFF}\n${LOG_LEVEL_ERROR}\n${LOG_LEVEL_WARN}\n${LOG_LEVEL_INFO}\n${LOG_LEVEL_TRACE}\n`\n\nconst trace = console.trace\n\nconst traceDisabled = () => {}\n\nconst info = console.info\n\nconst infoDisabled = () => {}\n\nconst warn = console.warn\n\nconst warnDisabled = () => {}\n\nconst error = console.error\n\nconst errorDisabled = () => {}\n","import { pathnameToDirname } from \"@jsenv/href\"\nimport { pathnameToOperatingSystemPath } from \"@jsenv/operating-system-path\"\n\nexport const getCacheFilePath = ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileRelativePath,\n}) =>\n  pathnameToOperatingSystemPath(\n    `${projectPathname}${compileCacheFolderRelativePath}${compileRelativePath}__asset__/cache.json`,\n  )\n\n// the fact an asset filename is relative to projectPath + compiledpathnameRelative\n// is strange considering a source filename is relative to projectPath\n// I think it would make more sense to make them relative to the cache.json\n// file itself but that's for later\nexport const getAssetFilePath = ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileRelativePath,\n  asset,\n}) =>\n  pathnameToOperatingSystemPath(\n    `${projectPathname}${compileCacheFolderRelativePath}/${pathnameToDirname(\n      compileRelativePath.slice(1),\n    )}/${asset}`,\n  )\n\nexport const getCompiledFilePath = ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileRelativePath,\n}) =>\n  pathnameToOperatingSystemPath(\n    `${projectPathname}${compileCacheFolderRelativePath}${compileRelativePath}`,\n  )\n\nexport const getSourceFilePath = ({ projectPathname, sourceRelativePath }) =>\n  pathnameToOperatingSystemPath(`${projectPathname}${sourceRelativePath}`)\n","import { fileRead } from \"@dmail/helper\"\nimport { getCacheFilePath } from \"./locaters.js\"\n\nexport const readCache = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  sourceRelativePath,\n  compileRelativePath,\n  logger,\n}) => {\n  const cacheFilePath = getCacheFilePath({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n  })\n\n  try {\n    const cacheAsString = await fileRead(cacheFilePath)\n    const cache = JSON.parse(cacheAsString)\n    const sourceRelativePathInCache = cache.sourceRelativePath\n    if (sourceRelativePathInCache !== sourceRelativePath) {\n      logger.info(\n        createSourceRelativePathChangedMessage({\n          sourceRelativePathInCache,\n          sourceRelativePath,\n          cacheFilePath,\n        }),\n      )\n      return null\n    }\n    return cache\n  } catch (error) {\n    if (error && error.code === \"ENOENT\") {\n      return null\n    }\n\n    if (error && error.name === \"SyntaxError\") {\n      logger.error(createCacheSyntaxErrorMessage({ syntaxError: error, cacheFilePath }))\n      return null\n    }\n\n    throw error\n  }\n}\n\nconst createSourceRelativePathChangedMessage = ({\n  sourceRelativePathInCache,\n  sourceRelativePath,\n  cacheFilePath,\n}) => `cache.sourceRelativePath changed\n--- sourceRelativePath in cache ---\n${sourceRelativePathInCache}\n--- sourceRelativePath ---\n${sourceRelativePath}\n--- cache path ---\n${cacheFilePath}`\n\nconst createCacheSyntaxErrorMessage = ({ syntaxError, cacheFilePath }) => `cache syntax error\n--- syntax error stack ---\n${syntaxError.stack}\n--- cache path ---\n${cacheFilePath}`\n","export const dateToSecondsPrecision = (date) => {\n  const dateWithSecondsPrecision = new Date(date)\n  dateWithSecondsPrecision.setMilliseconds(0)\n  return dateWithSecondsPrecision\n}\n","import { createHash } from \"crypto\"\n\nconst EMPTY_ID = '\"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk\"'\n\nexport const bufferToEtag = (buffer) => {\n  if (!Buffer.isBuffer(buffer)) {\n    throw new TypeError(`buffer expected, got ${buffer}`)\n  }\n\n  if (buffer.length === 0) {\n    return EMPTY_ID\n  }\n\n  const hash = createHash(\"sha1\")\n  hash.update(buffer, \"utf8\")\n\n  const hashBase64String = hash.digest(\"base64\")\n  const hashBase64StringSubset = hashBase64String.slice(0, 27)\n  const length = buffer.length\n\n  return `\"${length.toString(16)}-${hashBase64StringSubset}\"`\n}\n","import { fileRead, fileStat } from \"@dmail/helper\"\nimport { pathnameToOperatingSystemPath } from \"@jsenv/operating-system-path\"\nimport { dateToSecondsPrecision } from \"./dateToSecondsPrecision.js\"\nimport { getCompiledFilePath, getAssetFilePath } from \"./locaters.js\"\nimport { bufferToEtag } from \"./bufferToEtag.js\"\n\nexport const validateCache = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileRelativePath,\n  cache,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  logger,\n}) => {\n  const compiledFileValidation = await validateCompiledFile({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n    ifEtagMatch,\n    ifModifiedSinceDate,\n    logger,\n  })\n  if (!compiledFileValidation.valid) return compiledFileValidation\n\n  const [sourcesValidations, assetValidations] = await Promise.all([\n    validateSources({ projectPathname, cache, logger }),\n    validateAssets({\n      projectPathname,\n      compileCacheFolderRelativePath,\n      compileRelativePath,\n      cache,\n      logger,\n    }),\n  ])\n\n  const invalidSourceValidation = sourcesValidations.find(({ valid }) => !valid)\n  if (invalidSourceValidation) return invalidSourceValidation\n\n  const invalidAssetValidation = assetValidations.find(({ valid }) => !valid)\n  if (invalidAssetValidation) return invalidAssetValidation\n\n  const compiledSource = compiledFileValidation.data.compiledSource\n  const sourcesContent = sourcesValidations.map(({ data }) => data.sourceContent)\n  const assetsContent = assetValidations.find(({ data }) => data.assetContent)\n\n  return {\n    valid: true,\n    data: {\n      compiledSource,\n      sourcesContent,\n      assetsContent,\n    },\n  }\n}\n\nconst validateCompiledFile = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileRelativePath,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  logger,\n}) => {\n  const compiledFilename = getCompiledFilePath({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n  })\n\n  try {\n    const compiledSource = await fileRead(compiledFilename)\n\n    if (ifEtagMatch) {\n      const compiledEtag = bufferToEtag(Buffer.from(compiledSource))\n      if (ifEtagMatch !== compiledEtag) {\n        logger.info(`etag changed for ${compiledFilename}`)\n        return {\n          code: \"COMPILED_FILE_ETAG_MISMATCH\",\n          valid: false,\n          data: { compiledSource, compiledEtag },\n        }\n      }\n    }\n\n    if (ifModifiedSinceDate) {\n      const compiledMtime = await fileStat(compiledFilename)\n      if (ifModifiedSinceDate < dateToSecondsPrecision(compiledMtime)) {\n        logger.info(`mtime changed for ${compiledFilename}`)\n        return {\n          code: \"COMPILED_FILE_MTIME_OUTDATED\",\n          valid: false,\n          data: { compiledSource, compiledMtime },\n        }\n      }\n    }\n\n    return {\n      valid: true,\n      data: { compiledSource },\n    }\n  } catch (error) {\n    if (error && error.code === \"ENOENT\") {\n      return {\n        code: \"COMPILED_FILE_NOT_FOUND\",\n        valid: false,\n        data: { compiledFilename },\n      }\n    }\n    return Promise.reject(error)\n  }\n}\n\nconst validateSources = ({ projectPathname, cache, logger }) =>\n  Promise.all(\n    cache.sources.map((source, index) =>\n      validateSource({\n        projectPathname,\n        source,\n        eTag: cache.sourcesEtag[index],\n        logger,\n      }),\n    ),\n  )\n\nconst validateSource = async ({ projectPathname, source, eTag, logger }) => {\n  const sourceFilename = pathnameToOperatingSystemPath(`${projectPathname}${source}`)\n\n  try {\n    const sourceContent = await fileRead(sourceFilename)\n    const sourceETag = bufferToEtag(Buffer.from(sourceContent))\n\n    if (sourceETag !== eTag) {\n      logger.info(`etag changed for ${sourceFilename}`)\n      return {\n        code: \"SOURCE_ETAG_MISMATCH\",\n        valid: false,\n        data: { source, sourceFilename, sourceContent },\n      }\n    }\n\n    return {\n      valid: true,\n      data: { sourceContent },\n    }\n  } catch (e) {\n    if (e && e.code === \"ENOENT\") {\n      // TODO: decide if it should invalidate cache or not\n      // I think if the source cannot be found it does not invalidate the cache\n      // it means something is missing to absolutely sure the cache is valid\n      // but does not necessarily means the cache is invalid\n      // but if we allow source file not found\n      // it means we must remove sources from the list of sources\n      // or at least consider as normal that it's missing\n      // in that case, inside updateCache we must not search for sources that\n      // are missing, nor put their etag\n      // or we could return sourceContent: '', and the etag would be empty\n      logger.info(`source not found at ${sourceFilename}`)\n      return {\n        code: \"SOURCE_NOT_FOUND\",\n        valid: true,\n        data: { source, sourceFilename, sourceContent: \"\" },\n      }\n    }\n    throw e\n  }\n}\n\nconst validateAssets = ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileRelativePath,\n  cache,\n  logger,\n}) =>\n  Promise.all(\n    cache.assets.map((asset, index) =>\n      validateAsset({\n        projectPathname,\n        compileCacheFolderRelativePath,\n        compileRelativePath,\n        asset,\n        eTag: cache.assetsEtag[index],\n        logger,\n      }),\n    ),\n  )\n\nconst validateAsset = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  compileRelativePath,\n  asset,\n  eTag,\n  logger,\n}) => {\n  const assetFilename = getAssetFilePath({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n    asset,\n  })\n\n  try {\n    const assetContent = await fileRead(assetFilename)\n    const assetContentETag = bufferToEtag(Buffer.from(assetContent))\n\n    if (eTag !== assetContentETag) {\n      logger.info(`etag changed for ${assetFilename}`)\n      return {\n        code: \"ASSET_ETAG_MISMATCH\",\n        valid: false,\n        data: { asset, assetFilename, assetContent, assetContentETag },\n      }\n    }\n\n    return {\n      valid: true,\n      data: { assetContent, assetContentETag },\n    }\n  } catch (error) {\n    if (error && error.code === \"ENOENT\") {\n      logger.info(`asset not found at ${assetFilename}`)\n      return {\n        code: \"ASSET_FILE_NOT_FOUND\",\n        valid: false,\n        data: { asset, assetFilename },\n      }\n    }\n    return Promise.reject(error)\n  }\n}\n","import { fileWrite } from \"@dmail/helper\"\nimport { getCacheFilePath, getAssetFilePath, getCompiledFilePath } from \"./locaters.js\"\nimport { bufferToEtag } from \"./bufferToEtag.js\"\n\nexport const updateCache = ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  sourceRelativePath,\n  compileRelativePath,\n  cacheHitTracking,\n  cache,\n  compileResult,\n  compileResultStatus,\n  logger,\n}) => {\n  const isNew = compileResultStatus === \"created\"\n  const isUpdated = compileResultStatus === \"updated\"\n  const isCached = compileResultStatus === \"cached\"\n  const {\n    compiledSource,\n    contentType,\n    sources,\n    sourcesContent,\n    assets,\n    assetsContent,\n  } = compileResult\n  const promises = []\n\n  if (isNew || isUpdated) {\n    const { writeCompiledSourceFile = true, writeAssetsFile = true } = compileResult\n    const compiledFilePath = getCompiledFilePath({\n      projectPathname,\n      compileCacheFolderRelativePath,\n      compileRelativePath,\n    })\n\n    if (writeCompiledSourceFile) {\n      logger.info(`write file cache at ${compiledFilePath}`)\n      promises.push(fileWrite(compiledFilePath, compiledSource))\n    }\n\n    if (writeAssetsFile) {\n      promises.push(\n        ...assets.map((asset, index) => {\n          const assetFilePath = getAssetFilePath({\n            projectPathname,\n            compileCacheFolderRelativePath,\n            compileRelativePath,\n            asset,\n          })\n\n          logger.info(`write asset cache at ${assetFilePath}`)\n          return fileWrite(assetFilePath, assetsContent[index])\n        }),\n      )\n    }\n  }\n\n  if (isNew || isUpdated || (isCached && cacheHitTracking)) {\n    if (isNew) {\n      cache = {\n        sourceRelativePath,\n        contentType,\n        sources,\n        sourcesEtag: sourcesContent.map((sourceContent) =>\n          bufferToEtag(Buffer.from(sourceContent)),\n        ),\n        assets,\n        assetsEtag: assetsContent.map((assetContent) => bufferToEtag(Buffer.from(assetContent))),\n        createdMs: Number(Date.now()),\n        lastModifiedMs: Number(Date.now()),\n        ...(cacheHitTracking\n          ? {\n              matchCount: 1,\n              lastMatchMs: Number(Date.now()),\n            }\n          : {}),\n      }\n    } else if (isUpdated) {\n      cache = {\n        ...cache,\n        sources,\n        sourcesEtag: sourcesContent.map((sourceContent) =>\n          bufferToEtag(Buffer.from(sourceContent)),\n        ),\n        assets,\n        assetsEtag: assetsContent.map((assetContent) => bufferToEtag(Buffer.from(assetContent))),\n        lastModifiedMs: Number(Date.now()),\n        ...(cacheHitTracking\n          ? {\n              matchCount: cache.matchCount + 1,\n              lastMatchMs: Number(Date.now()),\n            }\n          : {}),\n      }\n    } else {\n      cache = {\n        ...cache,\n        ...(cacheHitTracking\n          ? {\n              matchCount: cache.matchCount + 1,\n              lastMatchMs: Number(Date.now()),\n            }\n          : {}),\n      }\n    }\n\n    const cacheFilePath = getCacheFilePath({\n      projectPathname,\n      compileCacheFolderRelativePath,\n      compileRelativePath,\n    })\n\n    logger.info(`write cache at ${cacheFilePath}`)\n    promises.push(fileWrite(cacheFilePath, JSON.stringify(cache, null, \"  \")))\n  }\n\n  return Promise.all(promises)\n}\n","import { arrayWithoutValue } from \"@dmail/helper\"\n\nexport const createLockRegistry = () => {\n  let lockArray = []\n  const lockForRessource = async (ressource) => {\n    const currentLock = lockArray.find((lock) => lock.ressource === ressource)\n    let unlockResolve\n    const unlocked = new Promise((resolve) => {\n      unlockResolve = resolve\n    })\n    const lock = {\n      ressource,\n      unlocked,\n    }\n    lockArray = [...lockArray, lock]\n\n    if (currentLock) await currentLock.unlocked\n\n    const unlock = () => {\n      lockArray = arrayWithoutValue(lockArray, lock)\n      unlockResolve()\n    }\n    return unlock\n  }\n  return { lockForRessource }\n}\n","import { fileMakeDirname } from \"@dmail/helper\"\nimport { createLogger } from \"@jsenv/logger\"\nimport { readCache } from \"./readCache.js\"\nimport { validateCache } from \"./validateCache.js\"\nimport { updateCache } from \"./updateCache.js\"\nimport { getCacheFilePath, getSourceFilePath, getCompiledFilePath } from \"./locaters.js\"\nimport { createLockRegistry } from \"./createLockRegistry.js\"\n\nconst { lockForRessource } = createLockRegistry()\n\nconst lockfile = import.meta.require(\"proper-lockfile\")\n\nexport const getOrGenerateCompiledFile = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  sourceRelativePath,\n  compileRelativePath = sourceRelativePath,\n  compile,\n  cacheIgnored = false,\n  cacheHitTracking = false,\n  cacheInterProcessLocking = false,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  logLevel = \"warn\",\n}) => {\n  if (typeof projectPathname !== \"string\") {\n    throw new TypeError(`projectPathname must be a string, got ${projectPathname}`)\n  }\n  if (typeof compileCacheFolderRelativePath !== \"string\") {\n    throw new TypeError(\n      `compileCacheFolderRelativePath must be a string, got ${compileCacheFolderRelativePath}`,\n    )\n  }\n  if (typeof sourceRelativePath !== \"string\") {\n    throw new TypeError(`sourceRelativePath must be a string, got ${sourceRelativePath}`)\n  }\n  if (typeof compileRelativePath !== \"string\") {\n    throw new TypeError(`compileRelativePath must be a string, got ${compileRelativePath}`)\n  }\n  if (typeof compile !== \"function\") {\n    throw new TypeError(`compile must be a function, got ${compile}`)\n  }\n\n  const logger = createLogger({ logLevel })\n\n  return startAsap(\n    async () => {\n      const { cache, compileResult, compileResultStatus } = await computeCompileReport({\n        projectPathname,\n        compileCacheFolderRelativePath,\n        sourceRelativePath,\n        compileRelativePath,\n        compile,\n        ifEtagMatch,\n        ifModifiedSinceDate,\n        cacheIgnored,\n        logger,\n      })\n\n      // useless because missing source cannot invalidate cache\n      // see validateSource in validateCache.js\n      // some sources might not exists on the filesystem\n      // keep them in the sourcemap\n      // however do not mark them as dependency of the compiled version\n      // const sources = []\n      // const sourcesContent = []\n      // await Promise.all(\n      //   compileResult.sources.map(async (source, index) => {\n      //     const path = pathnameToOperatingSystemPath(`${projectPathname}${source}`)\n      //     const pathLeadsToFile = await new Promise((resolve) => {\n      //       stat(path, (error, stats) => {\n      //         if (error) {\n      //           resolve(false)\n      //         } else {\n      //           resolve(stats.isFile())\n      //         }\n      //       })\n      //     })\n      //     if (pathLeadsToFile) {\n      //       sources[index] = source\n      //       sourcesContent[index] = compileResult.sourcesContent[index]\n      //     }\n      //   }),\n      // )\n\n      // const compileResultWithoutMissingSource = {\n      //   ...compileResult,\n      //   sources: sources.filter((source) => source !== undefined),\n      //   sourcesContent: sourcesContent.filter((sourceContent) => sourceContent !== undefined),\n      // }\n\n      await updateCache({\n        projectPathname,\n        compileCacheFolderRelativePath,\n        sourceRelativePath,\n        compileRelativePath,\n        cacheHitTracking,\n        cache,\n        compileResult,\n        compileResultStatus,\n        logger,\n      })\n\n      return { cache, compileResult, compileResultStatus }\n    },\n    {\n      projectPathname,\n      compileCacheFolderRelativePath,\n      compileRelativePath,\n      cacheInterProcessLocking,\n      logger,\n    },\n  )\n}\n\nconst computeCompileReport = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  sourceRelativePath,\n  compileRelativePath,\n  compile,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  cacheIgnored,\n  logger,\n}) => {\n  const cache = cacheIgnored\n    ? null\n    : await readCache({\n        projectPathname,\n        compileCacheFolderRelativePath,\n        sourceRelativePath,\n        compileRelativePath,\n        logger,\n      })\n\n  if (!cache) {\n    const compileResult = await callCompile({\n      projectPathname,\n      compileCacheFolderRelativePath,\n      sourceRelativePath,\n      compileRelativePath,\n      compile,\n      logger,\n    })\n\n    return {\n      cache: null,\n      compileResult,\n      compileResultStatus: \"created\",\n    }\n  }\n\n  const cacheValidation = await validateCache({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n    cache,\n    ifEtagMatch,\n    ifModifiedSinceDate,\n    logger,\n  })\n  if (!cacheValidation.valid) {\n    const compileResult = await callCompile({\n      projectPathname,\n      compileCacheFolderRelativePath,\n      sourceRelativePath,\n      compileRelativePath,\n      compile,\n      logger,\n    })\n    return { cache, compileResult, compileResultStatus: \"updated\" }\n  }\n\n  const { contentType, sources, assets } = cache\n  const { compiledSource, sourcesContent, assetsContent } = cacheValidation.data\n  return {\n    cache,\n    compileResult: { contentType, compiledSource, sources, sourcesContent, assets, assetsContent },\n    compileResultStatus: \"cached\",\n  }\n}\n\nconst callCompile = async ({\n  projectPathname,\n  compileCacheFolderRelativePath,\n  sourceRelativePath,\n  compileRelativePath,\n  compile,\n  logger,\n}) => {\n  const sourceFilename = getSourceFilePath({\n    projectPathname,\n    sourceRelativePath,\n  })\n  const compiledFilename = getCompiledFilePath({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n  })\n  logger.info(`compile ${sourceRelativePath}`)\n\n  const {\n    sources = [],\n    sourcesContent = [],\n    assets = [],\n    assetsContent = [],\n    contentType,\n    compiledSource,\n    ...rest\n  } = await compile({\n    sourceRelativePath,\n    compileRelativePath,\n    sourceFilename,\n    compiledFilename,\n  })\n\n  if (typeof contentType !== \"string\")\n    throw new TypeError(`compile must return a contentType string, got ${contentType}`)\n  if (typeof compiledSource !== \"string\")\n    throw new TypeError(`compile must return a compiledSource string, got ${compiledSource}`)\n\n  return {\n    contentType,\n    compiledSource,\n    sources,\n    sourcesContent,\n    assets,\n    assetsContent,\n    ...rest,\n  }\n}\n\nconst startAsap = async (\n  fn,\n  {\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n    cacheInterProcessLocking,\n    logger,\n  },\n) => {\n  const cacheFilePath = getCacheFilePath({\n    projectPathname,\n    compileCacheFolderRelativePath,\n    compileRelativePath,\n  })\n\n  logger.info(`lock ${cacheFilePath}`)\n  // in case this process try to concurrently access meta we wait for previous to be done\n  const unlockLocal = await lockForRessource(cacheFilePath)\n\n  let unlockInterProcessLock = () => {}\n  if (cacheInterProcessLocking) {\n    // after that we use a lock pathnameRelative to be sure we don't conflict with other process\n    // trying to do the same (mapy happen when spawining multiple server for instance)\n    // https://github.com/moxystudio/node-proper-lockfile/issues/69\n    await fileMakeDirname(cacheFilePath)\n    // https://github.com/moxystudio/node-proper-lockfile#lockfile-options\n    unlockInterProcessLock = await lockfile.lock(cacheFilePath, {\n      realpath: false,\n      retries: {\n        retries: 20,\n        minTimeout: 20,\n        maxTimeout: 500,\n      },\n    })\n  }\n\n  try {\n    return await fn()\n  } finally {\n    // we want to unlock in case of error too\n    unlockLocal()\n    unlockInterProcessLock()\n    logger.info(`unlock ${cacheFilePath}`)\n  }\n\n  // here in case of error.code === 'ELOCKED' thrown from here\n  // https://github.com/moxystudio/node-proper-lockfile/blob/1a478a43a077a7a7efc46ac79fd8f713a64fd499/lib/lockfile.js#L54\n  // we could give a better failure message when server tries to compile a file\n  // otherwise he'll get a 500 without much more info to debug\n\n  // we use two lock because the local lock is very fast, it's a sort of perf improvement\n}\n","// https://nodejs.org/metrics/summaries/version/nodejs.org-access.log.csv\nexport const nodeVersionScoreMap = {\n  \"0.10\": 0.02,\n  \"0.12\": 0.01,\n  4: 0.1,\n  6: 0.25,\n  7: 0.1,\n  8: 1,\n  9: 0.1,\n  10: 0.5,\n  11: 0.25,\n}\n","// https://github.com/systemjs/systemjs/blob/89391f92dfeac33919b0223bbf834a1f4eea5750/src/common.js#L136\nimport { assertImportMap } from \"../assertImportMap.js\"\n\nexport const composeTwoImportMaps = (leftImportMap, rightImportMap) => {\n  assertImportMap(leftImportMap)\n  assertImportMap(rightImportMap)\n\n  return {\n    imports: composeTwoImports(leftImportMap.imports, rightImportMap.imports),\n    scopes: composeTwoScopes(leftImportMap.scopes, rightImportMap.scopes),\n  }\n}\n\nconst composeTwoImports = (leftImports = {}, rightImports = {}) => {\n  return { ...leftImports, ...rightImports }\n}\n\nconst composeTwoScopes = (leftScopes = {}, rightScopes = {}) => {\n  const scopes = { ...leftScopes }\n  Object.keys(rightScopes).forEach((scopeKey) => {\n    if (scopes.hasOwnProperty(scopeKey)) {\n      scopes[scopeKey] = { ...scopes[scopeKey], ...rightScopes[scopeKey] }\n    } else {\n      scopes[scopeKey] = { ...rightScopes[scopeKey] }\n    }\n  })\n  return scopes\n}\n","import { readFile } from \"fs\"\nimport { pathnameToRelativePath } from \"@jsenv/href\"\nimport { pathnameToOperatingSystemPath } from \"@jsenv/operating-system-path\"\nimport { composeTwoImportMaps } from \"@jsenv/import-map\"\nimport { jsenvCorePathname } from \"../jsenvCorePath/jsenvCorePath.js\"\n\nexport const readProjectImportMap = async ({\n  projectPathname,\n  jsenvProjectPathname,\n  importMapRelativePath,\n  logger,\n}) => {\n  if (typeof projectPathname !== \"string\") {\n    throw new TypeError(`projectPathname must be a string, got ${projectPathname}`)\n  }\n  if (typeof jsenvProjectPathname !== \"string\") {\n    throw new TypeError(`jsenvProjectPathname must be a string, got ${jsenvProjectPathname}`)\n  }\n\n  const importMapForProject = await getProjectImportMap({ projectPathname, importMapRelativePath })\n\n  const jsenvCoreImportKey = \"@jsenv/core/\"\n  const jsenvCoreImportValue = `${pathnameToRelativePath(jsenvCorePathname, projectPathname)}/`\n  const importsForJsenvCore = {\n    [jsenvCoreImportKey]: jsenvCoreImportValue,\n  }\n\n  if (!importMapForProject) {\n    return {\n      imports: importsForJsenvCore,\n    }\n  }\n\n  if (importMapForProject.imports) {\n    const jsenvCoreProjectImportValue = importMapForProject.imports[jsenvCoreImportKey]\n    if (jsenvCoreProjectImportValue && jsenvCoreProjectImportValue !== jsenvCoreImportValue) {\n      logger.warn(\n        createIncompatibleJsenvCoreDependencyMessage({\n          projectPathname,\n          jsenvProjectPathname,\n          jsenvCoreProjectRelativePath: jsenvCoreProjectImportValue.slice(0, -1),\n          jsenvCoreRelativePath: jsenvCoreImportValue.slice(0, -1),\n        }),\n      )\n    }\n  }\n\n  const importMapForJsenvCore = {\n    imports: importsForJsenvCore,\n    scopes: generateJsenvCoreScopes({ importMapForProject, importsForJsenvCore }),\n  }\n\n  return composeTwoImportMaps(importMapForJsenvCore, importMapForProject)\n}\n\nconst generateJsenvCoreScopes = ({ importMapForProject, importsForJsenvCore }) => {\n  const { scopes } = importMapForProject\n\n  if (!scopes) {\n    return undefined\n  }\n\n  // I must ensure jsenvCoreImports wins by default in every scope\n  // because scope may contains stuff like\n  // \"/\": \"/\"\n  // \"/\": \"/folder/\"\n  // to achieve this, we set jsenvCoreImports into every scope\n  // they can still be overriden by importMapForProject\n  // even if I see no use case for that\n  const scopesForJsenvCore = {}\n  Object.keys(scopes).forEach((scopeKey) => {\n    scopesForJsenvCore[scopeKey] = importsForJsenvCore\n  })\n  return scopesForJsenvCore\n}\n\nconst getProjectImportMap = async ({ projectPathname, importMapRelativePath }) => {\n  if (!importMapRelativePath) {\n    return null\n  }\n\n  const importMapPath = pathnameToOperatingSystemPath(`${projectPathname}/${importMapRelativePath}`)\n\n  return new Promise((resolve, reject) => {\n    readFile(importMapPath, (error, buffer) => {\n      if (error) {\n        if (error.code === \"ENOENT\") {\n          resolve(null)\n        } else {\n          reject(error)\n        }\n      } else {\n        const importMapString = String(buffer)\n        resolve(JSON.parse(importMapString))\n      }\n    })\n  })\n}\n\nconst createIncompatibleJsenvCoreDependencyMessage = ({\n  projectPathname,\n  jsenvProjectPathname,\n  jsenvCoreProjectRelativePath,\n  jsenvCoreRelativePath,\n}) => `incompatible dependency to @jsenv/core in your project and an internal jsenv project.\nTo fix this either remove project dependency to @jsenv/core or ensure they use the same version.\n(If you are inside a @jsenv project you can ignore this warning)\n--- jsenv project wanted relative path to @jsenv/core ---\n${jsenvCoreRelativePath}\n--- your project relative path to @jsenv/core ---\n${jsenvCoreProjectRelativePath}\n--- jsenv project path ---\n${jsenvProjectPathname}\n--- your project path ---\n${projectPathname}`\n","import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const resolveGroup = ({ name, version }, { groupMap }) => {\n  return Object.keys(groupMap).find((compileIdCandidate) => {\n    const { platformCompatMap } = groupMap[compileIdCandidate]\n    if (name in platformCompatMap === false) {\n      return false\n    }\n    const versionForGroup = platformCompatMap[name]\n\n    const highestVersion = findHighestVersion(version, versionForGroup)\n    return highestVersion === version\n  })\n}\n","export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n","import { firstMatch } from \"./util.js\"\n\nexport const detectAndroid = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/(android)/i.test(userAgent)) {\n    return {\n      name: \"android\",\n      version: firstMatch(/Android (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n","import { firstMatch } from \"./util.js\"\n\nexport const detectInternetExplorer = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n","import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nexport const detectOpera = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) || firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version: firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) || userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n","import { secondMatch } from \"./util.js\"\n\nexport const detectEdge = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n","import { firstMatch } from \"./util.js\"\n\nexport const detectFirefox = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n","import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nexport const detectChrome = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  return null\n}\n","import { userAgentToVersion } from \"./util.js\"\n\nexport const detectSafari = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n","export const detectElectron = () => null // TODO\n","import { firstMatch } from \"./util.js\"\n\nexport const detectIOS = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/iPhone;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  if (/iPad;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n","// https://github.com/Ahmdrza/detect-browser/blob/26254f85cf92795655a983bfd759d85f3de850c6/detect-browser.js#L1\n// https://github.com/lancedikson/bowser/blob/master/src/parser-browsers.js#L1\n\nimport { detectAndroid } from \"./android.js\"\nimport { detectInternetExplorer } from \"./internet-explorer.js\"\nimport { detectOpera } from \"./opera.js\"\nimport { detectEdge } from \"./edge.js\"\nimport { detectFirefox } from \"./firefox.js\"\nimport { detectChrome } from \"./chrome.js\"\nimport { detectSafari } from \"./safari.js\"\nimport { detectElectron } from \"./electron.js\"\nimport { detectIOS } from \"./ios.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  detectOpera,\n  detectInternetExplorer,\n  detectEdge,\n  detectFirefox,\n  detectChrome,\n  detectSafari,\n  detectElectron,\n  detectIOS,\n  detectAndroid,\n])\n\nexport const detectBrowser = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  if (version.indexOf(\".\") > -1) {\n    const parts = version.split(\".\")\n    // remove extraneous .\n    return parts.slice(0, 3).join(\".\")\n  }\n\n  if (version.indexOf(\"_\") > -1) {\n    const parts = version.split(\"_\")\n    // remove extraneous _\n    return parts.slice(0, 3).join(\"_\")\n  }\n\n  return version\n}\n","import { resolveGroup } from \"../resolvePlatformGroup/resolveGroup.js\"\nimport { detectBrowser } from \"./detectBrowser.js\"\n\nexport const resolveBrowserGroup = ({ groupMap }) => resolveGroup(detectBrowser(), { groupMap })\n","export const detectNode = () => {\n  return { name: \"node\", version: process.version.slice(1) }\n}\n","import { resolveGroup } from \"../resolvePlatformGroup/resolveGroup.js\"\nimport { detectNode } from \"./detectNode.js\"\n\nexport const resolveNodeGroup = ({ groupMap }) => resolveGroup(detectNode(), { groupMap })\n","import { resolveGroup } from \"./resolveGroup.js\"\nimport { detectBrowser } from \"../resolveBrowserGroup/detectBrowser.js\"\nimport { detectNode } from \"../resolveNodeGroup/detectNode.js\"\n\nexport const resolvePlatformGroup = ({ groupMap }) => {\n  if (typeof window === \"object\") return resolveGroup(detectBrowser(), { groupMap })\n  if (typeof process === \"object\") return resolveGroup(detectNode(), { groupMap })\n  // we should certainly throw with unknown platform\n  return null\n}\n","/* eslint-disable */\n// https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-modules-systemjs\n\nconst { template, types: t } = import.meta.require(\"@babel/core\")\nconst { declare } = import.meta.require(\"@babel/helper-plugin-utils\")\nconst { default: hoistVariables } = import.meta.require(\"@babel/helper-hoist-variables\")\n\nconst buildTemplate = template(`\n  SYSTEM_REGISTER(MODULE_NAME, SOURCES, function (EXPORT_IDENTIFIER, CONTEXT_IDENTIFIER) {\n    \"use strict\";\n    BEFORE_BODY;\n    return {\n      setters: SETTERS,\n      execute: EXECUTE\n    };\n  });\n`)\n\nconst buildExportAll = template(`\n  for (var KEY in TARGET) {\n    if (KEY !== \"default\" && KEY !== \"__esModule\") EXPORT_OBJ[KEY] = TARGET[KEY];\n  }\n`)\n\nfunction constructExportCall(path, exportIdent, exportNames, exportValues, exportStarTarget) {\n  const statements = []\n  if (exportNames.length === 1) {\n    statements.push(\n      t.expressionStatement(\n        t.callExpression(exportIdent, [t.stringLiteral(exportNames[0]), exportValues[0]]),\n      ),\n    )\n    // eslint-disable-next-line no-negated-condition\n  } else if (!exportStarTarget) {\n    const objectProperties = []\n    for (let i = 0; i < exportNames.length; i++) {\n      const exportName = exportNames[i]\n      const exportValue = exportValues[i]\n      objectProperties.push(t.objectProperty(t.identifier(exportName), exportValue))\n    }\n    statements.push(\n      t.expressionStatement(t.callExpression(exportIdent, [t.objectExpression(objectProperties)])),\n    )\n  } else {\n    const exportObj = path.scope.generateUid(\"exportObj\")\n\n    statements.push(\n      t.variableDeclaration(\"var\", [\n        t.variableDeclarator(t.identifier(exportObj), t.objectExpression([])),\n      ]),\n    )\n\n    statements.push(\n      buildExportAll({\n        KEY: path.scope.generateUidIdentifier(\"key\"),\n        EXPORT_OBJ: t.identifier(exportObj),\n        TARGET: exportStarTarget,\n      }),\n    )\n\n    for (let i = 0; i < exportNames.length; i++) {\n      const exportName = exportNames[i]\n      const exportValue = exportValues[i]\n\n      statements.push(\n        t.expressionStatement(\n          t.assignmentExpression(\n            \"=\",\n            t.memberExpression(t.identifier(exportObj), t.identifier(exportName)),\n            exportValue,\n          ),\n        ),\n      )\n    }\n\n    statements.push(t.expressionStatement(t.callExpression(exportIdent, [t.identifier(exportObj)])))\n  }\n  return statements\n}\n\nconst TYPE_IMPORT = \"Import\"\n\nexport default declare((api, options) => {\n  api.assertVersion(7)\n\n  const { systemGlobal = \"System\" } = options\n  const IGNORE_REASSIGNMENT_SYMBOL = Symbol()\n\n  const reassignmentVisitor = {\n    \"AssignmentExpression|UpdateExpression\"(path) {\n      if (path.node[IGNORE_REASSIGNMENT_SYMBOL]) return\n      path.node[IGNORE_REASSIGNMENT_SYMBOL] = true\n\n      const arg = path.get(path.isAssignmentExpression() ? \"left\" : \"argument\")\n\n      if (arg.isObjectPattern() || arg.isArrayPattern()) {\n        const exprs = [path.node]\n        for (const name of Object.keys(arg.getBindingIdentifiers())) {\n          if (this.scope.getBinding(name) !== path.scope.getBinding(name)) {\n            return\n          }\n          const exportedNames = this.exports[name]\n          if (!exportedNames) return\n          for (const exportedName of exportedNames) {\n            exprs.push(this.buildCall(exportedName, t.identifier(name)).expression)\n          }\n        }\n        path.replaceWith(t.sequenceExpression(exprs))\n        return\n      }\n\n      if (!arg.isIdentifier()) return\n\n      const name = arg.node.name\n\n      // redeclared in this scope\n      if (this.scope.getBinding(name) !== path.scope.getBinding(name)) return\n\n      const exportedNames = this.exports[name]\n      if (!exportedNames) return\n\n      let node = path.node\n\n      // if it is a non-prefix update expression (x++ etc)\n      // then we must replace with the expression (_export('x', x + 1), x++)\n      // in order to ensure the same update expression value\n      const isPostUpdateExpression = path.isUpdateExpression({ prefix: false })\n      if (isPostUpdateExpression) {\n        node = t.binaryExpression(\n          node.operator[0],\n          t.unaryExpression(\"+\", t.cloneNode(node.argument)),\n          t.numericLiteral(1),\n        )\n      }\n\n      for (const exportedName of exportedNames) {\n        node = this.buildCall(exportedName, node).expression\n      }\n\n      if (isPostUpdateExpression) {\n        node = t.sequenceExpression([node, path.node])\n      }\n\n      path.replaceWith(node)\n    },\n  }\n\n  return {\n    name: \"transform-modules-systemjs\",\n\n    visitor: {\n      CallExpression(path, state) {\n        if (path.node.callee.type === TYPE_IMPORT) {\n          path.replaceWith(\n            t.callExpression(\n              t.memberExpression(t.identifier(state.contextIdent), t.identifier(\"import\")),\n              path.node.arguments,\n            ),\n          )\n        }\n      },\n\n      MetaProperty(path, state) {\n        if (path.node.meta.name === \"import\" && path.node.property.name === \"meta\") {\n          path.replaceWith(\n            t.memberExpression(t.identifier(state.contextIdent), t.identifier(\"meta\")),\n          )\n        }\n      },\n\n      ReferencedIdentifier(path, state) {\n        if (path.node.name === \"__moduleName\" && !path.scope.hasBinding(\"__moduleName\")) {\n          path.replaceWith(t.memberExpression(t.identifier(state.contextIdent), t.identifier(\"id\")))\n        }\n      },\n\n      Program: {\n        enter(path, state) {\n          state.contextIdent = path.scope.generateUid(\"context\")\n        },\n        exit(path, state) {\n          const undefinedIdent = path.scope.buildUndefinedNode()\n          const exportIdent = path.scope.generateUid(\"export\")\n          const contextIdent = state.contextIdent\n\n          const exportMap = Object.create(null)\n          const modules = []\n\n          let beforeBody = []\n          const setters = []\n          const sources = []\n          const variableIds = []\n          const removedPaths = []\n\n          function addExportName(key, val) {\n            exportMap[key] = exportMap[key] || []\n            exportMap[key].push(val)\n          }\n\n          function pushModule(source, key, specifiers) {\n            let module\n            modules.forEach(function(m) {\n              if (m.key === source) {\n                module = m\n              }\n            })\n            if (!module) {\n              modules.push((module = { key: source, imports: [], exports: [] }))\n            }\n            module[key] = module[key].concat(specifiers)\n          }\n\n          function buildExportCall(name, val) {\n            return t.expressionStatement(\n              t.callExpression(t.identifier(exportIdent), [t.stringLiteral(name), val]),\n            )\n          }\n\n          const exportNames = []\n          const exportValues = []\n\n          const body = path.get(\"body\")\n          for (const path of body) {\n            if (path.isFunctionDeclaration()) {\n              beforeBody.push(path.node)\n              removedPaths.push(path)\n            } else if (path.isClassDeclaration()) {\n              variableIds.push(path.node.id)\n              path.replaceWith(\n                t.expressionStatement(\n                  t.assignmentExpression(\"=\", t.cloneNode(path.node.id), t.toExpression(path.node)),\n                ),\n              )\n            } else if (path.isImportDeclaration()) {\n              const source = path.node.source.value\n              pushModule(source, \"imports\", path.node.specifiers)\n              for (const name of Object.keys(path.getBindingIdentifiers())) {\n                path.scope.removeBinding(name)\n                variableIds.push(t.identifier(name))\n              }\n              path.remove()\n            } else if (path.isExportAllDeclaration()) {\n              pushModule(path.node.source.value, \"exports\", path.node)\n              path.remove()\n            } else if (path.isExportDefaultDeclaration()) {\n              const declar = path.get(\"declaration\")\n              const id = declar.node.id\n              if (declar.isClassDeclaration()) {\n                if (id) {\n                  exportNames.push(\"default\")\n                  exportValues.push(undefinedIdent)\n                  variableIds.push(id)\n                  addExportName(id.name, \"default\")\n                  path.replaceWith(\n                    t.expressionStatement(\n                      t.assignmentExpression(\"=\", t.cloneNode(id), t.toExpression(declar.node)),\n                    ),\n                  )\n                } else {\n                  exportNames.push(\"default\")\n                  exportValues.push(t.toExpression(declar.node))\n                  removedPaths.push(path)\n                }\n              } else if (declar.isFunctionDeclaration()) {\n                if (id) {\n                  beforeBody.push(declar.node)\n                  exportNames.push(\"default\")\n                  exportValues.push(t.cloneNode(id))\n                  addExportName(id.name, \"default\")\n                } else {\n                  exportNames.push(\"default\")\n                  exportValues.push(t.toExpression(declar.node))\n                }\n                removedPaths.push(path)\n              } else {\n                path.replaceWith(buildExportCall(\"default\", declar.node))\n              }\n            } else if (path.isExportNamedDeclaration()) {\n              const declar = path.get(\"declaration\")\n\n              if (declar.node) {\n                path.replaceWith(declar)\n\n                if (path.isFunction()) {\n                  const node = declar.node\n                  const name = node.id.name\n                  addExportName(name, name)\n                  beforeBody.push(node)\n                  exportNames.push(name)\n                  exportValues.push(t.cloneNode(node.id))\n                  removedPaths.push(path)\n                } else if (path.isClass()) {\n                  const name = declar.node.id.name\n                  exportNames.push(name)\n                  exportValues.push(undefinedIdent)\n                  variableIds.push(declar.node.id)\n                  path.replaceWith(\n                    t.expressionStatement(\n                      t.assignmentExpression(\n                        \"=\",\n                        t.cloneNode(declar.node.id),\n                        t.toExpression(declar.node),\n                      ),\n                    ),\n                  )\n                  addExportName(name, name)\n                } else {\n                  for (const name of Object.keys(declar.getBindingIdentifiers())) {\n                    addExportName(name, name)\n                  }\n                }\n              } else {\n                const specifiers = path.node.specifiers\n                if (specifiers && specifiers.length) {\n                  if (path.node.source) {\n                    pushModule(path.node.source.value, \"exports\", specifiers)\n                    path.remove()\n                  } else {\n                    const nodes = []\n\n                    for (const specifier of specifiers) {\n                      const binding = path.scope.getBinding(specifier.local.name)\n                      // hoisted function export\n                      if (binding && t.isFunctionDeclaration(binding.path.node)) {\n                        exportNames.push(specifier.exported.name)\n                        exportValues.push(t.cloneNode(specifier.local))\n                      }\n                      // only globals also exported this way\n                      else if (!binding) {\n                        nodes.push(buildExportCall(specifier.exported.name, specifier.local))\n                      }\n                      addExportName(specifier.local.name, specifier.exported.name)\n                    }\n\n                    path.replaceWithMultiple(nodes)\n                  }\n                }\n              }\n            }\n          }\n\n          modules.forEach(function(specifiers) {\n            let setterBody = []\n            const target = path.scope.generateUid(specifiers.key)\n\n            for (let specifier of specifiers.imports) {\n              if (t.isImportNamespaceSpecifier(specifier)) {\n                setterBody.push(\n                  t.expressionStatement(\n                    t.assignmentExpression(\"=\", specifier.local, t.identifier(target)),\n                  ),\n                )\n              } else if (t.isImportDefaultSpecifier(specifier)) {\n                specifier = t.importSpecifier(specifier.local, t.identifier(\"default\"))\n              }\n\n              if (t.isImportSpecifier(specifier)) {\n                setterBody.push(\n                  t.expressionStatement(\n                    t.assignmentExpression(\n                      \"=\",\n                      specifier.local,\n                      t.memberExpression(t.identifier(target), specifier.imported),\n                    ),\n                  ),\n                )\n              }\n            }\n\n            if (specifiers.exports.length) {\n              const exportNames = []\n              const exportValues = []\n              let hasExportStar = false\n\n              for (const node of specifiers.exports) {\n                if (t.isExportAllDeclaration(node)) {\n                  hasExportStar = true\n                } else if (t.isExportSpecifier(node)) {\n                  exportNames.push(node.exported.name)\n                  exportValues.push(t.memberExpression(t.identifier(target), node.local))\n                } else {\n                  // todo\n                }\n              }\n\n              setterBody = setterBody.concat(\n                constructExportCall(\n                  path,\n                  t.identifier(exportIdent),\n                  exportNames,\n                  exportValues,\n                  hasExportStar ? t.identifier(target) : null,\n                ),\n              )\n            }\n\n            sources.push(t.stringLiteral(specifiers.key))\n            setters.push(\n              t.functionExpression(null, [t.identifier(target)], t.blockStatement(setterBody)),\n            )\n          })\n\n          let moduleName = this.getModuleName()\n          if (moduleName) moduleName = t.stringLiteral(moduleName)\n\n          hoistVariables(\n            path,\n            (id, name, hasInit) => {\n              variableIds.push(id)\n              if (!hasInit) {\n                exportNames.push(name)\n                exportValues.push(undefinedIdent)\n              }\n            },\n            null,\n          )\n\n          if (variableIds.length) {\n            beforeBody.unshift(\n              t.variableDeclaration(\"var\", variableIds.map((id) => t.variableDeclarator(id))),\n            )\n          }\n\n          if (exportNames.length) {\n            beforeBody = beforeBody.concat(\n              constructExportCall(path, t.identifier(exportIdent), exportNames, exportValues, null),\n            )\n          }\n\n          path.traverse(reassignmentVisitor, {\n            exports: exportMap,\n            buildCall: buildExportCall,\n            scope: path.scope,\n          })\n\n          for (const path of removedPaths) {\n            path.remove()\n          }\n\n          path.node.body = [\n            buildTemplate({\n              SYSTEM_REGISTER: t.memberExpression(\n                t.identifier(systemGlobal),\n                t.identifier(\"register\"),\n              ),\n              BEFORE_BODY: beforeBody,\n              MODULE_NAME: moduleName,\n              SETTERS: t.arrayExpression(setters),\n              SOURCES: t.arrayExpression(sources),\n              EXECUTE: t.functionExpression(\n                null,\n                [],\n                t.blockStatement(path.node.body),\n                false,\n                options.topLevelAwait && programUsesTopLevelAwait(path),\n              ),\n              EXPORT_IDENTIFIER: t.identifier(exportIdent),\n              CONTEXT_IDENTIFIER: t.identifier(contextIdent),\n            }),\n          ]\n        },\n      },\n    },\n  }\n})\n\nconst programUsesTopLevelAwait = (path) => {\n  let hasTopLevelAwait = false\n  path.traverse({\n    AwaitExpression(path) {\n      const parent = path.getFunctionParent()\n      if (!parent || parent.type === \"Program\") hasTopLevelAwait = true\n    },\n  })\n  return hasTopLevelAwait\n}\n","// https://github.com/rburns/ansi-to-html/blob/master/src/ansi_to_html.js\n// https://github.com/drudru/ansi_up/blob/master/ansi_up.js\nconst Convert = import.meta.require(\"ansi-to-html\")\n\nexport const ansiToHTML = (ansiString) => {\n  return new Convert().toHtml(ansiString)\n}\n","const { addSideEffect } = import.meta.require(\"@babel/helper-module-imports\")\n\nexport const ensureRegeneratorRuntimeImportBabelPlugin = (api, options) => {\n  api.assertVersion(7)\n\n  const {\n    regeneratorRuntimeIdentifierName = \"regeneratorRuntime\",\n    regeneratorRuntimeImportPath = \"@jsenv/core/helpers/regenerator-runtime/regenerator-runtime.js\",\n  } = options\n\n  return {\n    visitor: {\n      Identifier(path, opts) {\n        const { filename } = opts\n        const filepathname = filename.replace(/\\\\/g, \"/\")\n        if (filepathname.endsWith(\"node_modules/regenerator-runtime/runtime.js\")) {\n          return\n        }\n\n        const { node } = path\n        if (node.name === regeneratorRuntimeIdentifierName) {\n          addSideEffect(path.scope.getProgramParent().path, regeneratorRuntimeImportPath)\n        }\n      },\n    },\n  }\n}\n","const { addSideEffect } = import.meta.require(\"@babel/helper-module-imports\")\n\nexport const ensureGlobalThisImportBabelPlugin = (api, options) => {\n  api.assertVersion(7)\n\n  const {\n    globalThisIdentifierName = \"globalThis\",\n    globalThisImportPath = \"@jsenv/core/helpers/global-this/global-this.js\",\n  } = options\n\n  return {\n    visitor: {\n      Identifier(path, opts) {\n        const { filename } = opts\n        const filepathname = filename.replace(/\\\\/g, \"/\")\n        if (filepathname.endsWith(\"/helpers/global-this/global-this.js\")) {\n          return\n        }\n\n        const { node } = path\n        if (node.name === globalThisIdentifierName) {\n          addSideEffect(path.scope.getProgramParent().path, globalThisImportPath)\n        }\n      },\n    },\n  }\n}\n","import { operatingSystemPathToPathname } from \"@jsenv/operating-system-path\"\nimport { babelHelperMap } from \"../babelHelperMap/babelHelperMap.js\"\n\n// https://github.com/babel/babel/tree/master/packages/babel-helper-module-imports\nconst { addDefault } = import.meta.require(\"@babel/helper-module-imports\")\n\n// named import approach found here:\n// https://github.com/rollup/rollup-plugin-babel/blob/18e4232a450f320f44c651aa8c495f21c74d59ac/src/helperPlugin.js#L1\n\n// for reference this is how it's done to reference\n// a global babel helper object instead of using\n// a named import\n// https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-plugin-external-helpers/src/index.js\n\nexport const transformBabelHelperToImportBabelPlugin = (api) => {\n  api.assertVersion(7)\n\n  return {\n    pre: (file) => {\n      const cachedHelpers = {}\n      file.set(\"helperGenerator\", (name) => {\n        // the list of possible helpers name\n        // https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-helpers/src/helpers.js#L13\n\n        if (!file.availableHelper(name)) {\n          return undefined\n        }\n\n        const filePathname = operatingSystemPathToPathname(file.opts.filename)\n        const babelHelperFilePathname = babelHelperMap[name]\n\n        if (filePathname === babelHelperFilePathname) {\n          return undefined\n        }\n\n        if (searchPossibleBabelHelperNameInPath(filePathname) === name) {\n          return undefined\n        }\n\n        if (cachedHelpers[name]) {\n          return cachedHelpers[name]\n        }\n\n        const helper = addDefault(file.path, babelHelperFilePathname, { nameHint: `_${name}` })\n        cachedHelpers[name] = helper\n        return helper\n      })\n    },\n  }\n}\n\nexport const searchPossibleBabelHelperNameInPath = (path) => {\n  const babelPathPart = \"@jsenv/core/helpers/babel/\"\n  const babelPathPartIndex = path.indexOf(babelPathPart)\n  if (babelPathPartIndex === -1) return \"\"\n\n  const after = path.slice(babelPathPartIndex + babelPathPart.length)\n  const helperName = after.slice(0, after.indexOf(\"/\"))\n  return helperName\n}\n","import transformModulesSystemJs from \"./babel-plugin-transform-modules-systemjs/index.js\"\nimport { findAsyncPluginNameInBabelPluginMap } from \"../findAsyncPluginNameInBabelPluginMap/findAsyncPluginNameInBabelPluginMap.js\"\nimport { ansiToHTML } from \"./ansiToHTML.js\"\nimport { ensureRegeneratorRuntimeImportBabelPlugin } from \"./ensureRegeneratorRuntimeImportBabelPlugin.js\"\nimport { ensureGlobalThisImportBabelPlugin } from \"./ensureGlobalThisImportBabelPlugin.js\"\nimport {\n  transformBabelHelperToImportBabelPlugin,\n  searchPossibleBabelHelperNameInPath,\n} from \"./transformBabelHelperToImportBabelPlugin.js\"\n\nconst { transformAsync, transformFromAstAsync } = import.meta.require(\"@babel/core\")\nconst syntaxDynamicImport = import.meta.require(\"@babel/plugin-syntax-dynamic-import\")\nconst syntaxImportMeta = import.meta.require(\"@babel/plugin-syntax-import-meta\")\n\nconst defaultBabelPluginArray = [syntaxDynamicImport, syntaxImportMeta]\n\nexport const jsenvTransform = async ({\n  inputCode,\n  inputPath,\n  inputRelativePath,\n  inputAst,\n  inputMap,\n  babelPluginMap,\n  allowTopLevelAwait,\n  transformTopLevelAwait,\n  transformModuleIntoSystemFormat,\n  transformGenerator,\n  regeneratorRuntimeImportPath,\n  remap,\n}) => {\n  // https://babeljs.io/docs/en/options\n  const options = {\n    filename: inputPath,\n    filenameRelative: inputRelativePath ? inputRelativePath.slice(1) : undefined,\n    inputSourceMap: inputMap,\n    configFile: false,\n    babelrc: false, // trust only these options, do not read any babelrc config file\n    ast: true,\n    sourceMaps: remap,\n    sourceFileName: inputRelativePath ? inputRelativePath.slice(1) : undefined,\n    // https://babeljs.io/docs/en/options#parseropts\n    parserOpts: {\n      allowAwaitOutsideFunction: allowTopLevelAwait,\n    },\n  }\n\n  const babelHelperName = searchPossibleBabelHelperNameInPath(inputPath)\n  // to prevent typeof circular dependency\n  if (babelHelperName === \"typeof\") {\n    const babelPluginMapWithoutTransformTypeOf = {}\n    Object.keys(babelPluginMap).forEach((key) => {\n      if (key !== \"transform-typeof-symbol\") {\n        babelPluginMapWithoutTransformTypeOf[key] = babelPluginMap[key]\n      }\n    })\n    babelPluginMap = babelPluginMapWithoutTransformTypeOf\n  }\n\n  if (transformGenerator) {\n    babelPluginMap = {\n      ...babelPluginMap,\n      \"ensure-regenerator-runtime-import\": [\n        ensureRegeneratorRuntimeImportBabelPlugin,\n        {\n          regeneratorRuntimeImportPath,\n        },\n      ],\n    }\n  }\n\n  babelPluginMap = {\n    ...babelPluginMap,\n    \"ensure-global-this-import\": [ensureGlobalThisImportBabelPlugin],\n    \"transform-babel-helpers-to-import\": [transformBabelHelperToImportBabelPlugin],\n  }\n\n  const asyncPluginName = findAsyncPluginNameInBabelPluginMap(babelPluginMap)\n\n  if (transformModuleIntoSystemFormat && transformTopLevelAwait && asyncPluginName) {\n    const babelPluginArrayWithoutAsync = []\n    Object.keys(babelPluginMap).forEach((name) => {\n      if (name !== asyncPluginName) {\n        babelPluginArrayWithoutAsync.push(babelPluginMap[name])\n      }\n    })\n\n    // put body inside something like (async () => {})()\n    const result = await babelTransform({\n      ast: inputAst,\n      code: inputCode,\n      options: {\n        ...options,\n        plugins: [\n          ...defaultBabelPluginArray,\n          ...babelPluginArrayWithoutAsync,\n          [transformModulesSystemJs, { topLevelAwait: transformTopLevelAwait }],\n        ],\n      },\n    })\n\n    // we need to retranspile the await keywords now wrapped\n    // inside Systemjs function.\n    // They are ignored, at least by transform-async-to-promises\n    // see https://github.com/rpetrich/babel-plugin-transform-async-to-promises/issues/26\n\n    const finalResult = await babelTransform({\n      // ast: result.ast,\n      code: result.code,\n      options: {\n        ...options,\n        // about inputSourceMap see\n        // https://github.com/babel/babel/blob/eac4c5bc17133c2857f2c94c1a6a8643e3b547a7/packages/babel-core/src/transformation/file/generate.js#L57\n        // https://github.com/babel/babel/blob/090c364a90fe73d36a30707fc612ce037bdbbb24/packages/babel-core/src/transformation/file/merge-map.js#L6s\n        inputSourceMap: result.map,\n        plugins: [...defaultBabelPluginArray, babelPluginMap[asyncPluginName]],\n      },\n    })\n\n    return {\n      ...result,\n      ...finalResult,\n      metadata: { ...result.metadata, ...finalResult.metadata },\n    }\n  }\n\n  const babelPluginArray = [\n    ...defaultBabelPluginArray,\n    ...Object.keys(babelPluginMap).map((babelPluginName) => babelPluginMap[babelPluginName]),\n    ...(transformModuleIntoSystemFormat\n      ? [[transformModulesSystemJs, { topLevelAwait: transformTopLevelAwait }]]\n      : []),\n  ]\n  const result = await babelTransform({\n    ast: inputAst,\n    code: inputCode,\n    options: {\n      ...options,\n      plugins: babelPluginArray,\n    },\n  })\n  return result\n}\n\nconst babelTransform = async ({ ast, code, options }) => {\n  try {\n    if (ast) {\n      const result = await transformFromAstAsync(ast, code, options)\n      return result\n    }\n    return await transformAsync(code, options)\n  } catch (error) {\n    if (error && error.code === \"BABEL_PARSE_ERROR\") {\n      const message = error.message\n      throw createParseError({\n        message,\n        messageHTML: ansiToHTML(message),\n        filename: options.filename,\n        lineNumber: error.loc.line,\n        columnNumber: error.loc.column,\n      })\n    }\n    throw error\n  }\n}\n\nconst createParseError = (data) => {\n  const { message } = data\n  const parseError = new Error(message)\n  parseError.code = \"PARSE_ERROR\"\n  parseError.data = data\n\n  return parseError\n}\n","export const assertUrlLike = (value, name = \"url\") => {\n  if (typeof value !== \"string\") {\n    throw new TypeError(`${name} must be a url string, got ${value}`)\n  }\n  if (isWindowsPathnameSpecifier(value)) {\n    throw new TypeError(`${name} must be a url but looks like a windows pathname, got ${value}`)\n  }\n  if (!hasScheme(value)) {\n    throw new TypeError(`${name} must be a url and no scheme found, got ${value}`)\n  }\n}\n\nconst isWindowsPathnameSpecifier = (specifier) => {\n  const firstChar = specifier[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n  const secondChar = specifier[1]\n  if (secondChar !== \":\") return false\n  const thirdChar = specifier[2]\n  return thirdChar === \"/\"\n}\n\nconst hasScheme = (specifier) => /^[a-zA-Z]+:/.test(specifier)\n","// https://git-scm.com/docs/gitignore\n// https://github.com/kaelzhang/node-ignore\n\nimport { assertUrlLike } from \"../assertUrlLike.js\"\n\nexport const applySpecifierPatternMatching = ({ specifier, url } = {}) => {\n  assertUrlLike(specifier, \"specifier\")\n  assertUrlLike(url, \"url\")\n  return applyPatternMatching(specifier, url)\n}\n\nconst applyPatternMatching = (pattern, string) => {\n  let patternIndex = 0\n  let index = 0\n  let remainingPattern = pattern\n  let remainingString = string\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    //  '' === '' -> pass\n    if (remainingPattern === \"\" && remainingString === \"\") {\n      return pass({\n        patternIndex,\n        index,\n      })\n    }\n\n    // '' === value -> fail\n    if (remainingPattern === \"\" && remainingString !== \"\") {\n      return fail({\n        patternIndex,\n        index,\n      })\n    }\n\n    // pattern === '' -> pass only if pattern is only **\n    if (remainingPattern !== \"\" && remainingString === \"\") {\n      // pass because pattern is optionnal\n      if (remainingPattern === \"**\") {\n        return pass({\n          patternIndex,\n          index,\n        })\n      }\n\n      // fail because **/ would expect something like /a\n      // and **a would expect something like foo/bar/a\n      return fail({\n        patternIndex,\n        index,\n      })\n    }\n\n    if (remainingPattern.slice(0, \"**\".length) === \"**\") {\n      patternIndex += `**`.length\n      remainingPattern = remainingPattern.slice(`**`.length)\n      if (remainingPattern[0] === \"/\") {\n        patternIndex += \"/\".length\n        remainingPattern = remainingPattern.slice(\"/\".length)\n      }\n\n      // pattern ending with ** always match remaining string\n      if (remainingPattern === \"\") {\n        return pass({\n          patternIndex,\n          index: string.length,\n        })\n      }\n\n      const skipResult = skipUntilMatch({ pattern: remainingPattern, string: remainingString })\n\n      if (!skipResult.matched) {\n        return fail({\n          patternIndex: patternIndex + skipResult.patternIndex,\n          index: index + skipResult.index,\n        })\n      }\n\n      return pass({\n        patternIndex: pattern.length,\n        index: string.length,\n      })\n    }\n\n    if (remainingPattern[0] === \"*\") {\n      patternIndex += \"*\".length\n      remainingPattern = remainingPattern.slice(\"*\".length)\n\n      // la c'est plus délicat, il faut que remainingString\n      // ne soit composé que de truc !== '/'\n      if (remainingPattern === \"\") {\n        const slashIndex = remainingString.indexOf(\"/\")\n        if (slashIndex > -1) {\n          return fail({\n            patternIndex,\n            index: index + slashIndex,\n          })\n        }\n        return pass({\n          patternIndex,\n          index: string.length,\n        })\n      }\n\n      // the next char must not the one expected by remainingPattern[0]\n      // because * is greedy and expect to skip one char\n      if (remainingPattern[0] === remainingString[0]) {\n        return fail({\n          patternIndex: patternIndex - \"*\".length,\n          index,\n        })\n      }\n\n      const skipResult = skipUntilMatch({\n        pattern: remainingPattern,\n        string: remainingString,\n        skippablePredicate: (remainingString) => remainingString[0] !== \"/\",\n      })\n\n      if (!skipResult.matched) {\n        return fail({\n          patternIndex: patternIndex + skipResult.patternIndex,\n          index: index + skipResult.index,\n        })\n      }\n\n      return pass({\n        patternIndex: pattern.length,\n        index: string.length,\n      })\n    }\n\n    if (remainingPattern[0] !== remainingString[0]) {\n      return fail({\n        patternIndex,\n        index,\n      })\n    }\n\n    // trailing slash on pattern, -> match remaining\n    if (remainingPattern === \"/\" && remainingString.length > 1) {\n      return pass({\n        patternIndex: patternIndex + 1,\n        index: string.length,\n      })\n    }\n\n    patternIndex += 1\n    index += 1\n    remainingPattern = remainingPattern.slice(1)\n    remainingString = remainingString.slice(1)\n    continue\n  }\n}\n\nconst skipUntilMatch = ({ pattern, string, skippablePredicate = () => true }) => {\n  let index = 0\n  let remainingString = string\n  let bestMatch = null\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const matchAttempt = applyPatternMatching(pattern, remainingString)\n\n    if (matchAttempt.matched) {\n      bestMatch = matchAttempt\n      break\n    }\n\n    const skippable = skippablePredicate(remainingString)\n\n    bestMatch = fail({\n      patternIndex: bestMatch\n        ? Math.max(bestMatch.patternIndex, matchAttempt.patternIndex)\n        : matchAttempt.patternIndex,\n      index: index + matchAttempt.index,\n    })\n\n    if (!skippable) {\n      break\n    }\n\n    // search against the next unattempted string\n    index += matchAttempt.index + 1\n    remainingString = remainingString.slice(matchAttempt.index + 1)\n    if (remainingString === \"\") {\n      bestMatch = {\n        ...bestMatch,\n        index: string.length,\n      }\n      break\n    }\n\n    continue\n  }\n\n  return bestMatch\n}\n\nconst pass = ({ patternIndex, index }) => {\n  return {\n    matched: true,\n    index,\n    patternIndex,\n  }\n}\n\nconst fail = ({ patternIndex, index }) => {\n  return {\n    matched: false,\n    index,\n    patternIndex,\n  }\n}\n","export const isPlainObject = (value) => {\n  if (value === null) {\n    return false\n  }\n  if (typeof value === \"object\") {\n    if (Array.isArray(value)) {\n      return false\n    }\n    return true\n  }\n  return false\n}\n","import { isPlainObject } from \"../isPlainObject.js\"\n\nexport const metaMapToSpecifierMetaMap = (metaMap) => {\n  if (!isPlainObject(metaMap)) {\n    throw new TypeError(`metaMap must be a plain object, got ${metaMap}`)\n  }\n\n  const specifierMetaMap = {}\n\n  Object.keys(metaMap).forEach((metaKey) => {\n    const specifierValueMap = metaMap[metaKey]\n    if (!isPlainObject(specifierValueMap)) {\n      throw new TypeError(\n        `metaMap value must be plain object, got ${specifierValueMap} for ${metaKey}`,\n      )\n    }\n    Object.keys(specifierValueMap).forEach((specifier) => {\n      const metaValue = specifierValueMap[specifier]\n      const meta = { [metaKey]: metaValue }\n      specifierMetaMap[specifier] =\n        specifier in specifierMetaMap ? { ...specifierMetaMap[specifier], ...meta } : meta\n    })\n  })\n\n  return specifierMetaMap\n}\n","// \"https://domain.com/folder/file.js\"\n// \"file:///folder/file.js\"\n// \"chrome://folder/file.js\"\nexport const isAbsoluteSpecifier = (specifier) => {\n  if (isWindowsDriveSpecifier(specifier)) {\n    // window drive letter could are not protocol yep\n    // something like `C:/folder/file.js`\n    // will be considered as a bare import\n    return false\n  }\n  return /^[a-zA-Z]+:/.test(specifier)\n}\n\n// https://url.spec.whatwg.org/#example-start-with-a-widows-drive-letter\nconst isWindowsDriveSpecifier = (specifier) => {\n  const firstChar = specifier[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n  const secondChar = specifier[1]\n  if (secondChar !== \":\") return false\n  const thirdChar = specifier[2]\n  return thirdChar === \"/\"\n}\n\nexport const resolveAbsoluteSpecifier = (specifier) => specifier\n","export const hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n","import { hrefToScheme } from \"@jsenv/href\"\n\n// \"//folder/file.js\"\nexport const isSchemeRelativeSpecifier = (specifier) => {\n  return specifier.slice(0, 2) === \"//\"\n}\n\nexport const resolveSchemeRelativeSpecifier = (specifier, importer) => {\n  return `${hrefToScheme(importer)}:${specifier}`\n}\n","import { hrefToOrigin } from \"@jsenv/href/src/hrefToOrigin/hrefToOrigin.js\"\n\n// \"/folder/file.js\"\nexport const isOriginRelativeSpecifier = (specifier) => {\n  const firstChar = specifier[0]\n  if (firstChar !== \"/\") return false\n\n  const secondChar = specifier[1]\n  if (secondChar === \"/\") return false\n\n  return true\n}\n\nexport const resolveOriginRelativeSpecifier = (specifier, importer) => {\n  const importerOrigin = hrefToOrigin(importer)\n\n  return `${importerOrigin}/${specifier.slice(1)}`\n}\n","// https://github.com/systemjs/systemjs/blob/master/src/common.js\nimport { hrefToPathname } from \"@jsenv/href/src/hrefToPathname/hrefToPathname.js\"\nimport { hrefToOrigin } from \"@jsenv/href/src/hrefToOrigin/hrefToOrigin.js\"\nimport { pathnameToDirname } from \"@jsenv/href/src/pathnameToDirname/pathnameToDirname.js\"\n\n// \"./folder/file.js\"\n// \"../folder/file.js\"\nexport const isPathnameRelativeSpecifier = (specifier) => {\n  if (specifier.slice(0, 2) === \"./\") return true\n\n  if (specifier.slice(0, 3) === \"../\") return true\n\n  return false\n}\n\nexport const resolvePathnameRelativeSpecifier = (specifier, importer) => {\n  const importerPathname = hrefToPathname(importer)\n\n  // ./foo.js on /folder/file.js -> /folder/foo.js\n  // ./foo/bar.js on /folder/file.js -> /folder/foo/bar.js\n  // ./foo.js on /folder/subfolder/file.js -> /folder/subfolder/foo.js\n  if (specifier.slice(0, 2) === \"./\") {\n    const importerOrigin = hrefToOrigin(importer)\n    const importerDirname = pathnameToDirname(importerPathname)\n    return `${importerOrigin}${importerDirname}/${specifier.slice(2)}`\n  }\n\n  // ../foo/bar.js on /folder/file.js -> /foo/bar.js\n  // ../foo/bar.js on /folder/subfolder/file.js -> /folder/foo/bar.js\n  // ../../foo/bar.js on /folder/file.js -> /foo/bar.js\n  // ../bar.js on / -> /bar.js\n  let unresolvedPathname = specifier\n  const importerFolders = importerPathname.split(\"/\")\n  importerFolders.pop() // remove file, it is not a folder\n\n  while (unresolvedPathname.slice(0, 3) === \"../\") {\n    // when there is no folder left to resolved\n    // we just ignore '../'\n    if (importerFolders.length) {\n      importerFolders.pop()\n    }\n    unresolvedPathname = unresolvedPathname.slice(3)\n  }\n\n  const importerOrigin = hrefToOrigin(importer)\n  const resolvedPathname = `${importerFolders.join(\"/\")}/${unresolvedPathname}`\n\n  return `${importerOrigin}${resolvedPathname}`\n}\n","import { hrefToOrigin } from \"@jsenv/href/src/hrefToOrigin/hrefToOrigin.js\"\nimport { isAbsoluteSpecifier } from \"./absoluteSpecifier.js\"\nimport { isSchemeRelativeSpecifier } from \"./schemeRelativeSpecifier.js\"\nimport { isOriginRelativeSpecifier } from \"./originRelativeSpecifier.js\"\nimport { isPathnameRelativeSpecifier } from \"./pathnameRelativeSpecifier.js\"\n\nexport const isBareSpecifier = (specifier) => {\n  if (isAbsoluteSpecifier(specifier)) return false\n\n  if (isSchemeRelativeSpecifier(specifier)) return false\n\n  if (isOriginRelativeSpecifier(specifier)) return false\n\n  if (isPathnameRelativeSpecifier(specifier)) return false\n\n  return true\n}\n\nexport const resolveBareSpecifier = (specifier, importer) => {\n  const importerOrigin = hrefToOrigin(importer)\n\n  return `${importerOrigin}/${specifier}`\n}\n","// could be useful: https://url.spec.whatwg.org/#url-miscellaneous\n\nimport { isAbsoluteSpecifier, resolveAbsoluteSpecifier } from \"./absoluteSpecifier.js\"\nimport {\n  isSchemeRelativeSpecifier,\n  resolveSchemeRelativeSpecifier,\n} from \"./schemeRelativeSpecifier.js\"\nimport {\n  isOriginRelativeSpecifier,\n  resolveOriginRelativeSpecifier,\n} from \"./originRelativeSpecifier.js\"\nimport {\n  isPathnameRelativeSpecifier,\n  resolvePathnameRelativeSpecifier,\n} from \"./pathnameRelativeSpecifier.js\"\nimport { resolveBareSpecifier } from \"./bareSpecifier.js\"\n\nexport const resolveSpecifier = (specifier, importer) => {\n  if (isAbsoluteSpecifier(specifier)) {\n    return resolveAbsoluteSpecifier(specifier, importer)\n  }\n\n  if (!importer) {\n    throw new Error(createMissingImporterMessage(specifier, importer))\n  }\n  if (!isAbsoluteSpecifier(importer)) {\n    throw new Error(createAbsoluteImporterRequiredMessage(importer))\n  }\n\n  if (isSchemeRelativeSpecifier(specifier)) {\n    return resolveSchemeRelativeSpecifier(specifier, importer)\n  }\n\n  if (isOriginRelativeSpecifier(specifier)) {\n    return resolveOriginRelativeSpecifier(specifier, importer)\n  }\n\n  if (isPathnameRelativeSpecifier(specifier)) {\n    return resolvePathnameRelativeSpecifier(specifier, importer)\n  }\n\n  return resolveBareSpecifier(specifier, importer)\n}\n\nconst createMissingImporterMessage = (\n  specifier,\n  importer,\n) => `missing importer to resolve relative specifier.\n--- specifier ---\n${specifier}\n--- importer ---\n${importer}`\n\nconst createAbsoluteImporterRequiredMessage = (importer) => `importer must be absolute.\n--- importer ---\n${importer}`\n","import { isPlainObject } from \"./isPlainObject.js\"\n\nexport const assertSpecifierMetaMap = (value) => {\n  if (!isPlainObject(value)) {\n    throw new TypeError(`specifierMetaMap must be a plain object, got ${value}`)\n  }\n  // we could ensure it's key/value pair of url like key/object or null values\n}\n","import { resolveSpecifier } from \"@jsenv/import-map\"\nimport { assertSpecifierMetaMap } from \"../assertSpecifierMetaMap.js\"\n\nconst FAKE_HTTP_ORIGIN_UNLIKELY_TO_COLLIDE = \"http://fake_origin_unlikely_to_collide.ext\"\n\nexport const normalizeSpecifierMetaMap = (\n  specifierMetaMap,\n  url,\n  { forceHttpResolutionForFile = false } = {},\n) => {\n  assertSpecifierMetaMap(specifierMetaMap)\n\n  const resolveSpecifierScoped =\n    forceHttpResolutionForFile && url.startsWith(\"file:///\")\n      ? (specifier, url) => {\n          const specifierResolvedAgainstHttp = resolveSpecifier(\n            specifier,\n            FAKE_HTTP_ORIGIN_UNLIKELY_TO_COLLIDE,\n          )\n          if (specifierResolvedAgainstHttp.startsWith(`${FAKE_HTTP_ORIGIN_UNLIKELY_TO_COLLIDE}/`)) {\n            const specifierPathname = specifierResolvedAgainstHttp.slice(\n              FAKE_HTTP_ORIGIN_UNLIKELY_TO_COLLIDE.length,\n            )\n            return `${url}${specifierPathname}`\n          }\n          return specifierResolvedAgainstHttp\n        }\n      : resolveSpecifier\n\n  const specifierMetaMapNormalized = {}\n  Object.keys(specifierMetaMap).forEach((specifier) => {\n    const specifierResolved = resolveSpecifierScoped(specifier, url)\n    specifierMetaMapNormalized[specifierResolved] = specifierMetaMap[specifier]\n  })\n  return specifierMetaMapNormalized\n}\n","import { assertSpecifierMetaMap } from \"../assertSpecifierMetaMap.js\"\nimport { assertUrlLike } from \"../assertUrlLike.js\"\nimport { applySpecifierPatternMatching } from \"../applySpecifierPatternMatching/applySpecifierPatternMatching.js\"\n\nexport const urlToMeta = ({ url, specifierMetaMap } = {}) => {\n  assertUrlLike(url)\n  assertSpecifierMetaMap(specifierMetaMap)\n\n  return Object.keys(specifierMetaMap).reduce((previousMeta, specifier) => {\n    const { matched } = applySpecifierPatternMatching({\n      specifier,\n      url,\n    })\n    return matched ? { ...previousMeta, ...specifierMetaMap[specifier] } : previousMeta\n  }, {})\n}\n","import {\n  pathnameToOperatingSystemPath,\n  pathnameToRelativePathname,\n  pathnameIsInside,\n} from \"@jsenv/operating-system-path\"\nimport { hrefToPathname } from \"@jsenv/href\"\nimport { jsenvTransform } from \"./jsenvTransform.js\"\nimport { metaMapToSpecifierMetaMap, normalizeSpecifierMetaMap, urlToMeta } from \"@jsenv/url-meta\"\n\nexport const transformJs = async ({\n  projectPathname,\n  source,\n  sourceHref,\n  sourceMap,\n  babelPluginMap,\n  convertMap = {},\n  allowTopLevelAwait = true,\n  transformTopLevelAwait = true,\n  transformModuleIntoSystemFormat = true,\n  transformGenerator = true,\n  remap = true,\n}) => {\n  if (typeof projectPathname !== \"string\") {\n    throw new TypeError(`projectPathname must be a string, got ${projectPathname}`)\n  }\n  if (typeof babelPluginMap !== \"object\") {\n    throw new TypeError(`babelPluginMap must be an object, got ${babelPluginMap}`)\n  }\n  if (typeof source !== \"string\") {\n    throw new TypeError(`source must be a string, got ${source}`)\n  }\n  if (typeof sourceHref !== \"string\") {\n    throw new TypeError(`sourceHref must be a string, got ${sourceHref}`)\n  }\n\n  const { inputCode, inputMap } = await computeInputCodeAndInputMap({\n    source,\n    sourceHref,\n    sourceMap,\n    projectPathname,\n    convertMap,\n    remap,\n    allowTopLevelAwait,\n  })\n  const inputPath = computeInputPath({ sourceHref, projectPathname })\n  const inputRelativePath = computeInputRelativePath({ sourceHref, projectPathname })\n\n  return jsenvTransform({\n    inputCode,\n    inputMap,\n    inputPath,\n    inputRelativePath,\n    babelPluginMap,\n    convertMap,\n    allowTopLevelAwait,\n    transformTopLevelAwait,\n    transformModuleIntoSystemFormat,\n    transformGenerator,\n    remap,\n  })\n}\n\nconst computeInputCodeAndInputMap = async ({\n  source,\n  sourceHref,\n  sourceMap,\n  projectPathname,\n  convertMap,\n  remap,\n  allowTopLevelAwait,\n}) => {\n  const specifierMetaMap = normalizeSpecifierMetaMap(\n    metaMapToSpecifierMetaMap({\n      convert: convertMap,\n    }),\n    `file://${projectPathname}`,\n    { forceHttpResolutionForFile: true },\n  )\n  const { convert } = urlToMeta({ url: sourceHref, specifierMetaMap })\n  if (!convert) {\n    return { inputCode: source, inputMap: sourceMap }\n  }\n\n  if (typeof convert !== \"function\") {\n    throw new TypeError(`convert must be a function, got ${convert}`)\n  }\n  // TODO: update @jsenv/commonjs-converter to handle sourceMap when passed\n  const conversionResult = await convert({\n    projectPathname,\n    source,\n    sourceHref,\n    sourceMap,\n    remap,\n    allowTopLevelAwait,\n  })\n  if (typeof conversionResult !== \"object\") {\n    throw new TypeError(`convert must return an object, got ${conversionResult}`)\n  }\n  const inputCode = conversionResult.code\n  if (typeof inputCode !== \"string\") {\n    throw new TypeError(`convert must return { code } string, got { code: ${inputCode} } `)\n  }\n  const inputMap = conversionResult.map\n  return { inputCode, inputMap }\n}\n\nconst computeInputPath = ({ sourceHref, projectPathname }) => {\n  const scenario = computeScenario({ sourceHref, projectPathname })\n\n  if (scenario === \"remote\") {\n    return sourceHref\n  }\n\n  return pathnameToOperatingSystemPath(hrefToPathname(sourceHref))\n}\n\nexport const computeInputRelativePath = ({ sourceHref, projectPathname }) => {\n  const scenario = computeScenario({ sourceHref, projectPathname })\n\n  if (scenario === \"project-file\") {\n    return pathnameToRelativePathname(hrefToPathname(sourceHref), projectPathname)\n  }\n\n  return undefined\n}\n\nconst computeScenario = ({ sourceHref, projectPathname }) => {\n  if (!sourceHref.startsWith(\"file:///\")) {\n    return \"remote\"\n  }\n\n  const sourcePathname = hrefToPathname(sourceHref)\n\n  if (pathnameIsInside(sourcePathname, projectPathname)) {\n    return \"project-file\"\n  }\n\n  return \"file\"\n}\n","export const writeSourceMappingURL = (source, location) => `${source}\n${\"//#\"} sourceMappingURL=${location}`\n\nexport const updateSourceMappingURL = (source, callback) => {\n  const sourceMappingUrlRegExp = /\\/\\/# ?sourceMappingURL=([^\\s'\"]+)/g\n  let lastSourceMappingUrl\n  let matchSourceMappingUrl\n  while ((matchSourceMappingUrl = sourceMappingUrlRegExp.exec(source))) {\n    lastSourceMappingUrl = matchSourceMappingUrl\n  }\n  if (lastSourceMappingUrl) {\n    const index = lastSourceMappingUrl.index\n    const before = source.slice(0, index)\n    const after = source.slice(index)\n    const mappedAfter = after.replace(sourceMappingUrlRegExp, (match, firstGroup) => {\n      return `${\"//#\"} sourceMappingURL=${callback(firstGroup)}`\n    })\n    return `${before}${mappedAfter}`\n  }\n  return source\n}\n\nexport const readSourceMappingURL = (source) => {\n  let sourceMappingURL\n  updateSourceMappingURL(source, (value) => {\n    sourceMappingURL = value\n  })\n  return sourceMappingURL\n}\n\nexport const parseSourceMappingURL = (source) => {\n  const sourceMappingURL = readSourceMappingURL(source)\n\n  if (!sourceMappingURL) return null\n\n  const base64Prefix = \"data:application/json;charset=utf-8;base64,\"\n  if (sourceMappingURL.startsWith(base64Prefix)) {\n    const mapBase64Source = sourceMappingURL.slice(base64Prefix.length)\n    const sourcemapString = new Buffer(mapBase64Source, \"base64\").toString(\"utf8\")\n    return { sourcemapString }\n  }\n\n  return {\n    sourcemapURL: sourceMappingURL,\n  }\n}\n\nexport const writeOrUpdateSourceMappingURL = (source, location) => {\n  if (readSourceMappingURL(source)) {\n    return updateSourceMappingURL(source, location)\n  }\n  return writeSourceMappingURL(source, location)\n}\n","import { basename } from \"path\"\nimport { pathnameToRelativePathname } from \"@jsenv/operating-system-path\"\nimport { hrefToPathname } from \"@jsenv/href\"\nimport { resolveSpecifier } from \"@jsenv/import-map\"\nimport { computeInputRelativePath } from \"../transformJs/transformJs.js\"\nimport { writeSourceMappingURL } from \"./source-mapping-url.js\"\n\nexport const transformResultToCompilationResult = (\n  { code, map, metadata = {} },\n  {\n    source,\n    sourceHref,\n    projectPathname,\n    remap = true,\n    remapMethod = \"comment\", // 'comment', 'inline'\n  },\n) => {\n  if (typeof source !== \"string\") {\n    throw new TypeError(`source must be a string, got ${source}`)\n  }\n  if (typeof sourceHref !== \"string\") {\n    throw new TypeError(`sourceHref must be a string, got ${sourceHref}`)\n  }\n  if (typeof projectPathname !== \"string\") {\n    throw new TypeError(`projectPathname must be a string, got ${projectPathname}`)\n  }\n\n  const sources = []\n  const sourcesContent = []\n  const assets = []\n  const assetsContent = []\n\n  let output = code\n  if (remap && map) {\n    if (map.sources.length === 0) {\n      // may happen in somae cases where babel returns a wrong sourcemap\n      // there is at least one case where it happens\n      // a file with only import './whatever.js' inside\n      sources.push(sourceHrefToSourceMapSource({ sourceHref, projectPathname }))\n      sourcesContent.push(source)\n    } else {\n      map.sources = map.sources.map((source) =>\n        resolveSourceMapSource(source, { sourceHref, projectPathname }),\n      )\n      sources.push(...map.sources)\n      if (map.sourcesContent) sourcesContent.push(...map.sourcesContent)\n    }\n\n    // removing sourcesContent from map decrease the sourceMap\n    // it also means client have to fetch source from server (additional http request)\n    // some client ignore sourcesContent property such as vscode-chrome-debugger\n    // Because it's the most complex scenario and we want to ensure client is always able\n    // to find source from the sourcemap, we explicitely delete nmap.sourcesContent to test this.\n    delete map.sourcesContent\n\n    // we don't need sourceRoot because our path are relative or absolute to the current location\n    // we could comment this line because it is not set by babel because not passed during transform\n    delete map.sourceRoot\n\n    if (remapMethod === \"inline\") {\n      const mapAsBase64 = new Buffer(JSON.stringify(map)).toString(\"base64\")\n      output = writeSourceMappingURL(\n        output,\n        `data:application/json;charset=utf-8;base64,${mapAsBase64}`,\n      )\n    } else if (remapMethod === \"comment\") {\n      const sourceMapAssetPath = generateAssetPath({\n        sourceHref,\n        assetName: `${sourceHrefToBasename(sourceHref)}.map`,\n      })\n      output = writeSourceMappingURL(output, `./${sourceMapAssetPath}`)\n      assets.push(sourceMapAssetPath)\n      assetsContent.push(stringifyMap(map))\n    }\n  } else {\n    sources.push(sourceHrefToSourceMapSource({ sourceHref, projectPathname }))\n    sourcesContent.push(source)\n  }\n\n  const { coverage } = metadata\n  if (coverage) {\n    const coverageAssetPath = generateAssetPath({\n      sourceHref,\n      assetName: \"coverage.json\",\n    })\n    assets.push(coverageAssetPath)\n    assetsContent.push(stringifyCoverage(coverage))\n  }\n\n  return {\n    compiledSource: output,\n    contentType: \"application/javascript\",\n    sources,\n    sourcesContent,\n    assets,\n    assetsContent,\n  }\n}\n\nconst sourceHrefToSourceMapSource = ({ sourceHref, projectPathname }) => {\n  const relativePath = computeInputRelativePath({ sourceHref, projectPathname })\n  return relativePath || sourceHref\n}\n\nconst resolveSourceMapSource = (sourceMapSource, { sourceHref, projectPathname }) => {\n  if (sourceMapSource[0] === \"/\") {\n    return sourceMapSource\n  }\n\n  if (sourceMapSource.slice(0, 2) === \"./\" || sourceMapSource.slice(0, 3) === \"../\") {\n    const sourceMapSourceHref = resolveSpecifier(sourceMapSource, sourceHref)\n    const sourceMapSourcePathname = hrefToPathname(sourceMapSourceHref)\n    return pathnameToRelativePathname(sourceMapSourcePathname, projectPathname)\n  }\n\n  if (sourceMapSource.startsWith(\"file://\")) {\n    return sourceMapSource\n  }\n\n  if (sourceMapSource.startsWith(\"http://\")) {\n    return sourceMapSource\n  }\n\n  if (sourceMapSource.startsWith(\"https://\")) {\n    return sourceMapSource\n  }\n\n  return `/${sourceMapSource}`\n}\n\nconst generateAssetPath = ({ sourceHref, assetName }) => {\n  return `${sourceHrefToBasename(sourceHref)}__asset__/${assetName}`\n}\n\nconst sourceHrefToBasename = (sourceHref) => basename(hrefToPathname(sourceHref))\n\nconst stringifyMap = (object) => JSON.stringify(object, null, \"  \")\n\nconst stringifyCoverage = (object) => JSON.stringify(object, null, \"  \")\n"],"names":["babelPluginCompatMap","chrome","edge","firefox","node","samsung","opera","electron","safari","ios","ie","android","phantom","assertImportMap","value","TypeError","type","Array","isArray","hasScheme","string","test","hrefToScheme","href","colonIndex","indexOf","slice","hrefToPathname","ressourceToPathname","hrefToRessource","scheme","length","afterProtocol","pathnameSlashIndex","ressource","searchSeparatorIndex","hrefToOrigin","secondProtocolSlashIndex","pathnameToDirname","pathname","slashLastIndex","lastIndexOf","resolveUrl","specifier","baseUrl","writeBaseUrlMustBeAString","Error","writeBaseUrlMustBeAbsolute","writeBaseUrlRequired","baseOrigin","basePathname","baseDirname","unresolvedPathname","importerFolders","split","pop","resolvedPathname","join","resolveSpecifier","importer","startsWith","nodeRequire","require","filenameContainsBackSlashes","__filename","url","replace","pathnameToRelativePath","otherPathname","startsWithWindowsDriveLetter","firstChar","secondChar","replaceSlashesWithBackSlashes","pathnameToOperatingSystemPath","pathnameWithoutLeadingSlash","isWindowsPath","path","replaceBackSlashesWithSlashes","operatingSystemPathToPathname","operatingSystemPath","pathnameIsInside","pathnameToRelativePathname","jsenvCorePath","resolve","selfPathname","selfPath","jsenvCorePathname","list","_require","babelHelperNameInsideJsenvCoreArray","babelHelperMap","forEach","babelHelperName","includes","browserScoreMap","other","arrayWithout","array","predicate","outputArray","i","index","push","arrayWithoutValue","valueToRemove","promiseSequence","callbackArray","values","visit","callback","fileMakeDirname","file","fileNormalized","normalizeSeparation","fileStartsWithSlash","folders","map","_","folder","folderMake","Promise","reject","mkdir","error","code","stat","fileLastStat","isDirectory","status","reason","lstat","copyFilePromisified","promisify","copyFile","readFilePromisified","readFile","fileRead","buffer","toString","statPromisified","fileStat","lstatPromisified","writeFilePromisified","writeFile","fileWrite","content","readdirPromisified","readdir","readCompileCacheFolderMeta","projectPathname","compileCacheFolderRelativePath","compileCacheFolderMetaFilePath","source","JSON","parse","e","writeCompileCacheFolderMeta","compileCacheFolderMeta","cacheMetaMetaFilePath","stringify","rimraf","removeFolder","foldername","cleanCompileCacheFolderIfObsolete","forceObsolete","cacheMeta","cleanCallback","jsenvCorePackagePath","jsenvCorePackageVersion","readPackage","version","cacheFolderPath","previousCompileCacheFolderMeta","packagePath","readFileSync","String","packageObject","compilationResultToTransformResult","compiledSource","assets","assetsContent","sourceMapAssetIndex","findIndex","asset","endsWith","undefined","valueToVersion","numberToVersion","stringToVersion","createValueErrorMessage","number","major","minor","patch","parts","Number","isNaN","versionCompare","versionA","versionB","semanticVersionA","semanticVersionB","majorDiff","minorDiff","patchDiff","versionIsBelow","versionSupposedBelow","versionSupposedAbove","findHighestVersion","reduce","highestVersion","computeBabelPluginMapForPlatform","babelPluginMap","babelPluginCompatMapFallback","platformName","platformVersion","babelPluginMapForPlatform","Object","keys","key","compatible","platformIsCompatibleWithFeature","platformCompatMap","platformCompatibleVersion","computePlatformCompatibleVersion","BEST_ID","OTHERWISE_ID","computeCompileIdFromGroupId","groupId","groupMap","createUnexpectedGroupIdMessage","compileId","jsenvPluginCompatMap","computeJsenvPluginMapForPlatform","jsenvPluginMap","jsenvPluginCompatMapFallback","jsenvPluginMapForPlatform","featureCompat","findAsyncPluginNameInBabelPluginMap","buildExternalHelpers","getDependencies","generateBabelHelper","name","helpersToBuild","ensureDependencies","dependencies","groupHaveSameRequirements","leftGroup","rightGroup","babelPluginRequiredNameArray","jsenvPluginRequiredNameArray","generatePlatformGroupArray","versionArray","babelPluginKey","babelPluginCompat","jsenvPluginKey","jsenvPluginCompat","sort","platformGroupArray","filter","group","groupWithSameRequirements","find","platformGroupCandidate","composePlatformCompatMap","secondPlatformCompatMap","objectComposeValue","normalizePlatformCompatMapVersions","secondVersion","platformCompatibility","objectMapValue","object","mapped","previous","composed","composeGroupArray","arrayOfGroupArray","groupArrayReducer","previousGroupArray","groupArray","reducedGroupArray","copyGroup","existingGroupCandidate","generateAllPlatformGroupArray","platformNames","platformCompatMapToScore","platformScoreMap","platformToScore","versionUsageMap","versionArrayAscending","closestVersion","reverse","generateGroupMap","groupCount","platformAlwaysInsidePlatformScoreMap","platformWillAlwaysBeKnown","groupWithoutFeature","allPlatformGroupArray","groupToScore","allPlatformGroupArraySortedByScore","a","b","addOtherwiseToBeSafe","lastGroupIndex","valueCandidate","LOG_LEVEL_TRACE","LOG_LEVEL_INFO","LOG_LEVEL_WARN","LOG_LEVEL_ERROR","LOG_LEVEL_OFF","createLogger","logLevel","trace","info","warn","traceDisabled","infoDisabled","warnDisabled","errorDisabled","createUnexpectedLogLevelMessage","console","getCacheFilePath","compileRelativePath","getAssetFilePath","getCompiledFilePath","getSourceFilePath","sourceRelativePath","readCache","logger","cacheFilePath","cacheAsString","cache","sourceRelativePathInCache","createSourceRelativePathChangedMessage","createCacheSyntaxErrorMessage","syntaxError","stack","dateToSecondsPrecision","date","dateWithSecondsPrecision","Date","setMilliseconds","EMPTY_ID","bufferToEtag","Buffer","isBuffer","hash","createHash","update","hashBase64String","digest","hashBase64StringSubset","validateCache","ifEtagMatch","ifModifiedSinceDate","compiledFileValidation","validateCompiledFile","valid","sourcesValidations","assetValidations","all","validateSources","validateAssets","invalidSourceValidation","invalidAssetValidation","data","sourcesContent","sourceContent","assetContent","compiledFilename","compiledEtag","from","compiledMtime","sources","validateSource","eTag","sourcesEtag","sourceFilename","sourceETag","validateAsset","assetsEtag","assetFilename","assetContentETag","updateCache","cacheHitTracking","compileResult","compileResultStatus","isNew","isUpdated","isCached","contentType","promises","writeCompiledSourceFile","writeAssetsFile","compiledFilePath","assetFilePath","createdMs","now","lastModifiedMs","matchCount","lastMatchMs","createLockRegistry","lockArray","lockForRessource","currentLock","lock","unlockResolve","unlocked","unlock","lockfile","getOrGenerateCompiledFile","compile","cacheIgnored","cacheInterProcessLocking","startAsap","computeCompileReport","callCompile","cacheValidation","rest","fn","unlockLocal","unlockInterProcessLock","realpath","retries","minTimeout","maxTimeout","nodeVersionScoreMap","composeTwoImportMaps","leftImportMap","rightImportMap","imports","composeTwoImports","scopes","composeTwoScopes","leftImports","rightImports","leftScopes","rightScopes","scopeKey","hasOwnProperty","readProjectImportMap","jsenvProjectPathname","importMapRelativePath","importMapForProject","getProjectImportMap","jsenvCoreImportKey","jsenvCoreImportValue","importsForJsenvCore","jsenvCoreProjectImportValue","createIncompatibleJsenvCoreDependencyMessage","jsenvCoreProjectRelativePath","jsenvCoreRelativePath","importMapForJsenvCore","generateJsenvCoreScopes","scopesForJsenvCore","importMapPath","importMapString","resolveGroup","compileIdCandidate","versionForGroup","firstMatch","regexp","match","secondMatch","userAgentToVersion","userAgent","detectAndroid","navigatorToBrowser","window","navigator","appVersion","detectInternetExplorer","userAgentToBrowser","detectOpera","detectEdge","detectFirefox","detectChrome","detectSafari","detectElectron","detectIOS","detectorCompose","detectors","detector","result","detectBrowser","normalizeName","normalizeVersion","toLowerCase","resolveBrowserGroup","detectNode","process","resolveNodeGroup","resolvePlatformGroup","template","types","t","declare","default","hoistVariables","buildTemplate","buildExportAll","constructExportCall","exportIdent","exportNames","exportValues","exportStarTarget","statements","expressionStatement","callExpression","stringLiteral","objectProperties","exportName","exportValue","objectProperty","identifier","objectExpression","exportObj","scope","generateUid","variableDeclaration","variableDeclarator","KEY","generateUidIdentifier","EXPORT_OBJ","TARGET","assignmentExpression","memberExpression","TYPE_IMPORT","api","options","assertVersion","systemGlobal","IGNORE_REASSIGNMENT_SYMBOL","Symbol","reassignmentVisitor","arg","get","isAssignmentExpression","isObjectPattern","isArrayPattern","exprs","getBindingIdentifiers","getBinding","exportedNames","exports","exportedName","buildCall","expression","replaceWith","sequenceExpression","isIdentifier","isPostUpdateExpression","isUpdateExpression","prefix","binaryExpression","operator","unaryExpression","cloneNode","argument","numericLiteral","visitor","CallExpression","state","callee","contextIdent","arguments","MetaProperty","meta","property","ReferencedIdentifier","hasBinding","Program","enter","exit","undefinedIdent","buildUndefinedNode","exportMap","create","modules","beforeBody","setters","variableIds","removedPaths","addExportName","val","pushModule","specifiers","module","m","concat","buildExportCall","body","isFunctionDeclaration","isClassDeclaration","id","toExpression","isImportDeclaration","removeBinding","remove","isExportAllDeclaration","isExportDefaultDeclaration","declar","isExportNamedDeclaration","isFunction","isClass","nodes","binding","local","exported","replaceWithMultiple","setterBody","target","isImportNamespaceSpecifier","isImportDefaultSpecifier","importSpecifier","isImportSpecifier","imported","hasExportStar","isExportSpecifier","functionExpression","blockStatement","moduleName","getModuleName","hasInit","unshift","traverse","SYSTEM_REGISTER","BEFORE_BODY","MODULE_NAME","SETTERS","arrayExpression","SOURCES","EXECUTE","topLevelAwait","programUsesTopLevelAwait","EXPORT_IDENTIFIER","CONTEXT_IDENTIFIER","hasTopLevelAwait","AwaitExpression","parent","getFunctionParent","Convert","ansiToHTML","ansiString","toHtml","addSideEffect","ensureRegeneratorRuntimeImportBabelPlugin","regeneratorRuntimeIdentifierName","regeneratorRuntimeImportPath","Identifier","opts","filename","filepathname","getProgramParent","ensureGlobalThisImportBabelPlugin","globalThisIdentifierName","globalThisImportPath","addDefault","transformBabelHelperToImportBabelPlugin","pre","cachedHelpers","set","availableHelper","filePathname","babelHelperFilePathname","searchPossibleBabelHelperNameInPath","helper","nameHint","babelPathPart","babelPathPartIndex","after","helperName","transformAsync","transformFromAstAsync","syntaxDynamicImport","syntaxImportMeta","defaultBabelPluginArray","jsenvTransform","inputCode","inputPath","inputRelativePath","inputAst","inputMap","allowTopLevelAwait","transformTopLevelAwait","transformModuleIntoSystemFormat","transformGenerator","remap","filenameRelative","inputSourceMap","configFile","babelrc","ast","sourceMaps","sourceFileName","parserOpts","allowAwaitOutsideFunction","babelPluginMapWithoutTransformTypeOf","asyncPluginName","babelPluginArrayWithoutAsync","babelTransform","plugins","transformModulesSystemJs","finalResult","metadata","babelPluginArray","babelPluginName","message","createParseError","messageHTML","lineNumber","loc","line","columnNumber","column","parseError","assertUrlLike","isWindowsPathnameSpecifier","thirdChar","applySpecifierPatternMatching","applyPatternMatching","pattern","patternIndex","remainingPattern","remainingString","pass","fail","skipResult","skipUntilMatch","matched","slashIndex","skippablePredicate","bestMatch","matchAttempt","skippable","Math","max","isPlainObject","metaMapToSpecifierMetaMap","metaMap","specifierMetaMap","metaKey","specifierValueMap","metaValue","isAbsoluteSpecifier","isWindowsDriveSpecifier","resolveAbsoluteSpecifier","isSchemeRelativeSpecifier","resolveSchemeRelativeSpecifier","isOriginRelativeSpecifier","resolveOriginRelativeSpecifier","importerOrigin","isPathnameRelativeSpecifier","resolvePathnameRelativeSpecifier","importerPathname","importerDirname","resolveBareSpecifier","createMissingImporterMessage","createAbsoluteImporterRequiredMessage","assertSpecifierMetaMap","FAKE_HTTP_ORIGIN_UNLIKELY_TO_COLLIDE","normalizeSpecifierMetaMap","forceHttpResolutionForFile","resolveSpecifierScoped","specifierResolvedAgainstHttp","specifierPathname","specifierMetaMapNormalized","specifierResolved","urlToMeta","previousMeta","transformJs","sourceHref","sourceMap","convertMap","computeInputCodeAndInputMap","computeInputPath","computeInputRelativePath","convert","conversionResult","scenario","computeScenario","sourcePathname","writeSourceMappingURL","location","transformResultToCompilationResult","remapMethod","output","sourceHrefToSourceMapSource","resolveSourceMapSource","sourceRoot","mapAsBase64","sourceMapAssetPath","generateAssetPath","assetName","sourceHrefToBasename","stringifyMap","coverage","coverageAssetPath","stringifyCoverage","relativePath","sourceMapSource","sourceMapSourceHref","sourceMapSourcePathname","basename"],"mappings":"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"}