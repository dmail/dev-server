{"version":3,"file":"main.js","sources":["/src/babelPluginCompatMap/babelPluginCompatMap.js","/node_modules/@jsenv/href/src/hrefToScheme/hrefToScheme.js","/node_modules/@jsenv/href/src/hrefToPathname/hrefToPathname.js","/node_modules/@jsenv/bundling/src/generateBabelPluginMapOption/import-meta-commonjs.js","/src/urlHelpers.js","/src/jsenvCoreDirectoryUrl/jsenvCoreDirectoryUrl.js","/src/babelHelperMap/babelHelperMap.js","/src/browserScoreMap/browserScoreMap.js","/node_modules/@dmail/helper/src/arrayWithout.js","/node_modules/@dmail/helper/src/arrayWithoutValue.js","/node_modules/@dmail/helper/src/promiseSequence.js","/node_modules/@dmail/helper/src/fileMakeDirname.js","/node_modules/@dmail/helper/src/fileCopy.js","/node_modules/@dmail/helper/src/fileRead.js","/node_modules/@dmail/helper/src/fileStat.js","/node_modules/@dmail/helper/src/fileLStat.js","/node_modules/@dmail/helper/src/fileWrite.js","/node_modules/@dmail/helper/src/folderRead.js","/src/cleanCompileCacheDirectoryIfObsolete/removeDirectory.js","/src/cleanCompileCacheDirectoryIfObsolete/cleanCompileCacheDirectoryIfObsolete.js","/src/compilationResultToTransformResult/compilationResultToTransformResult.js","/src/semantic-versioning/valueToVersion.js","/src/semantic-versioning/versionCompare.js","/src/semantic-versioning/versionIsBelow.js","/src/semantic-versioning/findHighestVersion.js","/src/computeBabelPluginMapForPlatform/computeBabelPluginMapForPlatform.js","/src/GROUP_ID.js","/src/computeCompileIdFromGroupId/computeCompileIdFromGroupId.js","/src/jsenvPluginCompatMap/jsenvPluginCompatMap.js","/src/computeJsenvPluginMapForPlatform/computeJsenvPluginMapForPlatform.js","/src/findAsyncPluginNameInBabelPluginMap/findAsyncPluginNameInBabelPluginMap.js","/src/generateBabelHelper/generateBabelHelper.js","/src/generateGroupMap/groupHaveSameRequirements.js","/src/generateGroupMap/generatePlatformGroupArray.js","/src/generateGroupMap/composePlatformCompatMap.js","/src/generateGroupMap/composeGroupArray.js","/src/generateGroupMap/generateAllPlatformGroupArray.js","/src/generateGroupMap/platformCompatMapToScore.js","/src/generateGroupMap/generateGroupMap.js","/node_modules/@jsenv/logger/src/createLogger/LOG_LEVELS.js","/node_modules/@jsenv/logger/src/createLogger/createLogger.js","/src/getOrGenerateCompiledFile/locaters.js","/src/getOrGenerateCompiledFile/readCache.js","/src/getOrGenerateCompiledFile/dateToSecondsPrecision.js","/src/getOrGenerateCompiledFile/bufferToEtag.js","/src/getOrGenerateCompiledFile/validateCache.js","/src/getOrGenerateCompiledFile/updateCache.js","/src/getOrGenerateCompiledFile/createLockRegistry.js","/src/getOrGenerateCompiledFile/getOrGenerateCompiledFile.js","/src/nodeVersionScoreMap/nodeVersionScoreMap.js","/node_modules/@jsenv/import-map/src/assertImportMap.js","/node_modules/@jsenv/import-map/src/composeTwoImportMaps/composeTwoImportMaps.js","/src/readProjectImportMap/readProjectImportMap.js","/src/resolvePlatformGroup/resolveGroup.js","/src/resolveBrowserGroup/util.js","/src/resolveBrowserGroup/android.js","/src/resolveBrowserGroup/internet-explorer.js","/src/resolveBrowserGroup/opera.js","/src/resolveBrowserGroup/edge.js","/src/resolveBrowserGroup/firefox.js","/src/resolveBrowserGroup/chrome.js","/src/resolveBrowserGroup/safari.js","/src/resolveBrowserGroup/electron.js","/src/resolveBrowserGroup/ios.js","/src/resolveBrowserGroup/detectBrowser.js","/src/resolveBrowserGroup/resolveBrowserGroup.js","/src/resolveNodeGroup/detectNode.js","/src/resolveNodeGroup/resolveNodeGroup.js","/src/resolvePlatformGroup/resolvePlatformGroup.js","/src/transformJs/babel-plugin-transform-modules-systemjs/index.js","/src/transformJs/ansiToHTML.js","/src/transformJs/ensureRegeneratorRuntimeImportBabelPlugin.js","/src/transformJs/ensureGlobalThisImportBabelPlugin.js","/src/transformJs/transformBabelHelperToImportBabelPlugin.js","/src/transformJs/jsenvTransform.js","/node_modules/@jsenv/url-meta/src/assertUrlLike.js","/node_modules/@jsenv/url-meta/src/applySpecifierPatternMatching/applySpecifierPatternMatching.js","/node_modules/@jsenv/url-meta/src/isPlainObject.js","/node_modules/@jsenv/url-meta/src/metaMapToSpecifierMetaMap/metaMapToSpecifierMetaMap.js","/node_modules/@jsenv/url-meta/src/assertSpecifierMetaMap.js","/node_modules/@jsenv/url-meta/src/normalizeSpecifierMetaMap/normalizeSpecifierMetaMap.js","/node_modules/@jsenv/url-meta/src/urlToMeta/urlToMeta.js","/src/transformJs/transformJs.js","/src/transformResultToCompilationResult/source-mapping-url.js","/src/transformResultToCompilationResult/transformResultToCompilationResult.js"],"sourcesContent":["// copied from\n// https://github.com/babel/babel/blob/0ee2c42b55e1893f0ae6510916405eb273587844/packages/babel-preset-env/data/plugins.json\n// Because this is an hidden implementation detail of @babel/preset-env\n// it could be deprecated or moved anytime.\n// For that reason it makes more sens to have it inlined here\n// than importing it from an undocumented location.\n// Ideally it would be documented or a separate module\n\nexport const babelPluginCompatMap = {\n  \"transform-template-literals\": {\n    chrome: \"41\",\n    edge: \"13\",\n    firefox: \"34\",\n    node: \"4\",\n    samsung: \"3.4\",\n    opera: \"28\",\n    electron: \"0.24\",\n  },\n  \"transform-literals\": {\n    chrome: \"44\",\n    edge: \"12\",\n    firefox: \"53\",\n    safari: \"9\",\n    node: \"4\",\n    ios: \"9\",\n    samsung: \"4\",\n    opera: \"31\",\n    electron: \"0.31\",\n  },\n  \"transform-function-name\": {\n    chrome: \"51\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6.5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"38\",\n    electron: \"1.2\",\n  },\n  \"transform-arrow-functions\": {\n    chrome: \"47\",\n    edge: \"13\",\n    firefox: \"45\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"34\",\n    electron: \"0.36\",\n  },\n  \"transform-block-scoped-functions\": {\n    chrome: \"41\",\n    edge: \"12\",\n    firefox: \"46\",\n    safari: \"10\",\n    node: \"4\",\n    ie: \"11\",\n    ios: \"10\",\n    samsung: \"3.4\",\n    opera: \"28\",\n    electron: \"0.24\",\n  },\n  \"transform-classes\": {\n    chrome: \"46\",\n    edge: \"13\",\n    firefox: \"45\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-object-super\": {\n    chrome: \"46\",\n    edge: \"13\",\n    firefox: \"45\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-shorthand-properties\": {\n    chrome: \"43\",\n    edge: \"12\",\n    firefox: \"33\",\n    safari: \"9\",\n    node: \"4\",\n    ios: \"9\",\n    samsung: \"4\",\n    opera: \"30\",\n    electron: \"0.29\",\n  },\n  \"transform-duplicate-keys\": {\n    chrome: \"42\",\n    edge: \"12\",\n    firefox: \"34\",\n    safari: \"9\",\n    node: \"4\",\n    ios: \"9\",\n    samsung: \"3.4\",\n    opera: \"29\",\n    electron: \"0.27\",\n  },\n  \"transform-computed-properties\": {\n    chrome: \"44\",\n    edge: \"12\",\n    firefox: \"34\",\n    safari: \"7.1\",\n    node: \"4\",\n    ios: \"8\",\n    samsung: \"4\",\n    opera: \"31\",\n    electron: \"0.31\",\n  },\n  \"transform-for-of\": {\n    chrome: \"51\",\n    edge: \"15\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6.5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"38\",\n    electron: \"1.2\",\n  },\n  \"transform-sticky-regex\": {\n    chrome: \"49\",\n    edge: \"13\",\n    firefox: \"3\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"36\",\n    electron: \"1\",\n  },\n  \"transform-dotall-regex\": {\n    chrome: \"62\",\n    safari: \"11.1\",\n    node: \"8.10\",\n    ios: \"11.3\",\n    samsung: \"8.2\",\n    opera: \"49\",\n    electron: \"3.1\",\n  },\n  \"transform-unicode-regex\": {\n    chrome: \"50\",\n    edge: \"13\",\n    firefox: \"46\",\n    safari: \"12\",\n    node: \"6\",\n    ios: \"12\",\n    samsung: \"5\",\n    opera: \"37\",\n    electron: \"1.1\",\n  },\n  \"transform-spread\": {\n    chrome: \"46\",\n    edge: \"13\",\n    firefox: \"36\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-parameters\": {\n    chrome: \"49\",\n    edge: \"18\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"36\",\n    electron: \"1\",\n  },\n  \"transform-destructuring\": {\n    chrome: \"51\",\n    edge: \"15\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6.5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"38\",\n    electron: \"1.2\",\n  },\n  \"transform-block-scoping\": {\n    chrome: \"49\",\n    edge: \"14\",\n    firefox: \"51\",\n    safari: \"11\",\n    node: \"6\",\n    ios: \"11\",\n    samsung: \"5\",\n    opera: \"36\",\n    electron: \"1\",\n  },\n  \"transform-typeof-symbol\": {\n    chrome: \"38\",\n    edge: \"12\",\n    firefox: \"36\",\n    safari: \"9\",\n    node: \"0.12\",\n    ios: \"9\",\n    samsung: \"3\",\n    opera: \"25\",\n    electron: \"0.2\",\n  },\n  \"transform-new-target\": {\n    chrome: \"46\",\n    edge: \"14\",\n    firefox: \"41\",\n    safari: \"10\",\n    node: \"5\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"33\",\n    electron: \"0.36\",\n  },\n  \"transform-regenerator\": {\n    chrome: \"50\",\n    edge: \"13\",\n    firefox: \"53\",\n    safari: \"10\",\n    node: \"6\",\n    ios: \"10\",\n    samsung: \"5\",\n    opera: \"37\",\n    electron: \"1.1\",\n  },\n  \"transform-exponentiation-operator\": {\n    chrome: \"52\",\n    edge: \"14\",\n    firefox: \"52\",\n    safari: \"10.1\",\n    node: \"7\",\n    ios: \"10.3\",\n    samsung: \"6.2\",\n    opera: \"39\",\n    electron: \"1.3\",\n  },\n  \"transform-async-to-generator\": {\n    chrome: \"55\",\n    edge: \"15\",\n    firefox: \"52\",\n    safari: \"11\",\n    node: \"7.6\",\n    ios: \"11\",\n    samsung: \"6.2\",\n    opera: \"42\",\n    electron: \"1.6\",\n  },\n  // copy of transform-async-to-generator\n  // this is not in the babel-preset-env repo\n  // but we need this\n  \"transform-async-to-promises\": {\n    chrome: \"55\",\n    edge: \"15\",\n    firefox: \"52\",\n    safari: \"11\",\n    node: \"7.6\",\n    ios: \"11\",\n    samsung: \"6.2\",\n    opera: \"42\",\n    electron: \"1.6\",\n  },\n  \"proposal-async-generator-functions\": {\n    chrome: \"63\",\n    firefox: \"57\",\n    safari: \"12\",\n    node: \"10\",\n    ios: \"12\",\n    samsung: \"8.2\",\n    opera: \"50\",\n    electron: \"3.1\",\n  },\n  \"proposal-object-rest-spread\": {\n    chrome: \"60\",\n    firefox: \"55\",\n    safari: \"11.1\",\n    node: \"8.3\",\n    ios: \"11.3\",\n    samsung: \"8.2\",\n    opera: \"47\",\n    electron: \"2.1\",\n  },\n  \"proposal-optional-chaining\": {},\n  \"proposal-unicode-property-regex\": {\n    chrome: \"64\",\n    safari: \"11.1\",\n    node: \"10\",\n    ios: \"11.3\",\n    opera: \"51\",\n    electron: \"3.1\",\n  },\n  \"proposal-json-strings\": {\n    chrome: \"66\",\n    firefox: \"62\",\n    safari: \"12\",\n    node: \"10\",\n    ios: \"12\",\n    opera: \"53\",\n    electron: \"3.1\",\n  },\n  \"proposal-optional-catch-binding\": {\n    chrome: \"66\",\n    firefox: \"58\",\n    safari: \"11.1\",\n    node: \"10\",\n    ios: \"11.3\",\n    opera: \"53\",\n    electron: \"3.1\",\n  },\n  \"transform-named-capturing-groups-regex\": {\n    chrome: \"64\",\n    safari: \"11.1\",\n    node: \"10\",\n    ios: \"11.3\",\n    opera: \"51\",\n    electron: \"3.1\",\n  },\n  \"transform-member-expression-literals\": {\n    chrome: \"7\",\n    opera: \"12\",\n    edge: \"12\",\n    firefox: \"2\",\n    safari: \"5.1\",\n    node: \"0.10\",\n    ie: \"9\",\n    android: \"4\",\n    ios: \"6\",\n    phantom: \"2\",\n    samsung: \"2.1\",\n    electron: \"5\",\n  },\n  \"transform-property-literals\": {\n    chrome: \"7\",\n    opera: \"12\",\n    edge: \"12\",\n    firefox: \"2\",\n    safari: \"5.1\",\n    node: \"0.10\",\n    ie: \"9\",\n    android: \"4\",\n    ios: \"6\",\n    phantom: \"2\",\n    samsung: \"2.1\",\n    electron: \"5\",\n  },\n  \"transform-reserved-words\": {\n    chrome: \"13\",\n    opera: \"10.50\",\n    edge: \"12\",\n    firefox: \"2\",\n    safari: \"3.1\",\n    node: \"0.10\",\n    ie: \"9\",\n    android: \"4.4\",\n    ios: \"6\",\n    phantom: \"2\",\n    samsung: \"2.1\",\n    electron: \"0.2\",\n  },\n}\n","export const hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n","import { hrefToScheme } from \"../hrefToScheme/hrefToScheme.js\"\n\nexport const hrefToPathname = (href) => {\n  return ressourceToPathname(hrefToRessource(href))\n}\n\nconst hrefToRessource = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return href.slice(\"file://\".length)\n  }\n\n  if (scheme === \"https\" || scheme === \"http\") {\n    // remove origin\n    const afterProtocol = href.slice(scheme.length + \"://\".length)\n    const pathnameSlashIndex = afterProtocol.indexOf(\"/\", \"://\".length)\n    return afterProtocol.slice(pathnameSlashIndex)\n  }\n\n  return href.slice(scheme.length + 1)\n}\n\nconst ressourceToPathname = (ressource) => {\n  const searchSeparatorIndex = ressource.indexOf(\"?\")\n  return searchSeparatorIndex === -1 ? ressource : ressource.slice(0, searchSeparatorIndex)\n}\n","// eslint-disable-next-line import/no-unresolved\nimport importMap from \"/importMap.json\"\nimport { normalizeImportMap } from \"@jsenv/import-map/src/normalizeImportMap/normalizeImportMap.js\"\nimport { resolveImport } from \"@jsenv/import-map/src/resolveImport/resolveImport.js\"\n\nconst nodeRequire = require\nexport { nodeRequire as require }\n\nconst filenameContainsBackSlashes = __filename.indexOf(\"\\\\\") > -1\n\nexport const url = filenameContainsBackSlashes\n  ? `file://${__filename.replace(/\\\\/g, \"/\")}`\n  : `file://${__filename}`\n\nexport const resolve = (specifier) => {\n  return resolveImport({\n    specifier,\n    importer: url,\n    importMap: memoizedGetImportMap(),\n    defaultExtension: false,\n  })\n}\n\n// better for perf and helps rollup to tree shake this out\n// when import.meta.resolve is not used\nlet memoizedImportMap\nconst memoizedGetImportMap = () => {\n  if (memoizedImportMap) return memoizedImportMap\n  memoizedImportMap = normalizeImportMap(importMap, url)\n  return memoizedImportMap\n}\n","import { pathToFileURL, fileURLToPath } from \"url\"\n\nexport const pathToDirectoryUrl = (path) => {\n  const directoryUrl = path.startsWith(\"file://\") ? path : String(pathToFileURL(path))\n  if (directoryUrl.endsWith(\"/\")) {\n    return directoryUrl\n  }\n  return `${directoryUrl}/`\n}\n\nexport const pathToFileUrl = (path) => {\n  return String(pathToFileURL(path))\n}\n\nexport const fileUrlToPath = (fileUrl) => {\n  return fileURLToPath(fileUrl)\n}\n\nexport const resolveDirectoryUrl = (specifier, baseUrl) => {\n  const directoryUrl = String(new URL(specifier, baseUrl))\n  if (directoryUrl.endsWith(\"/\")) {\n    return directoryUrl\n  }\n  return `${directoryUrl}/`\n}\n\nexport const hasScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n\nexport const fileUrlToRelativePath = (fileUrl, baseUrl) => {\n  if (fileUrl.startsWith(baseUrl)) {\n    return `./${fileUrl.slice(baseUrl.length)}`\n  }\n  return fileUrl\n}\n\nexport const resolveFileUrl = (specifier, baseUrl) => {\n  return String(new URL(specifier, baseUrl))\n}\n","import { pathToFileUrl, resolveDirectoryUrl } from \"../urlHelpers.js\"\n\nlet jsenvCoreDirectoryUrl\nif (typeof __filename === \"string\") {\n  jsenvCoreDirectoryUrl = resolveDirectoryUrl(\n    // get ride of dist/node/main.js\n    \"../../../\",\n    pathToFileUrl(__filename),\n  )\n} else {\n  jsenvCoreDirectoryUrl = resolveDirectoryUrl(\n    // get ride of src/jsenvCoreDirectoryUrl/jsenvCoreDirectoryUrl.js\n    \"../../\",\n    import.meta.url,\n  )\n}\n\nexport { jsenvCoreDirectoryUrl }\n","// https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-core/src/tools/build-external-helpers.js\n// the list of possible helpers:\n// https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-helpers/src/helpers.js#L13\nimport { jsenvCoreDirectoryUrl } from \"../jsenvCoreDirectoryUrl/jsenvCoreDirectoryUrl.js\"\n\nconst { list } = import.meta.require(\"@babel/helpers\")\n\nconst babelHelperNameInsideJsenvCoreArray = [\n  \"applyDecoratedDescriptor\",\n  \"arrayWithHoles\",\n  \"arrayWithoutHoles\",\n  \"assertThisInitialized\",\n  \"AsyncGenerator\",\n  \"asyncGeneratorDelegate\",\n  \"asyncIterator\",\n  \"asyncToGenerator\",\n  \"awaitAsyncGenerator\",\n  \"AwaitValue\",\n  \"classCallCheck\",\n  \"classNameTDZError\",\n  \"classPrivateFieldDestructureSet\",\n  \"classPrivateFieldGet\",\n  \"classPrivateFieldLooseBase\",\n  \"classPrivateFieldLooseKey\",\n  \"classPrivateFieldSet\",\n  \"classPrivateMethodGet\",\n  \"classPrivateMethodSet\",\n  \"classStaticPrivateFieldSpecGet\",\n  \"classStaticPrivateFieldSpecSet\",\n  \"classStaticPrivateMethodGet\",\n  \"classStaticPrivateMethodSet\",\n  \"construct\",\n  \"createClass\",\n  \"decorate\",\n  \"defaults\",\n  \"defineEnumerableProperties\",\n  \"defineProperty\",\n  \"extends\",\n  \"get\",\n  \"getPrototypeOf\",\n  \"inherits\",\n  \"inheritsLoose\",\n  \"initializerDefineProperty\",\n  \"initializerWarningHelper\",\n  \"instanceof\",\n  \"interopRequireDefault\",\n  \"interopRequireWildcard\",\n  \"isNativeFunction\",\n  \"iterableToArray\",\n  \"iterableToArrayLimit\",\n  \"iterableToArrayLimitLoose\",\n  \"jsx\",\n  \"newArrowCheck\",\n  \"nonIterableRest\",\n  \"nonIterableSpread\",\n  \"objectDestructuringEmpty\",\n  \"objectSpread\",\n  \"objectSpread2\",\n  \"objectWithoutProperties\",\n  \"objectWithoutPropertiesLoose\",\n  \"possibleConstructorReturn\",\n  \"readOnlyError\",\n  \"set\",\n  \"setPrototypeOf\",\n  \"skipFirstGeneratorNext\",\n  \"slicedToArray\",\n  \"slicedToArrayLoose\",\n  \"superPropBase\",\n  \"taggedTemplateLiteral\",\n  \"taggedTemplateLiteralLoose\",\n  \"tdz\",\n  \"temporalRef\",\n  \"temporalUndefined\",\n  \"toArray\",\n  \"toConsumableArray\",\n  \"toPrimitive\",\n  \"toPropertyKey\",\n  \"typeof\",\n  \"wrapAsyncGenerator\",\n  \"wrapNativeSuper\",\n  \"wrapRegExp\",\n]\n\nconst babelHelperMap = {}\nlist.forEach((babelHelperName) => {\n  if (babelHelperNameInsideJsenvCoreArray.includes(babelHelperName)) {\n    babelHelperMap[\n      babelHelperName\n    ] = `@jsenv/core/helpers/babel/${babelHelperName}/${babelHelperName}.js`\n  } else {\n    babelHelperMap[babelHelperName] = `${jsenvCoreDirectoryUrl}.babel-helpers/${babelHelperName}.js`\n  }\n})\nexport { babelHelperMap }\n","// https://www.statista.com/statistics/268299/most-popular-internet-browsers/\n// this source of stat is what I found in 5min\n// we could improve these default usage score using better stats\n// and keep in mind this should be updated time to time or even better\n// come from a project specific audience\n\nexport const browserScoreMap = {\n  android: 0.001,\n  chrome: {\n    \"71\": 0.3,\n    \"69\": 0.19,\n    \"0\": 0.01, // it means oldest version of chrome will get a score of 0.01\n  },\n  firefox: {\n    \"61\": 0.3,\n  },\n  edge: {\n    \"12\": 0.1,\n  },\n  electron: 0.001,\n  ios: 0.001,\n  opera: 0.001,\n  other: 0.001,\n  safari: {\n    \"10\": 0.1,\n  },\n}\n","export const arrayWithout = (array, predicate) => {\n  const outputArray = []\n  let i = 0\n  while (i < array.length) {\n    const value = array[i]\n    const index = i\n    i++\n    if (predicate(value, index, outputArray)) continue\n    outputArray.push(value)\n  }\n  return outputArray\n}\n","import { arrayWithout } from \"./arrayWithout.js\"\n\nexport const arrayWithoutValue = (array, valueToRemove) =>\n  arrayWithout(array, (value) => value === valueToRemove)\n","export const promiseSequence = async (callbackArray) => {\n  const values = []\n  const visit = async (index) => {\n    if (index === callbackArray.length) return\n    const callback = callbackArray[index]\n    const value = await callback()\n    values.push(value)\n    await visit(index + 1)\n  }\n  await visit(0)\n  return values\n}\n","import { mkdir, lstat } from \"fs\"\nimport { promiseSequence } from \"./promiseSequence.js\"\n\n// nodejs 10.12.0 https://nodejs.org/api/fs.html#fs_fs_mkdir_path_options_callback\n// export const ensureFolderLeadingTo = (file) => {\n//   return new Promise((resolve, reject) => {\n//     fs.mkdir(path.dirname(file), { resurcive: true }, (error) => {\n//       if (error) {\n//         if (error.code === \"EEXIST\") {\n//           resolve()\n//           return\n//         }\n//         reject(error)\n//         return\n//       }\n//       resolve()\n//     })\n//   })\n// }\n\nexport const fileMakeDirname = (file) => {\n  const fileNormalized = normalizeSeparation(file)\n  // remove first / in case path starts with / (linux)\n  // because it would create a \"\" entry in folders array below\n  // tryig to create a folder at \"\"\n  const fileStartsWithSlash = fileNormalized[0] === \"/\"\n  const pathname = fileStartsWithSlash ? fileNormalized.slice(1) : fileNormalized\n  const folders = pathname.split(\"/\")\n  folders.pop()\n\n  return promiseSequence(\n    folders.map((_, index) => {\n      return () => {\n        const folder = folders.slice(0, index + 1).join(\"/\")\n        return folderMake(`${fileStartsWithSlash ? \"/\" : \"\"}${folder}`)\n      }\n    }),\n  )\n}\n\nconst normalizeSeparation = (file) => file.replace(/\\\\/g, \"/\")\n\nconst folderMake = (folder) =>\n  new Promise((resolve, reject) => {\n    mkdir(folder, async (error) => {\n      if (error) {\n        // au cas ou deux script essayent de crée un dossier peu importe qui y arrive c'est ok\n        if (error.code === \"EEXIST\") {\n          const stat = await fileLastStat(folder)\n          if (stat.isDirectory()) {\n            resolve()\n          } else {\n            reject({ status: 500, reason: \"expect a directory\" })\n          }\n        } else {\n          reject({ status: 500, reason: error.code })\n        }\n      } else {\n        resolve()\n      }\n    })\n  })\n\nconst fileLastStat = (path) =>\n  new Promise((resolve, reject) => {\n    lstat(path, (error, lstat) => {\n      if (error) {\n        reject({ status: 500, reason: error.code })\n      } else {\n        resolve(lstat)\n      }\n    })\n  })\n","import { promisify } from \"util\"\nimport { copyFile } from \"fs\"\nimport { fileMakeDirname } from \"./fileMakeDirname.js\"\n\nconst copyFilePromisified = promisify(copyFile)\n\nexport const fileCopy = async (source, destination) => {\n  await fileMakeDirname(destination)\n  return copyFilePromisified(source, destination)\n}\n","import { promisify } from \"util\"\nimport { readFile } from \"fs\"\n\nconst readFilePromisified = promisify(readFile)\n\nexport const fileRead = async (file) => {\n  const buffer = await readFilePromisified(file)\n  return buffer.toString()\n}\n","import { promisify } from \"util\"\nimport { stat } from \"fs\"\n\nconst statPromisified = promisify(stat)\n\nexport const fileStat = async (file) => {\n  const stat = await statPromisified(file)\n  return stat\n}\n","import { promisify } from \"util\"\nimport { lstat } from \"fs\"\n\nconst lstatPromisified = promisify(lstat)\n\nexport const fileLStat = async (file) => {\n  const lstat = await lstatPromisified(file)\n  return lstat\n}\n","import { promisify } from \"util\"\nimport { writeFile } from \"fs\"\nimport { fileMakeDirname } from \"./fileMakeDirname.js\"\n\nconst writeFilePromisified = promisify(writeFile)\n\nexport const fileWrite = async (file, content) => {\n  await fileMakeDirname(file)\n  return writeFilePromisified(file, content)\n}\n","import { promisify } from \"util\"\nimport { readdir } from \"fs\"\n\nconst readdirPromisified = promisify(readdir)\n\nexport const folderRead = async (folder) => {\n  const ressources = await readdirPromisified(folder)\n  return ressources\n}\n","const rimraf = import.meta.require(\"rimraf\")\n\nexport const removeDirectory = (path) =>\n  new Promise((resolve, reject) =>\n    rimraf(path, (error) => {\n      if (error) reject(error)\n      else resolve()\n    }),\n  )\n","import { readFileSync } from \"fs\"\nimport { fileRead, fileWrite } from \"@dmail/helper\"\nimport { resolveFileUrl, fileUrlToPath } from \"../urlHelpers.js\"\nimport { jsenvCoreDirectoryUrl } from \"../jsenvCoreDirectoryUrl/jsenvCoreDirectoryUrl.js\"\nimport { removeDirectory } from \"./removeDirectory.js\"\n\nexport const cleanCompileCacheDirectoryIfObsolete = async ({\n  cacheDirectoryUrl,\n  forceObsolete = false,\n  cacheMeta,\n  cleanCallback = () => {},\n}) => {\n  const jsenvCorePackageFileUrl = resolveFileUrl(\"./package.json\", jsenvCoreDirectoryUrl)\n  const jsenvCorePackageFilePath = fileUrlToPath(jsenvCorePackageFileUrl)\n  const jsenvCorePackageVersion = readPackage(jsenvCorePackageFilePath).version\n\n  const compileCacheDirectoryMeta = {\n    ...cacheMeta,\n    jsenvCorePackageVersion,\n  }\n\n  const cacheMetaFileUrl = resolveFileUrl(\"./meta.json\", cacheDirectoryUrl)\n  const cacheMetaFilePath = fileUrlToPath(cacheMetaFileUrl)\n  const cacheDirectoryPath = fileUrlToPath(cacheDirectoryUrl)\n\n  if (forceObsolete) {\n    cleanCallback(cacheDirectoryPath)\n    await removeDirectory(cacheDirectoryPath)\n  } else {\n    let previousCompileCacheDirectoryMeta\n    try {\n      const source = await fileRead(cacheMetaFilePath)\n      previousCompileCacheDirectoryMeta = JSON.parse(source)\n    } catch (e) {\n      if (e && e.code === \"ENOENT\") {\n        previousCompileCacheDirectoryMeta = null\n      } else {\n        throw e\n      }\n    }\n\n    if (\n      JSON.stringify(previousCompileCacheDirectoryMeta) !==\n      JSON.stringify(compileCacheDirectoryMeta)\n    ) {\n      cleanCallback(cacheDirectoryPath)\n      await removeDirectory(cacheDirectoryPath)\n    }\n  }\n\n  await fileWrite(cacheMetaFilePath, JSON.stringify(compileCacheDirectoryMeta, null, \"  \"))\n}\n\nconst readPackage = (packageFilePath) => {\n  const buffer = readFileSync(packageFilePath)\n  const string = String(buffer)\n  const packageObject = JSON.parse(string)\n  return packageObject\n}\n","export const compilationResultToTransformResult = ({ compiledSource, assets, assetsContent }) => {\n  const code = compiledSource\n\n  const sourceMapAssetIndex = assets.findIndex((asset) => asset.endsWith(\".map\"))\n  const map =\n    sourceMapAssetIndex === -1 ? undefined : JSON.parse(assetsContent[sourceMapAssetIndex])\n\n  return { code, map }\n}\n","export const valueToVersion = (value) => {\n  if (typeof value === \"number\") {\n    return numberToVersion(value)\n  }\n\n  if (typeof value === \"string\") {\n    return stringToVersion(value)\n  }\n\n  throw new TypeError(createValueErrorMessage({ version: value }))\n}\n\nconst numberToVersion = (number) => {\n  return {\n    major: number,\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst stringToVersion = (string) => {\n  if (string.indexOf(\".\") > -1) {\n    const parts = string.split(\".\")\n    return {\n      major: Number(parts[0]),\n      minor: parts[1] ? Number(parts[1]) : 0,\n      patch: parts[2] ? Number(parts[2]) : 0,\n    }\n  }\n\n  if (isNaN(string)) {\n    return {\n      major: 0,\n      minor: 0,\n      patch: 0,\n    }\n  }\n\n  return {\n    major: Number(string),\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst createValueErrorMessage = ({ value }) => `value must be a number or a string.\nvalue: ${value}`\n","import { valueToVersion } from \"./valueToVersion.js\"\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = valueToVersion(versionA)\n  const semanticVersionB = valueToVersion(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n","import { versionCompare } from \"./versionCompare.js\"\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n","import { versionIsBelow } from \"./versionIsBelow.js\"\n\nexport const findHighestVersion = (...values) => {\n  if (values.length === 0) throw new Error(`missing argument`)\n\n  return values.reduce((highestVersion, value) => {\n    if (versionIsBelow(highestVersion, value)) {\n      return value\n    }\n    return highestVersion\n  })\n}\n","import { babelPluginCompatMap as babelPluginCompatMapFallback } from \"../babelPluginCompatMap/babelPluginCompatMap.js\"\nimport { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const computeBabelPluginMapForPlatform = ({\n  babelPluginMap,\n  babelPluginCompatMap = babelPluginCompatMapFallback,\n  platformName,\n  platformVersion,\n}) => {\n  if (typeof babelPluginMap !== \"object\") {\n    throw new TypeError(`babelPluginMap must be an object, got ${babelPluginMap}`)\n  }\n  if (typeof babelPluginCompatMap !== \"object\") {\n    throw new TypeError(`babelPluginCompatMap must be an object, got ${babelPluginCompatMap}`)\n  }\n  if (typeof platformName !== \"string\") {\n    throw new TypeError(`platformName must be a string, got ${platformName}`)\n  }\n  if (typeof platformVersion !== \"string\") {\n    throw new TypeError(`platformVersion must be a string, got ${platformVersion}`)\n  }\n\n  const babelPluginMapForPlatform = {}\n  Object.keys(babelPluginMap).forEach((key) => {\n    const compatible = platformIsCompatibleWithFeature({\n      platformName,\n      platformVersion,\n      platformCompatMap: key in babelPluginCompatMap ? babelPluginCompatMap[key] : {},\n    })\n    if (!compatible) {\n      babelPluginMapForPlatform[key] = babelPluginMap[key]\n    }\n  })\n  return babelPluginMapForPlatform\n}\n\nconst platformIsCompatibleWithFeature = ({ platformName, platformVersion, platformCompatMap }) => {\n  const platformCompatibleVersion = computePlatformCompatibleVersion({\n    platformCompatMap,\n    platformName,\n  })\n  const highestVersion = findHighestVersion(platformVersion, platformCompatibleVersion)\n  return highestVersion === platformVersion\n}\n\nconst computePlatformCompatibleVersion = ({ platformCompatMap, platformName }) => {\n  return platformName in platformCompatMap ? platformCompatMap[platformName] : \"Infinity\"\n}\n","export const BEST_ID = \"best\"\n\nexport const OTHERWISE_ID = \"otherwise\"\n","import { OTHERWISE_ID } from \"../GROUP_ID.js\"\n\nexport const computeCompileIdFromGroupId = ({ groupId, groupMap }) => {\n  if (typeof groupId === \"undefined\") {\n    if (OTHERWISE_ID in groupMap) return OTHERWISE_ID\n\n    const keys = Object.keys(groupMap)\n    if (keys.length === 1) return keys[0]\n\n    throw new Error(createUnexpectedGroupIdMessage({ groupMap }))\n  }\n\n  if (groupId in groupMap === false)\n    throw new Error(createUnexpectedGroupIdMessage({ groupId, groupMap }))\n\n  return groupId\n}\n\nconst createUnexpectedGroupIdMessage = ({ compileId, groupMap }) => `unexpected groupId.\n--- expected compiled id ----\n${Object.keys(groupMap)}\n--- received compile id ---\n${compileId}`\n","// we could reuse this to get a list of polyfill\n// using https://github.com/babel/babel/blob/master/packages/babel-preset-env/data/built-ins.json#L1\n// adding a featureNameArray to every group\n// and according to that featureNameArray, add these polyfill\n// to the generated bundle\n\nexport const jsenvPluginCompatMap = {}\n","import { jsenvPluginCompatMap as jsenvPluginCompatMapFallback } from \"../jsenvPluginCompatMap/jsenvPluginCompatMap.js\"\nimport { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const computeJsenvPluginMapForPlatform = ({\n  jsenvPluginMap,\n  jsenvPluginCompatMap = jsenvPluginCompatMapFallback,\n  platformName,\n  platformVersion,\n}) => {\n  if (typeof jsenvPluginMap !== \"object\") {\n    throw new TypeError(`jsenvPluginMap must be a object, got ${jsenvPluginMap}`)\n  }\n  if (typeof jsenvPluginCompatMap !== \"object\") {\n    throw new TypeError(`jsenvPluginCompatMap must be a string, got ${jsenvPluginCompatMap}`)\n  }\n  if (typeof platformName !== \"string\") {\n    throw new TypeError(`platformName must be a string, got ${platformName}`)\n  }\n  if (typeof platformVersion !== \"string\") {\n    throw new TypeError(`platformVersion must be a string, got ${platformVersion}`)\n  }\n\n  const jsenvPluginMapForPlatform = {}\n  Object.keys(jsenvPluginMap).forEach((key) => {\n    const compatible = platformIsCompatibleWithFeature({\n      platformName,\n      platformVersion,\n      featureCompat: key in jsenvPluginCompatMap ? jsenvPluginCompatMap[key] : {},\n    })\n    if (!compatible) {\n      jsenvPluginMapForPlatform[key] = jsenvPluginMap[key]\n    }\n  })\n  return jsenvPluginMapForPlatform\n}\n\nconst platformIsCompatibleWithFeature = ({ platformName, platformVersion, featureCompat }) => {\n  const platformCompatibleVersion = computePlatformCompatibleVersion({\n    featureCompat,\n    platformName,\n  })\n  const highestVersion = findHighestVersion(platformVersion, platformCompatibleVersion)\n  return highestVersion === platformVersion\n}\n\nconst computePlatformCompatibleVersion = ({ featureCompat, platformName }) => {\n  return platformName in featureCompat ? featureCompat[platformName] : \"Infinity\"\n}\n","export const findAsyncPluginNameInBabelPluginMap = (babelPluginMap) => {\n  if (\"transform-async-to-promises\" in babelPluginMap) {\n    return \"transform-async-to-promises\"\n  }\n  if (\"transform-async-to-generator\" in babelPluginMap) {\n    return \"transform-async-to-generator\"\n  }\n  return \"\"\n}\n","const { buildExternalHelpers } = import.meta.require(\"@babel/core\")\nconst { getDependencies } = import.meta.require(\"@babel/helpers\")\n\nexport const generateBabelHelper = (name) => {\n  const helpersToBuild = [name]\n\n  /**\n   * we have to ensure we generate helper dependencies too because\n   * some helper contains import like\n   * import \"setPrototypeOf\"\n   * and babel deletes them somehow during buildExternalHelpers\n   *\n   * To fix that we could for instance extract babel helpers into\n   * actual files like we already do for global-this\n   * or regenerator-runtime\n   *\n   * But it means every babel update means updating thoose files too.\n   * for now let's keep it like that\n   */\n\n  const ensureDependencies = (name) => {\n    const dependencies = getDependencies(name)\n    dependencies.forEach((name) => {\n      if (helpersToBuild.includes(name)) {\n        return\n      }\n      helpersToBuild.push(name)\n      ensureDependencies(name)\n    })\n  }\n  ensureDependencies(name)\n\n  return buildExternalHelpers(helpersToBuild, \"module\")\n}\n","export const groupHaveSameRequirements = (leftGroup, rightGroup) => {\n  return (\n    leftGroup.babelPluginRequiredNameArray.join(\"\") ===\n      rightGroup.babelPluginRequiredNameArray.join(\"\") &&\n    leftGroup.jsenvPluginRequiredNameArray.join(\"\") ===\n      rightGroup.jsenvPluginRequiredNameArray.join(\"\")\n  )\n}\n","import { babelPluginCompatMap as babelPluginCompatMapFallback } from \"../babelPluginCompatMap/babelPluginCompatMap.js\"\nimport { jsenvPluginCompatMap as jsenvPluginCompatMapFallback } from \"../jsenvPluginCompatMap/jsenvPluginCompatMap.js\"\nimport { computeBabelPluginMapForPlatform } from \"../computeBabelPluginMapForPlatform/computeBabelPluginMapForPlatform.js\"\nimport { computeJsenvPluginMapForPlatform } from \"../computeJsenvPluginMapForPlatform/computeJsenvPluginMapForPlatform.js\"\nimport { findHighestVersion, versionCompare } from \"../semantic-versioning/index.js\"\nimport { groupHaveSameRequirements } from \"./groupHaveSameRequirements.js\"\n\nexport const generatePlatformGroupArray = ({\n  babelPluginMap,\n  jsenvPluginMap,\n  babelPluginCompatMap = babelPluginCompatMapFallback,\n  jsenvPluginCompatMap = jsenvPluginCompatMapFallback,\n  platformName,\n}) => {\n  const versionArray = []\n  Object.keys(babelPluginMap).forEach((babelPluginKey) => {\n    if (babelPluginKey in babelPluginCompatMap) {\n      const babelPluginCompat = babelPluginCompatMap[babelPluginKey]\n      if (platformName in babelPluginCompat) {\n        const version = String(babelPluginCompat[platformName])\n        if (!versionArray.includes(version)) {\n          versionArray.push(version)\n        }\n      }\n    }\n  })\n  Object.keys(jsenvPluginMap).forEach((jsenvPluginKey) => {\n    if (jsenvPluginKey in jsenvPluginCompatMap) {\n      const jsenvPluginCompat = jsenvPluginCompatMap[jsenvPluginKey]\n      if (platformName in jsenvPluginCompat) {\n        const version = String(jsenvPluginCompat[platformName])\n        if (!versionArray.includes(version)) {\n          versionArray.push(version)\n        }\n      }\n    }\n  })\n  versionArray.push(\"0.0.0\")\n  versionArray.sort(versionCompare)\n\n  const platformGroupArray = []\n\n  versionArray.forEach((version) => {\n    const babelPluginMapForPlatform = computeBabelPluginMapForPlatform({\n      babelPluginMap,\n      babelPluginCompatMap,\n      platformName,\n      platformVersion: version,\n    })\n    const babelPluginRequiredNameArray = Object.keys(babelPluginMap)\n      .filter((babelPluginKey) => babelPluginKey in babelPluginMapForPlatform)\n      .sort()\n    const jsenvPluginMapForPlatform = computeJsenvPluginMapForPlatform({\n      jsenvPluginMap,\n      jsenvPluginCompatMap,\n      platformName,\n      platformVersion: version,\n    })\n    const jsenvPluginRequiredNameArray = Object.keys(jsenvPluginMap)\n      .filter((jsenvPluginKey) => jsenvPluginKey in jsenvPluginMapForPlatform)\n      .sort()\n\n    const group = {\n      babelPluginRequiredNameArray,\n      jsenvPluginRequiredNameArray,\n      platformCompatMap: {\n        [platformName]: version,\n      },\n    }\n\n    const groupWithSameRequirements = platformGroupArray.find((platformGroupCandidate) =>\n      groupHaveSameRequirements(platformGroupCandidate, group),\n    )\n\n    if (groupWithSameRequirements) {\n      groupWithSameRequirements.platformCompatMap[platformName] = findHighestVersion(\n        groupWithSameRequirements.platformCompatMap[platformName],\n        version,\n      )\n    } else {\n      platformGroupArray.push(group)\n    }\n  })\n\n  return platformGroupArray\n}\n","import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const composePlatformCompatMap = (platformCompatMap, secondPlatformCompatMap) => {\n  return objectComposeValue(\n    normalizePlatformCompatMapVersions(platformCompatMap),\n    normalizePlatformCompatMapVersions(secondPlatformCompatMap),\n    (version, secondVersion) => findHighestVersion(version, secondVersion),\n  )\n}\n\nconst normalizePlatformCompatMapVersions = (platformCompatibility) => {\n  return objectMapValue(platformCompatibility, (version) => String(version))\n}\n\nconst objectMapValue = (object, callback) => {\n  const mapped = {}\n\n  Object.keys(object).forEach((key) => {\n    mapped[key] = callback(object[key], key, object)\n  })\n\n  return mapped\n}\n\nconst objectComposeValue = (previous, object, callback) => {\n  const composed = { ...previous }\n\n  Object.keys(object).forEach((key) => {\n    composed[key] = key in composed ? callback(composed[key], object[key]) : object[key]\n  })\n\n  return composed\n}\n","import { composePlatformCompatMap } from \"./composePlatformCompatMap.js\"\nimport { groupHaveSameRequirements } from \"./groupHaveSameRequirements.js\"\n\nexport const composeGroupArray = (...arrayOfGroupArray) => {\n  return arrayOfGroupArray.reduce(groupArrayReducer, [])\n}\n\nconst groupArrayReducer = (previousGroupArray, groupArray) => {\n  const reducedGroupArray = []\n\n  previousGroupArray.forEach((group) => {\n    reducedGroupArray.push(copyGroup(group))\n  })\n\n  groupArray.forEach((group) => {\n    const groupWithSameRequirements = reducedGroupArray.find((existingGroupCandidate) =>\n      groupHaveSameRequirements(group, existingGroupCandidate),\n    )\n    if (groupWithSameRequirements) {\n      groupWithSameRequirements.platformCompatMap = composePlatformCompatMap(\n        groupWithSameRequirements.platformCompatMap,\n        group.platformCompatMap,\n      )\n    } else {\n      reducedGroupArray.push(copyGroup(group))\n    }\n  })\n\n  return reducedGroupArray\n}\n\nconst copyGroup = ({\n  babelPluginRequiredNameArray,\n  jsenvPluginRequiredNameArray,\n  platformCompatMap,\n}) => {\n  return {\n    babelPluginRequiredNameArray: babelPluginRequiredNameArray.slice(),\n    jsenvPluginRequiredNameArray: jsenvPluginRequiredNameArray.slice(),\n    platformCompatMap: { ...platformCompatMap },\n  }\n}\n","import { generatePlatformGroupArray } from \"./generatePlatformGroupArray.js\"\nimport { composeGroupArray } from \"./composeGroupArray.js\"\n\nexport const generateAllPlatformGroupArray = ({\n  babelPluginMap,\n  jsenvPluginMap,\n  babelPluginCompatMap,\n  jsenvPluginCompatMap,\n  platformNames,\n}) => {\n  const arrayOfGroupArray = platformNames.map((platformName) =>\n    generatePlatformGroupArray({\n      babelPluginMap,\n      jsenvPluginMap,\n      babelPluginCompatMap,\n      jsenvPluginCompatMap,\n      platformName,\n    }),\n  )\n  const groupArray = composeGroupArray(...arrayOfGroupArray)\n  return groupArray\n}\n","import { versionCompare, findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const platformCompatMapToScore = (platformCompatMap, platformScoreMap) => {\n  return Object.keys(platformCompatMap).reduce((previous, platformName) => {\n    const platformVersion = platformCompatMap[platformName]\n    return previous + platformToScore(platformName, platformVersion, platformScoreMap)\n  }, 0)\n}\n\nconst platformToScore = (platformName, platformVersion, platformScoreMap) => {\n  if (platformName in platformScoreMap === false) return platformScoreMap.other || 0\n\n  const versionUsageMap = platformScoreMap[platformName]\n  const versionArray = Object.keys(versionUsageMap)\n  if (versionArray.length === 0) return platformScoreMap.other || 0\n\n  const versionArrayAscending = versionArray.sort(versionCompare)\n  const highestVersion = versionArrayAscending[versionArray.length - 1]\n\n  if (findHighestVersion(platformVersion, highestVersion) === platformVersion)\n    return versionUsageMap[highestVersion]\n\n  const closestVersion = versionArrayAscending\n    .reverse()\n    .find((version) => findHighestVersion(platformVersion, version) === platformVersion)\n\n  if (!closestVersion) return platformScoreMap.other || 0\n\n  return versionUsageMap[closestVersion]\n}\n","/*\n\n# featureCompatMap legend\n\n        featureName\n             │\n{ ┌──────────┴────────────┐\n  \"transform-block-scoping\": {─┐\n    \"chrome\": \"10\",            │\n    \"safari\": \"3.0\",           platformCompatMap\n    \"firefox\": \"5.1\"           │\n}────┼─────────┼─────────────┘\n}      │         └─────┐\n  platformName  platformVersion\n\n# group legend\n\n{\n  \"best\": {\n    \"babelPluginRequiredNameArray\" : [\n      \"transform-block-scoping\",\n    ],\n    \"platformCompatMap\": {\n      \"chrome\": \"10\",\n      \"firefox\": \"6\"\n    }\n  }\n}\n\nTake chars below to update legends\n─│┌┐└┘├┤┴┬\n\n*/\n\nimport { generateAllPlatformGroupArray } from \"./generateAllPlatformGroupArray.js\"\nimport { platformCompatMapToScore } from \"./platformCompatMapToScore.js\"\nimport { OTHERWISE_ID, BEST_ID } from \"../GROUP_ID.js\"\n\nexport const generateGroupMap = ({\n  babelPluginMap,\n  // jsenv plugin are for later, for now, nothing is using them\n  jsenvPluginMap = {},\n  babelPluginCompatMap,\n  jsenvPluginCompatMap,\n  platformScoreMap,\n  groupCount = 1,\n  // pass this to true if you don't care if someone tries to run your code\n  // on a platform which is not inside platformScoreMap.\n  platformAlwaysInsidePlatformScoreMap = false,\n  // pass this to true if you think you will always be able to detect\n  // the platform or that if you fail to do so you don't care.\n  platformWillAlwaysBeKnown = false,\n}) => {\n  if (typeof babelPluginMap !== \"object\") {\n    throw new TypeError(`babelPluginMap must be an object, got ${babelPluginMap}`)\n  }\n  if (typeof jsenvPluginMap !== \"object\") {\n    throw new TypeError(`jsenvPluginMap must be an object, got ${jsenvPluginMap}`)\n  }\n  if (typeof platformScoreMap !== \"object\") {\n    throw new TypeError(`platformScoreMap must be an object, got ${platformScoreMap}`)\n  }\n  if (typeof groupCount < 1) {\n    throw new TypeError(`groupCount must be above 1, got ${groupCount}`)\n  }\n\n  const groupWithoutFeature = {\n    babelPluginRequiredNameArray: Object.keys(babelPluginMap),\n    jsenvPluginRequiredNameArray: Object.keys(jsenvPluginMap),\n    platformCompatMap: {},\n  }\n\n  // when we create one group and we cannot ensure\n  // code will be runned on a platform inside platformScoreMap\n  // then we return otherwise group to be safe\n  if (groupCount === 1 && !platformAlwaysInsidePlatformScoreMap) {\n    return {\n      [OTHERWISE_ID]: groupWithoutFeature,\n    }\n  }\n\n  const allPlatformGroupArray = generateAllPlatformGroupArray({\n    babelPluginMap,\n    babelPluginCompatMap,\n    jsenvPluginMap,\n    jsenvPluginCompatMap,\n    platformNames: arrayWithoutValue(Object.keys(platformScoreMap), \"other\"),\n  })\n\n  if (allPlatformGroupArray.length === 0) {\n    return {\n      [OTHERWISE_ID]: groupWithoutFeature,\n    }\n  }\n\n  const groupToScore = ({ platformCompatMap }) =>\n    platformCompatMapToScore(platformCompatMap, platformScoreMap)\n\n  const allPlatformGroupArraySortedByScore = allPlatformGroupArray.sort(\n    (a, b) => groupToScore(b) - groupToScore(a),\n  )\n\n  const length = allPlatformGroupArraySortedByScore.length\n\n  // if we arrive here and want a single group\n  // we take the worst group and consider it's our best group\n  // because it's the lowest platform we want to support\n  if (groupCount === 1) {\n    return {\n      [BEST_ID]: allPlatformGroupArraySortedByScore[length - 1],\n    }\n  }\n\n  const addOtherwiseToBeSafe = !platformAlwaysInsidePlatformScoreMap || !platformWillAlwaysBeKnown\n\n  const lastGroupIndex = addOtherwiseToBeSafe ? groupCount - 1 : groupCount\n\n  const groupArray =\n    length + 1 > groupCount\n      ? allPlatformGroupArraySortedByScore.slice(0, lastGroupIndex)\n      : allPlatformGroupArraySortedByScore\n\n  const groupMap = {}\n  groupArray.forEach((group, index) => {\n    if (index === 0) {\n      groupMap[BEST_ID] = group\n    } else {\n      groupMap[`intermediate-${index + 1}`] = group\n    }\n  })\n  if (addOtherwiseToBeSafe) {\n    groupMap[OTHERWISE_ID] = groupWithoutFeature\n  }\n\n  return groupMap\n}\n\nconst arrayWithoutValue = (array, value) =>\n  array.filter((valueCandidate) => valueCandidate !== value)\n","export const LOG_LEVEL_OFF = \"off\"\n\nexport const LOG_LEVEL_DEBUG = \"debug\"\n\nexport const LOG_LEVEL_INFO = \"info\"\n\nexport const LOG_LEVEL_WARN = \"warn\"\n\nexport const LOG_LEVEL_ERROR = \"error\"\n","import {\n  LOG_LEVEL_DEBUG,\n  LOG_LEVEL_INFO,\n  LOG_LEVEL_WARN,\n  LOG_LEVEL_ERROR,\n  LOG_LEVEL_OFF,\n} from \"./LOG_LEVELS.js\"\n\nexport const createLogger = ({ logLevel = LOG_LEVEL_INFO } = {}) => {\n  if (logLevel === LOG_LEVEL_DEBUG) {\n    return {\n      debug,\n      info,\n      warn,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_INFO) {\n    return {\n      debug: debugDisabled,\n      info,\n      warn,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_WARN) {\n    return {\n      debug: debugDisabled,\n      info: infoDisabled,\n      warn,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_ERROR) {\n    return {\n      debug: debugDisabled,\n      info: infoDisabled,\n      warn: warnDisabled,\n      error,\n    }\n  }\n\n  if (logLevel === LOG_LEVEL_OFF) {\n    return {\n      debug: debugDisabled,\n      info: infoDisabled,\n      warn: warnDisabled,\n      error: errorDisabled,\n    }\n  }\n\n  throw new Error(createUnexpectedLogLevelMessage({ logLevel }))\n}\n\nconst createUnexpectedLogLevelMessage = ({ logLevel }) => `unexpected logLevel.\n--- logLevel ---\n${logLevel}\n--- allowed log levels ---\n${LOG_LEVEL_OFF}\n${LOG_LEVEL_ERROR}\n${LOG_LEVEL_WARN}\n${LOG_LEVEL_INFO}\n${LOG_LEVEL_DEBUG}\n`\n\nconst debug = console.debug\n\nconst debugDisabled = () => {}\n\nconst info = console.info\n\nconst infoDisabled = () => {}\n\nconst warn = console.warn\n\nconst warnDisabled = () => {}\n\nconst error = console.error\n\nconst errorDisabled = () => {}\n","import { resolveFileUrl, fileUrlToPath, resolveDirectoryUrl } from \"../urlHelpers.js\"\n\nexport const getAssetFilePath = ({ cacheDirectoryUrl, compileRelativePath, asset }) => {\n  const assetDirectoryUrl = resolveDirectoryUrl(\n    `${compileRelativePath}__asset__/`,\n    cacheDirectoryUrl,\n  )\n  const assetFileUrl = resolveFileUrl(asset, assetDirectoryUrl)\n  return fileUrlToPath(assetFileUrl)\n}\n\nexport const getCacheJsonFilePath = ({ cacheDirectoryUrl, compileRelativePath }) =>\n  getAssetFilePath({ cacheDirectoryUrl, compileRelativePath, asset: \"cache.json\" })\n\nexport const getCompiledFilePath = ({ cacheDirectoryUrl, compileRelativePath }) =>\n  fileUrlToPath(resolveFileUrl(compileRelativePath, cacheDirectoryUrl))\n\nexport const getSourceFilePath = ({ projectDirectoryUrl, sourceRelativePath }) =>\n  fileUrlToPath(resolveFileUrl(sourceRelativePath, projectDirectoryUrl))\n","import { fileRead } from \"@dmail/helper\"\nimport { getCacheJsonFilePath } from \"./locaters.js\"\n\nexport const readCache = async ({\n  cacheDirectoryUrl,\n  sourceRelativePath,\n  compileRelativePath,\n  logger,\n}) => {\n  const cacheJsonFilePath = getCacheJsonFilePath({\n    cacheDirectoryUrl,\n    compileRelativePath,\n  })\n\n  try {\n    const cacheJsonFileString = await fileRead(cacheJsonFilePath)\n    const cacheJsonObject = JSON.parse(cacheJsonFileString)\n    const sourceRelativePathInCache = cacheJsonObject.sourceRelativePath\n    if (sourceRelativePathInCache !== sourceRelativePath) {\n      logger.info(\n        createSourceRelativePathChangedMessage({\n          sourceRelativePathInCache,\n          sourceRelativePath,\n          cacheJsonFilePath,\n        }),\n      )\n      return null\n    }\n    return cacheJsonObject\n  } catch (error) {\n    if (error && error.code === \"ENOENT\") {\n      return null\n    }\n\n    if (error && error.name === \"SyntaxError\") {\n      logger.error(createCacheSyntaxErrorMessage({ syntaxError: error, cacheJsonFilePath }))\n      return null\n    }\n\n    throw error\n  }\n}\n\nconst createSourceRelativePathChangedMessage = ({\n  sourceRelativePathInCache,\n  sourceRelativePath,\n  cacheJsonFilePath,\n}) => `cache.sourceRelativePath changed\n--- sourceRelativePath in cache ---\n${sourceRelativePathInCache}\n--- sourceRelativePath ---\n${sourceRelativePath}\n--- cache.json path ---\n${cacheJsonFilePath}`\n\nconst createCacheSyntaxErrorMessage = ({ syntaxError, cacheJsonFilePath }) => `cache syntax error\n--- syntax error stack ---\n${syntaxError.stack}\n--- cache.json path ---\n${cacheJsonFilePath}`\n","export const dateToSecondsPrecision = (date) => {\n  const dateWithSecondsPrecision = new Date(date)\n  dateWithSecondsPrecision.setMilliseconds(0)\n  return dateWithSecondsPrecision\n}\n","import { createHash } from \"crypto\"\n\nconst EMPTY_ID = '\"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk\"'\n\nexport const bufferToEtag = (buffer) => {\n  if (!Buffer.isBuffer(buffer)) {\n    throw new TypeError(`buffer expected, got ${buffer}`)\n  }\n\n  if (buffer.length === 0) {\n    return EMPTY_ID\n  }\n\n  const hash = createHash(\"sha1\")\n  hash.update(buffer, \"utf8\")\n\n  const hashBase64String = hash.digest(\"base64\")\n  const hashBase64StringSubset = hashBase64String.slice(0, 27)\n  const length = buffer.length\n\n  return `\"${length.toString(16)}-${hashBase64StringSubset}\"`\n}\n","import { fileRead, fileStat } from \"@dmail/helper\"\nimport { fileUrlToPath } from \"../urlHelpers.js\"\nimport { dateToSecondsPrecision } from \"./dateToSecondsPrecision.js\"\nimport { getSourceFilePath, getCompiledFilePath, getAssetFilePath } from \"./locaters.js\"\nimport { bufferToEtag } from \"./bufferToEtag.js\"\n\nexport const validateCache = async ({\n  projectDirectoryUrl,\n  cacheDirectoryUrl,\n  compileRelativePath,\n  cache,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  logger,\n}) => {\n  const compiledFileValidation = await validateCompiledFile({\n    cacheDirectoryUrl,\n    compileRelativePath,\n    ifEtagMatch,\n    ifModifiedSinceDate,\n    logger,\n  })\n  if (!compiledFileValidation.valid) return compiledFileValidation\n\n  const [sourcesValidations, assetValidations] = await Promise.all([\n    validateSources({\n      logger,\n      projectDirectoryUrl,\n      cache,\n    }),\n    validateAssets({\n      logger,\n      cacheDirectoryUrl,\n      compileRelativePath,\n      cache,\n    }),\n  ])\n\n  const invalidSourceValidation = sourcesValidations.find(({ valid }) => !valid)\n  if (invalidSourceValidation) return invalidSourceValidation\n\n  const invalidAssetValidation = assetValidations.find(({ valid }) => !valid)\n  if (invalidAssetValidation) return invalidAssetValidation\n\n  const compiledSource = compiledFileValidation.data.compiledSource\n  const sourcesContent = sourcesValidations.map(({ data }) => data.sourceContent)\n  const assetsContent = assetValidations.find(({ data }) => data.assetContent)\n\n  return {\n    valid: true,\n    data: {\n      compiledSource,\n      sourcesContent,\n      assetsContent,\n    },\n  }\n}\n\nconst validateCompiledFile = async ({\n  cacheDirectoryUrl,\n  compileRelativePath,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  logger,\n}) => {\n  const compiledFilePath = getCompiledFilePath({\n    cacheDirectoryUrl,\n    compileRelativePath,\n  })\n\n  try {\n    const compiledSource = await fileRead(compiledFilePath)\n\n    if (ifEtagMatch) {\n      const compiledEtag = bufferToEtag(Buffer.from(compiledSource))\n      if (ifEtagMatch !== compiledEtag) {\n        logger.info(`etag changed for ${compiledFilePath}`)\n        return {\n          code: \"COMPILED_FILE_ETAG_MISMATCH\",\n          valid: false,\n          data: { compiledSource, compiledEtag },\n        }\n      }\n    }\n\n    if (ifModifiedSinceDate) {\n      const compiledMtime = await fileStat(compiledFilePath)\n      if (ifModifiedSinceDate < dateToSecondsPrecision(compiledMtime)) {\n        logger.info(`mtime changed for ${compiledFilePath}`)\n        return {\n          code: \"COMPILED_FILE_MTIME_OUTDATED\",\n          valid: false,\n          data: { compiledSource, compiledMtime },\n        }\n      }\n    }\n\n    return {\n      valid: true,\n      data: { compiledSource },\n    }\n  } catch (error) {\n    if (error && error.code === \"ENOENT\") {\n      return {\n        code: \"COMPILED_FILE_NOT_FOUND\",\n        valid: false,\n        data: { compiledFilePath },\n      }\n    }\n    return Promise.reject(error)\n  }\n}\n\nconst validateSources = ({ logger, projectDirectoryUrl, cache }) =>\n  Promise.all(\n    cache.sources.map((source, index) =>\n      validateSource({\n        logger,\n        projectDirectoryUrl,\n        source,\n        eTag: cache.sourcesEtag[index],\n      }),\n    ),\n  )\n\nconst validateSource = async ({ logger, projectDirectoryUrl, source, eTag }) => {\n  const sourceFileUrl = getSourceFilePath({ sourceRelativePath: source, projectDirectoryUrl })\n  const sourceFilePath = fileUrlToPath(sourceFileUrl)\n\n  try {\n    const sourceContent = await fileRead(sourceFilePath)\n    const sourceETag = bufferToEtag(Buffer.from(sourceContent))\n\n    if (sourceETag !== eTag) {\n      logger.info(`etag changed for ${sourceFilePath}`)\n      return {\n        code: \"SOURCE_ETAG_MISMATCH\",\n        valid: false,\n        data: { source, sourceFilePath, sourceContent },\n      }\n    }\n\n    return {\n      valid: true,\n      data: { sourceContent },\n    }\n  } catch (e) {\n    if (e && e.code === \"ENOENT\") {\n      // TODO: decide if it should invalidate cache or not\n      // I think if the source cannot be found it does not invalidate the cache\n      // it means something is missing to absolutely sure the cache is valid\n      // but does not necessarily means the cache is invalid\n      // but if we allow source file not found\n      // it means we must remove sources from the list of sources\n      // or at least consider as normal that it's missing\n      // in that case, inside updateCache we must not search for sources that\n      // are missing, nor put their etag\n      // or we could return sourceContent: '', and the etag would be empty\n      logger.info(`source not found at ${sourceFilePath}`)\n      return {\n        code: \"SOURCE_NOT_FOUND\",\n        valid: true,\n        data: { source, sourceFilePath, sourceContent: \"\" },\n      }\n    }\n    throw e\n  }\n}\n\nconst validateAssets = ({ logger, cacheDirectoryUrl, compileRelativePath, cache }) =>\n  Promise.all(\n    cache.assets.map((asset, index) =>\n      validateAsset({\n        logger,\n        cacheDirectoryUrl,\n        compileRelativePath,\n        asset,\n        eTag: cache.assetsEtag[index],\n      }),\n    ),\n  )\n\nconst validateAsset = async ({ logger, cacheDirectoryUrl, compileRelativePath, asset, eTag }) => {\n  const assetFilePath = getAssetFilePath({\n    cacheDirectoryUrl,\n    compileRelativePath,\n    asset,\n  })\n\n  try {\n    const assetContent = await fileRead(assetFilePath)\n    const assetContentETag = bufferToEtag(Buffer.from(assetContent))\n\n    if (eTag !== assetContentETag) {\n      logger.info(`etag changed for ${assetFilePath}`)\n      return {\n        code: \"ASSET_ETAG_MISMATCH\",\n        valid: false,\n        data: { asset, assetFilePath, assetContent, assetContentETag },\n      }\n    }\n\n    return {\n      valid: true,\n      data: { assetContent, assetContentETag },\n    }\n  } catch (error) {\n    if (error && error.code === \"ENOENT\") {\n      logger.info(`asset not found at ${assetFilePath}`)\n      return {\n        code: \"ASSET_FILE_NOT_FOUND\",\n        valid: false,\n        data: { asset, assetFilePath },\n      }\n    }\n    return Promise.reject(error)\n  }\n}\n","import { fileWrite } from \"@dmail/helper\"\nimport { getCacheJsonFilePath, getAssetFilePath, getCompiledFilePath } from \"./locaters.js\"\nimport { bufferToEtag } from \"./bufferToEtag.js\"\n\nexport const updateCache = ({\n  cacheDirectoryUrl,\n  sourceRelativePath,\n  compileRelativePath,\n  cacheHitTracking,\n  cache,\n  compileResult,\n  compileResultStatus,\n  logger,\n}) => {\n  const isNew = compileResultStatus === \"created\"\n  const isUpdated = compileResultStatus === \"updated\"\n  const isCached = compileResultStatus === \"cached\"\n  const {\n    compiledSource,\n    contentType,\n    sources,\n    sourcesContent,\n    assets,\n    assetsContent,\n  } = compileResult\n  const promises = []\n\n  if (isNew || isUpdated) {\n    const { writeCompiledSourceFile = true, writeAssetsFile = true } = compileResult\n    const compiledFilePath = getCompiledFilePath({\n      cacheDirectoryUrl,\n      compileRelativePath,\n    })\n\n    if (writeCompiledSourceFile) {\n      logger.info(`write file cache at ${compiledFilePath}`)\n      promises.push(fileWrite(compiledFilePath, compiledSource))\n    }\n\n    if (writeAssetsFile) {\n      promises.push(\n        ...assets.map((asset, index) => {\n          const assetFilePath = getAssetFilePath({\n            cacheDirectoryUrl,\n            compileRelativePath,\n            asset,\n          })\n\n          logger.info(`write asset cache at ${assetFilePath}`)\n          return fileWrite(assetFilePath, assetsContent[index])\n        }),\n      )\n    }\n  }\n\n  if (isNew || isUpdated || (isCached && cacheHitTracking)) {\n    if (isNew) {\n      cache = {\n        sourceRelativePath,\n        contentType,\n        sources,\n        sourcesEtag: sourcesContent.map((sourceContent) =>\n          bufferToEtag(Buffer.from(sourceContent)),\n        ),\n        assets,\n        assetsEtag: assetsContent.map((assetContent) => bufferToEtag(Buffer.from(assetContent))),\n        createdMs: Number(Date.now()),\n        lastModifiedMs: Number(Date.now()),\n        ...(cacheHitTracking\n          ? {\n              matchCount: 1,\n              lastMatchMs: Number(Date.now()),\n            }\n          : {}),\n      }\n    } else if (isUpdated) {\n      cache = {\n        ...cache,\n        sources,\n        sourcesEtag: sourcesContent.map((sourceContent) =>\n          bufferToEtag(Buffer.from(sourceContent)),\n        ),\n        assets,\n        assetsEtag: assetsContent.map((assetContent) => bufferToEtag(Buffer.from(assetContent))),\n        lastModifiedMs: Number(Date.now()),\n        ...(cacheHitTracking\n          ? {\n              matchCount: cache.matchCount + 1,\n              lastMatchMs: Number(Date.now()),\n            }\n          : {}),\n      }\n    } else {\n      cache = {\n        ...cache,\n        ...(cacheHitTracking\n          ? {\n              matchCount: cache.matchCount + 1,\n              lastMatchMs: Number(Date.now()),\n            }\n          : {}),\n      }\n    }\n\n    const cacheJsonFilePath = getCacheJsonFilePath({\n      cacheDirectoryUrl,\n      compileRelativePath,\n    })\n\n    logger.info(`write cache at ${cacheJsonFilePath}`)\n    promises.push(fileWrite(cacheJsonFilePath, JSON.stringify(cache, null, \"  \")))\n  }\n\n  return Promise.all(promises)\n}\n","import { arrayWithoutValue } from \"@dmail/helper\"\n\nexport const createLockRegistry = () => {\n  let lockArray = []\n  const lockForRessource = async (ressource) => {\n    const currentLock = lockArray.find((lock) => lock.ressource === ressource)\n    let unlockResolve\n    const unlocked = new Promise((resolve) => {\n      unlockResolve = resolve\n    })\n    const lock = {\n      ressource,\n      unlocked,\n    }\n    lockArray = [...lockArray, lock]\n\n    if (currentLock) await currentLock.unlocked\n\n    const unlock = () => {\n      lockArray = arrayWithoutValue(lockArray, lock)\n      unlockResolve()\n    }\n    return unlock\n  }\n  return { lockForRessource }\n}\n","import { fileMakeDirname } from \"@dmail/helper\"\nimport { createLogger } from \"@jsenv/logger\"\nimport { readCache } from \"./readCache.js\"\nimport { validateCache } from \"./validateCache.js\"\nimport { updateCache } from \"./updateCache.js\"\nimport { getCacheJsonFilePath, getSourceFilePath, getCompiledFilePath } from \"./locaters.js\"\nimport { createLockRegistry } from \"./createLockRegistry.js\"\n\nconst { lockForRessource } = createLockRegistry()\n\nconst lockfile = import.meta.require(\"proper-lockfile\")\n\nexport const getOrGenerateCompiledFile = async ({\n  projectDirectoryUrl,\n  cacheDirectoryUrl,\n  sourceRelativePath,\n  compileRelativePath = sourceRelativePath,\n  compile,\n  cacheIgnored = false,\n  cacheHitTracking = false,\n  cacheInterProcessLocking = false,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  logLevel,\n}) => {\n  if (typeof projectDirectoryUrl !== \"string\") {\n    throw new TypeError(`projectDirectoryUrl must be a string, got ${projectDirectoryUrl}`)\n  }\n  if (typeof cacheDirectoryUrl !== \"string\") {\n    throw new TypeError(`cacheDirectoryUrl must be a string, got ${cacheDirectoryUrl}`)\n  }\n  if (typeof sourceRelativePath !== \"string\") {\n    throw new TypeError(`sourceRelativePath must be a string, got ${sourceRelativePath}`)\n  }\n  if (typeof compileRelativePath !== \"string\") {\n    throw new TypeError(`compileRelativePath must be a string, got ${compileRelativePath}`)\n  }\n  if (typeof compile !== \"function\") {\n    throw new TypeError(`compile must be a function, got ${compile}`)\n  }\n\n  const logger = createLogger({ logLevel })\n\n  return startAsap(\n    async () => {\n      const { cache, compileResult, compileResultStatus } = await computeCompileReport({\n        projectDirectoryUrl,\n        cacheDirectoryUrl,\n        sourceRelativePath,\n        compileRelativePath,\n        compile,\n        ifEtagMatch,\n        ifModifiedSinceDate,\n        cacheIgnored,\n        logger,\n      })\n\n      // useless because missing source cannot invalidate cache\n      // see validateSource in validateCache.js\n      // some sources might not exists on the filesystem\n      // keep them in the sourcemap\n      // however do not mark them as dependency of the compiled version\n      // const sources = []\n      // const sourcesContent = []\n      // await Promise.all(\n      //   compileResult.sources.map(async (source, index) => {\n      //     const path = pathnameToOperatingSystemPath(`${projectPathname}${source}`)\n      //     const pathLeadsToFile = await new Promise((resolve) => {\n      //       stat(path, (error, stats) => {\n      //         if (error) {\n      //           resolve(false)\n      //         } else {\n      //           resolve(stats.isFile())\n      //         }\n      //       })\n      //     })\n      //     if (pathLeadsToFile) {\n      //       sources[index] = source\n      //       sourcesContent[index] = compileResult.sourcesContent[index]\n      //     }\n      //   }),\n      // )\n\n      // const compileResultWithoutMissingSource = {\n      //   ...compileResult,\n      //   sources: sources.filter((source) => source !== undefined),\n      //   sourcesContent: sourcesContent.filter((sourceContent) => sourceContent !== undefined),\n      // }\n\n      await updateCache({\n        cacheDirectoryUrl,\n        sourceRelativePath,\n        compileRelativePath,\n        cacheHitTracking,\n        cache,\n        compileResult,\n        compileResultStatus,\n        logger,\n      })\n\n      return { cache, compileResult, compileResultStatus }\n    },\n    {\n      cacheDirectoryUrl,\n      compileRelativePath,\n      cacheInterProcessLocking,\n      logger,\n    },\n  )\n}\n\nconst computeCompileReport = async ({\n  projectDirectoryUrl,\n  cacheDirectoryUrl,\n  sourceRelativePath,\n  compileRelativePath,\n  compile,\n  ifEtagMatch,\n  ifModifiedSinceDate,\n  cacheIgnored,\n  logger,\n}) => {\n  const cache = cacheIgnored\n    ? null\n    : await readCache({\n        cacheDirectoryUrl,\n        sourceRelativePath,\n        compileRelativePath,\n        logger,\n      })\n\n  if (!cache) {\n    const compileResult = await callCompile({\n      projectDirectoryUrl,\n      cacheDirectoryUrl,\n      sourceRelativePath,\n      compileRelativePath,\n      compile,\n      logger,\n    })\n\n    return {\n      cache: null,\n      compileResult,\n      compileResultStatus: \"created\",\n    }\n  }\n\n  const cacheValidation = await validateCache({\n    projectDirectoryUrl,\n    cacheDirectoryUrl,\n    compileRelativePath,\n    cache,\n    ifEtagMatch,\n    ifModifiedSinceDate,\n    logger,\n  })\n  if (!cacheValidation.valid) {\n    const compileResult = await callCompile({\n      projectDirectoryUrl,\n      cacheDirectoryUrl,\n      sourceRelativePath,\n      compileRelativePath,\n      compile,\n      logger,\n    })\n    return { cache, compileResult, compileResultStatus: \"updated\" }\n  }\n\n  const { contentType, sources, assets } = cache\n  const { compiledSource, sourcesContent, assetsContent } = cacheValidation.data\n  return {\n    cache,\n    compileResult: { contentType, compiledSource, sources, sourcesContent, assets, assetsContent },\n    compileResultStatus: \"cached\",\n  }\n}\n\nconst callCompile = async ({\n  projectDirectoryUrl,\n  cacheDirectoryUrl,\n  sourceRelativePath,\n  compileRelativePath,\n  compile,\n  logger,\n}) => {\n  const sourceFilePath = getSourceFilePath({\n    projectDirectoryUrl,\n    sourceRelativePath,\n  })\n  const compiledFilePath = getCompiledFilePath({\n    cacheDirectoryUrl,\n    compileRelativePath,\n  })\n  logger.debug(`compile ${sourceRelativePath}`)\n\n  const {\n    sources = [],\n    sourcesContent = [],\n    assets = [],\n    assetsContent = [],\n    contentType,\n    compiledSource,\n    ...rest\n  } = await compile({\n    sourceRelativePath,\n    compileRelativePath,\n    sourceFilePath,\n    compiledFilePath,\n  })\n\n  if (typeof contentType !== \"string\") {\n    throw new TypeError(`compile must return a contentType string, got ${contentType}`)\n  }\n  if (typeof compiledSource !== \"string\") {\n    throw new TypeError(`compile must return a compiledSource string, got ${compiledSource}`)\n  }\n\n  return {\n    contentType,\n    compiledSource,\n    sources,\n    sourcesContent,\n    assets,\n    assetsContent,\n    ...rest,\n  }\n}\n\nconst startAsap = async (\n  fn,\n  { logger, cacheDirectoryUrl, compileRelativePath, cacheInterProcessLocking },\n) => {\n  const cacheJsonFilePath = getCacheJsonFilePath({\n    cacheDirectoryUrl,\n    compileRelativePath,\n  })\n\n  logger.debug(`lock ${cacheJsonFilePath}`)\n  // in case this process try to concurrently access meta we wait for previous to be done\n  const unlockLocal = await lockForRessource(cacheJsonFilePath)\n\n  let unlockInterProcessLock = () => {}\n  if (cacheInterProcessLocking) {\n    // after that we use a lock pathnameRelative to be sure we don't conflict with other process\n    // trying to do the same (mapy happen when spawining multiple server for instance)\n    // https://github.com/moxystudio/node-proper-lockfile/issues/69\n    await fileMakeDirname(cacheJsonFilePath)\n    // https://github.com/moxystudio/node-proper-lockfile#lockfile-options\n    unlockInterProcessLock = await lockfile.lock(cacheJsonFilePath, {\n      realpath: false,\n      retries: {\n        retries: 20,\n        minTimeout: 20,\n        maxTimeout: 500,\n      },\n    })\n  }\n\n  try {\n    return await fn()\n  } finally {\n    // we want to unlock in case of error too\n    unlockLocal()\n    unlockInterProcessLock()\n    logger.debug(`unlock ${cacheJsonFilePath}`)\n  }\n\n  // here in case of error.code === 'ELOCKED' thrown from here\n  // https://github.com/moxystudio/node-proper-lockfile/blob/1a478a43a077a7a7efc46ac79fd8f713a64fd499/lib/lockfile.js#L54\n  // we could give a better failure message when server tries to compile a file\n  // otherwise he'll get a 500 without much more info to debug\n\n  // we use two lock because the local lock is very fast, it's a sort of perf improvement\n}\n","// https://nodejs.org/metrics/summaries/version/nodejs.org-access.log.csv\nexport const nodeVersionScoreMap = {\n  \"0.10\": 0.02,\n  \"0.12\": 0.01,\n  4: 0.1,\n  6: 0.25,\n  7: 0.1,\n  8: 1,\n  9: 0.1,\n  10: 0.5,\n  11: 0.25,\n}\n","export const assertImportMap = (value) => {\n  if (value === null) {\n    throw new TypeError(`an importMap must be an object, got null`)\n  }\n\n  const type = typeof value\n  if (type !== \"object\") {\n    throw new TypeError(`an importMap must be an object, received ${value}`)\n  }\n\n  if (Array.isArray(value)) {\n    throw new TypeError(`an importMap must be an object, received array ${value}`)\n  }\n}\n","// https://github.com/systemjs/systemjs/blob/89391f92dfeac33919b0223bbf834a1f4eea5750/src/common.js#L136\nimport { assertImportMap } from \"../assertImportMap.js\"\n\nexport const composeTwoImportMaps = (leftImportMap, rightImportMap) => {\n  assertImportMap(leftImportMap)\n  assertImportMap(rightImportMap)\n\n  return {\n    imports: composeTwoImports(leftImportMap.imports, rightImportMap.imports),\n    scopes: composeTwoScopes(leftImportMap.scopes, rightImportMap.scopes),\n  }\n}\n\nconst composeTwoImports = (leftImports = {}, rightImports = {}) => {\n  return { ...leftImports, ...rightImports }\n}\n\nconst composeTwoScopes = (leftScopes = {}, rightScopes = {}) => {\n  const scopes = { ...leftScopes }\n  Object.keys(rightScopes).forEach((scopeKey) => {\n    if (scopes.hasOwnProperty(scopeKey)) {\n      scopes[scopeKey] = { ...scopes[scopeKey], ...rightScopes[scopeKey] }\n    } else {\n      scopes[scopeKey] = { ...rightScopes[scopeKey] }\n    }\n  })\n  return scopes\n}\n","import { readFile } from \"fs\"\nimport { composeTwoImportMaps } from \"@jsenv/import-map\"\nimport { fileUrlToRelativePath, resolveFileUrl, fileUrlToPath } from \"../urlHelpers.js\"\nimport { jsenvCoreDirectoryUrl } from \"../jsenvCoreDirectoryUrl/jsenvCoreDirectoryUrl.js\"\n\nexport const readProjectImportMap = async ({\n  projectDirectoryUrl,\n  jsenvProjectDirectoryUrl,\n  importMapFileRelativePath,\n  logger,\n}) => {\n  if (typeof projectDirectoryUrl !== \"string\") {\n    throw new TypeError(`projectDirectoryUrl must be a string, got ${projectDirectoryUrl}`)\n  }\n  if (typeof jsenvProjectDirectoryUrl !== \"string\") {\n    throw new TypeError(\n      `jsenvProjectDirectoryUrl must be a string, got ${jsenvProjectDirectoryUrl}`,\n    )\n  }\n\n  const importMapForProject = importMapFileRelativePath\n    ? await getProjectImportMap({\n        projectDirectoryUrl,\n        importMapFileRelativePath,\n      })\n    : null\n\n  const jsenvCoreImportKey = \"@jsenv/core/\"\n  const jsenvCoreRelativePathForJsenvProject = fileUrlToRelativePath(\n    jsenvCoreDirectoryUrl,\n    jsenvProjectDirectoryUrl,\n  )\n\n  const importsForJsenvCore = {\n    [jsenvCoreImportKey]: jsenvCoreRelativePathForJsenvProject,\n  }\n\n  if (!importMapForProject) {\n    return {\n      imports: importsForJsenvCore,\n    }\n  }\n\n  if (importMapForProject.imports) {\n    const jsenvCoreRelativePathForProject = importMapForProject.imports[jsenvCoreImportKey]\n    if (\n      jsenvCoreRelativePathForProject &&\n      jsenvCoreRelativePathForProject !== jsenvCoreRelativePathForJsenvProject\n    ) {\n      logger.warn(\n        createIncompatibleJsenvCoreDependencyMessage({\n          projectDirectoryPath: fileUrlToPath(projectDirectoryUrl),\n          jsenvProjectDirectoryPath: fileUrlToPath(jsenvProjectDirectoryUrl),\n          jsenvCoreRelativePathForProject,\n          jsenvCoreRelativePathForJsenvProject,\n        }),\n      )\n    }\n  }\n\n  const importMapForJsenvCore = {\n    imports: importsForJsenvCore,\n    scopes: generateJsenvCoreScopes({ importMapForProject, importsForJsenvCore }),\n  }\n\n  return composeTwoImportMaps(importMapForJsenvCore, importMapForProject)\n}\n\nconst generateJsenvCoreScopes = ({ importMapForProject, importsForJsenvCore }) => {\n  const { scopes } = importMapForProject\n\n  if (!scopes) {\n    return undefined\n  }\n\n  // I must ensure jsenvCoreImports wins by default in every scope\n  // because scope may contains stuff like\n  // \"/\": \"/\"\n  // \"/\": \"/folder/\"\n  // to achieve this, we set jsenvCoreImports into every scope\n  // they can still be overriden by importMapForProject\n  // even if I see no use case for that\n  const scopesForJsenvCore = {}\n  Object.keys(scopes).forEach((scopeKey) => {\n    scopesForJsenvCore[scopeKey] = importsForJsenvCore\n  })\n  return scopesForJsenvCore\n}\n\nconst getProjectImportMap = async ({ projectDirectoryUrl, importMapFileRelativePath }) => {\n  const importMapFileUrl = resolveFileUrl(importMapFileRelativePath, projectDirectoryUrl)\n  const importMapFilePath = fileUrlToPath(importMapFileUrl)\n\n  return new Promise((resolve, reject) => {\n    readFile(importMapFilePath, (error, buffer) => {\n      if (error) {\n        if (error.code === \"ENOENT\") {\n          resolve(null)\n        } else {\n          reject(error)\n        }\n      } else {\n        const importMapString = String(buffer)\n        resolve(JSON.parse(importMapString))\n      }\n    })\n  })\n}\n\nconst createIncompatibleJsenvCoreDependencyMessage = ({\n  projectDirectoryPath,\n  jsenvProjectDirectoryPath,\n  jsenvCoreRelativePathForProject,\n  jsenvCoreRelativePathForJsenvProject,\n}) => `incompatible dependency to @jsenv/core in your project and an internal jsenv project.\nTo fix this either remove project dependency to @jsenv/core or ensure they use the same version.\n(If you are inside a @jsenv project you can ignore this warning)\n--- your project path to @jsenv/core ---\n${jsenvCoreRelativePathForProject}\n--- jsenv project wanted path to @jsenv/core ---\n${jsenvCoreRelativePathForJsenvProject}\n--- jsenv project path ---\n${jsenvProjectDirectoryPath}\n--- your project path ---\n${projectDirectoryPath}`\n","import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const resolveGroup = ({ name, version }, { groupMap }) => {\n  return Object.keys(groupMap).find((compileIdCandidate) => {\n    const { platformCompatMap } = groupMap[compileIdCandidate]\n    if (name in platformCompatMap === false) {\n      return false\n    }\n    const versionForGroup = platformCompatMap[name]\n\n    const highestVersion = findHighestVersion(version, versionForGroup)\n    return highestVersion === version\n  })\n}\n","export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n","import { firstMatch } from \"./util.js\"\n\nexport const detectAndroid = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/(android)/i.test(userAgent)) {\n    return {\n      name: \"android\",\n      version: firstMatch(/Android (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n","import { firstMatch } from \"./util.js\"\n\nexport const detectInternetExplorer = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n","import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nexport const detectOpera = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) || firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version: firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) || userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n","import { secondMatch } from \"./util.js\"\n\nexport const detectEdge = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n","import { firstMatch } from \"./util.js\"\n\nexport const detectFirefox = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n","import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nexport const detectChrome = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  return null\n}\n","import { userAgentToVersion } from \"./util.js\"\n\nexport const detectSafari = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n","export const detectElectron = () => null // TODO\n","import { firstMatch } from \"./util.js\"\n\nexport const detectIOS = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/iPhone;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  if (/iPad;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n","// https://github.com/Ahmdrza/detect-browser/blob/26254f85cf92795655a983bfd759d85f3de850c6/detect-browser.js#L1\n// https://github.com/lancedikson/bowser/blob/master/src/parser-browsers.js#L1\n\nimport { detectAndroid } from \"./android.js\"\nimport { detectInternetExplorer } from \"./internet-explorer.js\"\nimport { detectOpera } from \"./opera.js\"\nimport { detectEdge } from \"./edge.js\"\nimport { detectFirefox } from \"./firefox.js\"\nimport { detectChrome } from \"./chrome.js\"\nimport { detectSafari } from \"./safari.js\"\nimport { detectElectron } from \"./electron.js\"\nimport { detectIOS } from \"./ios.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  detectOpera,\n  detectInternetExplorer,\n  detectEdge,\n  detectFirefox,\n  detectChrome,\n  detectSafari,\n  detectElectron,\n  detectIOS,\n  detectAndroid,\n])\n\nexport const detectBrowser = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  if (version.indexOf(\".\") > -1) {\n    const parts = version.split(\".\")\n    // remove extraneous .\n    return parts.slice(0, 3).join(\".\")\n  }\n\n  if (version.indexOf(\"_\") > -1) {\n    const parts = version.split(\"_\")\n    // remove extraneous _\n    return parts.slice(0, 3).join(\"_\")\n  }\n\n  return version\n}\n","import { resolveGroup } from \"../resolvePlatformGroup/resolveGroup.js\"\nimport { detectBrowser } from \"./detectBrowser.js\"\n\nexport const resolveBrowserGroup = ({ groupMap }) => resolveGroup(detectBrowser(), { groupMap })\n","export const detectNode = () => {\n  return { name: \"node\", version: process.version.slice(1) }\n}\n","import { resolveGroup } from \"../resolvePlatformGroup/resolveGroup.js\"\nimport { detectNode } from \"./detectNode.js\"\n\nexport const resolveNodeGroup = ({ groupMap }) => resolveGroup(detectNode(), { groupMap })\n","import { resolveGroup } from \"./resolveGroup.js\"\nimport { detectBrowser } from \"../resolveBrowserGroup/detectBrowser.js\"\nimport { detectNode } from \"../resolveNodeGroup/detectNode.js\"\n\nexport const resolvePlatformGroup = ({ groupMap }) => {\n  if (typeof window === \"object\") return resolveGroup(detectBrowser(), { groupMap })\n  if (typeof process === \"object\") return resolveGroup(detectNode(), { groupMap })\n  // we should certainly throw with unknown platform\n  return null\n}\n","/* eslint-disable */\n// https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-modules-systemjs\n\nconst { template, types: t } = import.meta.require(\"@babel/core\")\nconst { declare } = import.meta.require(\"@babel/helper-plugin-utils\")\nconst { default: hoistVariables } = import.meta.require(\"@babel/helper-hoist-variables\")\n\nconst buildTemplate = template(`\n  SYSTEM_REGISTER(MODULE_NAME, SOURCES, function (EXPORT_IDENTIFIER, CONTEXT_IDENTIFIER) {\n    \"use strict\";\n    BEFORE_BODY;\n    return {\n      setters: SETTERS,\n      execute: EXECUTE\n    };\n  });\n`)\n\nconst buildExportAll = template(`\n  for (var KEY in TARGET) {\n    if (KEY !== \"default\" && KEY !== \"__esModule\") EXPORT_OBJ[KEY] = TARGET[KEY];\n  }\n`)\n\nfunction constructExportCall(path, exportIdent, exportNames, exportValues, exportStarTarget) {\n  const statements = []\n  if (exportNames.length === 1) {\n    statements.push(\n      t.expressionStatement(\n        t.callExpression(exportIdent, [t.stringLiteral(exportNames[0]), exportValues[0]]),\n      ),\n    )\n    // eslint-disable-next-line no-negated-condition\n  } else if (!exportStarTarget) {\n    const objectProperties = []\n    for (let i = 0; i < exportNames.length; i++) {\n      const exportName = exportNames[i]\n      const exportValue = exportValues[i]\n      objectProperties.push(t.objectProperty(t.identifier(exportName), exportValue))\n    }\n    statements.push(\n      t.expressionStatement(t.callExpression(exportIdent, [t.objectExpression(objectProperties)])),\n    )\n  } else {\n    const exportObj = path.scope.generateUid(\"exportObj\")\n\n    statements.push(\n      t.variableDeclaration(\"var\", [\n        t.variableDeclarator(t.identifier(exportObj), t.objectExpression([])),\n      ]),\n    )\n\n    statements.push(\n      buildExportAll({\n        KEY: path.scope.generateUidIdentifier(\"key\"),\n        EXPORT_OBJ: t.identifier(exportObj),\n        TARGET: exportStarTarget,\n      }),\n    )\n\n    for (let i = 0; i < exportNames.length; i++) {\n      const exportName = exportNames[i]\n      const exportValue = exportValues[i]\n\n      statements.push(\n        t.expressionStatement(\n          t.assignmentExpression(\n            \"=\",\n            t.memberExpression(t.identifier(exportObj), t.identifier(exportName)),\n            exportValue,\n          ),\n        ),\n      )\n    }\n\n    statements.push(t.expressionStatement(t.callExpression(exportIdent, [t.identifier(exportObj)])))\n  }\n  return statements\n}\n\nconst TYPE_IMPORT = \"Import\"\n\nexport default declare((api, options) => {\n  api.assertVersion(7)\n\n  const { systemGlobal = \"System\" } = options\n  const IGNORE_REASSIGNMENT_SYMBOL = Symbol()\n\n  const reassignmentVisitor = {\n    \"AssignmentExpression|UpdateExpression\"(path) {\n      if (path.node[IGNORE_REASSIGNMENT_SYMBOL]) return\n      path.node[IGNORE_REASSIGNMENT_SYMBOL] = true\n\n      const arg = path.get(path.isAssignmentExpression() ? \"left\" : \"argument\")\n\n      if (arg.isObjectPattern() || arg.isArrayPattern()) {\n        const exprs = [path.node]\n        for (const name of Object.keys(arg.getBindingIdentifiers())) {\n          if (this.scope.getBinding(name) !== path.scope.getBinding(name)) {\n            return\n          }\n          const exportedNames = this.exports[name]\n          if (!exportedNames) return\n          for (const exportedName of exportedNames) {\n            exprs.push(this.buildCall(exportedName, t.identifier(name)).expression)\n          }\n        }\n        path.replaceWith(t.sequenceExpression(exprs))\n        return\n      }\n\n      if (!arg.isIdentifier()) return\n\n      const name = arg.node.name\n\n      // redeclared in this scope\n      if (this.scope.getBinding(name) !== path.scope.getBinding(name)) return\n\n      const exportedNames = this.exports[name]\n      if (!exportedNames) return\n\n      let node = path.node\n\n      // if it is a non-prefix update expression (x++ etc)\n      // then we must replace with the expression (_export('x', x + 1), x++)\n      // in order to ensure the same update expression value\n      const isPostUpdateExpression = path.isUpdateExpression({ prefix: false })\n      if (isPostUpdateExpression) {\n        node = t.binaryExpression(\n          node.operator[0],\n          t.unaryExpression(\"+\", t.cloneNode(node.argument)),\n          t.numericLiteral(1),\n        )\n      }\n\n      for (const exportedName of exportedNames) {\n        node = this.buildCall(exportedName, node).expression\n      }\n\n      if (isPostUpdateExpression) {\n        node = t.sequenceExpression([node, path.node])\n      }\n\n      path.replaceWith(node)\n    },\n  }\n\n  return {\n    name: \"transform-modules-systemjs\",\n\n    visitor: {\n      CallExpression(path, state) {\n        if (path.node.callee.type === TYPE_IMPORT) {\n          path.replaceWith(\n            t.callExpression(\n              t.memberExpression(t.identifier(state.contextIdent), t.identifier(\"import\")),\n              path.node.arguments,\n            ),\n          )\n        }\n      },\n\n      MetaProperty(path, state) {\n        if (path.node.meta.name === \"import\" && path.node.property.name === \"meta\") {\n          path.replaceWith(\n            t.memberExpression(t.identifier(state.contextIdent), t.identifier(\"meta\")),\n          )\n        }\n      },\n\n      ReferencedIdentifier(path, state) {\n        if (path.node.name === \"__moduleName\" && !path.scope.hasBinding(\"__moduleName\")) {\n          path.replaceWith(t.memberExpression(t.identifier(state.contextIdent), t.identifier(\"id\")))\n        }\n      },\n\n      Program: {\n        enter(path, state) {\n          state.contextIdent = path.scope.generateUid(\"context\")\n        },\n        exit(path, state) {\n          const undefinedIdent = path.scope.buildUndefinedNode()\n          const exportIdent = path.scope.generateUid(\"export\")\n          const contextIdent = state.contextIdent\n\n          const exportMap = Object.create(null)\n          const modules = []\n\n          let beforeBody = []\n          const setters = []\n          const sources = []\n          const variableIds = []\n          const removedPaths = []\n\n          function addExportName(key, val) {\n            exportMap[key] = exportMap[key] || []\n            exportMap[key].push(val)\n          }\n\n          function pushModule(source, key, specifiers) {\n            let module\n            modules.forEach(function(m) {\n              if (m.key === source) {\n                module = m\n              }\n            })\n            if (!module) {\n              modules.push((module = { key: source, imports: [], exports: [] }))\n            }\n            module[key] = module[key].concat(specifiers)\n          }\n\n          function buildExportCall(name, val) {\n            return t.expressionStatement(\n              t.callExpression(t.identifier(exportIdent), [t.stringLiteral(name), val]),\n            )\n          }\n\n          const exportNames = []\n          const exportValues = []\n\n          const body = path.get(\"body\")\n          for (const path of body) {\n            if (path.isFunctionDeclaration()) {\n              beforeBody.push(path.node)\n              removedPaths.push(path)\n            } else if (path.isClassDeclaration()) {\n              variableIds.push(path.node.id)\n              path.replaceWith(\n                t.expressionStatement(\n                  t.assignmentExpression(\"=\", t.cloneNode(path.node.id), t.toExpression(path.node)),\n                ),\n              )\n            } else if (path.isImportDeclaration()) {\n              const source = path.node.source.value\n              pushModule(source, \"imports\", path.node.specifiers)\n              for (const name of Object.keys(path.getBindingIdentifiers())) {\n                path.scope.removeBinding(name)\n                variableIds.push(t.identifier(name))\n              }\n              path.remove()\n            } else if (path.isExportAllDeclaration()) {\n              pushModule(path.node.source.value, \"exports\", path.node)\n              path.remove()\n            } else if (path.isExportDefaultDeclaration()) {\n              const declar = path.get(\"declaration\")\n              const id = declar.node.id\n              if (declar.isClassDeclaration()) {\n                if (id) {\n                  exportNames.push(\"default\")\n                  exportValues.push(undefinedIdent)\n                  variableIds.push(id)\n                  addExportName(id.name, \"default\")\n                  path.replaceWith(\n                    t.expressionStatement(\n                      t.assignmentExpression(\"=\", t.cloneNode(id), t.toExpression(declar.node)),\n                    ),\n                  )\n                } else {\n                  exportNames.push(\"default\")\n                  exportValues.push(t.toExpression(declar.node))\n                  removedPaths.push(path)\n                }\n              } else if (declar.isFunctionDeclaration()) {\n                if (id) {\n                  beforeBody.push(declar.node)\n                  exportNames.push(\"default\")\n                  exportValues.push(t.cloneNode(id))\n                  addExportName(id.name, \"default\")\n                } else {\n                  exportNames.push(\"default\")\n                  exportValues.push(t.toExpression(declar.node))\n                }\n                removedPaths.push(path)\n              } else {\n                path.replaceWith(buildExportCall(\"default\", declar.node))\n              }\n            } else if (path.isExportNamedDeclaration()) {\n              const declar = path.get(\"declaration\")\n\n              if (declar.node) {\n                path.replaceWith(declar)\n\n                if (path.isFunction()) {\n                  const node = declar.node\n                  const name = node.id.name\n                  addExportName(name, name)\n                  beforeBody.push(node)\n                  exportNames.push(name)\n                  exportValues.push(t.cloneNode(node.id))\n                  removedPaths.push(path)\n                } else if (path.isClass()) {\n                  const name = declar.node.id.name\n                  exportNames.push(name)\n                  exportValues.push(undefinedIdent)\n                  variableIds.push(declar.node.id)\n                  path.replaceWith(\n                    t.expressionStatement(\n                      t.assignmentExpression(\n                        \"=\",\n                        t.cloneNode(declar.node.id),\n                        t.toExpression(declar.node),\n                      ),\n                    ),\n                  )\n                  addExportName(name, name)\n                } else {\n                  for (const name of Object.keys(declar.getBindingIdentifiers())) {\n                    addExportName(name, name)\n                  }\n                }\n              } else {\n                const specifiers = path.node.specifiers\n                if (specifiers && specifiers.length) {\n                  if (path.node.source) {\n                    pushModule(path.node.source.value, \"exports\", specifiers)\n                    path.remove()\n                  } else {\n                    const nodes = []\n\n                    for (const specifier of specifiers) {\n                      const binding = path.scope.getBinding(specifier.local.name)\n                      // hoisted function export\n                      if (binding && t.isFunctionDeclaration(binding.path.node)) {\n                        exportNames.push(specifier.exported.name)\n                        exportValues.push(t.cloneNode(specifier.local))\n                      }\n                      // only globals also exported this way\n                      else if (!binding) {\n                        nodes.push(buildExportCall(specifier.exported.name, specifier.local))\n                      }\n                      addExportName(specifier.local.name, specifier.exported.name)\n                    }\n\n                    path.replaceWithMultiple(nodes)\n                  }\n                }\n              }\n            }\n          }\n\n          modules.forEach(function(specifiers) {\n            let setterBody = []\n            const target = path.scope.generateUid(specifiers.key)\n\n            for (let specifier of specifiers.imports) {\n              if (t.isImportNamespaceSpecifier(specifier)) {\n                setterBody.push(\n                  t.expressionStatement(\n                    t.assignmentExpression(\"=\", specifier.local, t.identifier(target)),\n                  ),\n                )\n              } else if (t.isImportDefaultSpecifier(specifier)) {\n                specifier = t.importSpecifier(specifier.local, t.identifier(\"default\"))\n              }\n\n              if (t.isImportSpecifier(specifier)) {\n                setterBody.push(\n                  t.expressionStatement(\n                    t.assignmentExpression(\n                      \"=\",\n                      specifier.local,\n                      t.memberExpression(t.identifier(target), specifier.imported),\n                    ),\n                  ),\n                )\n              }\n            }\n\n            if (specifiers.exports.length) {\n              const exportNames = []\n              const exportValues = []\n              let hasExportStar = false\n\n              for (const node of specifiers.exports) {\n                if (t.isExportAllDeclaration(node)) {\n                  hasExportStar = true\n                } else if (t.isExportSpecifier(node)) {\n                  exportNames.push(node.exported.name)\n                  exportValues.push(t.memberExpression(t.identifier(target), node.local))\n                } else {\n                  // todo\n                }\n              }\n\n              setterBody = setterBody.concat(\n                constructExportCall(\n                  path,\n                  t.identifier(exportIdent),\n                  exportNames,\n                  exportValues,\n                  hasExportStar ? t.identifier(target) : null,\n                ),\n              )\n            }\n\n            sources.push(t.stringLiteral(specifiers.key))\n            setters.push(\n              t.functionExpression(null, [t.identifier(target)], t.blockStatement(setterBody)),\n            )\n          })\n\n          let moduleName = this.getModuleName()\n          if (moduleName) moduleName = t.stringLiteral(moduleName)\n\n          hoistVariables(\n            path,\n            (id, name, hasInit) => {\n              variableIds.push(id)\n              if (!hasInit) {\n                exportNames.push(name)\n                exportValues.push(undefinedIdent)\n              }\n            },\n            null,\n          )\n\n          if (variableIds.length) {\n            beforeBody.unshift(\n              t.variableDeclaration(\"var\", variableIds.map((id) => t.variableDeclarator(id))),\n            )\n          }\n\n          if (exportNames.length) {\n            beforeBody = beforeBody.concat(\n              constructExportCall(path, t.identifier(exportIdent), exportNames, exportValues, null),\n            )\n          }\n\n          path.traverse(reassignmentVisitor, {\n            exports: exportMap,\n            buildCall: buildExportCall,\n            scope: path.scope,\n          })\n\n          for (const path of removedPaths) {\n            path.remove()\n          }\n\n          path.node.body = [\n            buildTemplate({\n              SYSTEM_REGISTER: t.memberExpression(\n                t.identifier(systemGlobal),\n                t.identifier(\"register\"),\n              ),\n              BEFORE_BODY: beforeBody,\n              MODULE_NAME: moduleName,\n              SETTERS: t.arrayExpression(setters),\n              SOURCES: t.arrayExpression(sources),\n              EXECUTE: t.functionExpression(\n                null,\n                [],\n                t.blockStatement(path.node.body),\n                false,\n                options.topLevelAwait && programUsesTopLevelAwait(path),\n              ),\n              EXPORT_IDENTIFIER: t.identifier(exportIdent),\n              CONTEXT_IDENTIFIER: t.identifier(contextIdent),\n            }),\n          ]\n        },\n      },\n    },\n  }\n})\n\nconst programUsesTopLevelAwait = (path) => {\n  let hasTopLevelAwait = false\n  path.traverse({\n    AwaitExpression(path) {\n      const parent = path.getFunctionParent()\n      if (!parent || parent.type === \"Program\") hasTopLevelAwait = true\n    },\n  })\n  return hasTopLevelAwait\n}\n","// https://github.com/rburns/ansi-to-html/blob/master/src/ansi_to_html.js\n// https://github.com/drudru/ansi_up/blob/master/ansi_up.js\nconst Convert = import.meta.require(\"ansi-to-html\")\n\nexport const ansiToHTML = (ansiString) => {\n  return new Convert().toHtml(ansiString)\n}\n","const { addSideEffect } = import.meta.require(\"@babel/helper-module-imports\")\n\nexport const ensureRegeneratorRuntimeImportBabelPlugin = (api, options) => {\n  api.assertVersion(7)\n\n  const {\n    regeneratorRuntimeIdentifierName = \"regeneratorRuntime\",\n    regeneratorRuntimeImportPath = \"@jsenv/core/helpers/regenerator-runtime/regenerator-runtime.js\",\n  } = options\n\n  return {\n    visitor: {\n      Identifier(path, opts) {\n        const { filename } = opts\n        const filepathname = filename.replace(/\\\\/g, \"/\")\n        if (filepathname.endsWith(\"node_modules/regenerator-runtime/runtime.js\")) {\n          return\n        }\n\n        const { node } = path\n        if (node.name === regeneratorRuntimeIdentifierName) {\n          addSideEffect(path.scope.getProgramParent().path, regeneratorRuntimeImportPath)\n        }\n      },\n    },\n  }\n}\n","const { addSideEffect } = import.meta.require(\"@babel/helper-module-imports\")\n\nexport const ensureGlobalThisImportBabelPlugin = (api, options) => {\n  api.assertVersion(7)\n\n  const {\n    globalThisIdentifierName = \"globalThis\",\n    globalThisImportPath = \"@jsenv/core/helpers/global-this/global-this.js\",\n  } = options\n\n  return {\n    visitor: {\n      Identifier(path, opts) {\n        const { filename } = opts\n        const filepathname = filename.replace(/\\\\/g, \"/\")\n        if (filepathname.endsWith(\"/helpers/global-this/global-this.js\")) {\n          return\n        }\n\n        const { node } = path\n        if (node.name === globalThisIdentifierName) {\n          addSideEffect(path.scope.getProgramParent().path, globalThisImportPath)\n        }\n      },\n    },\n  }\n}\n","import { pathToFileUrl } from \"../urlHelpers.js\"\nimport { babelHelperMap } from \"../babelHelperMap/babelHelperMap.js\"\n\n// https://github.com/babel/babel/tree/master/packages/babel-helper-module-imports\nconst { addDefault } = import.meta.require(\"@babel/helper-module-imports\")\n\n// named import approach found here:\n// https://github.com/rollup/rollup-plugin-babel/blob/18e4232a450f320f44c651aa8c495f21c74d59ac/src/helperPlugin.js#L1\n\n// for reference this is how it's done to reference\n// a global babel helper object instead of using\n// a named import\n// https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-plugin-external-helpers/src/index.js\n\nexport const transformBabelHelperToImportBabelPlugin = (api) => {\n  api.assertVersion(7)\n\n  return {\n    pre: (file) => {\n      const cachedHelpers = {}\n      file.set(\"helperGenerator\", (name) => {\n        // the list of possible helpers name\n        // https://github.com/babel/babel/blob/99f4f6c3b03c7f3f67cf1b9f1a21b80cfd5b0224/packages/babel-helpers/src/helpers.js#L13\n\n        if (!file.availableHelper(name)) {\n          return undefined\n        }\n\n        const filePath = file.opts.filename\n        const fileUrl = pathToFileUrl(filePath)\n        const babelHelperFileUrl = babelHelperMap[name]\n\n        if (fileUrl === babelHelperFileUrl) {\n          return undefined\n        }\n\n        if (searchPossibleBabelHelperNameInFilePath(filePath) === name) {\n          return undefined\n        }\n\n        if (cachedHelpers[name]) {\n          return cachedHelpers[name]\n        }\n\n        const helper = addDefault(file.path, filePath, { nameHint: `_${name}` })\n        cachedHelpers[name] = helper\n        return helper\n      })\n    },\n  }\n}\n\nexport const searchPossibleBabelHelperNameInFilePath = (filePath) => {\n  const fileUrl = pathToFileUrl(filePath)\n  const filePathname = fileUrl.slice(\"file://\".length)\n\n  const babelPathPart = \"@jsenv/core/helpers/babel/\"\n  const babelPathPartIndex = filePathname.indexOf(babelPathPart)\n  if (babelPathPartIndex === -1) return \"\"\n\n  const after = filePathname.slice(babelPathPartIndex + babelPathPart.length)\n  const helperName = after.slice(0, after.indexOf(\"/\"))\n  return helperName\n}\n","import transformModulesSystemJs from \"./babel-plugin-transform-modules-systemjs/index.js\"\nimport { findAsyncPluginNameInBabelPluginMap } from \"../findAsyncPluginNameInBabelPluginMap/findAsyncPluginNameInBabelPluginMap.js\"\nimport { ansiToHTML } from \"./ansiToHTML.js\"\nimport { ensureRegeneratorRuntimeImportBabelPlugin } from \"./ensureRegeneratorRuntimeImportBabelPlugin.js\"\nimport { ensureGlobalThisImportBabelPlugin } from \"./ensureGlobalThisImportBabelPlugin.js\"\nimport {\n  transformBabelHelperToImportBabelPlugin,\n  searchPossibleBabelHelperNameInFilePath,\n} from \"./transformBabelHelperToImportBabelPlugin.js\"\n\nconst { transformAsync, transformFromAstAsync } = import.meta.require(\"@babel/core\")\nconst syntaxDynamicImport = import.meta.require(\"@babel/plugin-syntax-dynamic-import\")\nconst syntaxImportMeta = import.meta.require(\"@babel/plugin-syntax-import-meta\")\n\nconst defaultBabelPluginArray = [syntaxDynamicImport, syntaxImportMeta]\n\nexport const jsenvTransform = async ({\n  inputCode,\n  inputPath,\n  inputRelativePath,\n  inputAst,\n  inputMap,\n  babelPluginMap,\n  allowTopLevelAwait,\n  transformTopLevelAwait,\n  transformModuleIntoSystemFormat,\n  transformGenerator,\n  regeneratorRuntimeImportPath,\n  remap,\n}) => {\n  // https://babeljs.io/docs/en/options\n  const options = {\n    filename: inputPath,\n    filenameRelative: inputRelativePath,\n    inputSourceMap: inputMap,\n    configFile: false,\n    babelrc: false, // trust only these options, do not read any babelrc config file\n    ast: true,\n    sourceMaps: remap,\n    sourceFileName: inputPath,\n    // https://babeljs.io/docs/en/options#parseropts\n    parserOpts: {\n      allowAwaitOutsideFunction: allowTopLevelAwait,\n    },\n  }\n\n  const babelHelperName = searchPossibleBabelHelperNameInFilePath(inputPath)\n  // to prevent typeof circular dependency\n  if (babelHelperName === \"typeof\") {\n    const babelPluginMapWithoutTransformTypeOf = {}\n    Object.keys(babelPluginMap).forEach((key) => {\n      if (key !== \"transform-typeof-symbol\") {\n        babelPluginMapWithoutTransformTypeOf[key] = babelPluginMap[key]\n      }\n    })\n    babelPluginMap = babelPluginMapWithoutTransformTypeOf\n  }\n\n  if (transformGenerator) {\n    babelPluginMap = {\n      ...babelPluginMap,\n      \"ensure-regenerator-runtime-import\": [\n        ensureRegeneratorRuntimeImportBabelPlugin,\n        {\n          regeneratorRuntimeImportPath,\n        },\n      ],\n    }\n  }\n\n  babelPluginMap = {\n    ...babelPluginMap,\n    \"ensure-global-this-import\": [ensureGlobalThisImportBabelPlugin],\n    \"transform-babel-helpers-to-import\": [transformBabelHelperToImportBabelPlugin],\n  }\n\n  const asyncPluginName = findAsyncPluginNameInBabelPluginMap(babelPluginMap)\n\n  if (transformModuleIntoSystemFormat && transformTopLevelAwait && asyncPluginName) {\n    const babelPluginArrayWithoutAsync = []\n    Object.keys(babelPluginMap).forEach((name) => {\n      if (name !== asyncPluginName) {\n        babelPluginArrayWithoutAsync.push(babelPluginMap[name])\n      }\n    })\n\n    // put body inside something like (async () => {})()\n    const result = await babelTransform({\n      ast: inputAst,\n      code: inputCode,\n      options: {\n        ...options,\n        plugins: [\n          ...defaultBabelPluginArray,\n          ...babelPluginArrayWithoutAsync,\n          [transformModulesSystemJs, { topLevelAwait: transformTopLevelAwait }],\n        ],\n      },\n    })\n\n    // we need to retranspile the await keywords now wrapped\n    // inside Systemjs function.\n    // They are ignored, at least by transform-async-to-promises\n    // see https://github.com/rpetrich/babel-plugin-transform-async-to-promises/issues/26\n\n    const finalResult = await babelTransform({\n      // ast: result.ast,\n      code: result.code,\n      options: {\n        ...options,\n        // about inputSourceMap see\n        // https://github.com/babel/babel/blob/eac4c5bc17133c2857f2c94c1a6a8643e3b547a7/packages/babel-core/src/transformation/file/generate.js#L57\n        // https://github.com/babel/babel/blob/090c364a90fe73d36a30707fc612ce037bdbbb24/packages/babel-core/src/transformation/file/merge-map.js#L6s\n        inputSourceMap: result.map,\n        plugins: [...defaultBabelPluginArray, babelPluginMap[asyncPluginName]],\n      },\n    })\n\n    return {\n      ...result,\n      ...finalResult,\n      metadata: { ...result.metadata, ...finalResult.metadata },\n    }\n  }\n\n  const babelPluginArray = [\n    ...defaultBabelPluginArray,\n    ...Object.keys(babelPluginMap).map((babelPluginName) => babelPluginMap[babelPluginName]),\n    ...(transformModuleIntoSystemFormat\n      ? [[transformModulesSystemJs, { topLevelAwait: transformTopLevelAwait }]]\n      : []),\n  ]\n  const result = await babelTransform({\n    ast: inputAst,\n    code: inputCode,\n    options: {\n      ...options,\n      plugins: babelPluginArray,\n    },\n  })\n  return result\n}\n\nconst babelTransform = async ({ ast, code, options }) => {\n  try {\n    if (ast) {\n      const result = await transformFromAstAsync(ast, code, options)\n      return result\n    }\n    return await transformAsync(code, options)\n  } catch (error) {\n    if (error && error.code === \"BABEL_PARSE_ERROR\") {\n      const message = error.message\n      throw createParseError({\n        message,\n        messageHTML: ansiToHTML(message),\n        filename: options.filename,\n        lineNumber: error.loc.line,\n        columnNumber: error.loc.column,\n      })\n    }\n    throw error\n  }\n}\n\nconst createParseError = (data) => {\n  const { message } = data\n  const parseError = new Error(message)\n  parseError.code = \"PARSE_ERROR\"\n  parseError.data = data\n\n  return parseError\n}\n","export const assertUrlLike = (value, name = \"url\") => {\n  if (typeof value !== \"string\") {\n    throw new TypeError(`${name} must be a url string, got ${value}`)\n  }\n  if (isWindowsPathnameSpecifier(value)) {\n    throw new TypeError(`${name} must be a url but looks like a windows pathname, got ${value}`)\n  }\n  if (!hasScheme(value)) {\n    throw new TypeError(`${name} must be a url and no scheme found, got ${value}`)\n  }\n}\n\nconst isWindowsPathnameSpecifier = (specifier) => {\n  const firstChar = specifier[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n  const secondChar = specifier[1]\n  if (secondChar !== \":\") return false\n  const thirdChar = specifier[2]\n  return thirdChar === \"/\"\n}\n\nconst hasScheme = (specifier) => /^[a-zA-Z]+:/.test(specifier)\n","// https://git-scm.com/docs/gitignore\n// https://github.com/kaelzhang/node-ignore\n\nimport { assertUrlLike } from \"../assertUrlLike.js\"\n\nexport const applySpecifierPatternMatching = ({ specifier, url } = {}) => {\n  assertUrlLike(specifier, \"specifier\")\n  assertUrlLike(url, \"url\")\n  return applyPatternMatching(specifier, url)\n}\n\nconst applyPatternMatching = (pattern, string) => {\n  let patternIndex = 0\n  let index = 0\n  let remainingPattern = pattern\n  let remainingString = string\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    //  '' === '' -> pass\n    if (remainingPattern === \"\" && remainingString === \"\") {\n      return pass({\n        patternIndex,\n        index,\n      })\n    }\n\n    // '' === value -> fail\n    if (remainingPattern === \"\" && remainingString !== \"\") {\n      return fail({\n        patternIndex,\n        index,\n      })\n    }\n\n    // pattern === '' -> pass only if pattern is only **\n    if (remainingPattern !== \"\" && remainingString === \"\") {\n      // pass because pattern is optionnal\n      if (remainingPattern === \"**\") {\n        return pass({\n          patternIndex,\n          index,\n        })\n      }\n\n      // fail because **/ would expect something like /a\n      // and **a would expect something like foo/bar/a\n      return fail({\n        patternIndex,\n        index,\n      })\n    }\n\n    if (remainingPattern.slice(0, \"**\".length) === \"**\") {\n      patternIndex += `**`.length\n      remainingPattern = remainingPattern.slice(`**`.length)\n      if (remainingPattern[0] === \"/\") {\n        patternIndex += \"/\".length\n        remainingPattern = remainingPattern.slice(\"/\".length)\n      }\n\n      // pattern ending with ** always match remaining string\n      if (remainingPattern === \"\") {\n        return pass({\n          patternIndex,\n          index: string.length,\n        })\n      }\n\n      const skipResult = skipUntilMatch({ pattern: remainingPattern, string: remainingString })\n\n      if (!skipResult.matched) {\n        return fail({\n          patternIndex: patternIndex + skipResult.patternIndex,\n          index: index + skipResult.index,\n        })\n      }\n\n      return pass({\n        patternIndex: pattern.length,\n        index: string.length,\n      })\n    }\n\n    if (remainingPattern[0] === \"*\") {\n      patternIndex += \"*\".length\n      remainingPattern = remainingPattern.slice(\"*\".length)\n\n      // la c'est plus délicat, il faut que remainingString\n      // ne soit composé que de truc !== '/'\n      if (remainingPattern === \"\") {\n        const slashIndex = remainingString.indexOf(\"/\")\n        if (slashIndex > -1) {\n          return fail({\n            patternIndex,\n            index: index + slashIndex,\n          })\n        }\n        return pass({\n          patternIndex,\n          index: string.length,\n        })\n      }\n\n      // the next char must not the one expected by remainingPattern[0]\n      // because * is greedy and expect to skip one char\n      if (remainingPattern[0] === remainingString[0]) {\n        return fail({\n          patternIndex: patternIndex - \"*\".length,\n          index,\n        })\n      }\n\n      const skipResult = skipUntilMatch({\n        pattern: remainingPattern,\n        string: remainingString,\n        skippablePredicate: (remainingString) => remainingString[0] !== \"/\",\n      })\n\n      if (!skipResult.matched) {\n        return fail({\n          patternIndex: patternIndex + skipResult.patternIndex,\n          index: index + skipResult.index,\n        })\n      }\n\n      return pass({\n        patternIndex: pattern.length,\n        index: string.length,\n      })\n    }\n\n    if (remainingPattern[0] !== remainingString[0]) {\n      return fail({\n        patternIndex,\n        index,\n      })\n    }\n\n    // trailing slash on pattern, -> match remaining\n    if (remainingPattern === \"/\" && remainingString.length > 1) {\n      return pass({\n        patternIndex: patternIndex + 1,\n        index: string.length,\n      })\n    }\n\n    patternIndex += 1\n    index += 1\n    remainingPattern = remainingPattern.slice(1)\n    remainingString = remainingString.slice(1)\n    continue\n  }\n}\n\nconst skipUntilMatch = ({ pattern, string, skippablePredicate = () => true }) => {\n  let index = 0\n  let remainingString = string\n  let bestMatch = null\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const matchAttempt = applyPatternMatching(pattern, remainingString)\n\n    if (matchAttempt.matched) {\n      bestMatch = matchAttempt\n      break\n    }\n\n    const skippable = skippablePredicate(remainingString)\n\n    bestMatch = fail({\n      patternIndex: bestMatch\n        ? Math.max(bestMatch.patternIndex, matchAttempt.patternIndex)\n        : matchAttempt.patternIndex,\n      index: index + matchAttempt.index,\n    })\n\n    if (!skippable) {\n      break\n    }\n\n    // search against the next unattempted string\n    index += matchAttempt.index + 1\n    remainingString = remainingString.slice(matchAttempt.index + 1)\n    if (remainingString === \"\") {\n      bestMatch = {\n        ...bestMatch,\n        index: string.length,\n      }\n      break\n    }\n\n    continue\n  }\n\n  return bestMatch\n}\n\nconst pass = ({ patternIndex, index }) => {\n  return {\n    matched: true,\n    index,\n    patternIndex,\n  }\n}\n\nconst fail = ({ patternIndex, index }) => {\n  return {\n    matched: false,\n    index,\n    patternIndex,\n  }\n}\n","export const isPlainObject = (value) => {\n  if (value === null) {\n    return false\n  }\n  if (typeof value === \"object\") {\n    if (Array.isArray(value)) {\n      return false\n    }\n    return true\n  }\n  return false\n}\n","import { isPlainObject } from \"../isPlainObject.js\"\n\nexport const metaMapToSpecifierMetaMap = (metaMap) => {\n  if (!isPlainObject(metaMap)) {\n    throw new TypeError(`metaMap must be a plain object, got ${metaMap}`)\n  }\n\n  const specifierMetaMap = {}\n\n  Object.keys(metaMap).forEach((metaKey) => {\n    const specifierValueMap = metaMap[metaKey]\n    if (!isPlainObject(specifierValueMap)) {\n      throw new TypeError(\n        `metaMap value must be plain object, got ${specifierValueMap} for ${metaKey}`,\n      )\n    }\n    Object.keys(specifierValueMap).forEach((specifier) => {\n      const metaValue = specifierValueMap[specifier]\n      const meta = { [metaKey]: metaValue }\n      specifierMetaMap[specifier] =\n        specifier in specifierMetaMap ? { ...specifierMetaMap[specifier], ...meta } : meta\n    })\n  })\n\n  return specifierMetaMap\n}\n","import { isPlainObject } from \"./isPlainObject.js\"\n\nexport const assertSpecifierMetaMap = (value) => {\n  if (!isPlainObject(value)) {\n    throw new TypeError(`specifierMetaMap must be a plain object, got ${value}`)\n  }\n  // we could ensure it's key/value pair of url like key/object or null values\n}\n","import { assertSpecifierMetaMap } from \"../assertSpecifierMetaMap.js\"\n\nexport const normalizeSpecifierMetaMap = (specifierMetaMap, url) => {\n  assertSpecifierMetaMap(specifierMetaMap)\n\n  const specifierMetaMapNormalized = {}\n  Object.keys(specifierMetaMap).forEach((specifier) => {\n    const specifierResolved = String(new URL(specifier, url))\n    specifierMetaMapNormalized[specifierResolved] = specifierMetaMap[specifier]\n  })\n  return specifierMetaMapNormalized\n}\n","import { assertSpecifierMetaMap } from \"../assertSpecifierMetaMap.js\"\nimport { assertUrlLike } from \"../assertUrlLike.js\"\nimport { applySpecifierPatternMatching } from \"../applySpecifierPatternMatching/applySpecifierPatternMatching.js\"\n\nexport const urlToMeta = ({ url, specifierMetaMap } = {}) => {\n  assertUrlLike(url)\n  assertSpecifierMetaMap(specifierMetaMap)\n\n  return Object.keys(specifierMetaMap).reduce((previousMeta, specifier) => {\n    const { matched } = applySpecifierPatternMatching({\n      specifier,\n      url,\n    })\n    return matched ? { ...previousMeta, ...specifierMetaMap[specifier] } : previousMeta\n  }, {})\n}\n","import { fileUrlToPath, fileUrlToRelativePath } from \"../urlHelpers.js\"\nimport { jsenvTransform } from \"./jsenvTransform.js\"\nimport { metaMapToSpecifierMetaMap, normalizeSpecifierMetaMap, urlToMeta } from \"@jsenv/url-meta\"\n\nexport const transformJs = async ({\n  projectDirectoryUrl,\n  code,\n  url,\n  map,\n  babelPluginMap,\n  convertMap = {},\n  allowTopLevelAwait = true,\n  transformTopLevelAwait = true,\n  transformModuleIntoSystemFormat = true,\n  transformGenerator = true,\n  remap = true,\n}) => {\n  if (typeof projectDirectoryUrl !== \"string\") {\n    throw new TypeError(`projectDirectoryUrl must be a string, got ${projectDirectoryUrl}`)\n  }\n  if (typeof babelPluginMap !== \"object\") {\n    throw new TypeError(`babelPluginMap must be an object, got ${babelPluginMap}`)\n  }\n  if (typeof code !== \"string\") {\n    throw new TypeError(`code must be a string, got ${code}`)\n  }\n  if (typeof url !== \"string\") {\n    throw new TypeError(`url must be a string, got ${url}`)\n  }\n\n  const { inputCode, inputMap } = await computeInputCodeAndInputMap({\n    code,\n    url,\n    map,\n    projectDirectoryUrl,\n    convertMap,\n    remap,\n    allowTopLevelAwait,\n  })\n  const inputPath = computeInputPath(url)\n  const inputRelativePath = computeInputRelativePath(url, projectDirectoryUrl)\n\n  return jsenvTransform({\n    inputCode,\n    inputMap,\n    inputPath,\n    inputRelativePath,\n    babelPluginMap,\n    convertMap,\n    allowTopLevelAwait,\n    transformTopLevelAwait,\n    transformModuleIntoSystemFormat,\n    transformGenerator,\n    remap,\n  })\n}\n\nconst computeInputCodeAndInputMap = async ({\n  code,\n  url,\n  map,\n  projectDirectoryUrl,\n  convertMap,\n  remap,\n  allowTopLevelAwait,\n}) => {\n  const specifierMetaMap = normalizeSpecifierMetaMap(\n    metaMapToSpecifierMetaMap({\n      convert: convertMap,\n    }),\n    projectDirectoryUrl,\n  )\n  const { convert } = urlToMeta({ url, specifierMetaMap })\n  if (!convert) {\n    return { inputCode: code, inputMap: map }\n  }\n\n  if (typeof convert !== \"function\") {\n    throw new TypeError(`convert must be a function, got ${convert}`)\n  }\n  // TODO: update @jsenv/commonjs-converter to handle map when passed\n  const conversionResult = await convert({\n    projectDirectoryUrl,\n    code,\n    url,\n    map,\n    remap,\n    allowTopLevelAwait,\n  })\n  if (typeof conversionResult !== \"object\") {\n    throw new TypeError(`convert must return an object, got ${conversionResult}`)\n  }\n  const inputCode = conversionResult.code\n  if (typeof inputCode !== \"string\") {\n    throw new TypeError(`convert must return { code } string, got { code: ${inputCode} } `)\n  }\n  const inputMap = conversionResult.map\n  return { inputCode, inputMap }\n}\n\nconst computeInputPath = (url) => {\n  if (url.startsWith(\"file://\")) {\n    return fileUrlToPath(url)\n  }\n  return url\n}\n\nexport const computeInputRelativePath = (url, projectDirectoryUrl) => {\n  if (url.startsWith(projectDirectoryUrl)) {\n    return fileUrlToRelativePath(url, projectDirectoryUrl)\n  }\n  return undefined\n}\n","export const writeSourceMappingURL = (source, location) => `${source}\n${\"//#\"} sourceMappingURL=${location}`\n\nexport const updateSourceMappingURL = (source, callback) => {\n  const sourceMappingUrlRegExp = /\\/\\/# ?sourceMappingURL=([^\\s'\"]+)/g\n  let lastSourceMappingUrl\n  let matchSourceMappingUrl\n  while ((matchSourceMappingUrl = sourceMappingUrlRegExp.exec(source))) {\n    lastSourceMappingUrl = matchSourceMappingUrl\n  }\n  if (lastSourceMappingUrl) {\n    const index = lastSourceMappingUrl.index\n    const before = source.slice(0, index)\n    const after = source.slice(index)\n    const mappedAfter = after.replace(sourceMappingUrlRegExp, (match, firstGroup) => {\n      return `${\"//#\"} sourceMappingURL=${callback(firstGroup)}`\n    })\n    return `${before}${mappedAfter}`\n  }\n  return source\n}\n\nexport const readSourceMappingURL = (source) => {\n  let sourceMappingURL\n  updateSourceMappingURL(source, (value) => {\n    sourceMappingURL = value\n  })\n  return sourceMappingURL\n}\n\nexport const parseSourceMappingURL = (source) => {\n  const sourceMappingURL = readSourceMappingURL(source)\n\n  if (!sourceMappingURL) return null\n\n  const base64Prefix = \"data:application/json;charset=utf-8;base64,\"\n  if (sourceMappingURL.startsWith(base64Prefix)) {\n    const mapBase64Source = sourceMappingURL.slice(base64Prefix.length)\n    const sourcemapString = new Buffer(mapBase64Source, \"base64\").toString(\"utf8\")\n    return { sourcemapString }\n  }\n\n  return {\n    sourcemapURL: sourceMappingURL,\n  }\n}\n\nexport const writeOrUpdateSourceMappingURL = (source, location) => {\n  if (readSourceMappingURL(source)) {\n    return updateSourceMappingURL(source, location)\n  }\n  return writeSourceMappingURL(source, location)\n}\n","import { basename } from \"path\"\nimport { hrefToPathname } from \"@jsenv/href\"\nimport { fileUrlToRelativePath, resolveFileUrl } from \"../urlHelpers.js\"\nimport { writeSourceMappingURL } from \"./source-mapping-url.js\"\n\nexport const transformResultToCompilationResult = (\n  { code, map, metadata = {} },\n  {\n    source,\n    sourceUrl,\n    projectDirectoryUrl,\n    remap = true,\n    remapMethod = \"comment\", // 'comment', 'inline'\n  },\n) => {\n  if (typeof source !== \"string\") {\n    throw new TypeError(`source must be a string, got ${source}`)\n  }\n  if (typeof sourceUrl !== \"string\") {\n    throw new TypeError(`sourceUrl must be a string, got ${sourceUrl}`)\n  }\n  if (typeof projectDirectoryUrl !== \"string\") {\n    throw new TypeError(`projectDirectoryUrl must be a string, got ${projectDirectoryUrl}`)\n  }\n\n  const sources = []\n  const sourcesContent = []\n  const assets = []\n  const assetsContent = []\n\n  let output = code\n  if (remap && map) {\n    if (map.sources.length === 0) {\n      // may happen in some cases where babel returns a wrong sourcemap\n      // there is at least one case where it happens\n      // a file with only import './whatever.js' inside\n      sources.push(sourceUrlToSourceMapSource(sourceUrl, projectDirectoryUrl))\n      sourcesContent.push(source)\n    } else {\n      map.sources = map.sources.map((source) => {\n        const url = resolveFileUrl(source, sourceUrl)\n        if (url.startsWith(projectDirectoryUrl)) {\n          const sourceRelativePath = fileUrlToRelativePath(url, projectDirectoryUrl)\n          const sourceOriginRelative = sourceRelativePath.slice(1)\n          sources.push(sourceRelativePath)\n          return sourceOriginRelative\n        }\n\n        sources.push(source)\n        return source\n      })\n\n      if (map.sourcesContent) sourcesContent.push(...map.sourcesContent)\n    }\n\n    // removing sourcesContent from map decrease the sourceMap\n    // it also means client have to fetch source from server (additional http request)\n    // some client ignore sourcesContent property such as vscode-chrome-debugger\n    // Because it's the most complex scenario and we want to ensure client is always able\n    // to find source from the sourcemap, we explicitely delete nmap.sourcesContent to test this.\n    delete map.sourcesContent\n\n    // we don't need sourceRoot because our path are relative or absolute to the current location\n    // we could comment this line because it is not set by babel because not passed during transform\n    delete map.sourceRoot\n\n    if (remapMethod === \"inline\") {\n      const mapAsBase64 = new Buffer(JSON.stringify(map)).toString(\"base64\")\n      output = writeSourceMappingURL(\n        output,\n        `data:application/json;charset=utf-8;base64,${mapAsBase64}`,\n      )\n    } else if (remapMethod === \"comment\") {\n      const sourceBasename = basename(hrefToPathname(sourceUrl))\n      const sourceMapBasename = `${sourceBasename}.map`\n      output = writeSourceMappingURL(output, `./${sourceBasename}__asset__/${sourceMapBasename}`)\n      assets.push(sourceMapBasename)\n      assetsContent.push(stringifyMap(map))\n    }\n  } else {\n    sources.push(sourceUrlToSourceMapSource(sourceUrl, projectDirectoryUrl))\n    sourcesContent.push(source)\n  }\n\n  const { coverage } = metadata\n  if (coverage) {\n    assets.push(`coverage.json`)\n    assetsContent.push(stringifyCoverage(coverage))\n  }\n\n  return {\n    compiledSource: output,\n    contentType: \"application/javascript\",\n    sources,\n    sourcesContent,\n    assets,\n    assetsContent,\n  }\n}\n\nconst sourceUrlToSourceMapSource = (sourceUrl, projectDirectoryUrl) => {\n  if (sourceUrl.startsWith(projectDirectoryUrl)) {\n    return fileUrlToRelativePath(sourceUrl, projectDirectoryUrl)\n  }\n  return sourceUrl\n}\n\nconst stringifyMap = (object) => JSON.stringify(object, null, \"  \")\n\nconst stringifyCoverage = (object) => JSON.stringify(object, null, \"  \")\n"],"names":["babelPluginCompatMap","chrome","edge","firefox","node","samsung","opera","electron","safari","ios","ie","android","phantom","hrefToScheme","href","colonIndex","indexOf","slice","hrefToPathname","ressourceToPathname","hrefToRessource","scheme","length","afterProtocol","pathnameSlashIndex","ressource","searchSeparatorIndex","nodeRequire","require","filenameContainsBackSlashes","__filename","url","replace","pathToFileUrl","path","String","pathToFileURL","fileUrlToPath","fileUrl","fileURLToPath","resolveDirectoryUrl","specifier","baseUrl","directoryUrl","URL","endsWith","fileUrlToRelativePath","startsWith","resolveFileUrl","jsenvCoreDirectoryUrl","list","_require","babelHelperNameInsideJsenvCoreArray","babelHelperMap","forEach","babelHelperName","includes","browserScoreMap","other","arrayWithout","array","predicate","outputArray","i","value","index","push","arrayWithoutValue","valueToRemove","promiseSequence","callbackArray","values","visit","callback","fileMakeDirname","file","fileNormalized","normalizeSeparation","fileStartsWithSlash","pathname","folders","split","pop","map","_","folder","join","folderMake","Promise","resolve","reject","mkdir","error","code","stat","fileLastStat","isDirectory","status","reason","lstat","copyFilePromisified","promisify","copyFile","readFilePromisified","readFile","fileRead","buffer","toString","statPromisified","fileStat","lstatPromisified","writeFilePromisified","writeFile","fileWrite","content","readdirPromisified","readdir","rimraf","removeDirectory","cleanCompileCacheDirectoryIfObsolete","cacheDirectoryUrl","forceObsolete","cacheMeta","cleanCallback","jsenvCorePackageFileUrl","jsenvCorePackageFilePath","jsenvCorePackageVersion","readPackage","version","compileCacheDirectoryMeta","cacheMetaFileUrl","cacheMetaFilePath","cacheDirectoryPath","previousCompileCacheDirectoryMeta","source","JSON","parse","e","stringify","packageFilePath","readFileSync","string","packageObject","compilationResultToTransformResult","compiledSource","assets","assetsContent","sourceMapAssetIndex","findIndex","asset","undefined","valueToVersion","numberToVersion","stringToVersion","TypeError","createValueErrorMessage","number","major","minor","patch","parts","Number","isNaN","versionCompare","versionA","versionB","semanticVersionA","semanticVersionB","majorDiff","minorDiff","patchDiff","versionIsBelow","versionSupposedBelow","versionSupposedAbove","findHighestVersion","Error","reduce","highestVersion","computeBabelPluginMapForPlatform","babelPluginMap","babelPluginCompatMapFallback","platformName","platformVersion","babelPluginMapForPlatform","Object","keys","key","compatible","platformIsCompatibleWithFeature","platformCompatMap","platformCompatibleVersion","computePlatformCompatibleVersion","BEST_ID","OTHERWISE_ID","computeCompileIdFromGroupId","groupId","groupMap","createUnexpectedGroupIdMessage","compileId","jsenvPluginCompatMap","computeJsenvPluginMapForPlatform","jsenvPluginMap","jsenvPluginCompatMapFallback","jsenvPluginMapForPlatform","featureCompat","findAsyncPluginNameInBabelPluginMap","buildExternalHelpers","getDependencies","generateBabelHelper","name","helpersToBuild","ensureDependencies","dependencies","groupHaveSameRequirements","leftGroup","rightGroup","babelPluginRequiredNameArray","jsenvPluginRequiredNameArray","generatePlatformGroupArray","versionArray","babelPluginKey","babelPluginCompat","jsenvPluginKey","jsenvPluginCompat","sort","platformGroupArray","filter","group","groupWithSameRequirements","find","platformGroupCandidate","composePlatformCompatMap","secondPlatformCompatMap","objectComposeValue","normalizePlatformCompatMapVersions","secondVersion","platformCompatibility","objectMapValue","object","mapped","previous","composed","composeGroupArray","arrayOfGroupArray","groupArrayReducer","previousGroupArray","groupArray","reducedGroupArray","copyGroup","existingGroupCandidate","generateAllPlatformGroupArray","platformNames","platformCompatMapToScore","platformScoreMap","platformToScore","versionUsageMap","versionArrayAscending","closestVersion","reverse","generateGroupMap","groupCount","platformAlwaysInsidePlatformScoreMap","platformWillAlwaysBeKnown","groupWithoutFeature","allPlatformGroupArray","groupToScore","allPlatformGroupArraySortedByScore","a","b","addOtherwiseToBeSafe","lastGroupIndex","valueCandidate","LOG_LEVEL_OFF","LOG_LEVEL_DEBUG","LOG_LEVEL_INFO","LOG_LEVEL_WARN","LOG_LEVEL_ERROR","createLogger","logLevel","debug","info","warn","debugDisabled","infoDisabled","warnDisabled","errorDisabled","createUnexpectedLogLevelMessage","console","getAssetFilePath","compileRelativePath","assetDirectoryUrl","assetFileUrl","getCacheJsonFilePath","getCompiledFilePath","getSourceFilePath","projectDirectoryUrl","sourceRelativePath","readCache","logger","cacheJsonFilePath","cacheJsonFileString","cacheJsonObject","sourceRelativePathInCache","createSourceRelativePathChangedMessage","createCacheSyntaxErrorMessage","syntaxError","stack","dateToSecondsPrecision","date","dateWithSecondsPrecision","Date","setMilliseconds","EMPTY_ID","bufferToEtag","Buffer","isBuffer","hash","createHash","update","hashBase64String","digest","hashBase64StringSubset","validateCache","cache","ifEtagMatch","ifModifiedSinceDate","compiledFileValidation","validateCompiledFile","valid","sourcesValidations","assetValidations","all","validateSources","validateAssets","invalidSourceValidation","invalidAssetValidation","data","sourcesContent","sourceContent","assetContent","compiledFilePath","compiledEtag","from","compiledMtime","sources","validateSource","eTag","sourcesEtag","sourceFileUrl","sourceFilePath","sourceETag","validateAsset","assetsEtag","assetFilePath","assetContentETag","updateCache","cacheHitTracking","compileResult","compileResultStatus","isNew","isUpdated","isCached","contentType","promises","writeCompiledSourceFile","writeAssetsFile","createdMs","now","lastModifiedMs","matchCount","lastMatchMs","createLockRegistry","lockArray","lockForRessource","currentLock","lock","unlockResolve","unlocked","unlock","lockfile","getOrGenerateCompiledFile","compile","cacheIgnored","cacheInterProcessLocking","startAsap","computeCompileReport","callCompile","cacheValidation","rest","fn","unlockLocal","unlockInterProcessLock","realpath","retries","minTimeout","maxTimeout","nodeVersionScoreMap","assertImportMap","type","Array","isArray","composeTwoImportMaps","leftImportMap","rightImportMap","imports","composeTwoImports","scopes","composeTwoScopes","leftImports","rightImports","leftScopes","rightScopes","scopeKey","hasOwnProperty","readProjectImportMap","jsenvProjectDirectoryUrl","importMapFileRelativePath","importMapForProject","getProjectImportMap","jsenvCoreImportKey","jsenvCoreRelativePathForJsenvProject","importsForJsenvCore","jsenvCoreRelativePathForProject","createIncompatibleJsenvCoreDependencyMessage","projectDirectoryPath","jsenvProjectDirectoryPath","importMapForJsenvCore","generateJsenvCoreScopes","scopesForJsenvCore","importMapFileUrl","importMapFilePath","importMapString","resolveGroup","compileIdCandidate","versionForGroup","firstMatch","regexp","match","secondMatch","userAgentToVersion","userAgent","detectAndroid","navigatorToBrowser","window","navigator","appVersion","test","detectInternetExplorer","userAgentToBrowser","detectOpera","detectEdge","detectFirefox","detectChrome","detectSafari","detectElectron","detectIOS","detectorCompose","detectors","detector","result","detectBrowser","normalizeName","normalizeVersion","toLowerCase","resolveBrowserGroup","detectNode","process","resolveNodeGroup","resolvePlatformGroup","template","types","t","declare","default","hoistVariables","buildTemplate","buildExportAll","constructExportCall","exportIdent","exportNames","exportValues","exportStarTarget","statements","expressionStatement","callExpression","stringLiteral","objectProperties","exportName","exportValue","objectProperty","identifier","objectExpression","exportObj","scope","generateUid","variableDeclaration","variableDeclarator","KEY","generateUidIdentifier","EXPORT_OBJ","TARGET","assignmentExpression","memberExpression","TYPE_IMPORT","api","options","assertVersion","systemGlobal","IGNORE_REASSIGNMENT_SYMBOL","Symbol","reassignmentVisitor","arg","get","isAssignmentExpression","isObjectPattern","isArrayPattern","exprs","getBindingIdentifiers","getBinding","exportedNames","exports","exportedName","buildCall","expression","replaceWith","sequenceExpression","isIdentifier","isPostUpdateExpression","isUpdateExpression","prefix","binaryExpression","operator","unaryExpression","cloneNode","argument","numericLiteral","visitor","CallExpression","state","callee","contextIdent","arguments","MetaProperty","meta","property","ReferencedIdentifier","hasBinding","Program","enter","exit","undefinedIdent","buildUndefinedNode","exportMap","create","modules","beforeBody","setters","variableIds","removedPaths","addExportName","val","pushModule","specifiers","module","m","concat","buildExportCall","body","isFunctionDeclaration","isClassDeclaration","id","toExpression","isImportDeclaration","removeBinding","remove","isExportAllDeclaration","isExportDefaultDeclaration","declar","isExportNamedDeclaration","isFunction","isClass","nodes","binding","local","exported","replaceWithMultiple","setterBody","target","isImportNamespaceSpecifier","isImportDefaultSpecifier","importSpecifier","isImportSpecifier","imported","hasExportStar","isExportSpecifier","functionExpression","blockStatement","moduleName","getModuleName","hasInit","unshift","traverse","SYSTEM_REGISTER","BEFORE_BODY","MODULE_NAME","SETTERS","arrayExpression","SOURCES","EXECUTE","topLevelAwait","programUsesTopLevelAwait","EXPORT_IDENTIFIER","CONTEXT_IDENTIFIER","hasTopLevelAwait","AwaitExpression","parent","getFunctionParent","Convert","ansiToHTML","ansiString","toHtml","addSideEffect","ensureRegeneratorRuntimeImportBabelPlugin","regeneratorRuntimeIdentifierName","regeneratorRuntimeImportPath","Identifier","opts","filename","filepathname","getProgramParent","ensureGlobalThisImportBabelPlugin","globalThisIdentifierName","globalThisImportPath","addDefault","transformBabelHelperToImportBabelPlugin","pre","cachedHelpers","set","availableHelper","filePath","babelHelperFileUrl","searchPossibleBabelHelperNameInFilePath","helper","nameHint","filePathname","babelPathPart","babelPathPartIndex","after","helperName","transformAsync","transformFromAstAsync","syntaxDynamicImport","syntaxImportMeta","defaultBabelPluginArray","jsenvTransform","inputCode","inputPath","inputRelativePath","inputAst","inputMap","allowTopLevelAwait","transformTopLevelAwait","transformModuleIntoSystemFormat","transformGenerator","remap","filenameRelative","inputSourceMap","configFile","babelrc","ast","sourceMaps","sourceFileName","parserOpts","allowAwaitOutsideFunction","babelPluginMapWithoutTransformTypeOf","asyncPluginName","babelPluginArrayWithoutAsync","babelTransform","plugins","transformModulesSystemJs","finalResult","metadata","babelPluginArray","babelPluginName","message","createParseError","messageHTML","lineNumber","loc","line","columnNumber","column","parseError","assertUrlLike","isWindowsPathnameSpecifier","hasScheme","firstChar","secondChar","thirdChar","applySpecifierPatternMatching","applyPatternMatching","pattern","patternIndex","remainingPattern","remainingString","pass","fail","skipResult","skipUntilMatch","matched","slashIndex","skippablePredicate","bestMatch","matchAttempt","skippable","Math","max","isPlainObject","metaMapToSpecifierMetaMap","metaMap","specifierMetaMap","metaKey","specifierValueMap","metaValue","assertSpecifierMetaMap","normalizeSpecifierMetaMap","specifierMetaMapNormalized","specifierResolved","urlToMeta","previousMeta","transformJs","convertMap","computeInputCodeAndInputMap","computeInputPath","computeInputRelativePath","convert","conversionResult","writeSourceMappingURL","location","transformResultToCompilationResult","sourceUrl","remapMethod","output","sourceUrlToSourceMapSource","sourceOriginRelative","sourceRoot","mapAsBase64","sourceBasename","basename","sourceMapBasename","stringifyMap","coverage","stringifyCoverage"],"mappings":"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"}