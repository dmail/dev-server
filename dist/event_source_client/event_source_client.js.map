{
  "version": 3,
  "file": "event_source_client.js",
  "sources": [
    "../../src/internal/url_context.js",
    "../../src/internal/event_source_client/event_source_connection.js",
    "../../src/internal/event_source_client/autoreload_preference.js",
    "../../src/internal/event_source_client/url_helpers.js",
    "../../helpers/babel/arrayWithHoles/arrayWithHoles.js",
    "../../helpers/babel/iterableToArrayLimit/iterableToArrayLimit.js",
    "../../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../../helpers/babel/nonIterableRest/nonIterableRest.js",
    "../../helpers/babel/slicedToArray/slicedToArray.js",
    "../../src/internal/transform_html/html_attribute_src_set.js",
    "../../src/internal/event_source_client/reload.js",
    "../../src/internal/event_source_client/import_meta_hot_module.js",
    "../../src/internal/event_source_client/event_source_client.js"
  ],
  "sourcesContent": [
    "export const inferContextFrom = ({\n  url,\n  jsenvDirectoryRelativeUrl = \".jsenv/\",\n}) => {\n  const { origin, pathname } = new URL(url)\n  if (!pathname.startsWith(`/${jsenvDirectoryRelativeUrl}`)) {\n    return {\n      projectDirectoryServerUrl: `${origin}/`,\n      jsenvDirectoryRelativeUrl: null,\n      compileId: null,\n      compileDirectoryRelativeUrl: null,\n    }\n  }\n  const slashIndex = pathname.indexOf(\"/\", 1)\n  const afterJsenvDirectory = pathname.slice(slashIndex + 1)\n  const nextSlashIndex = afterJsenvDirectory.indexOf(\"/\")\n  const compileId = afterJsenvDirectory.slice(0, nextSlashIndex)\n  return {\n    projectDirectoryServerUrl: `${origin}/`,\n    jsenvDirectoryRelativeUrl,\n    compileId,\n    compileDirectoryRelativeUrl: `${jsenvDirectoryRelativeUrl}${compileId}/`,\n  }\n}\n\nexport const createUrlContext = ({\n  projectDirectoryServerUrl,\n  compileDirectoryRelativeUrl,\n}) => {\n  if (!compileDirectoryRelativeUrl) {\n    const compileDirectoryServerUrl = `${projectDirectoryServerUrl}.jsenv/out/`\n    return {\n      asSourceRelativeUrl: (url) => {\n        if (url.startsWith(projectDirectoryServerUrl)) {\n          return url.slice(projectDirectoryServerUrl.length)\n        }\n        return url\n      },\n      asSourceUrl: (sourceRelativeUrl) => {\n        return `${projectDirectoryServerUrl}${sourceRelativeUrl}`\n      },\n      asCompiledUrl: (sourceRelativeUrl) => {\n        return `${compileDirectoryServerUrl}${sourceRelativeUrl}`\n      },\n      asUrlToFetch: (sourceRelativeUrl) => {\n        return `${projectDirectoryServerUrl}${sourceRelativeUrl}`\n      },\n    }\n  }\n  const compileDirectoryServerUrl = `${projectDirectoryServerUrl}${compileDirectoryRelativeUrl}`\n  return {\n    asSourceRelativeUrl: (url) => {\n      if (url.startsWith(compileDirectoryServerUrl)) {\n        return url.slice(compileDirectoryServerUrl.length)\n      }\n      if (url.startsWith(projectDirectoryServerUrl)) {\n        return url.slice(projectDirectoryServerUrl.length)\n      }\n      return url\n    },\n    asSourceUrl: (sourceRelativeUrl) => {\n      return `${projectDirectoryServerUrl}${sourceRelativeUrl}`\n    },\n    asCompiledUrl: (sourceRelativeUrl) => {\n      return `${compileDirectoryServerUrl}${sourceRelativeUrl}`\n    },\n    asUrlToFetch: (sourceRelativeUrl) => {\n      return `${compileDirectoryServerUrl}${sourceRelativeUrl}`\n    },\n  }\n}\n\nexport const getRessourceTrace = ({\n  urlContext,\n  url,\n  importerUrl,\n  type,\n  notFound = false,\n}) => {\n  const namings = {\n    js_module: {\n      declaration: \"import declared in\",\n      usage: \"imported by\",\n    },\n    js_script: {\n      declaration: \"referenced in\",\n      usage: \"referenced by\",\n    },\n    undefined: {\n      declaration: \"referenced in\",\n      usage: \"referenced by\",\n    },\n  }[type]\n  if (notFound) {\n    return {\n      ...(importerUrl\n        ? { [namings.declaration]: urlContext.asSourceRelativeUrl(importerUrl) }\n        : {}),\n      file: urlContext.asSourceRelativeUrl(url),\n    }\n  }\n  return {\n    file: urlContext.asSourceRelativeUrl(url),\n    ...(importerUrl\n      ? { [namings.usage]: urlContext.asSourceRelativeUrl(importerUrl) }\n      : {}),\n  }\n}\n",
    "export const createEventSourceConnection = (\n  eventSourceUrl,\n  events = {},\n  { retryMaxAttempt = Infinity, retryAllocatedMs = Infinity, lastEventId } = {},\n) => {\n  const { EventSource } = window\n  if (typeof EventSource !== \"function\") {\n    return () => {}\n  }\n\n  const eventSourceOrigin = new URL(eventSourceUrl).origin\n  Object.keys(events).forEach((eventName) => {\n    const eventCallback = events[eventName]\n    events[eventName] = (e) => {\n      if (e.origin === eventSourceOrigin) {\n        if (e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n        eventCallback(e)\n      }\n    }\n  })\n\n  const status = {\n    value: \"default\",\n    goTo: (value) => {\n      if (value === status.value) {\n        return\n      }\n      status.value = value\n      status.onchange()\n    },\n    onchange: () => {},\n  }\n  let _disconnect = () => {}\n\n  const attemptConnection = (url) => {\n    const eventSource = new EventSource(url, {\n      withCredentials: true,\n    })\n    _disconnect = () => {\n      if (status.value !== \"connecting\" && status.value !== \"connected\") {\n        console.warn(\n          `disconnect() ignored because connection is ${status.value}`,\n        )\n        return\n      }\n      eventSource.onerror = undefined\n      eventSource.close()\n      Object.keys(events).forEach((eventName) => {\n        eventSource.removeEventListener(eventName, events[eventName])\n      })\n      status.goTo(\"disconnected\")\n    }\n    let retryCount = 0\n    let firstRetryMs = Date.now()\n    eventSource.onerror = (errorEvent) => {\n      if (errorEvent.target.readyState === EventSource.CONNECTING) {\n        if (retryCount > retryMaxAttempt) {\n          console.info(`could not connect after ${retryMaxAttempt} attempt`)\n          _disconnect()\n          return\n        }\n\n        if (retryCount === 0) {\n          firstRetryMs = Date.now()\n        } else {\n          const allRetryDuration = Date.now() - firstRetryMs\n          if (retryAllocatedMs && allRetryDuration > retryAllocatedMs) {\n            console.info(\n              `could not connect in less than ${retryAllocatedMs} ms`,\n            )\n            _disconnect()\n            return\n          }\n        }\n\n        retryCount++\n        status.goTo(\"connecting\")\n        return\n      }\n\n      if (errorEvent.target.readyState === EventSource.CLOSED) {\n        _disconnect()\n        return\n      }\n    }\n    eventSource.onopen = () => {\n      status.goTo(\"connected\")\n    }\n    Object.keys(events).forEach((eventName) => {\n      eventSource.addEventListener(eventName, events[eventName])\n    })\n    if (!events.hasOwnProperty(\"welcome\")) {\n      eventSource.addEventListener(\"welcome\", (e) => {\n        if (e.origin === eventSourceOrigin && e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n      })\n    }\n    status.goTo(\"connecting\")\n  }\n\n  let connect = () => {\n    attemptConnection(eventSourceUrl)\n    connect = () => {\n      attemptConnection(\n        lastEventId\n          ? addLastEventIdIntoUrlSearchParams(eventSourceUrl, lastEventId)\n          : eventSourceUrl,\n      )\n    }\n  }\n\n  const removePageUnloadListener = listenPageUnload(() => {\n    _disconnect()\n  })\n\n  const destroy = () => {\n    removePageUnloadListener()\n    _disconnect()\n  }\n\n  return {\n    status,\n    connect,\n    disconnect: () => _disconnect(),\n    destroy,\n  }\n}\n\nconst addLastEventIdIntoUrlSearchParams = (url, lastEventId) => {\n  if (url.indexOf(\"?\") === -1) {\n    url += \"?\"\n  } else {\n    url += \"&\"\n  }\n  return `${url}last-event-id=${encodeURIComponent(lastEventId)}`\n}\n\n// const listenPageMightFreeze = (callback) => {\n//   const removePageHideListener = listenEvent(window, \"pagehide\", (pageHideEvent) => {\n//     if (pageHideEvent.persisted === true) {\n//       callback(pageHideEvent)\n//     }\n//   })\n//   return removePageHideListener\n// }\n\n// const listenPageFreeze = (callback) => {\n//   const removeFreezeListener = listenEvent(document, \"freeze\", (freezeEvent) => {\n//     callback(freezeEvent)\n//   })\n//   return removeFreezeListener\n// }\n\n// const listenPageIsRestored = (callback) => {\n//   const removeResumeListener = listenEvent(document, \"resume\", (resumeEvent) => {\n//     removePageshowListener()\n//     callback(resumeEvent)\n//   })\n//   const removePageshowListener = listenEvent(window, \"pageshow\", (pageshowEvent) => {\n//     if (pageshowEvent.persisted === true) {\n//       removePageshowListener()\n//       removeResumeListener()\n//       callback(pageshowEvent)\n//     }\n//   })\n//   return () => {\n//     removeResumeListener()\n//     removePageshowListener()\n//   }\n// }\n\nconst listenPageUnload = (callback) => {\n  const removePageHideListener = listenEvent(\n    window,\n    \"pagehide\",\n    (pageHideEvent) => {\n      if (pageHideEvent.persisted !== true) {\n        callback(pageHideEvent)\n      }\n    },\n  )\n  return removePageHideListener\n}\n\nconst listenEvent = (emitter, event, callback) => {\n  emitter.addEventListener(event, callback)\n  return () => {\n    emitter.removeEventListener(event, callback)\n  }\n}\n",
    "export const isAutoreloadEnabled = () => {\n  const value = window.localStorage.getItem(\"autoreload\")\n  if (value === \"0\") {\n    return false\n  }\n  return true\n}\n\nexport const setAutoreloadPreference = (value) => {\n  window.localStorage.setItem(\"autoreload\", value ? \"1\" : \"0\")\n}\n",
    "export const compareTwoUrlPaths = (url, otherUrl) => {\n  if (url === otherUrl) {\n    return true\n  }\n  const urlObject = new URL(url)\n  const otherUrlObject = new URL(otherUrl)\n  return (\n    urlObject.origin === otherUrlObject.origin &&\n    urlObject.pathname === otherUrlObject.pathname\n  )\n}\n\nexport const injectQuery = (url, query) => {\n  const urlObject = new URL(url)\n  const { searchParams } = urlObject\n  Object.keys(query).forEach((key) => {\n    searchParams.set(key, query[key])\n  })\n  return String(urlObject)\n}\n",
    "// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arr\n}\n",
    "export default function _iterableToArrayLimit(arr, i) {\n  // this is an expanded form of \\`for...of\\` that properly supports abrupt completions of\n  // iterators etc. variable names have been minimised to reduce the size of this massive\n  // helper. sometimes spec compliance is annoying :(\n  //\n  // _n = _iteratorNormalCompletion\n  // _d = _didIteratorError\n  // _e = _iteratorError\n  // _i = _iterator\n  // _s = _step\n  var _i =\n    arr == null\n      ? null\n      : (typeof Symbol !== \"undefined\" && arr[Symbol.iterator]) || arr[\"@@iterator\"]\n  if (_i == null) return\n  var _arr = []\n  var _n = true\n  var _d = false\n  var _s, _e\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value)\n      if (i && _arr.length === i) break\n    }\n  } catch (err) {\n    _d = true\n    _e = err\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]()\n    } finally {\n      if (_d) throw _e\n    }\n  }\n  return _arr\n}\n",
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithHoles from \"../arrayWithHoles/arrayWithHoles.js\"\nimport iterableToArrayLimit from \"../iterableToArrayLimit/iterableToArrayLimit.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableRest from \"../nonIterableRest/nonIterableRest.js\"\n\nexport default (arr, i) =>\n  arrayWithHoles(arr) ||\n  iterableToArrayLimit(arr, i) ||\n  unsupportedIterableToArray(arr, i) ||\n  nonIterableRest()\n",
    "export const htmlAttributeSrcSet = {\n  parse: (srcset) => {\n    const srcCandidates = []\n    srcset.split(\",\").forEach((set) => {\n      const [specifier, descriptor] = set.trim().split(\" \")\n      srcCandidates.push({\n        specifier,\n        descriptor,\n      })\n    })\n    return srcCandidates\n  },\n  stringify: (srcCandidates) => {\n    const srcset = srcCandidates\n      .map(({ specifier, descriptor }) => `${specifier} ${descriptor}`)\n      .join(\", \")\n    return srcset\n  },\n}\n",
    "import { htmlAttributeSrcSet } from \"../transform_html/html_attribute_src_set.js\"\nimport { injectQuery, compareTwoUrlPaths } from \"./url_helpers.js\"\n\nexport const reloadHtmlPage = () => {\n  window.parent.location.reload(true)\n}\n\n// This function can consider everything as hot reloadable:\n// - no need to check [hot-accept]and [hot-decline] attributes for instance\n// This is because if something should full reload, we receive \"full_reload\"\n// from server and this function is not called\nexport const reloadDOMNodesUsingUrls = (urlsToReload) => {\n  const mutations = []\n  const shouldReloadUrl = (urlCandidate) => {\n    return urlsToReload.some((urlToReload) =>\n      compareTwoUrlPaths(urlCandidate, urlToReload),\n    )\n  }\n  const visitNodeAttributeAsUrl = (node, attributeName) => {\n    let attribute = node[attributeName]\n    if (!attribute) {\n      return\n    }\n    if (SVGAnimatedString && attribute instanceof SVGAnimatedString) {\n      attribute = attribute.animVal\n    }\n    if (!shouldReloadUrl(attribute)) {\n      return\n    }\n    mutations.push(() => {\n      node[attributeName] = injectQuery(attribute, { hmr: Date.now() })\n    })\n  }\n  Array.from(document.querySelector(\"script\")).forEach((script) => {\n    visitNodeAttributeAsUrl(script, \"src\")\n  })\n  Array.from(document.querySelectorAll(`link[rel=\"stylesheet\"]`)).forEach(\n    (link) => {\n      visitNodeAttributeAsUrl(link, \"href\")\n    },\n  )\n  Array.from(document.querySelectorAll(`link[rel=\"icon\"]`)).forEach((link) => {\n    visitNodeAttributeAsUrl(link, \"href\")\n  })\n  Array.from(document.querySelectorAll(\"source\")).forEach((source) => {\n    visitNodeAttributeAsUrl(source, \"src\")\n  })\n  Array.from(document.querySelectorAll(\"img\")).forEach((img) => {\n    visitNodeAttributeAsUrl(img, \"src\")\n    const srcset = img.srcset\n    if (srcset) {\n      const srcCandidates = htmlAttributeSrcSet.parse(srcset)\n      srcCandidates.forEach((srcCandidate) => {\n        const url = new URL(srcCandidate.specifier, `${window.location.href}`)\n        if (shouldReloadUrl(url)) {\n          srcCandidate.specifier = injectQuery(url, { hmr: Date.now() })\n        }\n      })\n      mutations.push(() => {\n        img.srcset = htmlAttributeSrcSet.stringify(srcCandidates)\n      })\n    }\n  })\n  // svg image tag\n  Array.from(document.querySelectorAll(\"image\")).forEach((image) => {\n    visitNodeAttributeAsUrl(image, \"href\")\n  })\n  // svg use\n  Array.from(document.querySelectorAll(\"use\")).forEach((use) => {\n    visitNodeAttributeAsUrl(use, \"href\")\n  })\n  mutations.forEach((mutation) => {\n    mutation()\n  })\n}\n\nexport const reloadJsImport = async (url) => {\n  const urlWithHmr = injectQuery(url, { hmr: Date.now() })\n  const namespace = await import(urlWithHmr)\n  return namespace\n}\n\nexport const reloadAllCss = () => {\n  const links = Array.from(document.getElementsByTagName(\"link\"))\n  links.forEach((link) => {\n    if (link.rel === \"stylesheet\") {\n      link.href = injectQuery(link.href, { hmr: Date.now() })\n    }\n  })\n}\n",
    "/*\n * https://vitejs.dev/guide/api-hmr.html#hot-accept-deps-cb\n * https://modern-web.dev/docs/dev-server/plugins/hmr/\n */\n\nexport const urlHotMetas = {}\n\nexport default (url) => {\n  const data = {}\n\n  return {\n    data,\n    accept: (firstArg, secondArg) => {\n      if (!firstArg) {\n        urlHotMetas[url] = {\n          dependencies: [url],\n          acceptCallback: () => {},\n        }\n        return\n      }\n      if (typeof firstArg === \"function\") {\n        urlHotMetas[url] = {\n          dependencies: [url],\n          acceptCallback: firstArg,\n        }\n        return\n      }\n      if (typeof firstArg === \"string\") {\n        urlHotMetas[url] = {\n          dependencies: [firstArg],\n          acceptCallback: secondArg,\n        }\n        return\n      }\n      if (Array.isArray(firstArg)) {\n        urlHotMetas[url] = {\n          dependencies: firstArg,\n          acceptCallback: secondArg,\n        }\n        return\n      }\n      throw new Error(`invalid call to hot.accept()`)\n    },\n    dispose: (callback) => {\n      urlHotMetas[url] = {\n        disposeCallback: () => {\n          return callback(data)\n        },\n      }\n    },\n    decline: () => {\n      urlHotMetas[url] = \"decline\"\n    },\n    invalidate: () => {\n      urlHotMetas[url] = \"invalid\"\n    },\n  }\n}\n",
    "import { inferContextFrom, createUrlContext } from \"../url_context.js\"\nimport { createEventSourceConnection } from \"./event_source_connection.js\"\nimport {\n  isAutoreloadEnabled,\n  setAutoreloadPreference,\n} from \"./autoreload_preference.js\"\nimport { compareTwoUrlPaths } from \"./url_helpers.js\"\nimport {\n  reloadHtmlPage,\n  reloadDOMNodesUsingUrls,\n  reloadJsImport,\n} from \"./reload.js\"\nimport { urlHotMetas } from \"./import_meta_hot_module.js\"\n\nconst urlContext = createUrlContext(\n  inferContextFrom({\n    url: window.location,\n  }),\n)\n\nconst reloadMessages = []\nconst reloadMessagesSignal = { onchange: () => {} }\nconst applyReloadMessageEffects = async () => {\n  const someEffectIsFullReload = reloadMessages.some(\n    (reloadMessage) => reloadMessage.type === \"full\",\n  )\n  if (someEffectIsFullReload) {\n    reloadHtmlPage()\n    return\n  }\n  const onApplied = (reloadMessage) => {\n    const index = reloadMessages.indexOf(reloadMessage)\n    reloadMessages.splice(index, 1)\n    reloadMessagesSignal.onchange()\n  }\n  const setReloadMessagePromise = (reloadMessage, promise) => {\n    reloadMessage.status = \"pending\"\n    promise.then(\n      () => {\n        onApplied(reloadMessage)\n      },\n      (e) => {\n        // reuse error display from html supervisor?\n        console.error(e)\n        console.error(\n          `[hmr] Failed to reload after ${reloadMessage.reason}.\nThis could be due to syntax errors or importing non-existent modules (see errors above)`,\n        )\n        reloadMessage.status = \"failed\"\n        reloadMessagesSignal.onchange()\n      },\n    )\n  }\n  reloadMessages.forEach((reloadMessage) => {\n    if (reloadMessage.type === \"hot\") {\n      setReloadMessagePromise(reloadMessage, applyHotReload(reloadMessage))\n      return\n    }\n    setReloadMessagePromise(reloadMessage, Promise.resolve())\n  })\n  reloadMessagesSignal.onchange() // reload status is \"pending\"\n}\n\nconst applyHotReload = async ({ hotInstructions }) => {\n  await hotInstructions.reduce(\n    async (previous, { type, relativeUrl, hotAcceptedByRelativeUrl }) => {\n      await previous\n\n      const urlToFetch = urlContext.asUrlToFetch(relativeUrl)\n      const urlHotMeta = urlHotMetas[urlToFetch]\n      if (urlHotMeta && urlHotMeta.disposeCallback) {\n        await urlHotMeta.disposeCallback()\n      }\n      if (type === \"prune\") {\n        console.log(`[jsenv] hot prune: ${relativeUrl}`)\n        return null\n      }\n      if (type === \"js_module\") {\n        const namespace = await reloadJsImport(urlToFetch)\n        console.log(`[jsenv] hot updated: ${relativeUrl}`)\n        return namespace\n      }\n      if (type === \"html\") {\n        if (!compareTwoUrlPaths(urlToFetch, window.location.href)) {\n          // we are not in that HTML page\n          return null\n        }\n        const urlToReload = urlContext.asUrlToFetch(hotAcceptedByRelativeUrl)\n        const sourceUrlToReload = urlContext.asSourceUrl(\n          hotAcceptedByRelativeUrl,\n        )\n        reloadDOMNodesUsingUrls([urlToReload, sourceUrlToReload])\n        console.log(`[jsenv] hot updated: ${relativeUrl}`)\n        return null\n      }\n      throw new Error(`unknown update type: \"${type}\"`)\n    },\n    Promise.resolve(),\n  )\n}\n\nconst addReloadMessage = (reloadMessage) => {\n  reloadMessages.push(reloadMessage)\n  if (isAutoreloadEnabled()) {\n    applyReloadMessageEffects()\n  } else {\n    reloadMessagesSignal.onchange()\n  }\n}\n\nconst eventsourceConnection = createEventSourceConnection(\n  document.location.href,\n  {\n    reload: ({ data }) => {\n      const reloadMessage = JSON.parse(data)\n      addReloadMessage(reloadMessage)\n    },\n  },\n  {\n    retryMaxAttempt: Infinity,\n    retryAllocatedMs: 20 * 1000,\n  },\n)\n\nconst { status, connect, disconnect } = eventsourceConnection\nconnect()\nwindow.__jsenv_event_source_client__ = {\n  status,\n  connect,\n  disconnect,\n  isAutoreloadEnabled,\n  setAutoreloadPreference,\n  urlHotMetas,\n  reloadMessages,\n  reloadMessagesSignal,\n  applyReloadMessageEffects,\n  addReloadMessage,\n}\n\n// const findHotMetaUrl = (originalFileRelativeUrl) => {\n//   return Object.keys(urlHotMetas).find((compileUrl) => {\n//     return (\n//       parseCompiledUrl(compileUrl).fileRelativeUrl === originalFileRelativeUrl\n//     )\n//   })\n// }\n"
  ],
  "names": [
    "inferContextFrom",
    "url",
    "jsenvDirectoryRelativeUrl",
    "URL",
    "origin",
    "pathname",
    "startsWith",
    "projectDirectoryServerUrl",
    "compileId",
    "compileDirectoryRelativeUrl",
    "slashIndex",
    "indexOf",
    "afterJsenvDirectory",
    "slice",
    "nextSlashIndex",
    "createUrlContext",
    "compileDirectoryServerUrl",
    "asSourceRelativeUrl",
    "length",
    "asSourceUrl",
    "sourceRelativeUrl",
    "asCompiledUrl",
    "asUrlToFetch",
    "createEventSourceConnection",
    "eventSourceUrl",
    "events",
    "retryMaxAttempt",
    "Infinity",
    "retryAllocatedMs",
    "lastEventId",
    "window",
    "EventSource",
    "eventSourceOrigin",
    "Object",
    "keys",
    "forEach",
    "eventName",
    "eventCallback",
    "e",
    "status",
    "value",
    "goTo",
    "onchange",
    "_disconnect",
    "attemptConnection",
    "eventSource",
    "withCredentials",
    "console",
    "warn",
    "onerror",
    "undefined",
    "close",
    "removeEventListener",
    "retryCount",
    "firstRetryMs",
    "Date",
    "now",
    "errorEvent",
    "target",
    "readyState",
    "CONNECTING",
    "info",
    "allRetryDuration",
    "CLOSED",
    "onopen",
    "addEventListener",
    "hasOwnProperty",
    "connect",
    "addLastEventIdIntoUrlSearchParams",
    "removePageUnloadListener",
    "listenPageUnload",
    "destroy",
    "disconnect",
    "encodeURIComponent",
    "callback",
    "removePageHideListener",
    "listenEvent",
    "pageHideEvent",
    "persisted",
    "emitter",
    "event",
    "isAutoreloadEnabled",
    "localStorage",
    "getItem",
    "setAutoreloadPreference",
    "setItem",
    "compareTwoUrlPaths",
    "otherUrl",
    "urlObject",
    "otherUrlObject",
    "injectQuery",
    "query",
    "searchParams",
    "key",
    "set",
    "String",
    "arr",
    "Array",
    "isArray",
    "_iterableToArrayLimit",
    "i",
    "_i",
    "Symbol",
    "iterator",
    "_arr",
    "_n",
    "_d",
    "_s",
    "_e",
    "call",
    "next",
    "done",
    "push",
    "err",
    "arrayLikeToArray",
    "len",
    "arr2",
    "unsupportedIterableToArray",
    "o",
    "minLen",
    "n",
    "prototype",
    "toString",
    "constructor",
    "name",
    "from",
    "test",
    "TypeError",
    "arrayWithHoles",
    "iterableToArrayLimit",
    "nonIterableRest",
    "htmlAttributeSrcSet",
    "parse",
    "srcset",
    "srcCandidates",
    "split",
    "trim",
    "specifier",
    "descriptor",
    "stringify",
    "map",
    "join",
    "f",
    "args",
    "arguments",
    "Promise",
    "resolve",
    "apply",
    "reject",
    "reloadHtmlPage",
    "parent",
    "location",
    "reload",
    "reloadDOMNodesUsingUrls",
    "urlsToReload",
    "mutations",
    "shouldReloadUrl",
    "urlCandidate",
    "some",
    "urlToReload",
    "visitNodeAttributeAsUrl",
    "node",
    "attributeName",
    "attribute",
    "SVGAnimatedString",
    "animVal",
    "hmr",
    "document",
    "querySelector",
    "script",
    "querySelectorAll",
    "link",
    "source",
    "img",
    "srcCandidate",
    "href",
    "image",
    "use",
    "mutation",
    "reloadJsImport",
    "urlWithHmr",
    "urlHotMetas",
    "_await",
    "then",
    "direct",
    "urlContext",
    "_async",
    "reloadMessages",
    "_empty",
    "reloadMessagesSignal",
    "_awaitIgnored",
    "applyReloadMessageEffects",
    "someEffectIsFullReload",
    "reloadMessage",
    "type",
    "onApplied",
    "index",
    "splice",
    "setReloadMessagePromise",
    "promise",
    "error",
    "reason",
    "applyHotReload",
    "_invoke",
    "body",
    "result",
    "hotInstructions",
    "reduce",
    "previous",
    "relativeUrl",
    "hotAcceptedByRelativeUrl",
    "urlToFetch",
    "urlHotMeta",
    "disposeCallback",
    "log",
    "namespace",
    "sourceUrlToReload",
    "Error",
    "addReloadMessage",
    "eventsourceConnection",
    "data",
    "JSON",
    "__jsenv_event_source_client__"
  ],
  "mappings": "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"
}