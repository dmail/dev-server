{
  "version": 3,
  "file": "event_source_client_80644aee.js",
  "sources": [
    "../../src/internal/dev_server/event_source_client/event_source_connection.js",
    "../../src/internal/dev_server/event_source_client/livereload_preference.js",
    "../../src/internal/dev_server/event_source_client/file_changes.js",
    "../../src/internal/dev_server/event_source_client/event_source_client.js"
  ],
  "sourcesContent": [
    "/* eslint-env browser */\n\nexport const createEventSourceConnection = (\n  eventSourceUrl,\n  events = {},\n  { retryMaxAttempt = Infinity, retryAllocatedMs = Infinity, lastEventId } = {},\n) => {\n  const { EventSource } = window\n  if (typeof EventSource !== \"function\") {\n    return () => {}\n  }\n\n  const eventSourceOrigin = new URL(eventSourceUrl).origin\n  Object.keys(events).forEach((eventName) => {\n    const eventCallback = events[eventName]\n    events[eventName] = (e) => {\n      if (e.origin === eventSourceOrigin) {\n        if (e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n        eventCallback(e)\n      }\n    }\n  })\n\n  let connectionStatus = \"default\"\n  let connectionStatusChangeCallback = () => {}\n  let _disconnect = () => {}\n\n  const goToStatus = (newStatus) => {\n    if (newStatus !== connectionStatus) {\n      connectionStatus = newStatus\n      connectionStatusChangeCallback()\n    }\n  }\n\n  const attemptConnection = (url) => {\n    const eventSource = new EventSource(url, {\n      withCredentials: true,\n    })\n    _disconnect = () => {\n      if (\n        connectionStatus !== \"connecting\" &&\n        connectionStatus !== \"connected\"\n      ) {\n        console.warn(\n          `disconnect() ignored because connection is ${connectionStatus}`,\n        )\n        return\n      }\n      eventSource.onerror = undefined\n      eventSource.close()\n      Object.keys(events).forEach((eventName) => {\n        eventSource.removeEventListener(eventName, events[eventName])\n      })\n      goToStatus(\"disconnected\")\n    }\n    let retryCount = 0\n    let firstRetryMs = Date.now()\n    eventSource.onerror = (errorEvent) => {\n      if (errorEvent.target.readyState === EventSource.CONNECTING) {\n        if (retryCount > retryMaxAttempt) {\n          console.info(`could not connect after ${retryMaxAttempt} attempt`)\n          _disconnect()\n          return\n        }\n\n        if (retryCount === 0) {\n          firstRetryMs = Date.now()\n        } else {\n          const allRetryDuration = Date.now() - firstRetryMs\n          if (retryAllocatedMs && allRetryDuration > retryAllocatedMs) {\n            console.info(\n              `could not connect in less than ${retryAllocatedMs} ms`,\n            )\n            _disconnect()\n            return\n          }\n        }\n\n        retryCount++\n        goToStatus(\"connecting\")\n        return\n      }\n\n      if (errorEvent.target.readyState === EventSource.CLOSED) {\n        _disconnect()\n        return\n      }\n    }\n    eventSource.onopen = () => {\n      goToStatus(\"connected\")\n    }\n    Object.keys(events).forEach((eventName) => {\n      eventSource.addEventListener(eventName, events[eventName])\n    })\n    if (!events.hasOwnProperty(\"welcome\")) {\n      eventSource.addEventListener(\"welcome\", (e) => {\n        if (e.origin === eventSourceOrigin && e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n      })\n    }\n    goToStatus(\"connecting\")\n  }\n\n  let connect = () => {\n    attemptConnection(eventSourceUrl)\n    connect = () => {\n      attemptConnection(\n        lastEventId\n          ? addLastEventIdIntoUrlSearchParams(eventSourceUrl, lastEventId)\n          : eventSourceUrl,\n      )\n    }\n  }\n\n  const removePageUnloadListener = listenPageUnload(() => {\n    _disconnect()\n  })\n\n  const destroy = () => {\n    removePageUnloadListener()\n    _disconnect()\n  }\n\n  return {\n    getConnectionStatus: () => connectionStatus,\n    setConnectionStatusChangeCallback: (callback) => {\n      connectionStatusChangeCallback = callback\n    },\n    connect,\n    disconnect: () => _disconnect(),\n    destroy,\n  }\n}\n\nconst addLastEventIdIntoUrlSearchParams = (url, lastEventId) => {\n  if (url.indexOf(\"?\") === -1) {\n    url += \"?\"\n  } else {\n    url += \"&\"\n  }\n  return `${url}last-event-id=${encodeURIComponent(lastEventId)}`\n}\n\n// const listenPageMightFreeze = (callback) => {\n//   const removePageHideListener = listenEvent(window, \"pagehide\", (pageHideEvent) => {\n//     if (pageHideEvent.persisted === true) {\n//       callback(pageHideEvent)\n//     }\n//   })\n//   return removePageHideListener\n// }\n\n// const listenPageFreeze = (callback) => {\n//   const removeFreezeListener = listenEvent(document, \"freeze\", (freezeEvent) => {\n//     callback(freezeEvent)\n//   })\n//   return removeFreezeListener\n// }\n\n// const listenPageIsRestored = (callback) => {\n//   const removeResumeListener = listenEvent(document, \"resume\", (resumeEvent) => {\n//     removePageshowListener()\n//     callback(resumeEvent)\n//   })\n//   const removePageshowListener = listenEvent(window, \"pageshow\", (pageshowEvent) => {\n//     if (pageshowEvent.persisted === true) {\n//       removePageshowListener()\n//       removeResumeListener()\n//       callback(pageshowEvent)\n//     }\n//   })\n//   return () => {\n//     removeResumeListener()\n//     removePageshowListener()\n//   }\n// }\n\nconst listenPageUnload = (callback) => {\n  const removePageHideListener = listenEvent(\n    window,\n    \"pagehide\",\n    (pageHideEvent) => {\n      if (pageHideEvent.persisted !== true) {\n        callback(pageHideEvent)\n      }\n    },\n  )\n  return removePageHideListener\n}\n\nconst listenEvent = (emitter, event, callback) => {\n  emitter.addEventListener(event, callback)\n  return () => {\n    emitter.removeEventListener(event, callback)\n  }\n}\n",
    "/* eslint-env browser */\n\nexport const isLivereloadEnabled = () => {\n  const value = window.localStorage.getItem(\"livereload\")\n  if (value === \"0\") {\n    return false\n  }\n  return true\n}\n\nexport const setLivereloadPreference = (value) => {\n  window.localStorage.setItem(\"livereload\", value ? \"1\" : \"0\")\n}\n",
    "/* eslint-env browser */\n\nimport { isLivereloadEnabled } from \"./livereload_preference.js\"\n\nlet fileChanges = {}\nlet filechangeCallback = () => {}\n\nexport const getFileChanges = () => fileChanges\n\nexport const addFileChange = ({ file, eventType }) => {\n  fileChanges[file] = eventType\n  if (isLivereloadEnabled()) {\n    reloadIfNeeded()\n  } else {\n    filechangeCallback()\n  }\n}\n\nexport const setFileChangeCallback = (callback) => {\n  filechangeCallback = callback\n}\n\nexport const reloadIfNeeded = () => {\n  const customReloads = []\n  const cssReloads = []\n  const fullReloads = []\n\n  Object.keys(fileChanges).forEach((key) => {\n    const livereloadCallback = window.__jsenv__.livereloadingCallbacks[key]\n    if (livereloadCallback) {\n      customReloads.push(() => {\n        delete fileChanges[key]\n        livereloadCallback({\n          reloadPage,\n        })\n      })\n    } else if (\n      key.endsWith(\".css\") ||\n      key.endsWith(\".scss\") ||\n      key.endsWith(\".sass\")\n    ) {\n      cssReloads.push(() => {\n        delete fileChanges[key]\n      })\n    } else {\n      fullReloads.push(key)\n    }\n  })\n\n  if (fullReloads.length > 0) {\n    reloadPage()\n    return\n  }\n\n  customReloads.forEach((customReload) => {\n    customReload()\n  })\n\n  if (cssReloads.length) {\n    reloadAllCss()\n    cssReloads.forEach((cssReload) => {\n      cssReload()\n    })\n  }\n\n  filechangeCallback()\n}\n\nconst reloadAllCss = () => {\n  const links = Array.from(window.parent.document.getElementsByTagName(\"link\"))\n  links.forEach((link) => {\n    if (link.rel === \"stylesheet\") {\n      const url = new URL(link.href)\n      url.searchParams.set(\"t\", Date.now())\n      link.href = String(url)\n    }\n  })\n}\n\nconst reloadPage = () => {\n  window.parent.location.reload(true)\n}\n",
    "/* eslint-env browser */\n\nimport { createEventSourceConnection } from \"./event_source_connection.js\"\nimport {\n  getFileChanges,\n  addFileChange,\n  setFileChangeCallback,\n  reloadIfNeeded,\n} from \"./file_changes.js\"\nimport {\n  isLivereloadEnabled,\n  setLivereloadPreference,\n} from \"./livereload_preference.js\"\n\nconst eventsourceConnection = createEventSourceConnection(\n  document.location.href,\n  {\n    \"file-added\": ({ data }) => {\n      addFileChange({\n        file: data,\n        eventType: \"added\",\n      })\n    },\n    \"file-modified\": ({ data }) => {\n      addFileChange({\n        file: data,\n        eventType: \"modified\",\n      })\n    },\n    \"file-removed\": ({ data }) => {\n      addFileChange({\n        file: data,\n        eventType: \"removed\",\n      })\n    },\n  },\n  {\n    retryMaxAttempt: Infinity,\n    retryAllocatedMs: 20 * 1000,\n  },\n)\n\nconst {\n  connect,\n  disconnect,\n  setConnectionStatusChangeCallback,\n  getConnectionStatus,\n} = eventsourceConnection\n\nconnect()\n\nwindow.__jsenv_event_source_client__ = {\n  connect,\n  disconnect,\n  getConnectionStatus,\n  setConnectionStatusChangeCallback,\n  getFileChanges,\n  addFileChange,\n  setFileChangeCallback,\n  reloadIfNeeded,\n  isLivereloadEnabled,\n  setLivereloadPreference,\n}\n"
  ],
  "names": [
    "createEventSourceConnection",
    "eventSourceUrl",
    "events",
    "retryMaxAttempt",
    "Infinity",
    "retryAllocatedMs",
    "lastEventId",
    "window",
    "EventSource",
    "eventSourceOrigin",
    "URL",
    "origin",
    "Object",
    "keys",
    "forEach",
    "eventName",
    "eventCallback",
    "e",
    "connectionStatus",
    "connectionStatusChangeCallback",
    "_disconnect",
    "goToStatus",
    "newStatus",
    "attemptConnection",
    "url",
    "eventSource",
    "withCredentials",
    "console",
    "warn",
    "onerror",
    "undefined",
    "close",
    "removeEventListener",
    "retryCount",
    "firstRetryMs",
    "Date",
    "now",
    "errorEvent",
    "target",
    "readyState",
    "CONNECTING",
    "info",
    "allRetryDuration",
    "CLOSED",
    "onopen",
    "addEventListener",
    "hasOwnProperty",
    "connect",
    "addLastEventIdIntoUrlSearchParams",
    "removePageUnloadListener",
    "listenPageUnload",
    "destroy",
    "getConnectionStatus",
    "setConnectionStatusChangeCallback",
    "callback",
    "disconnect",
    "indexOf",
    "encodeURIComponent",
    "removePageHideListener",
    "listenEvent",
    "pageHideEvent",
    "persisted",
    "emitter",
    "event",
    "isLivereloadEnabled",
    "value",
    "localStorage",
    "getItem",
    "setLivereloadPreference",
    "setItem",
    "fileChanges",
    "filechangeCallback",
    "getFileChanges",
    "addFileChange",
    "file",
    "eventType",
    "reloadIfNeeded",
    "setFileChangeCallback",
    "customReloads",
    "cssReloads",
    "fullReloads",
    "key",
    "livereloadCallback",
    "__jsenv__",
    "livereloadingCallbacks",
    "push",
    "reloadPage",
    "endsWith",
    "length",
    "customReload",
    "reloadAllCss",
    "cssReload",
    "links",
    "Array",
    "from",
    "parent",
    "document",
    "getElementsByTagName",
    "link",
    "rel",
    "href",
    "searchParams",
    "set",
    "String",
    "location",
    "reload",
    "eventsourceConnection",
    "data",
    "__jsenv_event_source_client__"
  ],
  "mappings": "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"
}