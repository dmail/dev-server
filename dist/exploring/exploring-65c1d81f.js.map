{
  "version": 3,
  "file": "exploring.js",
  "sources": [
    "../../src/internal/memoize.js",
    "../../src/internal/dev_server/toolbar/util/fetching.js",
    "../../src/internal/dev_server/toolbar/util/preferences.js",
    "../../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../../src/internal/dev_server/toolbar/util/animation.js",
    "../../helpers/babel/defineProperty/defineProperty.js",
    "../../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../../helpers/babel/objectSpread2/objectSpread2.js",
    "../../helpers/babel/typeof/typeof.js",
    "../../src/internal/browser-utils/fetchUsingXHR.js",
    "../../src/internal/browser-utils/fetch-browser.js",
    "../../src/internal/browser-utils/fetchJson.js",
    "../../src/internal/dev_server/exploring/fetchExploringJson.js",
    "../../src/internal/dev_server/exploring/exploring.js"
  ],
  "sourcesContent": [
    "export const memoize = (compute) => {\n  let memoized = false\n  let memoizedValue\n\n  const fnWithMemoization = (...args) => {\n    if (memoized) {\n      return memoizedValue\n    }\n    // if compute is recursive wait for it to be fully done before storing the lockValue\n    // so set locked later\n    memoizedValue = compute(...args)\n    memoized = true\n    return memoizedValue\n  }\n\n  fnWithMemoization.forget = () => {\n    const value = memoizedValue\n    memoized = false\n    memoizedValue = undefined\n    return value\n  }\n\n  return fnWithMemoization\n}\n",
    "import { memoize } from \"../../../memoize.js\"\n\nconst fetchPolyfill = async (...args) => {\n  const { fetchUsingXHR } = await loadPolyfill()\n  return fetchUsingXHR(...args)\n}\n\nconst loadPolyfill = memoize(() =>\n  import(\"../../../browser-utils/fetchUsingXHR.js\"),\n)\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" &&\n  typeof window.AbortController === \"function\"\n    ? window.fetch\n    : fetchPolyfill\n",
    "export const createPreference = (name) => {\n  return {\n    has: () => localStorage.hasOwnProperty(name),\n    get: () =>\n      localStorage.hasOwnProperty(name)\n        ? JSON.parse(localStorage.getItem(name))\n        : undefined,\n    set: (value) => localStorage.setItem(name, JSON.stringify(value)),\n  }\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "import { setStyles } from \"./dom.js\"\n\nconst animateFallback = () => {\n  return Promise.resolve()\n}\n\nconst animateNative = (node, keyframes, { signal, ...options } = {}) => {\n  const animation = node.animate(keyframes, options)\n  if (signal) {\n    signal.addEventListener(\"abort\", () => {\n      animation.cancel()\n    })\n  }\n  return new Promise((resolve) => {\n    animation.onfinish = resolve\n  })\n}\n\nexport const canUseAnimation = () =>\n  typeof HTMLElement.prototype.animate === \"function\"\n\nexport const animateElement = canUseAnimation()\n  ? animateNative\n  : animateFallback\n\nexport const fadeIn = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 0,\n      },\n      {\n        opacity: 1,\n      },\n    ],\n    options,\n  )\n\nexport const fadeOut = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 1,\n      },\n      {\n        opacity: 0,\n      },\n    ],\n    options,\n  )\n\nexport const move = (fromNode, toNode, options) => {\n  const fromComputedStyle = window.getComputedStyle(fromNode)\n  const toComputedStyle = window.getComputedStyle(toNode)\n  // get positions of input in toolbar and aElement\n  const fromPosition = fromNode.getBoundingClientRect()\n  const toPosition = toNode.getBoundingClientRect()\n\n  // we'll do the animation in a div preventing overflow and pointer events\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.left = 0\n  div.style.top = 0\n  div.style.width = `${document.documentElement.scrollWidth}px`\n  div.style.height = `${document.documentElement.scrollHeight}px`\n  div.style.overflow = \"hidden\"\n  div.style.pointerEvents = \"none\"\n\n  const documentScroll = {\n    left: window.pageXOffset || document.documentElement.scrollLeft,\n    top: window.pageYOffset || document.documentElement.scrollTop,\n  }\n\n  // clone node and style it\n  const copy = fromNode.cloneNode(true)\n  copy.style.position = \"absolute\"\n  copy.style.left = `${documentScroll.left + fromPosition.left}px`\n  copy.style.top = `${documentScroll.top + fromPosition.top}px`\n  copy.style.maxWidth = `${fromPosition.right - fromPosition.left}px`\n  copy.style.overflow = toComputedStyle.overflow\n  copy.style.textOverflow = toComputedStyle.textOverflow\n  div.appendChild(copy)\n  document.body.appendChild(div)\n\n  const left =\n    toPosition.left -\n    fromPosition.left -\n    (parseInt(fromComputedStyle.paddingLeft) || 0)\n  const top =\n    toPosition.top -\n    fromPosition.top -\n    (parseInt(fromComputedStyle.paddingTop) || 0)\n  // define final position of new element and the duration\n  const translate = `translate(${left}px, ${top}px)`\n\n  // animate new element\n  return animateElement(\n    copy,\n    [\n      {\n        transform: \"translate(0px, 0px)\",\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n        fontSize: fromComputedStyle.fontSize,\n        height: `${fromPosition.bottom - fromPosition.top}px`,\n        width: \"100%\",\n      },\n      {\n        offset: 0.9,\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n      },\n      {\n        transform: translate,\n        backgroundColor: toComputedStyle.backgroundColor,\n        color: toComputedStyle.color,\n        fontSize: toComputedStyle.fontSize,\n        height: `${toPosition.bottom - toPosition.top}px`,\n        width: toComputedStyle.width,\n      },\n    ],\n    options,\n  ).then(() => {\n    div.parentNode.removeChild(div)\n  })\n}\n\n// the whole point of this toolbar animation wass to flight a visual imperfection when it's done by css transition.\n// This imperfection is a white line sometimes flickering at the bottom of the page.\n// It got fixed by removing the usage of calc(100vh - 40px)\n// It was hapenning in chrome, safari but not inside Firefox\n// I assume it's because Firefox does not read parent element min-height while\n// chrome use it to compute min-height: 100%\nexport const createToolbarAnimation = () => {\n  const collapsedState = {\n    \"#page\": { paddingBottom: 0 },\n    \"footer\": { height: 0 },\n    \"#toolbar\": { visibility: \"hidden\" },\n  }\n  const expandedState = {\n    \"#page\": { paddingBottom: \"40px\" },\n    \"footer\": { height: \"40px\" },\n    \"#toolbar\": { visibility: \"visible\" },\n  }\n  const expandTransition = transit(collapsedState, expandedState, {\n    duration: 300,\n  })\n\n  const expand = () => {\n    expandTransition.play()\n  }\n\n  const collapse = () => {\n    expandTransition.reverse()\n  }\n\n  return { expand, collapse }\n}\n\nexport const transit = (\n  fromState,\n  toState,\n  { commitStyles = true, fill = \"both\", duration = 300 } = {},\n) => {\n  const steps = []\n  Object.keys(fromState).forEach((selector) => {\n    const fromStyles = {}\n    const toStyles = {}\n    const element = document.querySelector(selector)\n\n    const keyframes = []\n    const fromProperties = fromState[selector]\n    const toProperties = toState[selector]\n    Object.keys(fromProperties).forEach((propertyName) => {\n      const from = fromProperties[propertyName]\n      const to = toProperties[propertyName]\n      fromStyles[propertyName] = from\n      toStyles[propertyName] = to\n    })\n    keyframes.push(fromStyles, toStyles)\n\n    let animation\n    if (canUseAnimation()) {\n      const effect = new KeyframeEffect(element, keyframes, { fill, duration })\n      animation = new Animation(effect)\n    } else {\n      animation = {\n        playbackRate: 1,\n        play: () => {\n          animation.onfinish()\n        },\n        reverse: () => {\n          animation.playbackRate = -1\n          animation.onfinish()\n        },\n        finish: () => {},\n        onfinish: () => {},\n      }\n    }\n\n    steps.push({\n      element,\n      animation,\n      fromStyles,\n      toStyles,\n    })\n  })\n\n  const play = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, toStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, toStyles)\n            }\n            resolve()\n          }\n          if (animation.playbackRate === -1) {\n            animation.reverse()\n          } else {\n            animation.play()\n          }\n        })\n      }),\n    )\n  }\n\n  const reverse = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, fromStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, fromStyles)\n            }\n            resolve()\n          }\n          animation.reverse()\n        })\n      }),\n    )\n  }\n\n  const finish = async () => {\n    steps.forEach(({ animation }) => {\n      animation.finish()\n    })\n  }\n\n  return { play, reverse, finish }\n}\n\nexport const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t,\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    // console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    }\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {}\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\n\nexport const fetchUsingXHR = async (\n  url,\n  {\n    signal,\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  signal.addEventListener(\"abort\", () => {\n    xhr.abort()\n    const abortError = new Error(\"aborted\")\n    abortError.name = \"AbortError\"\n    failure(abortError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl =\n    \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    createDetailedMessage(`error during xhr request on ${url}.`, {\n      [\"error stack\"]: error.stack,\n    }),\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return (\n        value && viewClasses.includes(Object.prototype.toString.call(value))\n      )\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { fetchUsingXHR } from \"./fetchUsingXHR.js\"\n\nconst fetchNative = async (url, { mode = \"cors\", ...options } = {}) => {\n  const response = await window.fetch(url, {\n    mode,\n    ...options,\n  })\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" &&\n  typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch-browser.js\"\n\nexport const fetchJson = async (url, options = {}) => {\n  const response = await fetchUrl(url, options)\n  const object = await response.json()\n  return object\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\n\nimport { fetchJson } from \"../../browser-utils/fetchJson.js\"\n\nexport const fetchExploringJson = async ({ signal } = {}) => {\n  try {\n    const exploringInfo = await fetchJson(\"/.jsenv/exploring.json\", {\n      signal,\n    })\n    return exploringInfo\n  } catch (e) {\n    if (signal && signal.aborted && e.name === \"AbortError\") {\n      throw e\n    }\n    throw new Error(\n      createDetailedMessage(\n        `Cannot communicate with exploring server due to a network error`,\n        {\n          [\"error stack\"]: e.stack,\n        },\n      ),\n    )\n  }\n}\n",
    "import { fetchUrl } from \"../toolbar/util/fetching.js\"\nimport { createPreference } from \"../toolbar/util/preferences.js\"\nimport { startJavaScriptAnimation } from \"../toolbar/util/animation.js\"\nimport { fetchExploringJson } from \"./fetchExploringJson.js\"\n\nconst fetchJSON = async (url, options) => {\n  const response = await fetchUrl(url, options)\n  const json = await response.json()\n  return json\n}\n\nconst groupPreference = createPreference(\"group\")\n\nconst run = async () => {\n  const { projectDirectoryUrl, explorableConfig, outDirectoryRelativeUrl } =\n    await fetchExploringJson()\n\n  const files = await fetchJSON(`/.jsenv/explorables.json`, {\n    method: \"GET\",\n  })\n\n  const compileServerOrigin = document.location.origin\n  const outDirectoryUrl = String(\n    new URL(outDirectoryRelativeUrl, compileServerOrigin),\n  )\n  const documentUrl = document.location.href\n  let compileId\n\n  const outDirectoryIndex = documentUrl.indexOf(outDirectoryUrl)\n  if (outDirectoryIndex === 0) {\n    const afterOutDirectory = documentUrl.slice(outDirectoryUrl.length)\n    compileId = afterOutDirectory.split(\"/\")[0]\n  } else {\n    compileId = null\n  }\n\n  const renderHtml = () => {\n    // const mainHtmlFileRelativeUrl = \"index.html\"\n    // const mainFileLink = document.querySelector(\"#main_file_link\")\n    // const mainFileUrl = urlToVisitFromRelativeUrl(mainHtmlFileRelativeUrl)\n    // mainFileLink.href = mainFileUrl\n    // mainFileLink.textContent = `${mainHtmlFileRelativeUrl}`\n    // const mainFileIframe = document.querySelector(`#main_file_iframe`)\n    // mainFileIframe.src = mainFileUrl\n\n    const fileListElement = document\n      .querySelector(`[data-page=\"file-list\"]`)\n      .cloneNode(true)\n    const directoryName = directoryUrlToDirectoryName(projectDirectoryUrl)\n    const span = fileListElement.querySelector(\"#directory_relative_url\")\n    span.title = projectDirectoryUrl\n    span.textContent = directoryName\n\n    const h4 = fileListElement.querySelector(\"h4\")\n\n    const ul = fileListElement.querySelector(\"ul\")\n    ul.innerHTML = files\n      .map(\n        (file) =>\n          `<li>\n          <a\n            class=\"execution-link\"\n            data-relative-url=${file.relativeUrl}\n            href=${urlToVisitFromRelativeUrl(file.relativeUrl)}\n          >\n            ${file.relativeUrl}\n          </a>\n        </li>`,\n      )\n      .join(\"\")\n\n    const groupFieldset = fileListElement.querySelector(\"#filter-group-set\")\n    const groupNames = Object.keys(explorableConfig)\n    groupFieldset.innerHTML = groupNames\n      .map(\n        (key) => `<label data-contains-hidden-input class=\"item\">\n  <input type=\"radio\" name=\"filter-group\" value=\"${key}\"/>\n  <span>${key}</span>\n</label>`,\n      )\n      .join(\"\")\n\n    const currentGroup = groupPreference.has()\n      ? groupPreference.get()\n      : groupNames[0]\n    Array.from(groupFieldset.querySelectorAll(\"input\")).forEach(\n      (inputRadio) => {\n        inputRadio.checked = inputRadio.value === currentGroup\n        inputRadio.onchange = () => {\n          if (inputRadio.checked) {\n            groupPreference.set(inputRadio.value)\n            enableGroup(inputRadio.value)\n          }\n        }\n      },\n    )\n\n    const enableGroup = (groupName) => {\n      const arrayOfElementToShow = []\n      const arrayOfElementToHide = []\n      files.forEach((file) => {\n        const fileLink = fileListElement.querySelector(\n          `a[data-relative-url=\"${file.relativeUrl}\"]`,\n        )\n        const fileLi = fileLink.parentNode\n        if (file.meta[groupName]) {\n          arrayOfElementToShow.push(fileLi)\n        } else {\n          arrayOfElementToHide.push(fileLi)\n        }\n      })\n      arrayOfElementToShow.forEach((element) => {\n        element.removeAttribute(\"data-force-hide\")\n      })\n      arrayOfElementToHide.forEach((element) => {\n        element.setAttribute(\"data-force-hide\", \"\")\n      })\n\n      h4.innerHTML =\n        arrayOfElementToShow.length === 0\n          ? `No file found.\n              Config for this section: <pre>${JSON.stringify(\n                explorableConfig[groupName],\n                null,\n                \"  \",\n              )}</pre>`\n          : `${arrayOfElementToShow.length} files found. Click on the one you want to execute`\n    }\n    enableGroup(currentGroup)\n\n    document.querySelector(\"main\").appendChild(fileListElement)\n    makeMenuScrollable()\n  }\n\n  const urlToVisitFromRelativeUrl = (relativeUrl) => {\n    if (compileId) {\n      return `${compileServerOrigin}/${outDirectoryRelativeUrl}${compileId}/${relativeUrl}`\n    }\n    return `${compileServerOrigin}/${relativeUrl}`\n  }\n\n  const makeMenuScrollable = () => {\n    const getMenuWrapperSize = () => {\n      return document.querySelector(\".menu-wrapper\").getBoundingClientRect()\n        .width\n    }\n    let menuWrapperSize = getMenuWrapperSize()\n\n    const getMenuSize = () => {\n      return document.querySelector(\".menu\").getBoundingClientRect().width\n    }\n    let menuSize = getMenuSize()\n\n    const menuVisibleSize = menuWrapperSize\n    let menuInvisibleSize = menuSize - menuVisibleSize\n\n    const getMenuPosition = () => {\n      return document.querySelector(\".menu-wrapper\").scrollLeft\n    }\n\n    const scrollDuration = 300\n    const leftPaddle = document.querySelector(\".left-paddle\")\n    const rightPaddle = document.querySelector(\".right-paddle\")\n\n    const handleMenuScroll = () => {\n      menuInvisibleSize = menuSize - menuWrapperSize\n      const menuPosition = getMenuPosition()\n      const menuEndOffset = menuInvisibleSize\n\n      // show & hide the paddles, depending on scroll position\n      if (menuPosition <= 0 && menuEndOffset <= 0) {\n        // hide both paddles if the window is large enough to display all tabs\n        leftPaddle.classList.add(\"hidden\")\n        rightPaddle.classList.add(\"hidden\")\n      } else if (menuPosition <= 0) {\n        leftPaddle.classList.add(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition < Math.floor(menuEndOffset)) {\n        // show both paddles in the middle\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition >= Math.floor(menuEndOffset)) {\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.add(\"hidden\")\n      }\n    }\n    handleMenuScroll()\n\n    window.onresize = () => {\n      menuWrapperSize = getMenuWrapperSize()\n      menuSize = getMenuSize()\n      handleMenuScroll()\n    }\n\n    // finally, what happens when we are actually scrolling the menu\n    document.querySelector(\".menu-wrapper\").onscroll = () => {\n      handleMenuScroll()\n    }\n\n    // scroll to left\n    rightPaddle.onclick = () => {\n      const scrollStart = document.querySelector(\".menu-wrapper\").scrollLeft\n      const scrollEnd = scrollStart + menuWrapperSize\n      startJavaScriptAnimation({\n        duration: scrollDuration,\n        onProgress: ({ progress }) => {\n          document.querySelector(\".menu-wrapper\").scrollLeft =\n            scrollStart + (scrollEnd - scrollStart) * progress\n        },\n      })\n    }\n\n    // scroll to right\n    leftPaddle.onclick = () => {\n      const scrollStart = document.querySelector(\".menu-wrapper\").scrollLeft\n      const scrollEnd = scrollStart - menuWrapperSize\n      startJavaScriptAnimation({\n        duration: scrollDuration,\n        onProgress: ({ progress }) => {\n          document.querySelector(\".menu-wrapper\").scrollLeft =\n            scrollStart + (scrollEnd - scrollStart) * progress\n        },\n      })\n    }\n  }\n\n  const directoryUrlToDirectoryName = (directoryUrl) => {\n    const slashLastIndex = directoryUrl.lastIndexOf(\n      \"/\",\n      // ignore last slash\n      directoryUrl.length - 2,\n    )\n    if (slashLastIndex === -1) return \"\"\n\n    return directoryUrl.slice(slashLastIndex + 1)\n  }\n\n  renderHtml()\n}\n\nrun()\n"
  ],
  "names": [
    "memoize",
    "compute",
    "memoized",
    "memoizedValue",
    "fnWithMemoization",
    "forget",
    "value",
    "undefined",
    "_call",
    "body",
    "then",
    "direct",
    "result",
    "Promise",
    "resolve",
    "e",
    "reject",
    "fetchPolyfill",
    "args",
    "loadPolyfill",
    "fetchUsingXHR",
    "fetchUrl",
    "window",
    "fetch",
    "AbortController",
    "createPreference",
    "name",
    "has",
    "localStorage",
    "hasOwnProperty",
    "get",
    "JSON",
    "parse",
    "getItem",
    "set",
    "setItem",
    "stringify",
    "source",
    "excluded",
    "target",
    "sourceKeys",
    "Object",
    "keys",
    "key",
    "i",
    "length",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "getOwnPropertySymbols",
    "sourceSymbolKeys",
    "prototype",
    "propertyIsEnumerable",
    "call",
    "startJavaScriptAnimation",
    "duration",
    "timingFunction",
    "t",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "parseInt",
    "startMs",
    "performance",
    "now",
    "currentRequestAnimationFrameId",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "nowMs",
    "Math",
    "min",
    "requestAnimationFrame",
    "stop",
    "cancelAnimationFrame",
    "obj",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "createDetailedMessage",
    "message",
    "details",
    "string",
    "forEach",
    "Array",
    "isArray",
    "join",
    "ownKeys",
    "object",
    "enumerableOnly",
    "symbols",
    "filter",
    "sym",
    "getOwnPropertyDescriptor",
    "push",
    "apply",
    "_objectSpread2",
    "arguments",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "nativeTypeOf",
    "customTypeOf",
    "Symbol",
    "constructor",
    "iterator",
    "f",
    "url",
    "signal",
    "method",
    "credentials",
    "headers",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "error",
    "settled",
    "cleanup",
    "ontimeout",
    "onerror",
    "onload",
    "onreadystatechange",
    "Error",
    "createRequestError",
    "addEventListener",
    "abort",
    "abortError",
    "readyState",
    "open",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseUrl",
    "responseURL",
    "responseStatus",
    "status",
    "responseStatusText",
    "statusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "String",
    "json",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "FileReader",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "stack",
    "promise",
    "res",
    "rej",
    "originSameAsGlobalOrigin",
    "location",
    "globalOrigin",
    "origin",
    "hrefToOrigin",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "line",
    "parts",
    "shift",
    "toLowerCase",
    "href",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "slice",
    "colonIndex",
    "DataView",
    "isView",
    "viewClasses",
    "includes",
    "toString",
    "form",
    "bytes",
    "replace",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "fromCharCode",
    "byteLength",
    "_await",
    "fetchNative",
    "mode",
    "options",
    "responseToHeaders",
    "_async",
    "fetchJson",
    "recover",
    "fetchExploringJson",
    "aborted",
    "fetchJSON",
    "groupPreference",
    "run",
    "projectDirectoryUrl",
    "explorableConfig",
    "outDirectoryRelativeUrl",
    "files",
    "compileServerOrigin",
    "document",
    "outDirectoryUrl",
    "URL",
    "documentUrl",
    "compileId",
    "outDirectoryIndex",
    "afterOutDirectory",
    "renderHtml",
    "fileListElement",
    "querySelector",
    "cloneNode",
    "directoryName",
    "directoryUrlToDirectoryName",
    "span",
    "title",
    "textContent",
    "h4",
    "ul",
    "innerHTML",
    "map",
    "file",
    "relativeUrl",
    "urlToVisitFromRelativeUrl",
    "groupFieldset",
    "groupNames",
    "currentGroup",
    "from",
    "querySelectorAll",
    "inputRadio",
    "checked",
    "onchange",
    "enableGroup",
    "groupName",
    "arrayOfElementToShow",
    "arrayOfElementToHide",
    "fileLink",
    "fileLi",
    "parentNode",
    "meta",
    "element",
    "removeAttribute",
    "setAttribute",
    "appendChild",
    "makeMenuScrollable",
    "getMenuWrapperSize",
    "getBoundingClientRect",
    "width",
    "menuWrapperSize",
    "getMenuSize",
    "menuSize",
    "menuVisibleSize",
    "menuInvisibleSize",
    "getMenuPosition",
    "scrollLeft",
    "scrollDuration",
    "leftPaddle",
    "rightPaddle",
    "handleMenuScroll",
    "menuPosition",
    "menuEndOffset",
    "classList",
    "add",
    "remove",
    "floor",
    "onresize",
    "onscroll",
    "onclick",
    "scrollStart",
    "scrollEnd",
    "directoryUrl",
    "slashLastIndex",
    "lastIndexOf"
  ],
  "mappings": "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"
}