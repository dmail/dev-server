{
  "version": 3,
  "file": "html_supervisor_classic.js",
  "sources": [
    "../../src/internal/memoize.js",
    "../../helpers/babel/defineProperty/defineProperty.js",
    "../../helpers/babel/objectSpread2/objectSpread2.js",
    "../../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../../helpers/babel/typeof/typeof.js",
    "../../src/internal/browser_utils/fetch_using_xhr.js",
    "../../src/internal/browser_utils/fetch_browser.js",
    "../../src/internal/browser_utils/fetch_and_eval.js",
    "../../src/internal/url_context.js",
    "../../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../../src/internal/html_supervisor/ressource_response_error.js",
    "../../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../../helpers/babel/arrayWithoutHoles/arrayWithoutHoles.js",
    "../../helpers/babel/iterableToArray/iterableToArray.js",
    "../../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../../helpers/babel/nonIterableSpread/nonIterableSpread.js",
    "../../helpers/babel/toConsumableArray/toConsumableArray.js",
    "../../node_modules/@jsenv/uneval/src/internal/isComposite.js",
    "../../node_modules/@jsenv/uneval/src/internal/global-value-path.js",
    "../../node_modules/@jsenv/uneval/src/internal/decompose.js",
    "../../node_modules/@jsenv/uneval/src/internal/sortRecipe.js",
    "../../node_modules/@jsenv/uneval/src/internal/escapeString.js",
    "../../node_modules/@jsenv/uneval/src/uneval.js",
    "../../src/internal/html_supervisor/uneval_exception.js",
    "../../src/internal/html_supervisor/error_in_document.js",
    "../../src/internal/html_supervisor/error_in_notification.js",
    "../../src/internal/html_supervisor/html_supervisor.js",
    "../../src/internal/data_url.js",
    "../../src/internal/sourcemap_utils.js",
    "../../src/internal/windows_file_path_utils.js",
    "../../src/internal/error_stack_remap/remap_call_site.js",
    "../../src/internal/error_stack_remap/remap_stack.js",
    "../../src/internal/error_stack_remap/stringify_stack.js",
    "../../src/internal/error_stack_remap/install_error_stack_remapping.js",
    "../../src/internal/html_supervisor/classic/browser_error_stack_remap.js",
    "../../node_modules/@jsenv/importmap/src/internal/assertImportMap.js",
    "../../node_modules/@jsenv/importmap/src/internal/hasScheme.js",
    "../../node_modules/@jsenv/importmap/src/internal/urlToScheme.js",
    "../../node_modules/@jsenv/importmap/src/internal/urlToPathname.js",
    "../../node_modules/@jsenv/importmap/src/internal/urlToOrigin.js",
    "../../node_modules/@jsenv/importmap/src/internal/pathnameToParentPathname.js",
    "../../node_modules/@jsenv/importmap/src/resolveUrl.js",
    "../../node_modules/@jsenv/importmap/src/internal/tryUrlResolution.js",
    "../../node_modules/@jsenv/importmap/src/resolveSpecifier.js",
    "../../node_modules/@jsenv/importmap/src/sortImportMap.js",
    "../../node_modules/@jsenv/importmap/src/normalizeImportMap.js",
    "../../node_modules/@jsenv/importmap/src/internal/pathnameToExtension.js",
    "../../node_modules/@jsenv/importmap/src/applyImportMap.js",
    "../../node_modules/@jsenv/importmap/src/resolveImport.js",
    "../../src/internal/import_resolution/default_extension.js",
    "../../src/internal/import_resolution/import_resolver_importmap.js",
    "../../src/internal/runtime_client/s.js",
    "../../src/internal/html_supervisor/classic/browser_system.js",
    "../../src/internal/html_supervisor/classic/browser_client_factory.js",
    "../../src/internal/html_supervisor/classic/html_supervisor_classic.js"
  ],
  "sourcesContent": [
    "export const memoize = (compute) => {\n  let memoized = false\n  let memoizedValue\n\n  const fnWithMemoization = (...args) => {\n    if (memoized) {\n      return memoizedValue\n    }\n    // if compute is recursive wait for it to be fully done before storing the lockValue\n    // so set locked later\n    memoizedValue = compute(...args)\n    memoized = true\n    return memoizedValue\n  }\n\n  fnWithMemoization.forget = () => {\n    const value = memoizedValue\n    memoized = false\n    memoizedValue = undefined\n    return value\n  }\n\n  return fnWithMemoization\n}\n",
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\n// This function is different to \"Reflect.ownKeys\". The enumerableOnly\n// filters on symbol properties only. Returned string properties are always\n// enumerable. It is good to use in objectSpread.\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(\n          target,\n          key,\n          Object.getOwnPropertyDescriptor(source, key)\n        );\n      });\n    }\n  }\n  return target;\n}",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const fetchUsingXHR = async (\n  url,\n  {\n    signal,\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  signal.addEventListener(\"abort\", () => {\n    xhr.abort()\n    const abortError = new Error(\"aborted\")\n    abortError.name = \"AbortError\"\n    failure(abortError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl =\n    \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    `error during xhr request on ${url}.\n--- error stack ---\n${error.stack}`,\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return (\n        value && viewClasses.includes(Object.prototype.toString.call(value))\n      )\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { fetchUsingXHR } from \"./fetch_using_xhr.js\"\n\nconst fetchNative = async (url, { mode = \"cors\", ...options } = {}) => {\n  const response = await window.fetch(url, {\n    mode,\n    ...options,\n  })\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" &&\n  typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch_browser.js\"\n\nexport const fetchAndEval = async (url) => {\n  const response = await fetchUrl(url)\n\n  if (response.status >= 200 && response.status <= 299) {\n    const text = await response.text()\n    // eslint-disable-next-line no-eval\n    window.eval(appendSourceURL(text, url))\n  } else {\n    const text = await response.text()\n    throw new Error(\n      `Unexpected response for script.\n--- script url ---\n${url}\n--- response body ---\n${text}\n--- response status ---\n${response.status}`,\n    )\n  }\n}\n\nconst appendSourceURL = (code, sourceURL) => {\n  return `${code}\n${\"//#\"} sourceURL=${sourceURL}`\n}\n",
    "export const inferContextFrom = ({\n  url,\n  jsenvDirectoryRelativeUrl = \".jsenv/\",\n}) => {\n  const { origin, pathname } = new URL(url)\n  if (!pathname.startsWith(`/${jsenvDirectoryRelativeUrl}`)) {\n    return {\n      projectDirectoryServerUrl: `${origin}/`,\n      jsenvDirectoryRelativeUrl: null,\n      compileId: null,\n      compileDirectoryRelativeUrl: null,\n    }\n  }\n  const slashIndex = pathname.indexOf(\"/\", 1)\n  const afterJsenvDirectory = pathname.slice(slashIndex + 1)\n  const nextSlashIndex = afterJsenvDirectory.indexOf(\"/\")\n  const compileId = afterJsenvDirectory.slice(0, nextSlashIndex)\n  return {\n    projectDirectoryServerUrl: `${origin}/`,\n    jsenvDirectoryRelativeUrl,\n    compileId,\n    compileDirectoryRelativeUrl: `${jsenvDirectoryRelativeUrl}${compileId}/`,\n  }\n}\n\nexport const createUrlContext = ({\n  projectDirectoryServerUrl,\n  compileDirectoryRelativeUrl,\n}) => {\n  if (!compileDirectoryRelativeUrl) {\n    const compileDirectoryServerUrl = `${projectDirectoryServerUrl}.jsenv/out/`\n    return {\n      asSourceRelativeUrl: (url) => {\n        if (url.startsWith(projectDirectoryServerUrl)) {\n          return url.slice(projectDirectoryServerUrl.length)\n        }\n        return url\n      },\n      asSourceUrl: (sourceRelativeUrl) => {\n        return `${projectDirectoryServerUrl}${sourceRelativeUrl}`\n      },\n      asCompiledUrl: (sourceRelativeUrl) => {\n        return `${compileDirectoryServerUrl}${sourceRelativeUrl}`\n      },\n      asUrlToFetch: (sourceRelativeUrl) => {\n        return `${projectDirectoryServerUrl}${sourceRelativeUrl}`\n      },\n    }\n  }\n  const compileDirectoryServerUrl = `${projectDirectoryServerUrl}${compileDirectoryRelativeUrl}`\n  return {\n    asSourceRelativeUrl: (url) => {\n      if (url.startsWith(compileDirectoryServerUrl)) {\n        return url.slice(compileDirectoryServerUrl.length)\n      }\n      if (url.startsWith(projectDirectoryServerUrl)) {\n        return url.slice(projectDirectoryServerUrl.length)\n      }\n      return url\n    },\n    asSourceUrl: (sourceRelativeUrl) => {\n      return `${projectDirectoryServerUrl}${sourceRelativeUrl}`\n    },\n    asCompiledUrl: (sourceRelativeUrl) => {\n      return `${compileDirectoryServerUrl}${sourceRelativeUrl}`\n    },\n    asUrlToFetch: (sourceRelativeUrl) => {\n      return `${compileDirectoryServerUrl}${sourceRelativeUrl}`\n    },\n  }\n}\n\nexport const getRessourceTrace = ({\n  urlContext,\n  url,\n  importerUrl,\n  type,\n  notFound = false,\n}) => {\n  const namings = {\n    js_module: {\n      declaration: \"import declared in\",\n      usage: \"imported by\",\n    },\n    js_script: {\n      declaration: \"referenced in\",\n      usage: \"referenced by\",\n    },\n    undefined: {\n      declaration: \"referenced in\",\n      usage: \"referenced by\",\n    },\n  }[type]\n  if (notFound) {\n    return {\n      ...(importerUrl\n        ? { [namings.declaration]: urlContext.asSourceRelativeUrl(importerUrl) }\n        : {}),\n      file: urlContext.asSourceRelativeUrl(url),\n    }\n  }\n  return {\n    file: urlContext.asSourceRelativeUrl(url),\n    ...(importerUrl\n      ? { [namings.usage]: urlContext.asSourceRelativeUrl(importerUrl) }\n      : {}),\n  }\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "import { createDetailedMessage } from \"@jsenv/core/node_modules/@jsenv/logger/main.browser.js\"\n\nimport { getRessourceTrace } from \"../url_context.js\"\n\nexport const getRessourceResponseError = async ({\n  urlContext,\n  contentTypeExpected,\n  type,\n  url,\n  importerUrl,\n  response,\n}) => {\n  if (response.status === 404) {\n    return new Error(\n      createDetailedMessage(\"file cannot be found\", {\n        ...getRessourceTrace({\n          urlContext,\n          url,\n          importerUrl,\n          type,\n          notFound: true,\n        }),\n      }),\n    )\n  }\n  const contentType = response.headers[\"content-type\"] || \"\"\n  if (response.status === 500 && contentType === \"application/json\") {\n    const bodyAsJson = await response.json()\n    if (bodyAsJson.code === \"PARSE_ERROR\") {\n      const error = new Error(\n        createDetailedMessage(\"file cannot be parsed\", {\n          \"parsing error message\": bodyAsJson.message,\n          ...getRessourceTrace({\n            urlContext,\n            url,\n            importerUrl,\n            type,\n          }),\n        }),\n      )\n      error.cause = bodyAsJson\n      return error\n    }\n  }\n  if (response.status < 200 || response.status >= 300) {\n    return new Error(\n      createDetailedMessage(\"file response status is unexpected\", {\n        \"status\": response.status,\n        \"allowed status\": \"200 to 299\",\n        \"statusText\": response.statusText,\n        ...getRessourceTrace({\n          urlContext,\n          url,\n          importerUrl,\n          type,\n        }),\n      }),\n    )\n  }\n  if (contentType !== contentTypeExpected) {\n    return new Error(\n      createDetailedMessage(\n        `Failed to load ressource: Expected \"${contentTypeExpected}\" MIME type but the server responded with a MIME type of \"${contentType}\"`,\n        {\n          ...getRessourceTrace({\n            urlContext,\n            url,\n            importerUrl,\n            type,\n          }),\n          ...(contentTypeExpected === \"application/javascript\" &&\n          type === \"js_module\"\n            ? {\n                suggestion: `Use import.meta.url or import assertions as documented in https://github.com/jsenv/jsenv-core/blob/master/docs/assets/readme.md`,\n              }\n            : {}),\n        },\n      ),\n    )\n  }\n  return null\n}\n",
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "import arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\n// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr)\n}\n",
    "export default function _iterableToArray(iter) {\n  if (\n    (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null) ||\n    iter[\"@@iterator\"] != null\n  )\n    return Array.from(iter)\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithoutHoles from \"../arrayWithoutHoles/arrayWithoutHoles.js\"\nimport iterableToArray from \"../iterableToArray/iterableToArray.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableSpread from \"../nonIterableSpread/nonIterableSpread.js\"\n\nexport default (arr) =>\n  arrayWithoutHoles(arr) ||\n  iterableToArray(arr) ||\n  unsupportedIterableToArray(arr) ||\n  nonIterableSpread()\n",
    "// https://developer.mozilla.org/en-US/docs/Glossary/Primitive\n\nexport const isComposite = (value) => {\n  if (value === null) {\n    return false\n  }\n\n  const type = typeof value\n  if (type === \"object\") {\n    return true\n  }\n\n  if (type === \"function\") {\n    return true\n  }\n\n  return false\n}\n",
    "import { isComposite } from \"./isComposite.js\"\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\nconst compositeWellKnownMap = new WeakMap()\nconst primitiveWellKnownMap = new Map()\n\nexport const getCompositeGlobalPath = (value) => compositeWellKnownMap.get(value)\n\nexport const getPrimitiveGlobalPath = (value) => primitiveWellKnownMap.get(value)\n\nconst visitGlobalObject = (value) => {\n  const visitValue = (value, path) => {\n    if (isComposite(value)) {\n      // prevent infinite recursion\n      if (compositeWellKnownMap.has(value)) {\n        return\n      }\n      compositeWellKnownMap.set(value, path)\n\n      const visitProperty = (property) => {\n        let descriptor\n        try {\n          descriptor = Object.getOwnPropertyDescriptor(value, property)\n        } catch (e) {\n          if (e.name === \"SecurityError\") {\n            return\n          }\n          throw e\n        }\n\n        if (!descriptor) {\n          // it's apparently possible to have getOwnPropertyNames returning\n          // a property that later returns a null descriptor\n          // for instance window.showModalDialog in webkit 13.0\n          return\n        }\n\n        // do not trigger getter/setter\n        if (\"value\" in descriptor) {\n          const propertyValue = descriptor.value\n          visitValue(propertyValue, [...path, property])\n        }\n      }\n\n      Object.getOwnPropertyNames(value).forEach((name) => visitProperty(name))\n      Object.getOwnPropertySymbols(value).forEach((symbol) => visitProperty(symbol))\n    }\n\n    primitiveWellKnownMap.set(value, path)\n    return\n  }\n\n  visitValue(value, [])\n}\n\nif (typeof window === \"object\") visitGlobalObject(window)\n\nif (typeof global === \"object\") visitGlobalObject(global)\n",
    "/**\n * transforms a javascript value into an object describing it.\n *\n */\n\nimport { isComposite } from \"./isComposite.js\"\nimport { getCompositeGlobalPath, getPrimitiveGlobalPath } from \"./global-value-path.js\"\n\nexport const decompose = (mainValue, { functionAllowed, prototypeStrict, ignoreSymbols }) => {\n  const valueMap = {}\n  const recipeArray = []\n\n  const valueToIdentifier = (value, path = []) => {\n    if (!isComposite(value)) {\n      const existingIdentifier = identifierForPrimitive(value)\n      if (existingIdentifier !== undefined) {\n        return existingIdentifier\n      }\n      const identifier = identifierForNewValue(value)\n      recipeArray[identifier] = primitiveToRecipe(value)\n      return identifier\n    }\n\n    if (typeof Promise === \"function\" && value instanceof Promise) {\n      throw new Error(createPromiseAreNotSupportedMessage({ path }))\n    }\n    if (typeof WeakSet === \"function\" && value instanceof WeakSet) {\n      throw new Error(createWeakSetAreNotSupportedMessage({ path }))\n    }\n    if (typeof WeakMap === \"function\" && value instanceof WeakMap) {\n      throw new Error(createWeakMapAreNotSupportedMessage({ path }))\n    }\n    if (typeof value === \"function\" && !functionAllowed) {\n      throw new Error(createForbiddenFunctionMessage({ path }))\n    }\n\n    const existingIdentifier = identifierForComposite(value)\n    if (existingIdentifier !== undefined) {\n      return existingIdentifier\n    }\n    const identifier = identifierForNewValue(value)\n\n    const compositeGlobalPath = getCompositeGlobalPath(value)\n    if (compositeGlobalPath) {\n      recipeArray[identifier] = createGlobalReferenceRecipe(compositeGlobalPath)\n      return identifier\n    }\n\n    const propertyDescriptionArray = []\n    Object.getOwnPropertyNames(value).forEach((propertyName) => {\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(value, propertyName)\n      const propertyNameIdentifier = valueToIdentifier(propertyName, [...path, propertyName])\n      const propertyDescription = computePropertyDescription(propertyDescriptor, propertyName, path)\n      propertyDescriptionArray.push({ propertyNameIdentifier, propertyDescription })\n    })\n\n    const symbolDescriptionArray = []\n    if (!ignoreSymbols) {\n      Object.getOwnPropertySymbols(value).forEach((symbol) => {\n        const propertyDescriptor = Object.getOwnPropertyDescriptor(value, symbol)\n        const symbolIdentifier = valueToIdentifier(symbol, [...path, `[${symbol.toString()}]`])\n        const propertyDescription = computePropertyDescription(propertyDescriptor, symbol, path)\n        symbolDescriptionArray.push({ symbolIdentifier, propertyDescription })\n      })\n    }\n\n    const methodDescriptionArray = computeMethodDescriptionArray(value, path)\n\n    const extensible = Object.isExtensible(value)\n\n    recipeArray[identifier] = createCompositeRecipe({\n      propertyDescriptionArray,\n      symbolDescriptionArray,\n      methodDescriptionArray,\n      extensible,\n    })\n    return identifier\n  }\n\n  const computePropertyDescription = (propertyDescriptor, propertyNameOrSymbol, path) => {\n    if (propertyDescriptor.set && !functionAllowed) {\n      throw new Error(createForbiddenPropertySetterMessage({ path, propertyNameOrSymbol }))\n    }\n    if (propertyDescriptor.get && !functionAllowed) {\n      throw new Error(createForbiddenPropertyGetterMessage({ path, propertyNameOrSymbol }))\n    }\n\n    return {\n      configurable: propertyDescriptor.configurable,\n      writable: propertyDescriptor.writable,\n      enumerable: propertyDescriptor.enumerable,\n      getIdentifier:\n        \"get\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.get, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:get]]\",\n            ])\n          : undefined,\n      setIdentifier:\n        \"set\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.set, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:set]]\",\n            ])\n          : undefined,\n      valueIdentifier:\n        \"value\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.value, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:value]]\",\n            ])\n          : undefined,\n    }\n  }\n\n  const computeMethodDescriptionArray = (value, path) => {\n    const methodDescriptionArray = []\n\n    if (typeof Set === \"function\" && value instanceof Set) {\n      const callArray = []\n      value.forEach((entryValue, index) => {\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          `[[SetEntryValue]]`,\n          index,\n        ])\n        callArray.push([entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"add\"), callArray })\n    }\n\n    if (typeof Map === \"function\" && value instanceof Map) {\n      const callArray = []\n      value.forEach((entryValue, entryKey) => {\n        const entryKeyIdentifier = valueToIdentifier(entryKey, [\n          ...path,\n          \"[[MapEntryKey]]\",\n          entryKey,\n        ])\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          \"[[MapEntryValue]]\",\n          entryValue,\n        ])\n        callArray.push([entryKeyIdentifier, entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"set\"), callArray })\n    }\n\n    return methodDescriptionArray\n  }\n\n  const identifierForPrimitive = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      if (Object.is(value, existingValue)) return true\n      return value === existingValue\n    })\n  }\n\n  const identifierForComposite = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      return value === existingValue\n    })\n  }\n\n  const identifierForNewValue = (value) => {\n    const identifier = nextIdentifier()\n    valueMap[identifier] = value\n    return identifier\n  }\n\n  let currentIdentifier = -1\n  const nextIdentifier = () => {\n    const identifier = String(parseInt(currentIdentifier) + 1)\n    currentIdentifier = identifier\n    return identifier\n  }\n\n  const mainIdentifier = valueToIdentifier(mainValue)\n\n  // prototype, important to keep after the whole structure was visited\n  // so that we discover if any prototype is part of the value\n  const prototypeValueToIdentifier = (prototypeValue) => {\n    // prototype is null\n    if (prototypeValue === null) {\n      return valueToIdentifier(prototypeValue)\n    }\n\n    // prototype found somewhere already\n    const prototypeExistingIdentifier = identifierForComposite(prototypeValue)\n    if (prototypeExistingIdentifier !== undefined) {\n      return prototypeExistingIdentifier\n    }\n\n    // mark prototype as visited\n    const prototypeIdentifier = identifierForNewValue(prototypeValue)\n\n    // prototype is a global reference ?\n    const prototypeGlobalPath = getCompositeGlobalPath(prototypeValue)\n    if (prototypeGlobalPath) {\n      recipeArray[prototypeIdentifier] = createGlobalReferenceRecipe(prototypeGlobalPath)\n      return prototypeIdentifier\n    }\n\n    // otherwise prototype is unknown\n    if (prototypeStrict) {\n      throw new Error(createUnknownPrototypeMessage({ prototypeValue }))\n    }\n\n    return prototypeValueToIdentifier(Object.getPrototypeOf(prototypeValue), true)\n  }\n  const identifierForValueOf = (value, path = []) => {\n    if (value instanceof Array) {\n      return valueToIdentifier(value.length, [...path, \"length\"])\n    }\n\n    if (\"valueOf\" in value === false) {\n      return undefined\n    }\n\n    if (typeof value.valueOf !== \"function\") {\n      return undefined\n    }\n\n    const valueOfReturnValue = value.valueOf()\n    if (!isComposite(valueOfReturnValue)) {\n      return valueToIdentifier(valueOfReturnValue, [...path, \"valueOf()\"])\n    }\n\n    if (valueOfReturnValue === value) {\n      return undefined\n    }\n\n    throw new Error(createUnexpectedValueOfReturnValueMessage())\n  }\n\n  recipeArray.slice().forEach((recipe, index) => {\n    if (recipe.type === \"composite\") {\n      const value = valueMap[index]\n\n      if (typeof value === \"function\") {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      if (value instanceof RegExp) {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      // valueOf, mandatory to uneval new Date(10) for instance.\n      recipe.valueOfIdentifier = identifierForValueOf(value)\n      const prototypeValue = Object.getPrototypeOf(value)\n      recipe.prototypeIdentifier = prototypeValueToIdentifier(prototypeValue, true)\n    }\n  })\n\n  return {\n    recipeArray,\n    mainIdentifier,\n    valueMap,\n  }\n}\n\nconst primitiveToRecipe = (value) => {\n  if (typeof value === \"symbol\") {\n    return symbolToRecipe(value)\n  }\n\n  return createPimitiveRecipe(value)\n}\n\nconst symbolToRecipe = (symbol) => {\n  const globalSymbolKey = Symbol.keyFor(symbol)\n  if (globalSymbolKey !== undefined) {\n    return createGlobalSymbolRecipe(globalSymbolKey)\n  }\n\n  const symbolGlobalPath = getPrimitiveGlobalPath(symbol)\n  if (!symbolGlobalPath) {\n    throw new Error(createUnknownSymbolMessage({ symbol }))\n  }\n\n  return createGlobalReferenceRecipe(symbolGlobalPath)\n}\n\nconst createPimitiveRecipe = (value) => {\n  return {\n    type: \"primitive\",\n    value,\n  }\n}\n\nconst createGlobalReferenceRecipe = (path) => {\n  const recipe = {\n    type: \"global-reference\",\n    path,\n  }\n  return recipe\n}\n\nconst createGlobalSymbolRecipe = (key) => {\n  return {\n    type: \"global-symbol\",\n    key,\n  }\n}\n\nconst createCompositeRecipe = ({\n  prototypeIdentifier,\n  valueOfIdentifier,\n  propertyDescriptionArray,\n  symbolDescriptionArray,\n  methodDescriptionArray,\n  extensible,\n}) => {\n  return {\n    type: \"composite\",\n    prototypeIdentifier,\n    valueOfIdentifier,\n    propertyDescriptionArray,\n    symbolDescriptionArray,\n    methodDescriptionArray,\n    extensible,\n  }\n}\n\nconst createPromiseAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) {\n    return `promise are not supported.`\n  }\n\n  return `promise are not supported.\npromise found at: ${path.join(\"\")}`\n}\n\nconst createWeakSetAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) {\n    return `weakSet are not supported.`\n  }\n\n  return `weakSet are not supported.\nweakSet found at: ${path.join(\"\")}`\n}\n\nconst createWeakMapAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) {\n    return `weakMap are not supported.`\n  }\n\n  return `weakMap are not supported.\nweakMap found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenFunctionMessage = ({ path }) => {\n  if (path.length === 0) {\n    return `function are not allowed.`\n  }\n\n  return `function are not allowed.\nfunction found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenPropertyGetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property getter are not allowed.\ngetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createForbiddenPropertySetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property setter are not allowed.\nsetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createUnexpectedValueOfReturnValueMessage = () =>\n  `valueOf() must return a primitive of the object itself.`\n\nconst createUnknownSymbolMessage = ({\n  symbol,\n}) => `symbol must be global, like Symbol.iterator, or created using Symbol.for().\nsymbol: ${symbol.toString()}`\n\nconst createUnknownPrototypeMessage = ({ prototypeValue }) =>\n  `prototype must be global, like Object.prototype, or somewhere in the value.\nprototype constructor name: ${prototypeValue.constructor.name}`\n",
    "// be carefull because this function is mutating recipe objects inside the recipeArray.\n// this is not an issue because each recipe object is not accessible from the outside\n// when used internally by uneval\nexport const sortRecipe = (recipeArray) => {\n  const findInRecipePrototypeChain = (recipe, callback) => {\n    let currentRecipe = recipe\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      if (currentRecipe.type !== \"composite\") {\n        break\n      }\n\n      const prototypeIdentifier = currentRecipe.prototypeIdentifier\n      if (prototypeIdentifier === undefined) {\n        break\n      }\n\n      currentRecipe = recipeArray[prototypeIdentifier]\n\n      if (callback(currentRecipe, prototypeIdentifier)) {\n        return prototypeIdentifier\n      }\n    }\n    return undefined\n  }\n\n  const recipeArrayOrdered = recipeArray.slice()\n  recipeArrayOrdered.sort((leftRecipe, rightRecipe) => {\n    const leftType = leftRecipe.type\n    const rightType = rightRecipe.type\n\n    if (leftType === \"composite\" && rightType === \"composite\") {\n      const rightRecipeIsInLeftRecipePrototypeChain = findInRecipePrototypeChain(\n        leftRecipe,\n        (recipeCandidate) => recipeCandidate === rightRecipe,\n      )\n      // if left recipe requires right recipe, left must be after right\n      if (rightRecipeIsInLeftRecipePrototypeChain) {\n        return 1\n      }\n\n      const leftRecipeIsInRightRecipePrototypeChain = findInRecipePrototypeChain(\n        rightRecipe,\n        (recipeCandidate) => recipeCandidate === leftRecipe,\n      )\n      // if right recipe requires left recipe, right must be after left\n      if (leftRecipeIsInRightRecipePrototypeChain) {\n        return -1\n      }\n    }\n\n    if (leftType !== rightType) {\n      // if left is a composite, left must be after right\n      if (leftType === \"composite\") {\n        return 1\n      }\n\n      // if right is a composite, right must be after left\n      if (rightType === \"composite\") {\n        return -1\n      }\n    }\n\n    const leftIndex = recipeArray.indexOf(leftRecipe)\n    const rightIndex = recipeArray.indexOf(rightRecipe)\n    // left was before right, don't change that\n    if (leftIndex < rightIndex) {\n      return -1\n    }\n\n    // right was after left, don't change that\n    return 1\n  })\n\n  return recipeArrayOrdered\n}\n",
    "// https://github.com/joliss/js-string-escape/blob/master/index.js\n// http://javascript.crockford.com/remedial.html\nexport const escapeString = (value) => {\n  const string = String(value)\n  let i = 0\n  const j = string.length\n  var escapedString = \"\"\n  while (i < j) {\n    const char = string[i]\n    let escapedChar\n    if (char === '\"' || char === \"'\" || char === \"\\\\\") {\n      escapedChar = `\\\\${char}`\n    } else if (char === \"\\n\") {\n      escapedChar = \"\\\\n\"\n    } else if (char === \"\\r\") {\n      escapedChar = \"\\\\r\"\n    } else if (char === \"\\u2028\") {\n      escapedChar = \"\\\\u2028\"\n    } else if (char === \"\\u2029\") {\n      escapedChar = \"\\\\u2029\"\n    } else {\n      escapedChar = char\n    }\n    escapedString += escapedChar\n    i++\n  }\n  return escapedString\n}\n",
    "import { decompose } from \"./internal/decompose.js\"\nimport { sortRecipe } from \"./internal/sortRecipe.js\"\nimport { escapeString } from \"./internal/escapeString.js\"\n\nexport const uneval = (\n  value,\n  { functionAllowed = false, prototypeStrict = false, ignoreSymbols = false } = {},\n) => {\n  const { recipeArray, mainIdentifier, valueMap } = decompose(value, {\n    functionAllowed,\n    prototypeStrict,\n    ignoreSymbols,\n  })\n  const recipeArraySorted = sortRecipe(recipeArray)\n\n  let source = `(function () {\nvar globalObject\ntry {\n  globalObject = Function('return this')() || (42, eval)('this');\n} catch(e) {\n  globalObject = window;\n}\n\nfunction safeDefineProperty(object, propertyNameOrSymbol, descriptor) {\n  var currentDescriptor = Object.getOwnPropertyDescriptor(object, propertyNameOrSymbol);\n  if (currentDescriptor && !currentDescriptor.configurable) return\n  Object.defineProperty(object, propertyNameOrSymbol, descriptor)\n};\n`\n\n  const variableNameMap = {}\n  recipeArray.forEach((recipe, index) => {\n    const indexSorted = recipeArraySorted.indexOf(recipe)\n    variableNameMap[index] = `_${indexSorted}`\n  })\n\n  const identifierToVariableName = (identifier) => variableNameMap[identifier]\n\n  const recipeToSetupSource = (recipe) => {\n    if (recipe.type === \"primitive\") return primitiveRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-symbol\") return globalSymbolRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-reference\") return globalReferenceRecipeToSetupSource(recipe)\n    return compositeRecipeToSetupSource(recipe)\n  }\n\n  const primitiveRecipeToSetupSource = ({ value }) => {\n    const type = typeof value\n\n    if (type === \"string\") {\n      return `\"${escapeString(value)}\";`\n    }\n\n    if (type === \"bigint\") {\n      return `${value.toString()}n`\n    }\n\n    if (Object.is(value, -0)) {\n      return \"-0;\"\n    }\n\n    return `${String(value)};`\n  }\n\n  const globalSymbolRecipeToSetupSource = (recipe) => {\n    return `Symbol.for(\"${escapeString(recipe.key)}\");`\n  }\n\n  const globalReferenceRecipeToSetupSource = (recipe) => {\n    const pathSource = recipe.path.map((part) => `[\"${escapeString(part)}\"]`).join(\"\")\n    return `globalObject${pathSource};`\n  }\n\n  const compositeRecipeToSetupSource = ({ prototypeIdentifier, valueOfIdentifier }) => {\n    if (prototypeIdentifier === undefined) {\n      return identifierToVariableName(valueOfIdentifier)\n    }\n\n    const prototypeValue = valueMap[prototypeIdentifier]\n    if (prototypeValue === null) {\n      return `Object.create(null);`\n    }\n\n    const prototypeConstructor = prototypeValue.constructor\n    if (prototypeConstructor === Object) {\n      return `Object.create(${identifierToVariableName(prototypeIdentifier)});`\n    }\n\n    if (valueOfIdentifier === undefined) {\n      return `new ${prototypeConstructor.name}();`\n    }\n\n    if (prototypeConstructor.name === \"BigInt\") {\n      return `Object(${identifierToVariableName(valueOfIdentifier)})`\n    }\n\n    return `new ${prototypeConstructor.name}(${identifierToVariableName(valueOfIdentifier)});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `var ${recipeVariableName} = ${recipeToSetupSource(recipe, recipeVariableName)}\n`\n  })\n\n  const recipeToMutateSource = (recipe, recipeVariableName) => {\n    if (recipe.type === \"composite\") {\n      return compositeRecipeToMutateSource(recipe, recipeVariableName)\n    }\n    return ``\n  }\n\n  const compositeRecipeToMutateSource = (\n    { propertyDescriptionArray, symbolDescriptionArray, methodDescriptionArray, extensible },\n    recipeVariableName,\n  ) => {\n    let mutateSource = ``\n\n    propertyDescriptionArray.forEach(({ propertyNameIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        propertyNameIdentifier,\n        propertyDescription,\n      )\n    })\n\n    symbolDescriptionArray.forEach(({ symbolIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        symbolIdentifier,\n        propertyDescription,\n      )\n    })\n\n    methodDescriptionArray.forEach(({ methodNameIdentifier, callArray }) => {\n      mutateSource += generateMethodCallSource(recipeVariableName, methodNameIdentifier, callArray)\n    })\n\n    if (!extensible) {\n      mutateSource += generatePreventExtensionSource(recipeVariableName)\n    }\n\n    return mutateSource\n  }\n\n  const generateDefinePropertySource = (\n    recipeVariableName,\n    propertyNameOrSymbolIdentifier,\n    propertyDescription,\n  ) => {\n    const propertyOrSymbolVariableName = identifierToVariableName(propertyNameOrSymbolIdentifier)\n\n    const propertyDescriptorSource = generatePropertyDescriptorSource(propertyDescription)\n    return `safeDefineProperty(${recipeVariableName}, ${propertyOrSymbolVariableName}, ${propertyDescriptorSource});`\n  }\n\n  const generatePropertyDescriptorSource = ({\n    configurable,\n    writable,\n    enumerable,\n    getIdentifier,\n    setIdentifier,\n    valueIdentifier,\n  }) => {\n    if (valueIdentifier === undefined) {\n      return `{\n  configurable: ${configurable},\n  enumerable: ${enumerable},\n  get: ${getIdentifier === undefined ? undefined : identifierToVariableName(getIdentifier)},\n  set: ${setIdentifier === undefined ? undefined : identifierToVariableName(setIdentifier)},\n}`\n    }\n\n    return `{\n  configurable: ${configurable},\n  writable: ${writable},\n  enumerable: ${enumerable},\n  value: ${valueIdentifier === undefined ? undefined : identifierToVariableName(valueIdentifier)}\n}`\n  }\n\n  const generateMethodCallSource = (recipeVariableName, methodNameIdentifier, callArray) => {\n    let methodCallSource = ``\n\n    const methodVariableName = identifierToVariableName(methodNameIdentifier)\n    callArray.forEach((argumentIdentifiers) => {\n      const argumentVariableNames = argumentIdentifiers.map((argumentIdentifier) =>\n        identifierToVariableName(argumentIdentifier),\n      )\n\n      methodCallSource += `${recipeVariableName}[${methodVariableName}](${argumentVariableNames.join(\n        \",\",\n      )});`\n    })\n\n    return methodCallSource\n  }\n\n  const generatePreventExtensionSource = (recipeVariableName) => {\n    return `Object.preventExtensions(${recipeVariableName});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `${recipeToMutateSource(recipe, recipeVariableName)}`\n  })\n\n  source += `return ${identifierToVariableName(mainIdentifier)}; })()`\n\n  return source\n}\n",
    "import { uneval } from \"@jsenv/core/node_modules/@jsenv/uneval/index.js\"\n\nexport const unevalException = (value) => {\n  if (value && value.hasOwnProperty(\"toString\")) {\n    delete value.toString\n  }\n  return uneval(value, { ignoreSymbols: true })\n}\n",
    "export const displayErrorInDocument = (error) => {\n  const title = \"An error occured\"\n  let theme =\n    error && error.cause && error.cause.code === \"PARSE_ERROR\"\n      ? \"light\"\n      : \"dark\"\n  let message = errorToHTML(error)\n  const css = `\n    .jsenv-console {\n      background: rgba(0, 0, 0, 0.95);\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      z-index: 1000;\n      box-sizing: border-box;\n      padding: 1em;\n    }\n\n    .jsenv-console h1 {\n      color: red;\n      display: flex;\n      align-items: center;\n    }\n\n    #button-close-jsenv-console {\n      margin-left: 10px;\n    }\n\n    .jsenv-console pre {\n      overflow: auto;\n      max-width: 70em;\n      /* avoid scrollbar to hide the text behind it */\n      padding: 20px;\n    }\n\n    .jsenv-console pre[data-theme=\"dark\"] {\n      background: #111;\n      border: 1px solid #333;\n      color: #eee;\n    }\n\n    .jsenv-console pre[data-theme=\"light\"] {\n      background: #1E1E1E;\n      border: 1px solid white;\n      color: #EEEEEE;\n    }\n\n    .jsenv-console pre a {\n      color: inherit;\n    }\n    `\n  const html = `\n      <style type=\"text/css\">${css}></style>\n      <div class=\"jsenv-console\">\n        <h1>${title} <button id=\"button-close-jsenv-console\">X</button></h1>\n        <pre data-theme=\"${theme}\">${message}</pre>\n      </div>\n      `\n  const removeJsenvConsole = appendHMTLInside(html, document.body)\n\n  document.querySelector(\"#button-close-jsenv-console\").onclick = () => {\n    removeJsenvConsole()\n  }\n}\n\nconst escapeHtml = (string) => {\n  return string\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\")\n}\n\nconst errorToHTML = (error) => {\n  let html\n\n  if (error && error instanceof Error) {\n    if (error.cause && error.cause.code === \"PARSE_ERROR\") {\n      html = error.messageHTML || escapeHtml(error.message)\n    }\n    // stackTrace formatted by V8\n    else if (Error.captureStackTrace) {\n      html = escapeHtml(error.stack)\n    } else {\n      // other stack trace such as firefox do not contain error.message\n      html = escapeHtml(`${error.message}\n  ${error.stack}`)\n    }\n  } else if (typeof error === \"string\") {\n    html = error\n  } else if (error === undefined) {\n    html = \"undefined\"\n  } else {\n    html = JSON.stringify(error)\n  }\n\n  const htmlWithCorrectLineBreaks = html.replace(/\\n/g, \"\\n\")\n  const htmlWithLinks = stringToStringWithLink(htmlWithCorrectLineBreaks, {\n    transform: (url) => {\n      return { href: url, text: url }\n    },\n  })\n  return htmlWithLinks\n}\n\n// `Error: yo\n// at Object.execute (http://127.0.0.1:57300/build/src/__test__/file-throw.js:9:13)\n// at doExec (http://127.0.0.1:3000/src/__test__/file-throw.js:452:38)\n// at postOrderExec (http://127.0.0.1:3000/src/__test__/file-throw.js:448:16)\n// at http://127.0.0.1:3000/src/__test__/file-throw.js:399:18`.replace(/(?:https?|ftp|file):\\/\\/(.*+)$/gm, (...args) => {\n//   debugger\n// })\nconst stringToStringWithLink = (\n  source,\n  {\n    transform = (url) => {\n      return {\n        href: url,\n        text: url,\n      }\n    },\n  } = {},\n) => {\n  return source.replace(/(?:https?|ftp|file):\\/\\/\\S+/gm, (match) => {\n    let linkHTML = \"\"\n\n    const lastChar = match[match.length - 1]\n\n    // hotfix because our url regex sucks a bit\n    const endsWithSeparationChar = lastChar === \")\" || lastChar === \":\"\n    if (endsWithSeparationChar) {\n      match = match.slice(0, -1)\n    }\n\n    const lineAndColumnPattern = /:([0-9]+):([0-9]+)$/\n    const lineAndColumMatch = match.match(lineAndColumnPattern)\n    if (lineAndColumMatch) {\n      const lineAndColumnString = lineAndColumMatch[0]\n      const lineNumber = lineAndColumMatch[1]\n      const columnNumber = lineAndColumMatch[2]\n      const url = match.slice(0, -lineAndColumnString.length)\n      const { href, text } = transform(url)\n      linkHTML = link({ href, text: `${text}:${lineNumber}:${columnNumber}` })\n    } else {\n      const linePattern = /:([0-9]+)$/\n      const lineMatch = match.match(linePattern)\n      if (lineMatch) {\n        const lineString = lineMatch[0]\n        const lineNumber = lineMatch[1]\n        const url = match.slice(0, -lineString.length)\n        const { href, text } = transform(url)\n        linkHTML = link({\n          href,\n          text: `${text}:${lineNumber}`,\n        })\n      } else {\n        const url = match\n        const { href, text } = transform(url)\n        linkHTML = link({ href, text })\n      }\n    }\n\n    if (endsWithSeparationChar) {\n      return `${linkHTML}${lastChar}`\n    }\n    return linkHTML\n  })\n}\n\nconst link = ({ href, text = href }) => `<a href=\"${href}\">${text}</a>`\n\nconst appendHMTLInside = (html, parentNode) => {\n  const temoraryParent = document.createElement(\"div\")\n  temoraryParent.innerHTML = html\n  return transferChildren(temoraryParent, parentNode)\n}\n\nconst transferChildren = (fromNode, toNode) => {\n  const childNodes = [].slice.call(fromNode.childNodes, 0)\n  let i = 0\n  while (i < childNodes.length) {\n    toNode.appendChild(childNodes[i])\n    i++\n  }\n  return () => {\n    let c = 0\n    while (c < childNodes.length) {\n      fromNode.appendChild(childNodes[c])\n      c++\n    }\n  }\n}\n",
    "const { Notification } = window\n\nconst displayErrorNotificationNotAvailable = () => {}\n\nconst displayErrorNotificationImplementation = (error, { icon } = {}) => {\n  if (Notification.permission === \"granted\") {\n    const notification = new Notification(\"An error occured\", {\n      lang: \"en\",\n      body: error ? error.stack : \"undefined\",\n      icon,\n    })\n    notification.onclick = () => {\n      window.focus()\n    }\n  }\n}\n\nexport const displayErrorNotification =\n  typeof Notification === \"function\"\n    ? displayErrorNotificationImplementation\n    : displayErrorNotificationNotAvailable\n",
    "import { fetchUrl } from \"@jsenv/core/src/internal/browser_utils/fetch_browser.js\"\nimport { inferContextFrom, createUrlContext } from \"../url_context.js\"\n\nimport { getRessourceResponseError } from \"./ressource_response_error.js\"\nimport { unevalException } from \"./uneval_exception.js\"\nimport { displayErrorInDocument } from \"./error_in_document.js\"\nimport { displayErrorNotification } from \"./error_in_notification.js\"\n\nexport const initHtmlSupervisor = ({ errorTransformer } = {}) => {\n  const scriptExecutionResults = {}\n\n  const urlContext = createUrlContext(\n    inferContextFrom({\n      url: window.location.href,\n    }),\n  )\n\n  let collectCalled = false\n  let pendingExecutionCount = 0\n  let resolveScriptExecutionsPromise\n  const scriptExecutionsPromise = new Promise((resolve) => {\n    resolveScriptExecutionsPromise = resolve\n  })\n  const onExecutionStart = (name) => {\n    scriptExecutionResults[name] = null // ensure execution order is reflected into the object\n    pendingExecutionCount++\n    performance.mark(`execution_start`)\n  }\n  const onExecutionSettled = (name, executionResult) => {\n    performance.measure(`execution`, `execution_start`)\n    scriptExecutionResults[name] = executionResult\n    pendingExecutionCount--\n    if (pendingExecutionCount === 0 && collectCalled) {\n      resolveScriptExecutionsPromise()\n    }\n  }\n  const addExecution = async ({\n    src,\n    currentScript,\n    promise,\n    improveErrorWithFetch = false,\n  }) => {\n    onExecutionStart(src)\n    promise.then(\n      (namespace) => {\n        const executionResult = {\n          status: \"completed\",\n          namespace,\n          coverage: window.__coverage__,\n        }\n        onExecutionSettled(src, executionResult)\n      },\n      async (e) => {\n        const executionResult = {\n          status: \"errored\",\n          error: e,\n          coverage: window.__coverage__,\n        }\n        let errorExposureInConsole = true\n        if (e.name === \"SyntaxError\") {\n          errorExposureInConsole = false\n        }\n        if (improveErrorWithFetch) {\n          const errorFromServer = await getErrorFromServer({\n            src,\n            urlContext,\n          })\n          if (errorFromServer) {\n            executionResult.error = errorFromServer\n            if (\n              errorFromServer.cause &&\n              errorFromServer.cause.code === \"PARSE_ERROR\"\n            ) {\n              errorExposureInConsole = false\n            }\n          }\n        }\n        if (errorTransformer) {\n          try {\n            executionResult.error = await errorTransformer(e)\n          } catch (e) {}\n        }\n\n        onExecutionSettled(src, executionResult)\n        onExecutionError(executionResult, {\n          currentScript,\n          errorExposureInConsole,\n        })\n      },\n    )\n  }\n\n  const collectScriptResults = async () => {\n    collectCalled = true\n    if (pendingExecutionCount === 0) {\n      resolveScriptExecutionsPromise()\n    } else {\n      await scriptExecutionsPromise\n    }\n\n    let status = \"completed\"\n    let exceptionSource = \"\"\n    Object.keys(scriptExecutionResults).forEach((key) => {\n      const scriptExecutionResult = scriptExecutionResults[key]\n      if (scriptExecutionResult.status === \"errored\") {\n        status = \"errored\"\n        exceptionSource = scriptExecutionResult.exceptionSource\n      }\n    })\n    return {\n      status,\n      ...(status === \"errored\" ? { exceptionSource } : {}),\n      startTime: getNavigationStartTime(),\n      endTime: Date.now(),\n      scriptExecutionResults,\n    }\n  }\n\n  return {\n    addExecution,\n    collectScriptResults,\n  }\n}\n\nconst getErrorFromServer = async ({ src, urlContext }) => {\n  const urlObject = new URL(src, window.location.href)\n  const urlWithoutInspect = urlObject.href\n  urlObject.searchParams.set(\"__inspect__\", \"\")\n  const url = urlObject.href\n  let response\n  try {\n    response = await fetchUrl(url)\n  } catch (e) {\n    e.code = \"NETWORK_FAILURE\"\n    return e\n  }\n  if (response.status !== 200) {\n    return null\n  }\n  const realResponseData = await response.json()\n  const responseError = await getRessourceResponseError({\n    urlContext,\n    contentTypeExpected: \"application/javascript\",\n    type: \"js_module\",\n    url: urlWithoutInspect,\n    // at some point the importer is the HTML of course but here \"importer\"\n    // means \"last ressource to import that file before encountering an error\"\n    // so it might be an intermediate file.\n    // I guess this information is available server side and could be returned\n    // inside the __inspect__ response\n    // importerUrl: window.location.href,\n    response: {\n      status: realResponseData.status,\n      statustext: realResponseData.statusText,\n      headers: realResponseData.headers,\n      json: () => JSON.parse(realResponseData.body),\n    },\n  })\n  return responseError\n}\n\nconst onExecutionError = (\n  executionResult,\n  {\n    currentScript,\n    errorExposureInConsole = true,\n    errorExposureInNotification = false,\n    errorExposureInDocument = true,\n  },\n) => {\n  const error = executionResult.error\n  if (error && error.code === \"NETWORK_FAILURE\") {\n    if (currentScript) {\n      const errorEvent = new Event(\"error\")\n      currentScript.dispatchEvent(errorEvent)\n    }\n  } else if (typeof error === \"object\") {\n    const globalErrorEvent = new Event(\"error\")\n    globalErrorEvent.filename = error.filename\n    globalErrorEvent.lineno = error.line || error.lineno\n    globalErrorEvent.colno = error.column || error.columnno\n    globalErrorEvent.message = error.message\n    window.dispatchEvent(globalErrorEvent)\n  }\n  if (errorExposureInConsole) {\n    if (typeof window.reportError === \"function\") {\n      window.reportError(error)\n    } else {\n      console.error(error)\n    }\n  }\n  if (errorExposureInNotification) {\n    displayErrorNotification(error)\n  }\n  if (errorExposureInDocument) {\n    displayErrorInDocument(error)\n  }\n  executionResult.exceptionSource = unevalException(error)\n  delete executionResult.error\n}\n\nconst getNavigationStartTime = () => {\n  try {\n    return window.performance.timing.navigationStart\n  } catch (e) {\n    return Date.now()\n  }\n}\n",
    "/* eslint-env browser, node */\n\nexport const DataUrl = {\n  parse: (string, { as = \"raw\" } = {}) => {\n    const afterDataProtocol = string.slice(\"data:\".length)\n    const commaIndex = afterDataProtocol.indexOf(\",\")\n    const beforeComma = afterDataProtocol.slice(0, commaIndex)\n\n    let mediaType\n    let base64Flag\n    if (beforeComma.endsWith(`;base64`)) {\n      mediaType = beforeComma.slice(0, -`;base64`.length)\n      base64Flag = true\n    } else {\n      mediaType = beforeComma\n      base64Flag = false\n    }\n\n    const afterComma = afterDataProtocol.slice(commaIndex + 1)\n    return {\n      mediaType: mediaType === \"\" ? \"text/plain;charset=US-ASCII\" : mediaType,\n      base64Flag,\n      data:\n        as === \"string\" && base64Flag ? base64ToString(afterComma) : afterComma,\n    }\n  },\n\n  stringify: ({ mediaType, base64Flag = true, data }) => {\n    if (!mediaType || mediaType === \"text/plain;charset=US-ASCII\") {\n      // can be a buffer or a string, hence check on data.length instead of !data or data === ''\n      if (data.length === 0) {\n        return `data:,`\n      }\n      if (base64Flag) {\n        return `data:,${data}`\n      }\n      return `data:,${dataToBase64(data)}`\n    }\n    if (base64Flag) {\n      return `data:${mediaType};base64,${dataToBase64(data)}`\n    }\n    return `data:${mediaType},${data}`\n  },\n}\n\nconst dataToBase64 =\n  typeof window === \"object\"\n    ? window.atob\n    : (data) => Buffer.from(data).toString(\"base64\")\n\nconst base64ToString =\n  typeof window === \"object\"\n    ? window.btoa\n    : (base64String) => Buffer.from(base64String, \"base64\").toString(\"utf8\")\n",
    "export const generateSourcemapUrl = (url) => {\n  // we want to remove eventual search params from url\n  const urlString = String(url)\n  const urlObject = new URL(url)\n  const origin = urlString.startsWith(\"file://\") ? \"file://\" : urlObject.origin\n  const pathname = urlObject.pathname\n  const sourcemapUrl = `${origin}${pathname}.map`\n  return sourcemapUrl\n}\n\nexport const getJavaScriptSourceMappingUrl = (javaScriptSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(\n    javaScriptSource,\n    javascriptSourceMappingUrlCommentRegexp,\n    (value) => {\n      sourceMappingUrl = value\n    },\n  )\n  return sourceMappingUrl\n}\n\nexport const setJavaScriptSourceMappingUrl = (\n  javaScriptSource,\n  sourceMappingFileUrl,\n) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    javaScriptSource,\n    javascriptSourceMappingUrlCommentRegexp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl\n        ? writeJavaScriptSourceMappingURL(sourceMappingFileUrl)\n        : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n\n  return sourceMappingFileUrl\n    ? `${javaScriptSource}\n${writeJavaScriptSourceMappingURL(sourceMappingFileUrl)}`\n    : javaScriptSource\n}\n\nexport const getCssSourceMappingUrl = (cssSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(\n    cssSource,\n    cssSourceMappingUrlCommentRegExp,\n    (value) => {\n      sourceMappingUrl = value\n    },\n  )\n  return sourceMappingUrl\n}\n\nexport const setCssSourceMappingUrl = (cssSource, sourceMappingFileUrl) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    cssSource,\n    cssSourceMappingUrlCommentRegExp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl\n        ? writeCssSourceMappingUrl(sourceMappingFileUrl)\n        : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n  return sourceMappingFileUrl\n    ? `${cssSource}\n${writeCssSourceMappingUrl(sourceMappingFileUrl)}`\n    : cssSource\n}\n\nconst javascriptSourceMappingUrlCommentRegexp =\n  /\\/\\/ ?# ?sourceMappingURL=([^\\s'\"]+)/g\nconst cssSourceMappingUrlCommentRegExp =\n  /\\/\\*# ?sourceMappingURL=([^\\s'\"]+) \\*\\//g\n\n// ${\"//#\"} is to avoid a parser thinking there is a sourceMappingUrl for this file\nconst writeJavaScriptSourceMappingURL = (value) =>\n  `${\"//#\"} sourceMappingURL=${value}`\nconst writeCssSourceMappingUrl = (value) => `/*# sourceMappingURL=${value} */`\n\nexport const sourcemapToBase64Url = (sourcemap) => {\n  const asBase64 = Buffer.from(JSON.stringify(sourcemap)).toString(\"base64\")\n  return `data:application/json;charset=utf-8;base64,${asBase64}`\n}\n\nconst replaceSourceMappingUrl = (source, regexp, callback) => {\n  let lastSourceMappingUrl\n  let matchSourceMappingUrl\n  while ((matchSourceMappingUrl = regexp.exec(source))) {\n    lastSourceMappingUrl = matchSourceMappingUrl\n  }\n  if (lastSourceMappingUrl) {\n    const index = lastSourceMappingUrl.index\n    const before = source.slice(0, index)\n    const after = source.slice(index)\n    const mappedAfter = after.replace(regexp, (match, firstGroup) => {\n      return callback(firstGroup)\n    })\n    return `${before}${mappedAfter}`\n  }\n  return source\n}\n",
    "export const startsWithWindowsDriveLetter = (string) => {\n  const firstChar = string[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n\n  const secondChar = string[1]\n  if (secondChar !== \":\") return false\n\n  return true\n}\n\nexport const windowsFilePathToUrl = (windowsFilePath) => {\n  return `file:///${replaceBackSlashesWithSlashes(windowsFilePath)}`\n}\n\nexport const replaceBackSlashesWithSlashes = (string) =>\n  string.replace(/\\\\/g, \"/\")\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\n\nimport {\n  startsWithWindowsDriveLetter,\n  windowsFilePathToUrl,\n} from \"@jsenv/core/src/internal/windows_file_path_utils.js\"\n\nexport const remapCallSite = async (\n  callSite,\n  { urlToSourcemapConsumer, resolveFile, readErrorStack, onFailure },\n) => {\n  if (callSite.isNative()) {\n    return callSite\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  const source = callSite.getFileName() || callSite.getScriptNameOrSourceURL()\n  if (source) {\n    const line = callSite.getLineNumber()\n    const column = callSite.getColumnNumber() - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      readErrorStack,\n      onFailure,\n    })\n\n    const callSiteClone = cloneCallSite(callSite)\n\n    callSiteClone.getFunctionName = () =>\n      originalPosition.name || callSite.getFunctionName()\n    callSiteClone.getFileName = () => originalPosition.source\n    callSiteClone.getLineNumber = () => originalPosition.line\n    callSiteClone.getColumnNumber = () => originalPosition.column + 1\n    callSiteClone.getScriptNameOrSourceURL = () => originalPosition.source\n\n    return callSiteClone\n  }\n\n  // Code called using eval() needs special handling\n  if (callSite.isEval()) {\n    const origin = callSite.getEvalOrigin()\n    if (origin) {\n      const callSiteClone = cloneCallSite(callSite)\n      const originalEvalOrigin = await remapEvalOrigin(origin, {\n        resolveFile,\n        urlToSourcemapConsumer,\n        readErrorStack,\n        onFailure,\n      })\n      callSiteClone.getEvalOrigin = () => originalEvalOrigin\n      return callSiteClone\n    }\n    return callSite\n  }\n\n  // If we get here then we were unable to change the source position\n  return callSite\n}\n\nconst cloneCallSite = (callSite) => {\n  const callSiteClone = {}\n  methods.forEach((name) => {\n    callSiteClone[name] = () => callSite[name]()\n  })\n  callSiteClone.toString = () => callSiteToFunctionCall(callSiteClone)\n\n  return callSiteClone\n}\n\nconst methods = [\n  \"getColumnNumber\",\n  \"getEvalOrigin\",\n  \"getFileName\",\n  \"getFunction\",\n  \"getFunctionName\",\n  \"getLineNumber\",\n  \"getMethodName\",\n  \"getPosition\",\n  \"getScriptNameOrSourceURL\",\n  \"getThis\",\n  \"getTypeName\",\n  \"isConstructor\",\n  \"isEval\",\n  \"isNative\",\n  \"isToplevel\",\n  \"toString\",\n]\n\nconst callSiteToFunctionCall = (callSite) => {\n  const fileLocation = callSiteToFileLocation(callSite)\n  const isConstructor = callSite.isConstructor()\n  const isMethodCall = !callSite.isToplevel() && !isConstructor\n\n  if (isMethodCall) {\n    return `${callSiteToMethodCall(callSite)} (${fileLocation})`\n  }\n\n  const functionName = callSite.getFunctionName()\n  if (isConstructor) {\n    return `new ${functionName || \"<anonymous>\"} (${fileLocation})`\n  }\n\n  if (functionName) {\n    return `${functionName} (${fileLocation})`\n  }\n\n  return `${fileLocation}`\n}\n\nconst callSiteToMethodCall = (callSite) => {\n  const functionName = callSite.getFunctionName()\n  const typeName = callSiteToType(callSite)\n\n  if (!functionName) {\n    return `${typeName}.<anonymous>`\n  }\n\n  const methodName = callSite.getMethodName()\n  const as = generateAs({ methodName, functionName })\n\n  if (typeName && !functionName.startsWith(typeName)) {\n    return `${typeName}.${functionName}${as}`\n  }\n\n  return `${functionName}${as}`\n}\n\nconst generateAs = ({ methodName, functionName }) => {\n  if (!methodName) return \"\"\n  if (\n    functionName.indexOf(`.${methodName}`) ===\n    functionName.length - methodName.length - 1\n  )\n    return \"\"\n  return ` [as ${methodName}]`\n}\n\nconst callSiteToType = (callSite) => {\n  const typeName = callSite.getTypeName()\n  // Fixes shim to be backward compatible with Node v0 to v4\n  if (typeName === \"[object Object]\") {\n    return \"null\"\n  }\n  return typeName\n}\n\nconst callSiteToFileLocation = (callSite) => {\n  if (callSite.isNative()) return \"native\"\n\n  const sourceFile = callSiteToSourceFile(callSite)\n  const lineNumber = callSite.getLineNumber()\n  if (lineNumber === null) {\n    return sourceFile\n  }\n\n  const columnNumber = callSite.getColumnNumber()\n  if (!columnNumber) {\n    return `${sourceFile}:${lineNumber}`\n  }\n\n  return `${sourceFile}:${lineNumber}:${columnNumber}`\n}\n\nconst callSiteToSourceFile = (callSite) => {\n  const fileName = callSite.getScriptNameOrSourceURL()\n\n  if (fileName) {\n    return fileName\n  }\n\n  // Source code does not originate from a file and is not native, but we\n  // can still get the source position inside the source string, e.g. in\n  // an eval string.\n  if (callSite.isEval()) {\n    return `${callSite.getEvalOrigin()}, <anonymous>`\n  }\n\n  return \"<anonymous>\"\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nconst remapEvalOrigin = async (\n  origin,\n  { resolveFile, urlToSourcemapConsumer, onFailure },\n) => {\n  // Most eval() calls are in this format\n  const topLevelEvalMatch = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(\n    origin,\n  )\n  if (topLevelEvalMatch) {\n    const source = topLevelEvalMatch[2]\n    const line = Number(topLevelEvalMatch[3])\n    const column = topLevelEvalMatch[4] - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${topLevelEvalMatch[1]} (${originalPosition.source}:${\n      originalPosition.line\n    }:${originalPosition.column + 1})`\n  }\n\n  // Parse nested eval() calls using recursion\n  const nestedEvalMatch = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin)\n  if (nestedEvalMatch) {\n    const originalEvalOrigin = await remapEvalOrigin(nestedEvalMatch[2], {\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${nestedEvalMatch[1]} (${originalEvalOrigin})`\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin\n}\n\nconst remapSourcePosition = async ({\n  source,\n  line,\n  column,\n  resolveFile,\n  urlToSourcemapConsumer,\n  readErrorStack,\n  onFailure,\n}) => {\n  const position = { source, line, column }\n\n  const url = sourceToUrl(source, { resolveFile })\n  if (!url) return position\n\n  const sourceMapConsumer = await urlToSourcemapConsumer(url)\n\n  if (!sourceMapConsumer) return position\n\n  try {\n    const originalPosition = sourceMapConsumer.originalPositionFor(position)\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    const originalSource = originalPosition.source\n\n    if (originalSource === null) return position\n    originalPosition.source = resolveFile(originalSource, url, {\n      type: \"file-original\",\n    })\n\n    return originalPosition\n  } catch (e) {\n    onFailure(\n      createDetailedMessage(`error while remapping position.`, {\n        [\"error stack\"]: readErrorStack(e),\n        [\"source\"]: source,\n        [\"line\"]: line,\n        [\"column\"]: column,\n      }),\n    )\n    return position\n  }\n}\n\nconst sourceToUrl = (source, { resolveFile }) => {\n  if (startsWithScheme(source)) {\n    return source\n  }\n\n  // linux filesystem path\n  if (source[0] === \"/\") {\n    return resolveFile(source)\n  }\n\n  // be careful, due to babel or something like that we might receive paths like\n  // C:/directory/file.js (without backslashes we would expect on windows)\n  // In that case we consider C: is the signe we are on windows\n  // And I avoid to rely on process.platform === \"win32\" because this file might be executed in chrome\n  if (startsWithWindowsDriveLetter(source)) {\n    return windowsFilePathToUrl(source)\n  }\n\n  // I don't think we will ever encounter relative file in the stack trace\n  // but if it ever happens we are safe :)\n  if (source.slice(0, 2) === \"./\" || source.slice(0, 3) === \"../\") {\n    return resolveFile(source)\n  }\n\n  // we have received a \"bare specifier\" for the source\n  // it happens for internal/process/task_queues.js for instance\n  // if we do return resolveFile(source) it will be converted to\n  // file:///C:/project-directory/internal/process/task_queues.js in node\n  // and\n  // http://domain.com/internal/process/task_queues.js\n  // but the file will certainly be a 404\n  // and if not it won't be the right file anyway\n  // for now we assume \"bare specifier\" in the stack trace\n  // are internal files that are pointless to try to remap\n  return null\n}\n\nconst startsWithScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\n\nimport { DataUrl } from \"@jsenv/core/src/internal/data_url.js\"\nimport { getJavaScriptSourceMappingUrl } from \"@jsenv/core/src/internal/sourcemap_utils.js\"\n\nimport { remapCallSite } from \"./remap_call_site.js\"\n\nexport const remapStack = async ({\n  stack,\n  resolveFile,\n  fetchFile,\n  SourceMapConsumer,\n  readErrorStack,\n  onFailure,\n}) => {\n  const urlToSourcemapConsumer = memoizeByFirstArgStringValue(\n    async (stackTraceFileUrl) => {\n      if (stackTraceFileUrl.startsWith(\"node:\")) {\n        return null\n      }\n\n      try {\n        let text\n        try {\n          const fileResponse = await fetchFile(stackTraceFileUrl)\n          const { status } = fileResponse\n          if (status !== 200) {\n            if (status === 404) {\n              onFailure(`stack trace file not found at ${stackTraceFileUrl}`)\n            } else {\n              onFailure(\n                createDetailedMessage(\n                  `unexpected response fetching stack trace file.`,\n                  {\n                    [\"response status\"]: status,\n                    [\"response text\"]: fileResponse.body,\n                    [\"stack trace file\"]: stackTraceFileUrl,\n                  },\n                ),\n              )\n            }\n            return null\n          }\n          text = await fileResponse.text()\n        } catch (e) {\n          onFailure(\n            createDetailedMessage(`error while fetching stack trace file.`, {\n              [\"fetch error stack\"]: readErrorStack(e),\n              [\"stack trace file\"]: stackTraceFileUrl,\n            }),\n          )\n\n          return null\n        }\n\n        const jsSourcemapUrl = getJavaScriptSourceMappingUrl(text)\n        if (!jsSourcemapUrl) {\n          return null\n        }\n\n        let sourcemapUrl\n        let sourcemapString\n        if (jsSourcemapUrl.startsWith(\"data:\")) {\n          sourcemapUrl = stackTraceFileUrl\n          sourcemapString = DataUrl.parse(jsSourcemapUrl, { as: \"string\" })\n        } else {\n          sourcemapUrl = resolveFile(jsSourcemapUrl, stackTraceFileUrl, {\n            type: \"source-map\",\n          })\n\n          try {\n            const sourcemapResponse = await fetchFile(sourcemapUrl)\n            const { status } = sourcemapResponse\n            if (status !== 200) {\n              if (status === 404) {\n                onFailure(`sourcemap file not found at ${sourcemapUrl}`)\n              } else {\n                onFailure(\n                  createDetailedMessage(\n                    `unexpected response for sourcemap file.`,\n                    {\n                      [\"response status\"]: status,\n                      [\"response text\"]: await sourcemapResponse.text(),\n                      [\"sourcemap url\"]: sourcemapUrl,\n                    },\n                  ),\n                )\n              }\n              return null\n            }\n            sourcemapString = await sourcemapResponse.text()\n          } catch (e) {\n            onFailure(\n              createDetailedMessage(`error while fetching sourcemap.`, {\n                [\"fetch error stack\"]: readErrorStack(e),\n                [\"sourcemap url\"]: sourcemapUrl,\n              }),\n            )\n            return null\n          }\n        }\n\n        let sourceMap\n        try {\n          sourceMap = JSON.parse(sourcemapString)\n        } catch (e) {\n          onFailure(\n            createDetailedMessage(`error while parsing sourcemap.`, {\n              [\"parse error stack\"]: readErrorStack(e),\n              [\"sourcemap url\"]: sourcemapUrl,\n            }),\n          )\n          return null\n        }\n\n        let { sourcesContent } = sourceMap\n\n        if (!sourcesContent) {\n          sourcesContent = []\n          sourceMap.sourcesContent = sourcesContent\n        }\n\n        let firstSourceMapSourceFailure = null\n\n        await Promise.all(\n          sourceMap.sources.map(async (source, index) => {\n            if (index in sourcesContent) return\n\n            const sourcemapSourceUrl = resolveFile(source, sourcemapUrl, {\n              type: \"source\",\n            })\n            try {\n              const sourceResponse = await fetchFile(sourcemapSourceUrl)\n              const { status } = sourceResponse\n              if (status !== 200) {\n                if (firstSourceMapSourceFailure) return\n\n                if (status === 404) {\n                  firstSourceMapSourceFailure = createDetailedMessage(\n                    `sourcemap source not found.`,\n                    {\n                      [\"sourcemap source url\"]: sourcemapSourceUrl,\n                      [\"sourcemap url\"]: sourcemapUrl,\n                    },\n                  )\n                  return\n                }\n                firstSourceMapSourceFailure = createDetailedMessage(\n                  `unexpected response for sourcemap source.`,\n                  {\n                    [\"response status\"]: status,\n                    [\"response text\"]: await sourceResponse.text(),\n                    [\"sourcemap source url\"]: sourcemapSourceUrl,\n                    [\"sourcemap url\"]: sourcemapUrl,\n                  },\n                )\n                return\n              }\n\n              const sourceString = await sourceResponse.text()\n              sourcesContent[index] = sourceString\n            } catch (e) {\n              if (firstSourceMapSourceFailure) return\n              firstSourceMapSourceFailure = createDetailedMessage(\n                `error while fetching sourcemap source.`,\n                {\n                  [\"fetch error stack\"]: readErrorStack(e),\n                  [\"sourcemap source url\"]: sourcemapSourceUrl,\n                  [\"sourcemap url\"]: sourcemapUrl,\n                },\n              )\n            }\n          }),\n        )\n\n        if (firstSourceMapSourceFailure) {\n          onFailure(firstSourceMapSourceFailure)\n          return null\n        }\n\n        return new SourceMapConsumer(sourceMap)\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(\n            `error while preparing a sourceMap consumer for a stack trace file.`,\n            {\n              [\"error stack\"]: readErrorStack(e),\n              [\"stack trace file\"]: stackTraceFileUrl,\n            },\n          ),\n        )\n        return null\n      }\n    },\n  )\n  const originalCallsites = await Promise.all(\n    stack.map((callSite) =>\n      remapCallSite(callSite, {\n        resolveFile,\n        urlToSourcemapConsumer,\n        readErrorStack,\n        onFailure,\n      }),\n    ),\n  )\n  return originalCallsites\n}\n\nconst memoizeByFirstArgStringValue = (fn) => {\n  const stringValueCache = {}\n  return (firstArgValue) => {\n    if (firstArgValue in stringValueCache)\n      return stringValueCache[firstArgValue]\n    const value = fn(firstArgValue)\n    stringValueCache[firstArgValue] = value\n    return value\n  }\n}\n",
    "export const stringifyStack = (stack, { error, indent }) => {\n  const name = error.name || \"Error\"\n  const message = error.message || \"\"\n  const stackString = stack\n    .map((callSite) => `\\n${indent}at ${callSite}`)\n    .join(\"\")\n\n  return `${name}: ${message}${stackString}`\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\n\nimport { remapStack } from \"./remap_stack.js\"\nimport { stringifyStack } from \"./stringify_stack.js\"\n\nexport const installErrorStackRemapping = ({\n  fetchFile,\n  resolveFile,\n  SourceMapConsumer,\n  indent = \"  \",\n}) => {\n  if (typeof fetchFile !== \"function\") {\n    throw new TypeError(`fetchFile must be a function, got ${fetchFile}`)\n  }\n  if (typeof SourceMapConsumer !== \"function\") {\n    throw new TypeError(\n      `sourceMapConsumer must be a function, got ${SourceMapConsumer}`,\n    )\n  }\n  if (typeof indent !== \"string\") {\n    throw new TypeError(`indent must be a string, got ${indent}`)\n  }\n\n  const errorRemappingCache = new WeakMap()\n  const errorRemapFailureCallbackMap = new WeakMap()\n\n  let installed = false\n  const previousPrepareStackTrace = Error.prepareStackTrace\n  const install = () => {\n    if (installed) return\n    installed = true\n    Error.prepareStackTrace = prepareStackTrace\n  }\n\n  const uninstall = () => {\n    if (!installed) return\n    installed = false\n    Error.prepareStackTrace = previousPrepareStackTrace\n  }\n\n  // ensure we do not use prepareStackTrace for thoose error\n  // otherwise we would recursively remap error stack\n  // and if the reason causing the failure is still here\n  // it would create an infinite loop\n  const readErrorStack = (error) => {\n    uninstall()\n    const stack = error.stack\n    install()\n    return stack\n  }\n\n  const prepareStackTrace = (error, stack) => {\n    const onFailure = (failureData) => {\n      const failureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (failureCallbackArray) {\n        failureCallbackArray.forEach((callback) => callback(failureData))\n      }\n    }\n\n    const stackRemappingPromise = remapStack({\n      stack,\n      error,\n      resolveFile,\n      fetchFile: memoizeFetch(fetchFile),\n      SourceMapConsumer,\n      readErrorStack,\n      indent,\n      onFailure,\n    })\n    errorRemappingCache.set(error, stackRemappingPromise)\n\n    return stringifyStack(stack, { error, indent })\n  }\n\n  const getErrorOriginalStackString = async (\n    error,\n    {\n      onFailure = (message) => {\n        console.warn(message)\n      },\n    } = {},\n  ) => {\n    if (onFailure) {\n      const remapFailureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (remapFailureCallbackArray) {\n        errorRemapFailureCallbackMap.set(error, [\n          ...remapFailureCallbackArray,\n          onFailure,\n        ])\n      } else {\n        errorRemapFailureCallbackMap.set(error, [onFailure])\n      }\n    }\n\n    // ensure Error.prepareStackTrace gets triggered by reading error.stack now\n    const { stack } = error\n    const promise = errorRemappingCache.get(error)\n\n    if (promise) {\n      try {\n        const originalCallsites = await promise\n        errorRemapFailureCallbackMap.get(error)\n\n        const firstCall = originalCallsites[0]\n        if (firstCall) {\n          Object.assign(error, {\n            filename: firstCall.getFileName(),\n            lineno: firstCall.getLineNumber(),\n            columnno: firstCall.getColumnNumber(),\n          })\n        }\n        return stringifyStack(originalCallsites, { error, indent })\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(`error while computing original stack.`, {\n            [\"stack from error while computing\"]: readErrorStack(e),\n            [\"stack from error to remap\"]: stack,\n          }),\n        )\n        return stack\n      }\n    }\n\n    return stack\n  }\n\n  install()\n\n  return { getErrorOriginalStackString, uninstall }\n}\n\nconst memoizeFetch = (fetchUrl) => {\n  const urlCache = {}\n  return async (url) => {\n    if (url in urlCache) {\n      return urlCache[url]\n    }\n    const responsePromise = fetchUrl(url)\n    urlCache[url] = responsePromise\n    return responsePromise\n  }\n}\n",
    "import { installErrorStackRemapping } from \"@jsenv/core/src/internal/error_stack_remap/install_error_stack_remapping.js\"\n\nexport const installBrowserErrorStackRemapping = (options = {}) =>\n  installErrorStackRemapping({\n    fetchFile: async (url) => {\n      // browser having Error.captureStackTrace got window.fetch\n      // and this executes only when Error.captureStackTrace exists\n      // so no need for polyfill or whatever here\n      const response = await window.fetch(url, {\n        // by default a script tag is in \"no-cors\"\n        // so we also fetch url with \"no-cors\"\n        mode: \"no-cors\",\n      })\n      // we read response test before anything because once memoized fetch\n      // gets annoying preventing you to read\n      // body multiple times, even using response.clone()\n      const text = await response.text()\n      return {\n        status: response.status,\n        url: response.url,\n        statusText: response.statusText,\n        headers: responseToHeaders(response),\n        text: () => text,\n        json: response.json.bind(response),\n        blob: response.blob.bind(response),\n        arrayBuffer: response.arrayBuffer.bind(response),\n      }\n    },\n    resolveFile: (specifier, importer = window.location.href) => {\n      // browsers having Error.captureStrackTrace got window.URL\n      // and this executes only when Error.captureStackTrace exists\n      return String(new URL(specifier, importer))\n    },\n    ...options,\n  })\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n",
    "export const assertImportMap = (value) => {\n  if (value === null) {\n    throw new TypeError(`an importMap must be an object, got null`)\n  }\n\n  const type = typeof value\n  if (type !== \"object\") {\n    throw new TypeError(`an importMap must be an object, received ${value}`)\n  }\n\n  if (Array.isArray(value)) {\n    throw new TypeError(\n      `an importMap must be an object, received array ${value}`,\n    )\n  }\n}\n",
    "export const hasScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n",
    "export const urlToScheme = (urlString) => {\n  const colonIndex = urlString.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return urlString.slice(0, colonIndex)\n}\n",
    "import { urlToScheme } from \"./urlToScheme.js\"\n\nexport const urlToPathname = (urlString) => {\n  return ressourceToPathname(urlToRessource(urlString))\n}\n\nconst urlToRessource = (urlString) => {\n  const scheme = urlToScheme(urlString)\n\n  if (scheme === \"file\") {\n    return urlString.slice(\"file://\".length)\n  }\n\n  if (scheme === \"https\" || scheme === \"http\") {\n    // remove origin\n    const afterProtocol = urlString.slice(scheme.length + \"://\".length)\n    const pathnameSlashIndex = afterProtocol.indexOf(\"/\", \"://\".length)\n    return afterProtocol.slice(pathnameSlashIndex)\n  }\n\n  return urlString.slice(scheme.length + 1)\n}\n\nconst ressourceToPathname = (ressource) => {\n  const searchSeparatorIndex = ressource.indexOf(\"?\")\n  return searchSeparatorIndex === -1\n    ? ressource\n    : ressource.slice(0, searchSeparatorIndex)\n}\n",
    "import { urlToScheme } from \"./urlToScheme.js\"\n\nexport const urlToOrigin = (urlString) => {\n  const scheme = urlToScheme(urlString)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = urlString.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return urlString\n    return urlString.slice(0, pathnameSlashIndex)\n  }\n\n  return urlString.slice(0, scheme.length + 1)\n}\n",
    "export const pathnameToParentPathname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return \"/\"\n  }\n\n  return pathname.slice(0, slashLastIndex + 1)\n}\n",
    "// could be useful: https://url.spec.whatwg.org/#url-miscellaneous\n\nimport { urlToScheme } from \"./internal/urlToScheme.js\"\nimport { urlToPathname } from \"./internal/urlToPathname.js\"\nimport { urlToOrigin } from \"./internal/urlToOrigin.js\"\nimport { pathnameToParentPathname } from \"./internal/pathnameToParentPathname.js\"\nimport { hasScheme } from \"./internal/hasScheme.js\"\n\nexport const resolveUrl = (specifier, baseUrl) => {\n  if (baseUrl) {\n    if (typeof baseUrl !== \"string\") {\n      throw new TypeError(writeBaseUrlMustBeAString({ baseUrl, specifier }))\n    }\n    if (!hasScheme(baseUrl)) {\n      throw new Error(writeBaseUrlMustBeAbsolute({ baseUrl, specifier }))\n    }\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  if (!baseUrl) {\n    throw new Error(writeBaseUrlRequired({ baseUrl, specifier }))\n  }\n\n  // scheme relative\n  if (specifier.slice(0, 2) === \"//\") {\n    return `${urlToScheme(baseUrl)}:${specifier}`\n  }\n\n  // origin relative\n  if (specifier[0] === \"/\") {\n    return `${urlToOrigin(baseUrl)}${specifier}`\n  }\n\n  const baseOrigin = urlToOrigin(baseUrl)\n  const basePathname = urlToPathname(baseUrl)\n\n  if (specifier === \".\") {\n    const baseDirectoryPathname = pathnameToParentPathname(basePathname)\n    return `${baseOrigin}${baseDirectoryPathname}`\n  }\n\n  // pathname relative inside\n  if (specifier.slice(0, 2) === \"./\") {\n    const baseDirectoryPathname = pathnameToParentPathname(basePathname)\n    return `${baseOrigin}${baseDirectoryPathname}${specifier.slice(2)}`\n  }\n\n  // pathname relative outside\n  if (specifier.slice(0, 3) === \"../\") {\n    let unresolvedPathname = specifier\n    const importerFolders = basePathname.split(\"/\")\n    importerFolders.pop()\n\n    while (unresolvedPathname.slice(0, 3) === \"../\") {\n      unresolvedPathname = unresolvedPathname.slice(3)\n      // when there is no folder left to resolved\n      // we just ignore '../'\n      if (importerFolders.length) {\n        importerFolders.pop()\n      }\n    }\n\n    const resolvedPathname = `${importerFolders.join(\n      \"/\",\n    )}/${unresolvedPathname}`\n    return `${baseOrigin}${resolvedPathname}`\n  }\n\n  // bare\n  if (basePathname === \"\") {\n    return `${baseOrigin}/${specifier}`\n  }\n  if (basePathname[basePathname.length] === \"/\") {\n    return `${baseOrigin}${basePathname}${specifier}`\n  }\n  return `${baseOrigin}${pathnameToParentPathname(basePathname)}${specifier}`\n}\n\nconst writeBaseUrlMustBeAString = ({\n  baseUrl,\n  specifier,\n}) => `baseUrl must be a string.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlMustBeAbsolute = ({\n  baseUrl,\n  specifier,\n}) => `baseUrl must be absolute.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlRequired = ({\n  baseUrl,\n  specifier,\n}) => `baseUrl required to resolve relative specifier.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n",
    "import { hasScheme } from \"./hasScheme.js\"\nimport { resolveUrl } from \"../resolveUrl.js\"\n\nexport const tryUrlResolution = (string, url) => {\n  const result = resolveUrl(string, url)\n  return hasScheme(result) ? result : null\n}\n",
    "import { hasScheme } from \"./internal/hasScheme.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\n\nexport const resolveSpecifier = (specifier, importer) => {\n  if (\n    specifier === \".\" ||\n    specifier[0] === \"/\" ||\n    specifier.startsWith(\"./\") ||\n    specifier.startsWith(\"../\")\n  ) {\n    return resolveUrl(specifier, importer)\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  return null\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\n\nexport const sortImportMap = (importMap) => {\n  assertImportMap(importMap)\n\n  const { imports, scopes } = importMap\n\n  return {\n    ...(imports ? { imports: sortImports(imports) } : {}),\n    ...(scopes ? { scopes: sortScopes(scopes) } : {}),\n  }\n}\n\nexport const sortImports = (imports) => {\n  const mappingsSorted = {}\n\n  Object.keys(imports)\n    .sort(compareLengthOrLocaleCompare)\n    .forEach((name) => {\n      mappingsSorted[name] = imports[name]\n    })\n\n  return mappingsSorted\n}\n\nexport const sortScopes = (scopes) => {\n  const scopesSorted = {}\n\n  Object.keys(scopes)\n    .sort(compareLengthOrLocaleCompare)\n    .forEach((scopeSpecifier) => {\n      scopesSorted[scopeSpecifier] = sortImports(scopes[scopeSpecifier])\n    })\n\n  return scopesSorted\n}\n\nconst compareLengthOrLocaleCompare = (a, b) => {\n  return b.length - a.length || a.localeCompare(b)\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\nimport { tryUrlResolution } from \"./internal/tryUrlResolution.js\"\nimport { resolveSpecifier } from \"./resolveSpecifier.js\"\nimport { sortImports, sortScopes } from \"./sortImportMap.js\"\n\nexport const normalizeImportMap = (importMap, baseUrl) => {\n  assertImportMap(importMap)\n\n  if (!isStringOrUrl(baseUrl)) {\n    throw new TypeError(formulateBaseUrlMustBeStringOrUrl({ baseUrl }))\n  }\n\n  const { imports, scopes } = importMap\n\n  return {\n    imports: imports ? normalizeMappings(imports, baseUrl) : undefined,\n    scopes: scopes ? normalizeScopes(scopes, baseUrl) : undefined,\n  }\n}\n\nconst isStringOrUrl = (value) => {\n  if (typeof value === \"string\") {\n    return true\n  }\n\n  if (typeof URL === \"function\" && value instanceof URL) {\n    return true\n  }\n\n  return false\n}\n\nconst normalizeMappings = (mappings, baseUrl) => {\n  const mappingsNormalized = {}\n\n  Object.keys(mappings).forEach((specifier) => {\n    const address = mappings[specifier]\n\n    if (typeof address !== \"string\") {\n      console.warn(\n        formulateAddressMustBeAString({\n          address,\n          specifier,\n        }),\n      )\n      return\n    }\n\n    const specifierResolved = resolveSpecifier(specifier, baseUrl) || specifier\n\n    const addressUrl = tryUrlResolution(address, baseUrl)\n    if (addressUrl === null) {\n      console.warn(\n        formulateAdressResolutionFailed({\n          address,\n          baseUrl,\n          specifier,\n        }),\n      )\n      return\n    }\n\n    if (specifier.endsWith(\"/\") && !addressUrl.endsWith(\"/\")) {\n      console.warn(\n        formulateAddressUrlRequiresTrailingSlash({\n          addressUrl,\n          address,\n          specifier,\n        }),\n      )\n      return\n    }\n    mappingsNormalized[specifierResolved] = addressUrl\n  })\n\n  return sortImports(mappingsNormalized)\n}\n\nconst normalizeScopes = (scopes, baseUrl) => {\n  const scopesNormalized = {}\n\n  Object.keys(scopes).forEach((scopeSpecifier) => {\n    const scopeMappings = scopes[scopeSpecifier]\n    const scopeUrl = tryUrlResolution(scopeSpecifier, baseUrl)\n    if (scopeUrl === null) {\n      console.warn(\n        formulateScopeResolutionFailed({\n          scope: scopeSpecifier,\n          baseUrl,\n        }),\n      )\n      return\n    }\n    const scopeValueNormalized = normalizeMappings(scopeMappings, baseUrl)\n    scopesNormalized[scopeUrl] = scopeValueNormalized\n  })\n\n  return sortScopes(scopesNormalized)\n}\n\nconst formulateBaseUrlMustBeStringOrUrl = ({\n  baseUrl,\n}) => `baseUrl must be a string or an url.\n--- base url ---\n${baseUrl}`\n\nconst formulateAddressMustBeAString = ({\n  specifier,\n  address,\n}) => `Address must be a string.\n--- address ---\n${address}\n--- specifier ---\n${specifier}`\n\nconst formulateAdressResolutionFailed = ({\n  address,\n  baseUrl,\n  specifier,\n}) => `Address url resolution failed.\n--- address ---\n${address}\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst formulateAddressUrlRequiresTrailingSlash = ({\n  addressURL,\n  address,\n  specifier,\n}) => `Address must end with /.\n--- address url ---\n${addressURL}\n--- address ---\n${address}\n--- specifier ---\n${specifier}`\n\nconst formulateScopeResolutionFailed = ({\n  scope,\n  baseUrl,\n}) => `Scope url resolution failed.\n--- scope ---\n${scope}\n--- base url ---\n${baseUrl}`\n",
    "export const pathnameToExtension = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex !== -1) {\n    pathname = pathname.slice(slashLastIndex + 1)\n  }\n\n  const dotLastIndex = pathname.lastIndexOf(\".\")\n  if (dotLastIndex === -1) return \"\"\n  // if (dotLastIndex === pathname.length - 1) return \"\"\n  return pathname.slice(dotLastIndex)\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { assertImportMap } from \"./internal/assertImportMap.js\"\nimport { hasScheme } from \"./internal/hasScheme.js\"\nimport { tryUrlResolution } from \"./internal/tryUrlResolution.js\"\nimport { resolveSpecifier } from \"./resolveSpecifier.js\"\n\nexport const applyImportMap = ({\n  importMap,\n  specifier,\n  importer,\n  createBareSpecifierError = ({ specifier, importer }) => {\n    return new Error(\n      createDetailedMessage(`Unmapped bare specifier.`, {\n        specifier,\n        importer,\n      }),\n    )\n  },\n  onImportMapping = () => {},\n}) => {\n  assertImportMap(importMap)\n  if (typeof specifier !== \"string\") {\n    throw new TypeError(\n      createDetailedMessage(\"specifier must be a string.\", {\n        specifier,\n        importer,\n      }),\n    )\n  }\n  if (importer) {\n    if (typeof importer !== \"string\") {\n      throw new TypeError(\n        createDetailedMessage(\"importer must be a string.\", {\n          importer,\n          specifier,\n        }),\n      )\n    }\n    if (!hasScheme(importer)) {\n      throw new Error(\n        createDetailedMessage(`importer must be an absolute url.`, {\n          importer,\n          specifier,\n        }),\n      )\n    }\n  }\n\n  const specifierUrl = resolveSpecifier(specifier, importer)\n  const specifierNormalized = specifierUrl || specifier\n\n  const { scopes } = importMap\n  if (scopes && importer) {\n    const scopeSpecifierMatching = Object.keys(scopes).find(\n      (scopeSpecifier) => {\n        return (\n          scopeSpecifier === importer ||\n          specifierIsPrefixOf(scopeSpecifier, importer)\n        )\n      },\n    )\n    if (scopeSpecifierMatching) {\n      const scopeMappings = scopes[scopeSpecifierMatching]\n      const mappingFromScopes = applyMappings(\n        scopeMappings,\n        specifierNormalized,\n        scopeSpecifierMatching,\n        onImportMapping,\n      )\n      if (mappingFromScopes !== null) {\n        return mappingFromScopes\n      }\n    }\n  }\n\n  const { imports } = importMap\n  if (imports) {\n    const mappingFromImports = applyMappings(\n      imports,\n      specifierNormalized,\n      undefined,\n      onImportMapping,\n    )\n    if (mappingFromImports !== null) {\n      return mappingFromImports\n    }\n  }\n\n  if (specifierUrl) {\n    return specifierUrl\n  }\n\n  throw createBareSpecifierError({ specifier, importer })\n}\n\nconst applyMappings = (\n  mappings,\n  specifierNormalized,\n  scope,\n  onImportMapping,\n) => {\n  const specifierCandidates = Object.keys(mappings)\n\n  let i = 0\n  while (i < specifierCandidates.length) {\n    const specifierCandidate = specifierCandidates[i]\n    i++\n    if (specifierCandidate === specifierNormalized) {\n      const address = mappings[specifierCandidate]\n      onImportMapping({\n        scope,\n        from: specifierCandidate,\n        to: address,\n        before: specifierNormalized,\n        after: address,\n      })\n      return address\n    }\n    if (specifierIsPrefixOf(specifierCandidate, specifierNormalized)) {\n      const address = mappings[specifierCandidate]\n      const afterSpecifier = specifierNormalized.slice(\n        specifierCandidate.length,\n      )\n      const addressFinal = tryUrlResolution(afterSpecifier, address)\n      onImportMapping({\n        scope,\n        from: specifierCandidate,\n        to: address,\n        before: specifierNormalized,\n        after: addressFinal,\n      })\n      return addressFinal\n    }\n  }\n\n  return null\n}\n\nconst specifierIsPrefixOf = (specifierHref, href) => {\n  return (\n    specifierHref[specifierHref.length - 1] === \"/\" &&\n    href.startsWith(specifierHref)\n  )\n}\n",
    "import { urlToPathname } from \"./internal/urlToPathname.js\"\nimport { pathnameToExtension } from \"./internal/pathnameToExtension.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\nimport { applyImportMap } from \"./applyImportMap.js\"\n\nexport const resolveImport = ({\n  specifier,\n  importer,\n  importMap,\n  defaultExtension = false,\n  createBareSpecifierError,\n  onImportMapping = () => {},\n}) => {\n  let url\n  if (importMap) {\n    url = applyImportMap({\n      importMap,\n      specifier,\n      importer,\n      createBareSpecifierError,\n      onImportMapping,\n    })\n  } else {\n    url = resolveUrl(specifier, importer)\n  }\n\n  if (defaultExtension) {\n    url = applyDefaultExtension({ url, importer, defaultExtension })\n  }\n\n  return url\n}\n\nconst applyDefaultExtension = ({ url, importer, defaultExtension }) => {\n  if (urlToPathname(url).endsWith(\"/\")) {\n    return url\n  }\n\n  if (typeof defaultExtension === \"string\") {\n    const extension = pathnameToExtension(url)\n    if (extension === \"\") {\n      return `${url}${defaultExtension}`\n    }\n    return url\n  }\n\n  if (defaultExtension === true) {\n    const extension = pathnameToExtension(url)\n    if (extension === \"\" && importer) {\n      const importerPathname = urlToPathname(importer)\n      const importerExtension = pathnameToExtension(importerPathname)\n      return `${url}${importerExtension}`\n    }\n  }\n\n  return url\n}\n",
    "export const applyDefaultExtension = (specifier, importer) => {\n  if (!importer) {\n    return specifier\n  }\n\n  const importerExtension = urlToExtension(importer)\n  const fakeUrl = new URL(specifier, importer).href\n  const specifierExtension = urlToExtension(fakeUrl)\n  if (specifierExtension !== \"\") {\n    return specifier\n  }\n\n  // I guess typescript still expect default extension to be .ts\n  // in a tsx file.\n  if (importerExtension === \"tsx\") {\n    return `${specifier}.ts`\n  }\n\n  // extension magic\n  return `${specifier}${importerExtension}`\n}\n\nconst urlToExtension = (url) => {\n  return pathnameToExtension(urlToPathname(url))\n}\n\nconst urlToPathname = (url) => new URL(url).pathname\n\nconst pathnameToExtension = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex !== -1) {\n    pathname = pathname.slice(slashLastIndex + 1)\n  }\n\n  const dotLastIndex = pathname.lastIndexOf(\".\")\n  if (dotLastIndex === -1) return \"\"\n  // if (dotLastIndex === pathname.length - 1) return \"\"\n  const extension = pathname.slice(dotLastIndex)\n  return extension\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { resolveImport } from \"@jsenv/importmap/src/resolveImport.js\"\n\nimport { applyDefaultExtension } from \"./default_extension.js\"\n\nexport const createImportResolverForImportmap = async ({\n  // projectDirectoryUrl,\n  urlContext,\n  importMap,\n  importMapUrl,\n  importDefaultExtension,\n  onBareSpecifierError = () => {},\n}) => {\n  const _resolveImport = (specifier, importer) => {\n    if (importDefaultExtension) {\n      specifier = applyDefaultExtension(specifier, importer)\n    }\n    return resolveImport({\n      specifier,\n      importer,\n      importMap,\n      createBareSpecifierError: ({ specifier, importer }) => {\n        const bareSpecifierError = createBareSpecifierError({\n          specifier,\n          importer: urlContext.asSourceRelativeUrl(importer),\n          importMapUrl: urlContext.asSourceRelativeUrl(importMapUrl),\n          importMap,\n        })\n        onBareSpecifierError(bareSpecifierError)\n        return bareSpecifierError\n      },\n    })\n  }\n\n  return { resolveImport: _resolveImport }\n}\n\nconst createBareSpecifierError = ({ specifier, importer, importMapUrl }) => {\n  const detailedMessage = createDetailedMessage(\"Unmapped bare specifier.\", {\n    specifier,\n    importer,\n    ...(importMapUrl\n      ? {\n          \"how to fix\": `Add a mapping for \"${specifier}\" into the importmap file at \"${importMapUrl}\"`,\n        }\n      : {\n          \"how to fix\": `Add an importmap with a mapping for \"${specifier}\"`,\n          \"suggestion\": `Generate importmap using https://github.com/jsenv/importmap-node-module`,\n        }),\n  })\n\n  return new Error(detailedMessage)\n}\n",
    "/*\n* SJS 6.11.0\n* Minimal SystemJS Build\n*/\n(function () {\n\n  function errMsg(errCode, msg) {\n    return (msg || \"\") + \" (SystemJS https://git.io/JvFET#\" + errCode + \")\";\n  }\n\n  var hasSymbol = typeof Symbol !== 'undefined';\n  var hasSelf = typeof self !== 'undefined';\n  var hasDocument = typeof document !== 'undefined';\n\n  var envGlobal = hasSelf ? self : global;\n\n  var baseUrl;\n\n  if (hasDocument) {\n    var baseEl = document.querySelector('base[href]');\n    if (baseEl)\n      baseUrl = baseEl.href;\n  }\n\n  if (!baseUrl && typeof location !== 'undefined') {\n    baseUrl = location.href.split('#')[0].split('?')[0];\n    var lastSepIndex = baseUrl.lastIndexOf('/');\n    if (lastSepIndex !== -1)\n      baseUrl = baseUrl.slice(0, lastSepIndex + 1);\n  }\n\n  var backslashRegEx = /\\\\/g;\n  function resolveIfNotPlainOrUrl (relUrl, parentUrl) {\n    if (relUrl.indexOf('\\\\') !== -1)\n      relUrl = relUrl.replace(backslashRegEx, '/');\n    // protocol-relative\n    if (relUrl[0] === '/' && relUrl[1] === '/') {\n      return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\n    }\n    // relative-url\n    else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n        relUrl.length === 1  && (relUrl += '/')) ||\n        relUrl[0] === '/') {\n      var parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\n      // Disabled, but these cases will give inconsistent results for deep backtracking\n      //if (parentUrl[parentProtocol.length] !== '/')\n      //  throw Error('Cannot resolve');\n      // read pathname from parent URL\n      // pathname taken to be part after leading \"/\"\n      var pathname;\n      if (parentUrl[parentProtocol.length + 1] === '/') {\n        // resolving to a :// so we need to read out the auth and host\n        if (parentProtocol !== 'file:') {\n          pathname = parentUrl.slice(parentProtocol.length + 2);\n          pathname = pathname.slice(pathname.indexOf('/') + 1);\n        }\n        else {\n          pathname = parentUrl.slice(8);\n        }\n      }\n      else {\n        // resolving to :/ so pathname is the /... part\n        pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));\n      }\n\n      if (relUrl[0] === '/')\n        return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\n\n      // join together and split for removal of .. and . segments\n      // looping the string instead of anything fancy for perf reasons\n      // '../../../../../z' resolved to 'x/y' is just 'z'\n      var segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n      var output = [];\n      var segmentIndex = -1;\n      for (var i = 0; i < segmented.length; i++) {\n        // busy reading a segment - only terminate on '/'\n        if (segmentIndex !== -1) {\n          if (segmented[i] === '/') {\n            output.push(segmented.slice(segmentIndex, i + 1));\n            segmentIndex = -1;\n          }\n        }\n\n        // new segment - check if it is relative\n        else if (segmented[i] === '.') {\n          // ../ segment\n          if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n            output.pop();\n            i += 2;\n          }\n          // ./ segment\n          else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n            i += 1;\n          }\n          else {\n            // the start of a new segment as below\n            segmentIndex = i;\n          }\n        }\n        // it is the start of a new segment\n        else {\n          segmentIndex = i;\n        }\n      }\n      // finish reading out the last segment\n      if (segmentIndex !== -1)\n        output.push(segmented.slice(segmentIndex));\n      return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\n    }\n  }\n\n  /*\n   * Import maps implementation\n   *\n   * To make lookups fast we pre-resolve the entire import map\n   * and then match based on backtracked hash lookups\n   *\n   */\n\n  function resolveUrl (relUrl, parentUrl) {\n    return resolveIfNotPlainOrUrl(relUrl, parentUrl) || (relUrl.indexOf(':') !== -1 ? relUrl : resolveIfNotPlainOrUrl('./' + relUrl, parentUrl));\n  }\n\n  function resolveAndComposePackages (packages, outPackages, baseUrl, parentMap, parentUrl) {\n    for (var p in packages) {\n      var resolvedLhs = resolveIfNotPlainOrUrl(p, baseUrl) || p;\n      var rhs = packages[p];\n      // package fallbacks not currently supported\n      if (typeof rhs !== 'string')\n        continue;\n      var mapped = resolveImportMap(parentMap, resolveIfNotPlainOrUrl(rhs, baseUrl) || rhs, parentUrl);\n      if (!mapped) {\n        targetWarning('W1', p, rhs);\n      }\n      else\n        outPackages[resolvedLhs] = mapped;\n    }\n  }\n\n  function resolveAndComposeImportMap (json, baseUrl, outMap) {\n    if (json.imports)\n      resolveAndComposePackages(json.imports, outMap.imports, baseUrl, outMap, null);\n\n    var u;\n    for (u in json.scopes || {}) {\n      var resolvedScope = resolveUrl(u, baseUrl);\n      resolveAndComposePackages(json.scopes[u], outMap.scopes[resolvedScope] || (outMap.scopes[resolvedScope] = {}), baseUrl, outMap, resolvedScope);\n    }\n\n    for (u in json.depcache || {})\n      outMap.depcache[resolveUrl(u, baseUrl)] = json.depcache[u];\n\n    for (u in json.integrity || {})\n      outMap.integrity[resolveUrl(u, baseUrl)] = json.integrity[u];\n  }\n\n  function getMatch (path, matchObj) {\n    if (matchObj[path])\n      return path;\n    var sepIndex = path.length;\n    do {\n      var segment = path.slice(0, sepIndex + 1);\n      if (segment in matchObj)\n        return segment;\n    } while ((sepIndex = path.lastIndexOf('/', sepIndex - 1)) !== -1)\n  }\n\n  function applyPackages (id, packages) {\n    var pkgName = getMatch(id, packages);\n    if (pkgName) {\n      var pkg = packages[pkgName];\n      if (pkg === null) return;\n      if (id.length > pkgName.length && pkg[pkg.length - 1] !== '/') {\n        targetWarning('W2', pkgName, pkg);\n      }\n      else\n        return pkg + id.slice(pkgName.length);\n    }\n  }\n\n  function targetWarning (code, match, target, msg) {\n    console.warn(errMsg(code,  [target, match].join(', ') ));\n  }\n\n  function resolveImportMap (importMap, resolvedOrPlain, parentUrl) {\n    var scopes = importMap.scopes;\n    var scopeUrl = parentUrl && getMatch(parentUrl, scopes);\n    while (scopeUrl) {\n      var packageResolution = applyPackages(resolvedOrPlain, scopes[scopeUrl]);\n      if (packageResolution)\n        return packageResolution;\n      scopeUrl = getMatch(scopeUrl.slice(0, scopeUrl.lastIndexOf('/')), scopes);\n    }\n    return applyPackages(resolvedOrPlain, importMap.imports) || resolvedOrPlain.indexOf(':') !== -1 && resolvedOrPlain;\n  }\n\n  /*\n   * SystemJS Core\n   *\n   * Provides\n   * - System.import\n   * - System.register support for\n   *     live bindings, function hoisting through circular references,\n   *     reexports, dynamic import, import.meta.url, top-level await\n   * - System.getRegister to get the registration\n   * - Symbol.toStringTag support in Module objects\n   * - Hookable System.createContext to customize import.meta\n   * - System.onload(err, id, deps) handler for tracing / hot-reloading\n   *\n   * Core comes with no System.prototype.resolve or\n   * System.prototype.instantiate implementations\n   */\n\n  var toStringTag = hasSymbol && Symbol.toStringTag;\n  var REGISTRY = hasSymbol ? Symbol() : '@';\n\n  function SystemJS () {\n    this[REGISTRY] = {};\n  }\n\n  var systemJSPrototype = SystemJS.prototype;\n\n  systemJSPrototype.import = function (id, parentUrl) {\n    var loader = this;\n    return Promise.resolve(loader.prepareImport())\n    .then(function() {\n      return loader.resolve(String(id), parentUrl);\n    })\n    .then(function (id) {\n      var load = getOrCreateLoad(loader, id);\n      return load.C || topLevelLoad(loader, load);\n    });\n  };\n\n  // Hookable createContext function -> allowing eg custom import meta\n  systemJSPrototype.createContext = function (parentId) {\n    var loader = this;\n    return {\n      url: parentId,\n      resolve: function (id, parentUrl) {\n        return Promise.resolve(loader.resolve(id, parentUrl || parentId));\n      }\n    };\n  };\n  function loadToId (load) {\n    return load.id;\n  }\n  function triggerOnload (loader, load, err, isErrSource) {\n    loader.onload(err, load.id, load.d && load.d.map(loadToId), !!isErrSource);\n    if (err)\n      throw err;\n  }\n\n  var lastRegister;\n  systemJSPrototype.register = function (deps, declare) {\n    lastRegister = [deps, declare];\n  };\n\n  /*\n   * getRegister provides the last anonymous System.register call\n   */\n  systemJSPrototype.getRegister = function () {\n    var _lastRegister = lastRegister;\n    lastRegister = undefined;\n    return _lastRegister;\n  };\n\n  function getOrCreateLoad (loader, id, firstParentUrl) {\n    var load = loader[REGISTRY][id];\n    if (load)\n      return load;\n\n    var importerSetters = [];\n    var ns = Object.create(null);\n    if (toStringTag)\n      Object.defineProperty(ns, toStringTag, { value: 'Module' });\n\n    var instantiatePromise = Promise.resolve()\n    .then(function () {\n      return loader.instantiate(id, firstParentUrl);\n    })\n    .then(function (registration) {\n      if (!registration)\n        throw Error(errMsg(2,  id ));\n      function _export (name, value) {\n        // note if we have hoisted exports (including reexports)\n        load.h = true;\n        var changed = false;\n        if (typeof name === 'string') {\n          if (!(name in ns) || ns[name] !== value) {\n            ns[name] = value;\n            changed = true;\n          }\n        }\n        else {\n          for (var p in name) {\n            var value = name[p];\n            if (!(p in ns) || ns[p] !== value) {\n              ns[p] = value;\n              changed = true;\n            }\n          }\n\n          if (name && name.__esModule) {\n            ns.__esModule = name.__esModule;\n          }\n        }\n        if (changed)\n          for (var i = 0; i < importerSetters.length; i++) {\n            var setter = importerSetters[i];\n            if (setter) setter(ns);\n          }\n        return value;\n      }\n      var declared = registration[1](_export, registration[1].length === 2 ? {\n        import: function (importId) {\n          return loader.import(importId, id);\n        },\n        meta: loader.createContext(id)\n      } : undefined);\n      load.e = declared.execute || function () {};\n      return [registration[0], declared.setters || []];\n    }, function (err) {\n      load.e = null;\n      load.er = err;\n      throw err;\n    });\n\n    var linkPromise = instantiatePromise\n    .then(function (instantiation) {\n      return Promise.all(instantiation[0].map(function (dep, i) {\n        var setter = instantiation[1][i];\n        return Promise.resolve(loader.resolve(dep, id))\n        .then(function (depId) {\n          var depLoad = getOrCreateLoad(loader, depId, id);\n          // depLoad.I may be undefined for already-evaluated\n          return Promise.resolve(depLoad.I)\n          .then(function () {\n            if (setter) {\n              depLoad.i.push(setter);\n              // only run early setters when there are hoisted exports of that module\n              // the timing works here as pending hoisted export calls will trigger through importerSetters\n              if (depLoad.h || !depLoad.I)\n                setter(depLoad.n);\n            }\n            return depLoad;\n          });\n        });\n      }))\n      .then(function (depLoads) {\n        load.d = depLoads;\n      });\n    });\n\n    // Capital letter = a promise function\n    return load = loader[REGISTRY][id] = {\n      id: id,\n      // importerSetters, the setters functions registered to this dependency\n      // we retain this to add more later\n      i: importerSetters,\n      // module namespace object\n      n: ns,\n\n      // instantiate\n      I: instantiatePromise,\n      // link\n      L: linkPromise,\n      // whether it has hoisted exports\n      h: false,\n\n      // On instantiate completion we have populated:\n      // dependency load records\n      d: undefined,\n      // execution function\n      e: undefined,\n\n      // On execution we have populated:\n      // the execution error if any\n      er: undefined,\n      // in the case of TLA, the execution promise\n      E: undefined,\n\n      // On execution, L, I, E cleared\n\n      // Promise for top-level completion\n      C: undefined,\n\n      // parent instantiator / executor\n      p: undefined\n    };\n  }\n\n  function instantiateAll (loader, load, parent, loaded) {\n    if (!loaded[load.id]) {\n      loaded[load.id] = true;\n      // load.L may be undefined for already-instantiated\n      return Promise.resolve(load.L)\n      .then(function () {\n        if (!load.p || load.p.e === null)\n          load.p = parent;\n        return Promise.all(load.d.map(function (dep) {\n          return instantiateAll(loader, dep, parent, loaded);\n        }));\n      })\n      .catch(function (err) {\n        if (load.er)\n          throw err;\n        load.e = null;\n        throw err;\n      });\n    }\n  }\n\n  function topLevelLoad (loader, load) {\n    return load.C = instantiateAll(loader, load, load, {})\n    .then(function () {\n      return postOrderExec(loader, load, {});\n    })\n    .then(function () {\n      return load.n;\n    });\n  }\n\n  // the closest we can get to call(undefined)\n  var nullContext = Object.freeze(Object.create(null));\n\n  // returns a promise if and only if a top-level await subgraph\n  // throws on sync errors\n  function postOrderExec (loader, load, seen) {\n    if (seen[load.id])\n      return;\n    seen[load.id] = true;\n\n    if (!load.e) {\n      if (load.er)\n        throw load.er;\n      if (load.E)\n        return load.E;\n      return;\n    }\n\n    // deps execute first, unless circular\n    var depLoadPromises;\n    load.d.forEach(function (depLoad) {\n      try {\n        var depLoadPromise = postOrderExec(loader, depLoad, seen);\n        if (depLoadPromise)\n          (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n      }\n      catch (err) {\n        load.e = null;\n        load.er = err;\n        throw err;\n      }\n    });\n    if (depLoadPromises)\n      return Promise.all(depLoadPromises).then(doExec);\n\n    return doExec();\n\n    function doExec () {\n      try {\n        var execPromise = load.e.call(nullContext);\n        if (execPromise) {\n          execPromise = execPromise.then(function () {\n            load.C = load.n;\n            load.E = null; // indicates completion\n            if (!true) ;\n          }, function (err) {\n            load.er = err;\n            load.E = null;\n            if (!true) ;\n            throw err;\n          });\n          return load.E = execPromise;\n        }\n        // (should be a promise, but a minify optimization to leave out Promise.resolve)\n        load.C = load.n;\n        load.L = load.I = undefined;\n      }\n      catch (err) {\n        load.er = err;\n        throw err;\n      }\n      finally {\n        load.e = null;\n      }\n    }\n  }\n\n  envGlobal.System = new SystemJS();\n\n  /*\n   * SystemJS browser attachments for script and import map processing\n   */\n\n  var importMapPromise = Promise.resolve();\n  var importMap = { imports: {}, scopes: {}, depcache: {}, integrity: {} };\n  systemJSPrototype.importMap = importMap;\n  systemJSPrototype.baseUrl = baseUrl;\n\n  // Scripts are processed immediately, on the first System.import, and on DOMReady.\n  // Import map scripts are processed only once (by being marked) and in order for each phase.\n  // This is to avoid using DOM mutation observers in core, although that would be an alternative.\n  var processFirst = hasDocument;\n  systemJSPrototype.prepareImport = function (doProcessScripts) {\n    if (processFirst || doProcessScripts) {\n      processScripts();\n      processFirst = false;\n    }\n    return importMapPromise;\n  };\n  if (hasDocument) {\n    processScripts();\n    window.addEventListener('DOMContentLoaded', processScripts);\n  }\n\n  function processScripts () {\n    [].forEach.call(document.querySelectorAll('script'), function (script) {\n      if (script.sp) // sp marker = systemjs processed\n        return;\n      // TODO: deprecate systemjs-module in next major now that we have auto import\n      if (script.type === 'systemjs-module') {\n        script.sp = true;\n        if (!script.src)\n          return;\n        System.import(script.src.slice(0, 7) === 'import:' ? script.src.slice(7) : resolveUrl(script.src, baseUrl)).catch(function (e) {\n          // if there is a script load error, dispatch an \"error\" event\n          // on the script tag.\n          if (e.message.indexOf('https://git.io/JvFET#3') > -1) {\n            var event = document.createEvent('Event');\n            event.initEvent('error', false, false);\n            script.dispatchEvent(event);\n          }\n          return Promise.reject(e);\n        });\n      }\n      else if (script.type === 'systemjs-importmap') {\n        script.sp = true;\n        var fetchPromise = script.src ? fetch(script.src, { integrity: script.integrity }).then(function (res) {\n          if (!res.ok)\n            throw Error( res.status );\n          return res.text();\n        }).catch(function (err) {\n          err.message = errMsg('W4',  script.src ) + '\\n' + err.message;\n          console.warn(err);\n          if (typeof script.onerror === 'function') {\n              script.onerror();\n          }\n          return '{}';\n        }) : script.innerHTML;\n        importMapPromise = importMapPromise.then(function () {\n          return fetchPromise;\n        }).then(function (text) {\n          extendImportMap(importMap, text, script.src || baseUrl);\n          return importMap\n        });\n      }\n    });\n  }\n\n  function extendImportMap (importMap, newMapText, newMapUrl) {\n    var newMap = {};\n    try {\n      newMap = JSON.parse(newMapText);\n    } catch (err) {\n      console.warn(Error(( errMsg('W5')  )));\n    }\n    resolveAndComposeImportMap(newMap, newMapUrl, importMap);\n  }\n  System.extendImportMap = extendImportMap\n\n  /*\n   * Script instantiation loading\n   */\n\n  if (hasDocument) {\n    window.addEventListener('error', function (evt) {\n      lastWindowErrorUrl = evt.filename;\n      lastWindowError = evt.error;\n    });\n    var baseOrigin = location.origin;\n  }\n\n  systemJSPrototype.createScript = function (url) {\n    var script = document.createElement('script');\n    script.async = true;\n    // Only add cross origin for actual cross origin\n    // this is because Safari triggers for all\n    // - https://bugs.webkit.org/show_bug.cgi?id=171566\n    if (url.indexOf(baseOrigin + '/'))\n      script.crossOrigin = 'anonymous';\n    var integrity = importMap.integrity[url];\n    if (integrity)\n      script.integrity = integrity;\n    script.src = url;\n    return script;\n  };\n\n  // Auto imports -> script tags can be inlined directly for load phase\n  var lastAutoImportDeps, lastAutoImportTimeout;\n  var autoImportCandidates = {};\n  var systemRegister = systemJSPrototype.register;\n  var inlineScriptCount = 0;\n  systemJSPrototype.register = function (deps, declare, autoUrl) {\n    if (hasDocument && document.readyState === 'loading' && typeof deps !== 'string') {\n      var scripts = document.querySelectorAll('script[src]');\n      var lastScript = scripts[scripts.length - 1];\n      var lastAutoImportUrl\n      lastAutoImportDeps = deps;\n      if (lastScript && lastScript.src) {\n        lastAutoImportUrl = lastScript.src;\n      }\n      else if (autoUrl) {\n        lastAutoImportUrl = autoUrl\n      }\n      else {\n        inlineScriptCount++\n        lastAutoImportUrl = document.location.href + \"__inline_script__\" + inlineScriptCount;\n      }\n      // if this is already a System load, then the instantiate has already begun\n      // so this re-import has no consequence\n      var loader = this;\n      lastAutoImportTimeout = setTimeout(function () {\n        autoImportCandidates[lastAutoImportUrl] = [deps, declare];\n        loader.import(lastAutoImportUrl);\n      });\n    }\n    else {\n      lastAutoImportDeps = undefined;\n    }\n    return systemRegister.call(this, deps, declare);\n  };\n\n  var lastWindowErrorUrl, lastWindowError;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var autoImportRegistration = autoImportCandidates[url];\n    if (autoImportRegistration) {\n      delete autoImportCandidates[url];\n      return autoImportRegistration;\n    }\n    var loader = this;\n    return Promise.resolve(systemJSPrototype.createScript(url)).then(function (script) {\n      return new Promise(function (resolve, reject) {\n        script.addEventListener('error', function () {\n          reject(Error(errMsg(3,  [url, firstParentUrl].join(', ') )));\n        });\n        script.addEventListener('load', function () {\n          document.head.removeChild(script);\n          // Note that if an error occurs that isn't caught by this if statement,\n          // that getRegister will return null and a \"did not instantiate\" error will be thrown.\n          if (lastWindowErrorUrl === url) {\n            reject(lastWindowError);\n          }\n          else {\n            var register = loader.getRegister(url);\n            // Clear any auto import registration for dynamic import scripts during load\n            if (register && register[0] === lastAutoImportDeps)\n              clearTimeout(lastAutoImportTimeout);\n            resolve(register);\n          }\n        });\n        document.head.appendChild(script);\n      });\n    });\n  };\n\n  /*\n   * Fetch loader, sets up shouldFetch and fetch hooks\n   */\n  systemJSPrototype.shouldFetch = function () {\n    return false;\n  };\n  if (typeof fetch !== 'undefined')\n    systemJSPrototype.fetch = fetch;\n\n  var instantiate = systemJSPrototype.instantiate;\n  var jsContentTypeRegEx = /^(text|application)\\/(x-)?javascript(;|$)/;\n  systemJSPrototype.instantiate = function (url, parent) {\n    var loader = this;\n    if (!this.shouldFetch(url))\n      return instantiate.apply(this, arguments);\n    return this.fetch(url, {\n      credentials: 'same-origin',\n      integrity: importMap.integrity[url]\n    })\n    .then(function (res) {\n      if (!res.ok)\n        throw Error(errMsg(7,  [res.status, res.statusText, url, parent].join(', ') ));\n      var contentType = res.headers.get('content-type');\n      if (!contentType || !jsContentTypeRegEx.test(contentType))\n        throw Error(errMsg(4,  contentType ));\n      return res.text().then(function (source) {\n        if (source.indexOf('//# sourceURL=') < 0)\n          source += '\\n//# sourceURL=' + url;\n        (0, eval)(source);\n        return loader.getRegister(url);\n      });\n    });\n  };\n\n  systemJSPrototype.resolve = function (id, parentUrl) {\n    parentUrl = parentUrl || !true  || baseUrl;\n    return resolveImportMap(( importMap), resolveIfNotPlainOrUrl(id, parentUrl) || id, parentUrl) || throwUnresolved(id, parentUrl);\n  };\n\n  function throwUnresolved (id, parentUrl) {\n    throw Error(errMsg(8,  [id, parentUrl].join(', ') ));\n  }\n\n  var systemInstantiate = systemJSPrototype.instantiate;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var preloads = ( importMap).depcache[url];\n    if (preloads) {\n      for (var i = 0; i < preloads.length; i++)\n        getOrCreateLoad(this, this.resolve(preloads[i], url), url);\n    }\n    return systemInstantiate.call(this, url, firstParentUrl);\n  };\n\n  /*\n   * Supports loading System.register in workers\n   */\n\n  if (hasSelf && typeof importScripts === 'function') {\n    systemJSPrototype.instantiate = function (url) {\n      var loader = this;\n      return self.fetch(url, {\n        credentials: 'same-origin',\n      }).then(function (response) {\n        if (!response.ok) {\n          throw Error(errMsg(7,  [response.status, response.statusText, url].join(', ') ));\n        }\n        return response.text()\n      }).then(function (source) {\n        if (source.indexOf('//# sourceURL=') < 0) source += '\\n//# sourceURL=' + url;\n        (0, eval)(source);\n        return loader.getRegister(url);\n      })\n    };\n  }\n\n}());\n\n(function(){\n  var envGlobal = typeof self !== 'undefined' ? self : global;\n  var System = envGlobal.System;\n\n  var registerRegistry = Object.create(null)\n  var register = System.register;\n  System.registerRegistry = registerRegistry;\n  System.register = function (name, deps, declare) {\n    if (typeof name !== 'string') return register.apply(this, arguments);\n    var define = [deps, declare];\n    return System.prepareImport().then(function () {\n      var url = System.resolve(`./${name}`);\n      registerRegistry[url] = define;\n      return register.call(System, deps, declare, url);\n    })\n  };\n\n  var instantiate = System.instantiate;\n  System.instantiate = function (url, firstParentUrl) {\n    var result = registerRegistry[url];\n\n    if (result) {\n      registerRegistry[url] = null;\n      return result;\n    } else {\n      return instantiate.call(this, url, firstParentUrl);\n    }\n  };\n\n  var getRegister = System.getRegister;\n  System.getRegister = function (url) {\n    // Calling getRegister() because other extras need to know it was called so they can perform side effects\n    var register = getRegister.call(this, url);\n    var result = registerRegistry[url] || register;\n    return result;\n  };\n}());\n\n(function () {\n  // worker or service worker\n  if (typeof WorkerGlobalScope === 'function' && self instanceof WorkerGlobalScope) {\n    var importMapFromParentPromise = new Promise((resolve) => {\n      var importmapMessageCallback = function (e) {\n        if (e.data === \"__importmap_init__\") {\n          self.removeEventListener(\"message\", importmapMessageCallback)\n          e.ports[0].onmessage = (message) => {\n            resolve(message.data)\n          }\n          e.ports[0].postMessage('__importmap_request__')         \n        }\n      };\n      self.addEventListener(\"message\", importmapMessageCallback)\n    })\n    // var prepareImport = System.prepareImport\n    System.prepareImport = function () {\n      return importMapFromParentPromise.then(function (importmap) {\n        System.extendImportMap(System.importMap, JSON.stringify(importmap), System.baseUrl)\n      })\n    }\n\n    // auto import first register\n    var messageEvents = []\n    var messageCallback = (event) => {\n      messageEvents.push(event)\n    }\n    self.addEventListener('message', messageCallback)\n    var register = System.register;\n    System.register = function(deps, declare) {\n      System.register = register;\n      System.registerRegistry[self.location.href] = [deps, declare];\n      return System.import(self.location.href).then((result) => {\n        self.removeEventListener('message', messageCallback)\n        messageEvents.forEach((messageEvent) => {\n          self.dispatchEvent(messageEvent)\n        })\n        messageEvents = null\n        return result\n      })\n    }\n  }\n  else if (typeof window === 'object') {\n    var WorkerConstructor = window.Worker;\n    if (typeof WorkerConstructor === 'function') {\n      window.Worker = function (url, options) {\n        var worker = new WorkerConstructor(url, options);\n        var importmapChannel = new MessageChannel();\n        importmapChannel.port1.onmessage = function (message) {\n          System.prepareImport().then(function (importmap) {\n            message.target.postMessage(importmap);\n          });\n        }\n        worker.postMessage('__importmap_init__', [importmapChannel.port2]);\n        return worker\n      }\n    }\n\n    var serviceWorker = navigator.serviceWorker;\n    if (serviceWorker) {\n      var register =  serviceWorker.register;\n      serviceWorker.register = function(url, options) {\n        var registrationPromise = register.call(this, url, options);\n        registrationPromise.then(function(registration) {\n          var installing = registration.installing;\n          var waiting = registration.waiting;\n          var active = registration.active;\n          var worker = installing || waiting || active;\n          var importmapChannel = new MessageChannel();\n          importmapChannel.port1.onmessage = function (message) {\n            System.prepareImport().then(function (importmap) {\n              message.target.postMessage(importmap)\n            });\n          }\n          worker.postMessage('__importmap_init__', [importmapChannel.port2]);\n        })\n        return registrationPromise\n      }\n    }\n  }\n}());",
    "import { getRessourceResponseError } from \"@jsenv/core/src/internal/html_supervisor/ressource_response_error.js\"\nimport \"@jsenv/core/src/internal/runtime_client/s.js\"\n\nexport const createBrowserSystem = ({\n  urlContext,\n  importResolver,\n  fetchSource,\n}) => {\n  const browserSystem = window.System\n  const resolve = (specifier, importer = document.location.href) => {\n    return importResolver.resolveImport(specifier, importer)\n  }\n\n  browserSystem.resolve = resolve\n  const instantiate = browserSystem.instantiate\n  browserSystem.instantiate = async function (url, importerUrl) {\n    const { importType, urlWithoutImportType } = extractImportTypeFromUrl(url)\n    if (importType === \"json\") {\n      const jsonModule = await instantiateAsJsonModule(urlWithoutImportType, {\n        browserSystem,\n        fetchSource,\n      })\n      return jsonModule\n    }\n    if (importType === \"css\") {\n      const cssModule = await instantiateAsCssModule(urlWithoutImportType, {\n        browserSystem,\n        importerUrl,\n        urlContext,\n        fetchSource,\n      })\n      return cssModule\n    }\n    try {\n      const registration = await instantiate.call(this, url, importerUrl)\n      if (!registration) {\n        throw new Error(\n          `no registration found for JS at ${url}\n--- importer url ---\n${importerUrl}\n--- navigator.vendor ---\n${window.navigator.vendor}`,\n        )\n      }\n      return registration\n    } catch (e) {\n      let response\n      try {\n        response = await fetchSource(url)\n      } catch (e) {\n        e.code = \"NETWORK_FAILURE\"\n        throw e\n      }\n      const responseError = await getRessourceResponseError({\n        urlContext,\n        contentTypeExpected: \"application/javascript\",\n        type: \"js_module\",\n        url,\n        importerUrl,\n        response,\n      })\n      throw responseError || e\n    }\n  }\n\n  browserSystem.createContext = (importerUrl) => {\n    return {\n      url: importerUrl,\n      resolve: (specifier) => resolve(specifier, importerUrl),\n    }\n  }\n  return browserSystem\n}\n\nconst extractImportTypeFromUrl = (url) => {\n  const urlObject = new URL(url)\n  const { search } = urlObject\n  const searchParams = new URLSearchParams(search)\n\n  const importType = searchParams.get(\"import_type\")\n  if (!importType) {\n    return {}\n  }\n\n  searchParams.delete(\"import_type\")\n  urlObject.search = String(searchParams)\n  return {\n    importType,\n    urlWithoutImportType: urlObject.href,\n  }\n}\n\nconst instantiateAsJsonModule = async (url, { browserSystem, fetchSource }) => {\n  const response = await fetchSource(url, {\n    contentTypeExpected: \"application/json\",\n  })\n  const json = await response.json()\n  browserSystem.register([], (_export) => {\n    return {\n      execute: () => {\n        _export(\"default\", json)\n      },\n    }\n  })\n  const registration = browserSystem.getRegister(url)\n  if (!registration) {\n    throw new Error(\n      `no registration found for JSON at ${url}. Navigator.vendor: ${window.navigator.vendor}. JSON text: ${json}`,\n    )\n  }\n  return registration\n}\n\nconst instantiateAsCssModule = async (\n  url,\n  { importerUrl, browserSystem, fetchSource },\n) => {\n  const response = await fetchSource(url, {\n    contentTypeExpected: \"text/css\",\n  })\n  // There is a logic inside \"file_changes.js\" which is reloading\n  // all link rel=\"stylesheet\" when a file ending with \".css\" is modified\n  // But here it would not work because we have to replace the css in\n  // the adopted stylesheet + all module importing this css module\n  // should be reinstantiated\n  // -> the default behaviour for this CSS file should be a page reload\n  const { reloadMetas } = window.__jsenv_event_source_client__\n  // if below is to respect if import.meta.hot is called for this CSS file\n  // TODO: it's not the right way to check\n  // because code would do\n  /*\n  import style from \"./style.css\" assert { type: 'css' }\n  \n  if (import.meta.hot) {\n    let currentStyle = style\n    import.meta.hot.accept('./style.css', (newStyle) => {\n      document.adoptedStyleSheets = document.adoptedStyleSheets.filter((s) => s !== currentStyle);\n      document.adoptedStylesheets = [...document.adoptedStyleSheets, newStyle]\n      currentStyle = newStyle\n    })\n  }\n  */\n  if (!reloadMetas[url]) {\n    reloadMetas[url] = \"decline\"\n  }\n\n  const cssText = await response.text()\n  const cssTextWithBaseUrl = cssWithBaseUrl({\n    cssText,\n    cssUrl: url,\n    baseUrl: importerUrl,\n  })\n  browserSystem.register([], (_export) => {\n    return {\n      execute: () => {\n        const sheet = new CSSStyleSheet()\n        sheet.replaceSync(cssTextWithBaseUrl)\n        _export(\"default\", sheet)\n      },\n    }\n  })\n  const registration = browserSystem.getRegister(url)\n  if (!registration) {\n    throw new Error(\n      `no registration found for CSS at ${url}. Navigator.vendor: ${window.navigator.vendor}. CSS text: ${cssTextWithBaseUrl}`,\n    )\n  }\n  return registration\n}\n\n// CSSStyleSheet accepts a \"baseUrl\" parameter\n// as documented in https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet/CSSStyleSheet#parameters\n// Unfortunately the polyfill do not seems to implement it\n// So we reuse \"systemjs\" strategy from https://github.com/systemjs/systemjs/blob/98609dbeef01ec62447e4b21449ce47e55f818bd/src/extras/module-types.js#L37\nconst cssWithBaseUrl = ({ cssUrl, cssText, baseUrl }) => {\n  const cssDirectoryUrl = new URL(\"./\", cssUrl).href\n  const baseDirectoryUrl = new URL(\"./\", baseUrl).href\n  if (cssDirectoryUrl === baseDirectoryUrl) {\n    return cssText\n  }\n  const cssTextRelocated = cssText.replace(\n    /url\\(\\s*(?:([\"'])((?:\\\\.|[^\\n\\\\\"'])+)\\1|((?:\\\\.|[^\\s,\"'()\\\\])+))\\s*\\)/g,\n    (match, quotes, relUrl1, relUrl2) => {\n      const absoluteUrl = new URL(relUrl1 || relUrl2, cssUrl).href\n      return `url(${quotes}${absoluteUrl}${quotes})`\n    },\n  )\n  return cssTextRelocated\n}\n",
    "import { normalizeImportMap } from \"@jsenv/importmap/src/normalizeImportMap.js\"\n\n// do not use memoize from @jsenv/filesystem to avoid pulling @jsenv/filesystem code into the browser build\nimport { fetchUrl } from \"@jsenv/core/src/internal/browser_utils/fetch_browser.js\"\nimport { createImportResolverForImportmap } from \"@jsenv/core/src/internal/import_resolution/import_resolver_importmap.js\"\n\nimport { createBrowserSystem } from \"./browser_system.js\"\n\nexport const createBrowserClient = async ({\n  urlContext,\n  importDefaultExtension,\n}) => {\n  // if there is an importmap in the document we use it instead of fetching.\n  // systemjs style with systemjs-importmap\n  const importmapScript = document.querySelector(\n    `script[type=\"systemjs-importmap\"]`,\n  )\n  let importMap\n  let importMapUrl\n  if (importmapScript) {\n    let importmapRaw\n    if (importmapScript.src) {\n      importMapUrl = importmapScript.src\n      const importmapFileResponse = await fetchSource(importMapUrl, {\n        contentTypeExpected: \"application/importmap+json\",\n      })\n      importmapRaw =\n        importmapFileResponse.status === 404\n          ? {}\n          : await importmapFileResponse.json()\n    } else {\n      importMapUrl = document.location.href\n      importmapRaw = JSON.parse(importmapScript.textContent) || {}\n    }\n    importMap = normalizeImportMap(importmapRaw, importMapUrl)\n  }\n\n  const importResolver = await createImportResolverForImportmap({\n    // projectDirectoryUrl,\n    urlContext,\n    importMap,\n    importMapUrl,\n    importDefaultExtension,\n  })\n\n  const browserSystem = await createBrowserSystem({\n    urlContext,\n    fetchSource,\n    importResolver,\n  })\n  return browserSystem\n}\n\nconst fetchSource = (url, { contentTypeExpected }) => {\n  return fetchUrl(url, {\n    credentials: \"same-origin\",\n    contentTypeExpected,\n  })\n}\n",
    "import { memoize } from \"@jsenv/core/src/internal/memoize.js\"\nimport { fetchUrl } from \"@jsenv/core/src/internal/browser_utils/fetch_browser.js\"\nimport { fetchAndEval } from \"@jsenv/core/src/internal/browser_utils/fetch_and_eval.js\"\n\nimport { inferContextFrom, createUrlContext } from \"../../url_context.js\"\nimport { initHtmlSupervisor } from \"../html_supervisor.js\"\nimport { installBrowserErrorStackRemapping } from \"./browser_error_stack_remap.js\"\nimport { createBrowserClient } from \"./browser_client_factory.js\"\n\nconst getCompileProfilePromise = memoize(async () => {\n  const compileServerOrigin = document.location.origin\n  const compileServerResponse = await fetchUrl(\n    `${compileServerOrigin}/__jsenv_compile_profile__`,\n  )\n  const compileServerMeta = await compileServerResponse.json()\n  return compileServerMeta\n})\n\nconst getErrorTransformer = memoize(async () => {\n  if (!Error.captureStackTrace) {\n    return null\n  }\n  const {\n    errorStackRemapping,\n    sourcemapMainFileRelativeUrl,\n    sourcemapMappingFileRelativeUrl,\n  } = await getCompileProfilePromise()\n  if (!errorStackRemapping) {\n    return null\n  }\n  const compileServerOrigin = document.location.origin\n  await fetchAndEval(`${compileServerOrigin}/${sourcemapMainFileRelativeUrl}`)\n  const { SourceMapConsumer } = window.sourceMap\n  SourceMapConsumer.initialize({\n    \"lib/mappings.wasm\": `${compileServerOrigin}/${sourcemapMappingFileRelativeUrl}`,\n  })\n  const { getErrorOriginalStackString } = installBrowserErrorStackRemapping({\n    SourceMapConsumer,\n  })\n  return async (error) => {\n    // code can throw something else than an error\n    // in that case return it unchanged\n    if (!error || !(error instanceof Error)) return error\n    const originalStack = await getErrorOriginalStackString(error)\n    error.stack = originalStack\n    return error\n  }\n})\n\nconst getBrowserClient = memoize(async () => {\n  const { jsenvDirectoryRelativeUrl, importDefaultExtension } =\n    await getCompileProfilePromise()\n  const urlContext = createUrlContext(\n    inferContextFrom({\n      url: window.location.origin,\n      jsenvDirectoryRelativeUrl,\n    }),\n  )\n  return createBrowserClient({\n    urlContext,\n    importDefaultExtension,\n  })\n})\n\nconst htmlSupervisor = initHtmlSupervisor({\n  errorTransformer: async (e) => {\n    const transformer = await getErrorTransformer()\n    return transformer ? transformer(e) : e\n  },\n})\nwindow.__html_supervisor__.setHtmlSupervisor(htmlSupervisor)\n\nconst superviseScriptTypeModule = ({ src }) => {\n  htmlSupervisor.addExecution({\n    type: \"js_module\",\n    currentScript: document.currentScript,\n    src,\n    promise: (async () => {\n      const browserClient = await getBrowserClient()\n      return browserClient.import(src)\n    })(),\n  })\n}\nwindow.__html_supervisor__.superviseScriptTypeModule = superviseScriptTypeModule\n"
  ],
  "names": [
    "memoize",
    "compute",
    "memoized",
    "memoizedValue",
    "fnWithMemoization",
    "forget",
    "value",
    "undefined",
    "obj",
    "key",
    "Object",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "ownKeys",
    "object",
    "enumerableOnly",
    "keys",
    "getOwnPropertySymbols",
    "symbols",
    "filter",
    "sym",
    "getOwnPropertyDescriptor",
    "push",
    "apply",
    "_objectSpread2",
    "target",
    "i",
    "arguments",
    "length",
    "source",
    "forEach",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "excluded",
    "sourceKeys",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "sourceSymbolKeys",
    "prototype",
    "propertyIsEnumerable",
    "call",
    "nativeTypeOf",
    "customTypeOf",
    "Symbol",
    "constructor",
    "iterator",
    "then",
    "direct",
    "Promise",
    "resolve",
    "f",
    "args",
    "e",
    "reject",
    "body",
    "result",
    "fetchUsingXHR",
    "url",
    "signal",
    "method",
    "credentials",
    "headers",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "error",
    "settled",
    "cleanup",
    "ontimeout",
    "onerror",
    "onload",
    "onreadystatechange",
    "Error",
    "createRequestError",
    "addEventListener",
    "abort",
    "abortError",
    "name",
    "readyState",
    "open",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseUrl",
    "responseURL",
    "responseStatus",
    "status",
    "responseStatusText",
    "statusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "String",
    "json",
    "JSON",
    "parse",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "window",
    "FileReader",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "stack",
    "promise",
    "res",
    "rej",
    "originSameAsGlobalOrigin",
    "location",
    "globalOrigin",
    "origin",
    "hrefToOrigin",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "line",
    "parts",
    "shift",
    "join",
    "toLowerCase",
    "href",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "slice",
    "colonIndex",
    "DataView",
    "isView",
    "viewClasses",
    "includes",
    "toString",
    "form",
    "bytes",
    "replace",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "Array",
    "fromCharCode",
    "byteLength",
    "set",
    "_await",
    "_async",
    "fetchNative",
    "mode",
    "options",
    "fetch",
    "responseToHeaders",
    "fetchUrl",
    "AbortController",
    "fetchAndEval",
    "eval",
    "appendSourceURL",
    "code",
    "sourceURL",
    "inferContextFrom",
    "jsenvDirectoryRelativeUrl",
    "URL",
    "pathname",
    "startsWith",
    "projectDirectoryServerUrl",
    "compileId",
    "compileDirectoryRelativeUrl",
    "slashIndex",
    "afterJsenvDirectory",
    "nextSlashIndex",
    "createUrlContext",
    "compileDirectoryServerUrl",
    "asSourceRelativeUrl",
    "asSourceUrl",
    "sourceRelativeUrl",
    "asCompiledUrl",
    "asUrlToFetch",
    "getRessourceTrace",
    "urlContext",
    "importerUrl",
    "type",
    "notFound",
    "namings",
    "js_module",
    "declaration",
    "usage",
    "js_script",
    "file",
    "createDetailedMessage",
    "message",
    "details",
    "string",
    "isArray",
    "getRessourceResponseError",
    "contentTypeExpected",
    "contentType",
    "bodyAsJson",
    "cause",
    "suggestion",
    "arrayLikeToArray",
    "arr",
    "len",
    "arr2",
    "_iterableToArray",
    "iter",
    "from",
    "unsupportedIterableToArray",
    "o",
    "minLen",
    "n",
    "test",
    "TypeError",
    "arrayWithoutHoles",
    "iterableToArray",
    "nonIterableSpread",
    "isComposite",
    "compositeWellKnownMap",
    "WeakMap",
    "primitiveWellKnownMap",
    "Map",
    "getCompositeGlobalPath",
    "get",
    "getPrimitiveGlobalPath",
    "visitGlobalObject",
    "visitValue",
    "path",
    "has",
    "visitProperty",
    "property",
    "descriptor",
    "propertyValue",
    "getOwnPropertyNames",
    "symbol",
    "global",
    "decompose",
    "mainValue",
    "functionAllowed",
    "prototypeStrict",
    "ignoreSymbols",
    "valueMap",
    "recipeArray",
    "valueToIdentifier",
    "existingIdentifier",
    "identifierForPrimitive",
    "identifier",
    "identifierForNewValue",
    "primitiveToRecipe",
    "createPromiseAreNotSupportedMessage",
    "WeakSet",
    "createWeakSetAreNotSupportedMessage",
    "createWeakMapAreNotSupportedMessage",
    "createForbiddenFunctionMessage",
    "identifierForComposite",
    "compositeGlobalPath",
    "createGlobalReferenceRecipe",
    "propertyDescriptionArray",
    "propertyName",
    "propertyDescriptor",
    "propertyNameIdentifier",
    "propertyDescription",
    "computePropertyDescription",
    "symbolDescriptionArray",
    "symbolIdentifier",
    "methodDescriptionArray",
    "computeMethodDescriptionArray",
    "extensible",
    "isExtensible",
    "createCompositeRecipe",
    "propertyNameOrSymbol",
    "createForbiddenPropertySetterMessage",
    "createForbiddenPropertyGetterMessage",
    "getIdentifier",
    "setIdentifier",
    "valueIdentifier",
    "Set",
    "callArray",
    "entryValue",
    "index",
    "entryValueIdentifier",
    "methodNameIdentifier",
    "entryKey",
    "entryKeyIdentifier",
    "find",
    "existingValue",
    "is",
    "nextIdentifier",
    "currentIdentifier",
    "parseInt",
    "mainIdentifier",
    "prototypeValueToIdentifier",
    "prototypeValue",
    "prototypeExistingIdentifier",
    "prototypeIdentifier",
    "prototypeGlobalPath",
    "createUnknownPrototypeMessage",
    "getPrototypeOf",
    "identifierForValueOf",
    "valueOf",
    "valueOfReturnValue",
    "createUnexpectedValueOfReturnValueMessage",
    "recipe",
    "valueOfIdentifier",
    "RegExp",
    "symbolToRecipe",
    "createPimitiveRecipe",
    "globalSymbolKey",
    "keyFor",
    "createGlobalSymbolRecipe",
    "symbolGlobalPath",
    "createUnknownSymbolMessage",
    "sortRecipe",
    "findInRecipePrototypeChain",
    "callback",
    "currentRecipe",
    "recipeArrayOrdered",
    "sort",
    "leftRecipe",
    "rightRecipe",
    "leftType",
    "rightType",
    "rightRecipeIsInLeftRecipePrototypeChain",
    "recipeCandidate",
    "leftRecipeIsInRightRecipePrototypeChain",
    "leftIndex",
    "rightIndex",
    "escapeString",
    "j",
    "escapedString",
    "char",
    "escapedChar",
    "uneval",
    "recipeArraySorted",
    "variableNameMap",
    "indexSorted",
    "identifierToVariableName",
    "recipeToSetupSource",
    "primitiveRecipeToSetupSource",
    "globalSymbolRecipeToSetupSource",
    "globalReferenceRecipeToSetupSource",
    "compositeRecipeToSetupSource",
    "pathSource",
    "map",
    "part",
    "prototypeConstructor",
    "recipeVariableName",
    "recipeToMutateSource",
    "compositeRecipeToMutateSource",
    "mutateSource",
    "generateDefinePropertySource",
    "generateMethodCallSource",
    "generatePreventExtensionSource",
    "propertyNameOrSymbolIdentifier",
    "propertyOrSymbolVariableName",
    "propertyDescriptorSource",
    "generatePropertyDescriptorSource",
    "methodCallSource",
    "methodVariableName",
    "argumentIdentifiers",
    "argumentVariableNames",
    "argumentIdentifier",
    "unevalException",
    "hasOwnProperty",
    "displayErrorInDocument",
    "title",
    "theme",
    "errorToHTML",
    "css",
    "html",
    "removeJsenvConsole",
    "appendHMTLInside",
    "document",
    "querySelector",
    "onclick",
    "escapeHtml",
    "messageHTML",
    "captureStackTrace",
    "stringify",
    "htmlWithCorrectLineBreaks",
    "htmlWithLinks",
    "stringToStringWithLink",
    "transform",
    "match",
    "linkHTML",
    "lastChar",
    "endsWithSeparationChar",
    "lineAndColumnPattern",
    "lineAndColumMatch",
    "lineAndColumnString",
    "lineNumber",
    "columnNumber",
    "link",
    "linePattern",
    "lineMatch",
    "lineString",
    "parentNode",
    "temoraryParent",
    "createElement",
    "innerHTML",
    "transferChildren",
    "fromNode",
    "toNode",
    "childNodes",
    "appendChild",
    "c",
    "Notification",
    "displayErrorNotificationNotAvailable",
    "displayErrorNotificationImplementation",
    "icon",
    "permission",
    "notification",
    "lang",
    "focus",
    "displayErrorNotification",
    "recover",
    "initHtmlSupervisor",
    "errorTransformer",
    "scriptExecutionResults",
    "collectCalled",
    "pendingExecutionCount",
    "resolveScriptExecutionsPromise",
    "scriptExecutionsPromise",
    "onExecutionStart",
    "performance",
    "mark",
    "onExecutionSettled",
    "executionResult",
    "measure",
    "addExecution",
    "src",
    "currentScript",
    "improveErrorWithFetch",
    "namespace",
    "coverage",
    "__coverage__",
    "errorExposureInConsole",
    "getErrorFromServer",
    "errorFromServer",
    "onExecutionError",
    "collectScriptResults",
    "exceptionSource",
    "scriptExecutionResult",
    "startTime",
    "getNavigationStartTime",
    "endTime",
    "Date",
    "now",
    "urlObject",
    "urlWithoutInspect",
    "searchParams",
    "realResponseData",
    "statustext",
    "errorExposureInNotification",
    "errorExposureInDocument",
    "errorEvent",
    "Event",
    "dispatchEvent",
    "globalErrorEvent",
    "filename",
    "lineno",
    "colno",
    "column",
    "columnno",
    "reportError",
    "console",
    "timing",
    "navigationStart",
    "DataUrl",
    "as",
    "afterDataProtocol",
    "commaIndex",
    "beforeComma",
    "mediaType",
    "base64Flag",
    "endsWith",
    "afterComma",
    "data",
    "base64ToString",
    "dataToBase64",
    "atob",
    "Buffer",
    "btoa",
    "base64String",
    "getJavaScriptSourceMappingUrl",
    "javaScriptSource",
    "sourceMappingUrl",
    "replaceSourceMappingUrl",
    "javascriptSourceMappingUrlCommentRegexp",
    "regexp",
    "lastSourceMappingUrl",
    "matchSourceMappingUrl",
    "exec",
    "before",
    "after",
    "mappedAfter",
    "firstGroup",
    "startsWithWindowsDriveLetter",
    "firstChar",
    "secondChar",
    "windowsFilePathToUrl",
    "windowsFilePath",
    "replaceBackSlashesWithSlashes",
    "remapCallSite",
    "callSite",
    "urlToSourcemapConsumer",
    "resolveFile",
    "readErrorStack",
    "onFailure",
    "isNative",
    "getFileName",
    "getScriptNameOrSourceURL",
    "getLineNumber",
    "getColumnNumber",
    "remapSourcePosition",
    "originalPosition",
    "callSiteClone",
    "cloneCallSite",
    "getFunctionName",
    "isEval",
    "getEvalOrigin",
    "remapEvalOrigin",
    "originalEvalOrigin",
    "methods",
    "callSiteToFunctionCall",
    "fileLocation",
    "callSiteToFileLocation",
    "isConstructor",
    "isMethodCall",
    "isToplevel",
    "callSiteToMethodCall",
    "functionName",
    "typeName",
    "callSiteToType",
    "methodName",
    "getMethodName",
    "generateAs",
    "getTypeName",
    "sourceFile",
    "callSiteToSourceFile",
    "fileName",
    "topLevelEvalMatch",
    "Number",
    "nestedEvalMatch",
    "position",
    "sourceToUrl",
    "sourceMapConsumer",
    "originalPositionFor",
    "originalSource",
    "startsWithScheme",
    "remapStack",
    "fetchFile",
    "SourceMapConsumer",
    "memoizeByFirstArgStringValue",
    "stackTraceFileUrl",
    "fileResponse",
    "jsSourcemapUrl",
    "sourcemapUrl",
    "sourcemapString",
    "sourcemapResponse",
    "sourceMap",
    "sourcesContent",
    "firstSourceMapSourceFailure",
    "all",
    "sources",
    "sourcemapSourceUrl",
    "sourceResponse",
    "sourceString",
    "fn",
    "stringValueCache",
    "firstArgValue",
    "stringifyStack",
    "indent",
    "stackString",
    "installErrorStackRemapping",
    "errorRemappingCache",
    "errorRemapFailureCallbackMap",
    "installed",
    "previousPrepareStackTrace",
    "prepareStackTrace",
    "install",
    "uninstall",
    "failureData",
    "failureCallbackArray",
    "stackRemappingPromise",
    "memoizeFetch",
    "getErrorOriginalStackString",
    "warn",
    "remapFailureCallbackArray",
    "originalCallsites",
    "firstCall",
    "assign",
    "urlCache",
    "responsePromise",
    "installBrowserErrorStackRemapping",
    "bind",
    "specifier",
    "importer",
    "assertImportMap",
    "hasScheme",
    "urlToScheme",
    "urlString",
    "urlToPathname",
    "ressourceToPathname",
    "urlToRessource",
    "afterProtocol",
    "ressource",
    "searchSeparatorIndex",
    "urlToOrigin",
    "pathnameToParentPathname",
    "slashLastIndex",
    "lastIndexOf",
    "resolveUrl",
    "baseUrl",
    "writeBaseUrlMustBeAString",
    "writeBaseUrlMustBeAbsolute",
    "writeBaseUrlRequired",
    "baseOrigin",
    "basePathname",
    "baseDirectoryPathname",
    "unresolvedPathname",
    "importerFolders",
    "pop",
    "resolvedPathname",
    "tryUrlResolution",
    "resolveSpecifier",
    "sortImports",
    "imports",
    "mappingsSorted",
    "compareLengthOrLocaleCompare",
    "sortScopes",
    "scopes",
    "scopesSorted",
    "scopeSpecifier",
    "a",
    "b",
    "localeCompare",
    "normalizeImportMap",
    "importMap",
    "isStringOrUrl",
    "formulateBaseUrlMustBeStringOrUrl",
    "normalizeMappings",
    "normalizeScopes",
    "mappings",
    "mappingsNormalized",
    "address",
    "formulateAddressMustBeAString",
    "specifierResolved",
    "addressUrl",
    "formulateAdressResolutionFailed",
    "formulateAddressUrlRequiresTrailingSlash",
    "scopesNormalized",
    "scopeMappings",
    "scopeUrl",
    "formulateScopeResolutionFailed",
    "scope",
    "scopeValueNormalized",
    "addressURL",
    "pathnameToExtension",
    "dotLastIndex",
    "applyImportMap",
    "createBareSpecifierError",
    "onImportMapping",
    "specifierUrl",
    "specifierNormalized",
    "scopeSpecifierMatching",
    "specifierIsPrefixOf",
    "mappingFromScopes",
    "applyMappings",
    "mappingFromImports",
    "specifierCandidates",
    "specifierCandidate",
    "to",
    "afterSpecifier",
    "addressFinal",
    "specifierHref",
    "resolveImport",
    "defaultExtension",
    "applyDefaultExtension",
    "extension",
    "importerPathname",
    "importerExtension",
    "urlToExtension",
    "fakeUrl",
    "specifierExtension",
    "createImportResolverForImportmap",
    "importMapUrl",
    "importDefaultExtension",
    "onBareSpecifierError",
    "_resolveImport",
    "bareSpecifierError",
    "detailedMessage",
    "errMsg",
    "errCode",
    "msg",
    "hasSymbol",
    "hasSelf",
    "self",
    "hasDocument",
    "envGlobal",
    "baseEl",
    "lastSepIndex",
    "backslashRegEx",
    "resolveIfNotPlainOrUrl",
    "relUrl",
    "parentUrl",
    "parentProtocol",
    "segmented",
    "output",
    "segmentIndex",
    "resolveAndComposePackages",
    "packages",
    "outPackages",
    "parentMap",
    "p",
    "resolvedLhs",
    "rhs",
    "mapped",
    "resolveImportMap",
    "targetWarning",
    "resolveAndComposeImportMap",
    "outMap",
    "u",
    "resolvedScope",
    "depcache",
    "integrity",
    "getMatch",
    "matchObj",
    "sepIndex",
    "segment",
    "applyPackages",
    "id",
    "pkgName",
    "pkg",
    "resolvedOrPlain",
    "packageResolution",
    "toStringTag",
    "REGISTRY",
    "SystemJS",
    "systemJSPrototype",
    "import",
    "loader",
    "prepareImport",
    "load",
    "getOrCreateLoad",
    "C",
    "topLevelLoad",
    "createContext",
    "parentId",
    "lastRegister",
    "register",
    "deps",
    "declare",
    "getRegister",
    "_lastRegister",
    "firstParentUrl",
    "importerSetters",
    "ns",
    "create",
    "instantiatePromise",
    "instantiate",
    "registration",
    "_export",
    "h",
    "changed",
    "__esModule",
    "setter",
    "declared",
    "importId",
    "meta",
    "execute",
    "setters",
    "err",
    "er",
    "linkPromise",
    "instantiation",
    "dep",
    "depId",
    "depLoad",
    "I",
    "depLoads",
    "d",
    "L",
    "E",
    "instantiateAll",
    "parent",
    "loaded",
    "catch",
    "postOrderExec",
    "nullContext",
    "freeze",
    "seen",
    "depLoadPromises",
    "depLoadPromise",
    "doExec",
    "execPromise",
    "System",
    "importMapPromise",
    "processFirst",
    "doProcessScripts",
    "processScripts",
    "querySelectorAll",
    "script",
    "sp",
    "event",
    "createEvent",
    "initEvent",
    "fetchPromise",
    "ok",
    "extendImportMap",
    "newMapText",
    "newMapUrl",
    "newMap",
    "evt",
    "lastWindowErrorUrl",
    "lastWindowError",
    "createScript",
    "async",
    "crossOrigin",
    "lastAutoImportDeps",
    "lastAutoImportTimeout",
    "autoImportCandidates",
    "systemRegister",
    "inlineScriptCount",
    "autoUrl",
    "scripts",
    "lastScript",
    "lastAutoImportUrl",
    "setTimeout",
    "autoImportRegistration",
    "head",
    "removeChild",
    "clearTimeout",
    "shouldFetch",
    "jsContentTypeRegEx",
    "throwUnresolved",
    "systemInstantiate",
    "preloads",
    "importScripts",
    "registerRegistry",
    "define",
    "WorkerGlobalScope",
    "importMapFromParentPromise",
    "importmapMessageCallback",
    "removeEventListener",
    "ports",
    "onmessage",
    "postMessage",
    "importmap",
    "messageEvents",
    "messageCallback",
    "messageEvent",
    "WorkerConstructor",
    "Worker",
    "worker",
    "importmapChannel",
    "MessageChannel",
    "port1",
    "port2",
    "serviceWorker",
    "navigator",
    "registrationPromise",
    "installing",
    "waiting",
    "active",
    "createBrowserSystem",
    "importResolver",
    "fetchSource",
    "browserSystem",
    "extractImportTypeFromUrl",
    "importType",
    "urlWithoutImportType",
    "instantiateAsJsonModule",
    "jsonModule",
    "instantiateAsCssModule",
    "cssModule",
    "vendor",
    "responseError",
    "search",
    "delete",
    "reloadMetas",
    "__jsenv_event_source_client__",
    "cssText",
    "cssTextWithBaseUrl",
    "cssWithBaseUrl",
    "cssUrl",
    "sheet",
    "CSSStyleSheet",
    "replaceSync",
    "cssDirectoryUrl",
    "baseDirectoryUrl",
    "cssTextRelocated",
    "quotes",
    "relUrl1",
    "relUrl2",
    "absoluteUrl",
    "createBrowserClient",
    "importmapScript",
    "importmapRaw",
    "importmapFileResponse",
    "textContent",
    "getCompileProfilePromise",
    "compileServerOrigin",
    "compileServerResponse",
    "getErrorTransformer",
    "errorStackRemapping",
    "sourcemapMainFileRelativeUrl",
    "sourcemapMappingFileRelativeUrl",
    "initialize",
    "originalStack",
    "_call",
    "getBrowserClient",
    "htmlSupervisor",
    "transformer",
    "__html_supervisor__",
    "setHtmlSupervisor",
    "superviseScriptTypeModule",
    "browserClient"
  ],
  "mappings": "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"
}