{
  "version": 3,
  "file": "import_meta_hot.js",
  "sources": [
    "../src/plugins/import_meta_hot/client/import_meta_hot.js"
  ],
  "sourcesContent": [
    "/*\n * https://vitejs.dev/guide/api-hmr.html#hot-accept-deps-cb\n * https://modern-web.dev/docs/dev-server/plugins/hmr/\n */\n\nexport const urlHotMetas = {}\n\nexport const createImportMetaHot = (importMetaUrl) => {\n  const data = {}\n  const url = asUrlWithoutHmrQuery(importMetaUrl)\n\n  return {\n    data,\n    accept: (firstArg, secondArg) => {\n      if (!firstArg) {\n        addUrlMeta(url, {\n          dependencies: [url],\n          acceptCallback: () => {},\n        })\n        return\n      }\n      if (typeof firstArg === \"function\") {\n        addUrlMeta(url, {\n          dependencies: [url],\n          acceptCallback: firstArg,\n        })\n        return\n      }\n      if (typeof firstArg === \"string\") {\n        addUrlMeta(url, {\n          dependencies: [firstArg],\n          acceptCallback: secondArg,\n        })\n        return\n      }\n      if (Array.isArray(firstArg)) {\n        addUrlMeta(url, {\n          dependencies: firstArg,\n          acceptCallback: secondArg,\n        })\n        return\n      }\n      throw new Error(\n        `invalid call to import.meta.hot.accept(), received ${firstArg}`,\n      )\n    },\n    dispose: (callback) => {\n      addUrlMeta(url, {\n        disposeCallback: () => {\n          return callback(data)\n        },\n      })\n    },\n    decline: () => {\n      addUrlMeta(url, {\n        declined: true,\n      })\n    },\n    invalidate: () => {\n      addUrlMeta(url, {\n        invalidated: true,\n      })\n    },\n  }\n}\n\nconst addUrlMeta = (url, meta) => {\n  urlHotMetas[url] = {\n    ...urlHotMetas[url],\n    ...meta,\n  }\n}\n\nconst asUrlWithoutHmrQuery = (url) => {\n  const urlObject = new URL(url)\n  if (urlObject.searchParams.has(\"hmr\")) {\n    urlObject.searchParams.delete(\"hmr\")\n    urlObject.searchParams.delete(\"v\")\n    return urlObject.href\n  }\n  return url\n}\n"
  ],
  "names": [
    "urlHotMetas",
    "createImportMetaHot",
    "importMetaUrl",
    "data",
    "url",
    "asUrlWithoutHmrQuery",
    "accept",
    "firstArg",
    "secondArg",
    "addUrlMeta",
    "dependencies",
    "acceptCallback",
    "Array",
    "isArray",
    "Error",
    "dispose",
    "callback",
    "disposeCallback",
    "decline",
    "declined",
    "invalidate",
    "invalidated",
    "meta",
    "urlObject",
    "URL",
    "searchParams",
    "has",
    "delete",
    "href"
  ],
  "mappings": "AAAA;AACA;AACA;AACA;AAEO,MAAMA,WAAW,GAAG,GAApB;AAEMC,MAAAA,mBAAmB,GAAIC,aAAD,IAAmB;EACpD,MAAMC,IAAI,GAAG,EAAb,CAAA;AACA,EAAA,MAAMC,GAAG,GAAGC,oBAAoB,CAACH,aAAD,CAAhC,CAAA;EAEA,OAAO;IACLC,IADK;AAELG,IAAAA,MAAM,EAAE,CAACC,QAAD,EAAWC,SAAX,KAAyB;MAC/B,IAAI,CAACD,QAAL,EAAe;QACbE,UAAU,CAACL,GAAD,EAAM;UACdM,YAAY,EAAE,CAACN,GAAD,CADA;UAEdO,cAAc,EAAE,MAAM,EAAE;AAFV,SAAN,CAAV,CAAA;AAIA,QAAA,OAAA;AACD,OAAA;;AACD,MAAA,IAAI,OAAOJ,QAAP,KAAoB,UAAxB,EAAoC;QAClCE,UAAU,CAACL,GAAD,EAAM;UACdM,YAAY,EAAE,CAACN,GAAD,CADA;AAEdO,UAAAA,cAAc,EAAEJ,QAAAA;AAFF,SAAN,CAAV,CAAA;AAIA,QAAA,OAAA;AACD,OAAA;;AACD,MAAA,IAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;QAChCE,UAAU,CAACL,GAAD,EAAM;UACdM,YAAY,EAAE,CAACH,QAAD,CADA;AAEdI,UAAAA,cAAc,EAAEH,SAAAA;AAFF,SAAN,CAAV,CAAA;AAIA,QAAA,OAAA;AACD,OAAA;;AACD,MAAA,IAAII,KAAK,CAACC,OAAN,CAAcN,QAAd,CAAJ,EAA6B;QAC3BE,UAAU,CAACL,GAAD,EAAM;AACdM,UAAAA,YAAY,EAAEH,QADA;AAEdI,UAAAA,cAAc,EAAEH,SAAAA;AAFF,SAAN,CAAV,CAAA;AAIA,QAAA,OAAA;AACD,OAAA;;AACD,MAAA,MAAM,IAAIM,KAAJ,CACkDP,qDAAAA,CAAAA,MAAAA,CAAAA,QADlD,CAAN,CAAA,CAAA;KA/BG;IAmCLQ,OAAO,EAAGC,QAAD,IAAc;MACrBP,UAAU,CAACL,GAAD,EAAM;AACda,QAAAA,eAAe,EAAE,MAAM;UACrB,OAAOD,QAAQ,CAACb,IAAD,CAAf,CAAA;AACD,SAAA;AAHa,OAAN,CAAV,CAAA;KApCG;AA0CLe,IAAAA,OAAO,EAAE,MAAM;MACbT,UAAU,CAACL,GAAD,EAAM;AACde,QAAAA,QAAQ,EAAE,IAAA;AADI,OAAN,CAAV,CAAA;KA3CG;AA+CLC,IAAAA,UAAU,EAAE,MAAM;MAChBX,UAAU,CAACL,GAAD,EAAM;AACdiB,QAAAA,WAAW,EAAE,IAAA;AADC,OAAN,CAAV,CAAA;AAGD,KAAA;GAnDH,CAAA;AAqDD,EAzDM;;AA2DP,MAAMZ,UAAU,GAAG,CAACL,GAAD,EAAMkB,IAAN,KAAe;EAChCtB,WAAW,CAACI,GAAD,CAAX,GAAmB,EACjB,GAAGJ,WAAW,CAACI,GAAD,CADG;IAEjB,GAAGkB,IAAAA;GAFL,CAAA;AAID,CALD,CAAA;;AAOA,MAAMjB,oBAAoB,GAAID,GAAD,IAAS;AACpC,EAAA,MAAMmB,SAAS,GAAG,IAAIC,GAAJ,CAAQpB,GAAR,CAAlB,CAAA;;EACA,IAAImB,SAAS,CAACE,YAAV,CAAuBC,GAAvB,CAA2B,KAA3B,CAAJ,EAAuC;AACrCH,IAAAA,SAAS,CAACE,YAAV,CAAuBE,MAAvB,CAA8B,KAA9B,CAAA,CAAA;AACAJ,IAAAA,SAAS,CAACE,YAAV,CAAuBE,MAAvB,CAA8B,GAA9B,CAAA,CAAA;IACA,OAAOJ,SAAS,CAACK,IAAjB,CAAA;AACD,GAAA;;AACD,EAAA,OAAOxB,GAAP,CAAA;AACD,CARD;;;;"
}