{
  "version": 3,
  "file": "jsenv-browser-system.js",
  "sources": [
    "../helpers/babel/defineProperty/defineProperty.js",
    "../helpers/babel/objectSpread2/objectSpread2.js",
    "../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../helpers/babel/arrayWithoutHoles/arrayWithoutHoles.js",
    "../helpers/babel/iterableToArray/iterableToArray.js",
    "../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../helpers/babel/nonIterableSpread/nonIterableSpread.js",
    "../helpers/babel/toConsumableArray/toConsumableArray.js",
    "../helpers/babel/typeof/typeof.js",
    "../node_modules/@jsenv/import-map/src/internal/assertImportMap.js",
    "../node_modules/@jsenv/import-map/src/internal/hasScheme.js",
    "../node_modules/@jsenv/import-map/src/internal/urlToScheme.js",
    "../node_modules/@jsenv/import-map/src/internal/urlToPathname.js",
    "../node_modules/@jsenv/import-map/src/internal/urlToOrigin.js",
    "../node_modules/@jsenv/import-map/src/internal/pathnameToParentPathname.js",
    "../node_modules/@jsenv/import-map/src/resolveUrl.js",
    "../node_modules/@jsenv/import-map/src/internal/tryUrlResolution.js",
    "../node_modules/@jsenv/import-map/src/resolveSpecifier.js",
    "../node_modules/@jsenv/import-map/src/sortImportMap.js",
    "../node_modules/@jsenv/import-map/src/normalizeImportMap.js",
    "../node_modules/@jsenv/uneval/src/internal/isComposite.js",
    "../node_modules/@jsenv/uneval/src/internal/global-value-path.js",
    "../node_modules/@jsenv/uneval/src/internal/decompose.js",
    "../node_modules/@jsenv/uneval/src/internal/sortRecipe.js",
    "../node_modules/@jsenv/uneval/src/internal/escapeString.js",
    "../node_modules/@jsenv/uneval/src/uneval.js",
    "../src/internal/memoize.js",
    "../node_modules/@jsenv/import-map/src/internal/pathnameToExtension.js",
    "../node_modules/@jsenv/import-map/src/applyImportMap.js",
    "../node_modules/@jsenv/import-map/src/resolveImport.js",
    "../src/internal/runtime/s.js",
    "../src/internal/runtime/valueInstall.js",
    "../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../src/internal/runtime/module-registration.js",
    "../src/internal/runtime/createBrowserRuntime/evalSource.js",
    "../src/internal/runtime/createBrowserRuntime/createBrowserSystem.js",
    "../src/internal/runtime/createBrowserRuntime/displayErrorInDocument.js",
    "../src/internal/runtime/createBrowserRuntime/displayErrorNotification.js",
    "../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../node_modules/@jsenv/cancellation/src/createCancellationToken.js",
    "../src/internal/fetchUsingXHR.js",
    "../src/internal/fetch-browser.js",
    "../src/internal/runtime/createBrowserRuntime/createBrowserRuntime.js",
    "../src/internal/error-stack-remapping/stackToString.js",
    "../src/internal/dataUrl.utils.js",
    "../src/internal/sourceMappingURLUtils.js",
    "../src/internal/filePathUtils.js",
    "../src/internal/error-stack-remapping/remapCallSite.js",
    "../src/internal/error-stack-remapping/getOriginalCallsites.js",
    "../src/internal/error-stack-remapping/installErrorStackRemapping.js",
    "../src/internal/error-stack-remapping/installBrowserErrorStackRemapping.js",
    "../src/internal/fetchAndEvalUsingFetch.js",
    "../src/internal/browser-launcher/jsenv-browser-system.js"
  ],
  "sourcesContent": [
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nexport default function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    // eslint-disable-next-line prefer-rest-params\n    var source = arguments[i] === null ? {} : arguments[i]\n    if (i % 2) {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n\n// This function is different to \"Reflect.ownKeys\". The enumerableOnly\n// filters on symbol properties only. Returned string properties are always\n// enumerable. It is good to use in objectSpread.\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly)\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    // eslint-disable-next-line prefer-spread\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n",
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "import arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\n// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr)\n}\n",
    "// eslint-disable-next-line consistent-return\nexport default (iter) => {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter)\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithoutHoles from \"../arrayWithoutHoles/arrayWithoutHoles.js\"\nimport iterableToArray from \"../iterableToArray/iterableToArray.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableSpread from \"../nonIterableSpread/nonIterableSpread.js\"\n\nexport default (arr) =>\n  arrayWithoutHoles(arr) ||\n  iterableToArray(arr) ||\n  unsupportedIterableToArray(arr) ||\n  nonIterableSpread()\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const assertImportMap = (value) => {\n  if (value === null) {\n    throw new TypeError(`an importMap must be an object, got null`)\n  }\n\n  const type = typeof value\n  if (type !== \"object\") {\n    throw new TypeError(`an importMap must be an object, received ${value}`)\n  }\n\n  if (Array.isArray(value)) {\n    throw new TypeError(`an importMap must be an object, received array ${value}`)\n  }\n}\n",
    "export const hasScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n",
    "export const urlToScheme = (urlString) => {\n  const colonIndex = urlString.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return urlString.slice(0, colonIndex)\n}\n",
    "import { urlToScheme } from \"./urlToScheme.js\"\n\nexport const urlToPathname = (urlString) => {\n  return ressourceToPathname(urlToRessource(urlString))\n}\n\nconst urlToRessource = (urlString) => {\n  const scheme = urlToScheme(urlString)\n\n  if (scheme === \"file\") {\n    return urlString.slice(\"file://\".length)\n  }\n\n  if (scheme === \"https\" || scheme === \"http\") {\n    // remove origin\n    const afterProtocol = urlString.slice(scheme.length + \"://\".length)\n    const pathnameSlashIndex = afterProtocol.indexOf(\"/\", \"://\".length)\n    return afterProtocol.slice(pathnameSlashIndex)\n  }\n\n  return urlString.slice(scheme.length + 1)\n}\n\nconst ressourceToPathname = (ressource) => {\n  const searchSeparatorIndex = ressource.indexOf(\"?\")\n  return searchSeparatorIndex === -1 ? ressource : ressource.slice(0, searchSeparatorIndex)\n}\n",
    "import { urlToScheme } from \"./urlToScheme.js\"\n\nexport const urlToOrigin = (urlString) => {\n  const scheme = urlToScheme(urlString)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = urlString.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return urlString\n    return urlString.slice(0, pathnameSlashIndex)\n  }\n\n  return urlString.slice(0, scheme.length + 1)\n}\n",
    "export const pathnameToParentPathname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return \"/\"\n  }\n\n  return pathname.slice(0, slashLastIndex + 1)\n}\n",
    "// could be useful: https://url.spec.whatwg.org/#url-miscellaneous\n\nimport { urlToScheme } from \"./internal/urlToScheme.js\"\nimport { urlToPathname } from \"./internal/urlToPathname.js\"\nimport { urlToOrigin } from \"./internal/urlToOrigin.js\"\nimport { pathnameToParentPathname } from \"./internal/pathnameToParentPathname.js\"\nimport { hasScheme } from \"./internal/hasScheme.js\"\n\nexport const resolveUrl = (specifier, baseUrl) => {\n  if (baseUrl) {\n    if (typeof baseUrl !== \"string\") {\n      throw new TypeError(writeBaseUrlMustBeAString({ baseUrl, specifier }))\n    }\n    if (!hasScheme(baseUrl)) {\n      throw new Error(writeBaseUrlMustBeAbsolute({ baseUrl, specifier }))\n    }\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  if (!baseUrl) {\n    throw new Error(writeBaseUrlRequired({ baseUrl, specifier }))\n  }\n\n  // scheme relative\n  if (specifier.slice(0, 2) === \"//\") {\n    return `${urlToScheme(baseUrl)}:${specifier}`\n  }\n\n  // origin relative\n  if (specifier[0] === \"/\") {\n    return `${urlToOrigin(baseUrl)}${specifier}`\n  }\n\n  const baseOrigin = urlToOrigin(baseUrl)\n  const basePathname = urlToPathname(baseUrl)\n\n  if (specifier === \".\") {\n    const baseDirectoryPathname = pathnameToParentPathname(basePathname)\n    return `${baseOrigin}${baseDirectoryPathname}`\n  }\n\n  // pathname relative inside\n  if (specifier.slice(0, 2) === \"./\") {\n    const baseDirectoryPathname = pathnameToParentPathname(basePathname)\n    return `${baseOrigin}${baseDirectoryPathname}${specifier.slice(2)}`\n  }\n\n  // pathname relative outside\n  if (specifier.slice(0, 3) === \"../\") {\n    let unresolvedPathname = specifier\n    const importerFolders = basePathname.split(\"/\")\n    importerFolders.pop()\n\n    while (unresolvedPathname.slice(0, 3) === \"../\") {\n      unresolvedPathname = unresolvedPathname.slice(3)\n      // when there is no folder left to resolved\n      // we just ignore '../'\n      if (importerFolders.length) {\n        importerFolders.pop()\n      }\n    }\n\n    const resolvedPathname = `${importerFolders.join(\"/\")}/${unresolvedPathname}`\n    return `${baseOrigin}${resolvedPathname}`\n  }\n\n  // bare\n  if (basePathname === \"\") {\n    return `${baseOrigin}/${specifier}`\n  }\n  if (basePathname[basePathname.length] === \"/\") {\n    return `${baseOrigin}${basePathname}${specifier}`\n  }\n  return `${baseOrigin}${pathnameToParentPathname(basePathname)}${specifier}`\n}\n\nconst writeBaseUrlMustBeAString = ({ baseUrl, specifier }) => `baseUrl must be a string.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlMustBeAbsolute = ({ baseUrl, specifier }) => `baseUrl must be absolute.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlRequired = ({\n  baseUrl,\n  specifier,\n}) => `baseUrl required to resolve relative specifier.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n",
    "import { hasScheme } from \"./hasScheme.js\"\nimport { resolveUrl } from \"../resolveUrl.js\"\n\nexport const tryUrlResolution = (string, url) => {\n  const result = resolveUrl(string, url)\n  return hasScheme(result) ? result : null\n}\n",
    "import { hasScheme } from \"./internal/hasScheme.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\n\nexport const resolveSpecifier = (specifier, importer) => {\n  if (\n    specifier === \".\" ||\n    specifier[0] === \"/\" ||\n    specifier.startsWith(\"./\") ||\n    specifier.startsWith(\"../\")\n  ) {\n    return resolveUrl(specifier, importer)\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  return null\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\n\nexport const sortImportMap = (importMap) => {\n  assertImportMap(importMap)\n\n  const { imports, scopes } = importMap\n\n  return {\n    ...(imports ? { imports: sortImports(imports) } : {}),\n    ...(scopes ? { scopes: sortScopes(scopes) } : {}),\n  }\n}\n\nexport const sortImports = (imports) => {\n  const importsSorted = {}\n  Object.keys(imports)\n    .sort(compareLengthOrLocaleCompare)\n    .forEach((name) => {\n      importsSorted[name] = imports[name]\n    })\n  return importsSorted\n}\n\nexport const sortScopes = (scopes) => {\n  const scopesSorted = {}\n  Object.keys(scopes)\n    .sort(compareLengthOrLocaleCompare)\n    .forEach((scopeName) => {\n      scopesSorted[scopeName] = sortImports(scopes[scopeName])\n    })\n  return scopesSorted\n}\n\nconst compareLengthOrLocaleCompare = (a, b) => {\n  return b.length - a.length || a.localeCompare(b)\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\nimport { tryUrlResolution } from \"./internal/tryUrlResolution.js\"\nimport { resolveSpecifier } from \"./resolveSpecifier.js\"\nimport { sortImports, sortScopes } from \"./sortImportMap.js\"\n\nexport const normalizeImportMap = (importMap, baseUrl) => {\n  assertImportMap(importMap)\n  if (typeof baseUrl !== \"string\") {\n    throw new TypeError(formulateBaseUrlMustBeAString({ baseUrl }))\n  }\n\n  const { imports, scopes } = importMap\n\n  return {\n    imports: imports ? normalizeImports(imports, baseUrl) : undefined,\n    scopes: scopes ? normalizeScopes(scopes, baseUrl) : undefined,\n  }\n}\n\nconst normalizeImports = (imports, baseUrl) => {\n  const importsNormalized = {}\n  Object.keys(imports).forEach((specifier) => {\n    const address = imports[specifier]\n\n    if (typeof address !== \"string\") {\n      console.warn(\n        formulateAddressMustBeAString({\n          address,\n          specifier,\n        }),\n      )\n      return\n    }\n\n    const specifierResolved = resolveSpecifier(specifier, baseUrl) || specifier\n\n    const addressUrl = tryUrlResolution(address, baseUrl)\n    if (addressUrl === null) {\n      console.warn(\n        formulateAdressResolutionFailed({\n          address,\n          baseUrl,\n          specifier,\n        }),\n      )\n      return\n    }\n\n    if (specifier.endsWith(\"/\") && !addressUrl.endsWith(\"/\")) {\n      console.warn(\n        formulateAddressUrlRequiresTrailingSlash({\n          addressUrl,\n          address,\n          specifier,\n        }),\n      )\n      return\n    }\n    importsNormalized[specifierResolved] = addressUrl\n  })\n  return sortImports(importsNormalized)\n}\n\nconst normalizeScopes = (scopes, baseUrl) => {\n  const scopesNormalized = {}\n  Object.keys(scopes).forEach((scope) => {\n    const scopeValue = scopes[scope]\n    const scopeUrl = tryUrlResolution(scope, baseUrl)\n    if (scopeUrl === null) {\n      console.warn(\n        formulateScopeResolutionFailed({\n          scope,\n          baseUrl,\n        }),\n      )\n      return\n    }\n    const scopeValueNormalized = normalizeImports(scopeValue, baseUrl)\n    scopesNormalized[scopeUrl] = scopeValueNormalized\n  })\n  return sortScopes(scopesNormalized)\n}\n\nconst formulateBaseUrlMustBeAString = ({ baseUrl }) => `baseUrl must be a string.\n--- base url ---\n${baseUrl}`\n\nconst formulateAddressMustBeAString = ({ specifier, address }) => `Address must be a string.\n--- address ---\n${address}\n--- specifier ---\n${specifier}`\n\nconst formulateAdressResolutionFailed = ({\n  address,\n  baseUrl,\n  specifier,\n}) => `Address url resolution failed.\n--- address ---\n${address}\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst formulateAddressUrlRequiresTrailingSlash = ({\n  addressURL,\n  address,\n  specifier,\n}) => `Address must end with /.\n--- address url ---\n${addressURL}\n--- address ---\n${address}\n--- specifier ---\n${specifier}`\n\nconst formulateScopeResolutionFailed = ({ scope, baseUrl }) => `Scope url resolution failed.\n--- scope ---\n${scope}\n--- base url ---\n${baseUrl}`\n",
    "// https://developer.mozilla.org/en-US/docs/Glossary/Primitive\n\nexport const isComposite = (value) => {\n  if (value === null) return false\n  const type = typeof value\n  if (type === \"object\") return true\n  if (type === \"function\") return true\n  return false\n}\n",
    "import { isComposite } from \"./isComposite.js\"\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\nconst compositeWellKnownMap = new WeakMap()\nconst primitiveWellKnownMap = new Map()\n\nexport const getCompositeGlobalPath = (value) => compositeWellKnownMap.get(value)\n\nexport const getPrimitiveGlobalPath = (value) => primitiveWellKnownMap.get(value)\n\nconst visitGlobalObject = (value) => {\n  const visitValue = (value, path) => {\n    if (isComposite(value)) {\n      if (compositeWellKnownMap.has(value)) return // prevent infinite recursion\n      compositeWellKnownMap.set(value, path)\n\n      const visitProperty = (property) => {\n        let descriptor\n        try {\n          descriptor = Object.getOwnPropertyDescriptor(value, property)\n        } catch (e) {\n          if (e.name === \"SecurityError\") {\n            return\n          }\n          throw e\n        }\n\n        if (!descriptor) {\n          // it's apparently possible to have getOwnPropertyNames returning\n          // a property that later returns a null descriptor\n          // for instance window.showModalDialog in webkit 13.0\n          return\n        }\n\n        // do not trigger getter/setter\n        if (\"value\" in descriptor) {\n          const propertyValue = descriptor.value\n          visitValue(propertyValue, [...path, property])\n        }\n      }\n\n      Object.getOwnPropertyNames(value).forEach((name) => visitProperty(name))\n      Object.getOwnPropertySymbols(value).forEach((symbol) => visitProperty(symbol))\n    }\n\n    primitiveWellKnownMap.set(value, path)\n    return\n  }\n\n  visitValue(value, [])\n}\n\nif (typeof window === \"object\") visitGlobalObject(window)\n\nif (typeof global === \"object\") visitGlobalObject(global)\n",
    "/**\n * transforms a javascript value into an object describing it.\n *\n */\n\nimport { isComposite } from \"./isComposite.js\"\nimport { getCompositeGlobalPath, getPrimitiveGlobalPath } from \"./global-value-path.js\"\n\nexport const decompose = (mainValue, { functionAllowed, prototypeStrict }) => {\n  const valueMap = {}\n  const recipeArray = []\n\n  const valueToIdentifier = (value, path = []) => {\n    if (!isComposite(value)) {\n      const existingIdentifier = identifierForPrimitive(value)\n      if (existingIdentifier !== undefined) return existingIdentifier\n      const identifier = identifierForNewValue(value)\n      recipeArray[identifier] = primitiveToRecipe(value)\n      return identifier\n    }\n\n    if (typeof Promise === \"function\" && value instanceof Promise)\n      throw new Error(createPromiseAreNotSupportedMessage({ path }))\n    if (typeof WeakSet === \"function\" && value instanceof WeakSet)\n      throw new Error(createWeakSetAreNotSupportedMessage({ path }))\n    if (typeof WeakMap === \"function\" && value instanceof WeakMap)\n      throw new Error(createWeakMapAreNotSupportedMessage({ path }))\n    if (typeof value === \"function\" && !functionAllowed)\n      throw new Error(createForbiddenFunctionMessage({ path }))\n\n    const existingIdentifier = identifierForComposite(value)\n    if (existingIdentifier !== undefined) return existingIdentifier\n    const identifier = identifierForNewValue(value)\n\n    const compositeGlobalPath = getCompositeGlobalPath(value)\n    if (compositeGlobalPath) {\n      recipeArray[identifier] = createGlobalReferenceRecipe(compositeGlobalPath)\n      return identifier\n    }\n\n    const propertyDescriptionArray = []\n    Object.getOwnPropertyNames(value).forEach((propertyName) => {\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(value, propertyName)\n      const propertyNameIdentifier = valueToIdentifier(propertyName, [...path, propertyName])\n      const propertyDescription = computePropertyDescription(propertyDescriptor, propertyName, path)\n      propertyDescriptionArray.push({ propertyNameIdentifier, propertyDescription })\n    })\n\n    const symbolDescriptionArray = []\n    Object.getOwnPropertySymbols(value).forEach((symbol) => {\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(value, symbol)\n      const symbolIdentifier = valueToIdentifier(symbol, [...path, `[${symbol.toString()}]`])\n      const propertyDescription = computePropertyDescription(propertyDescriptor, symbol, path)\n      symbolDescriptionArray.push({ symbolIdentifier, propertyDescription })\n    })\n\n    const methodDescriptionArray = computeMethodDescriptionArray(value, path)\n\n    const extensible = Object.isExtensible(value)\n\n    recipeArray[identifier] = createCompositeRecipe({\n      propertyDescriptionArray,\n      symbolDescriptionArray,\n      methodDescriptionArray,\n      extensible,\n    })\n    return identifier\n  }\n\n  const computePropertyDescription = (propertyDescriptor, propertyNameOrSymbol, path) => {\n    if (propertyDescriptor.set && !functionAllowed)\n      throw new Error(createForbiddenPropertySetterMessage({ path, propertyNameOrSymbol }))\n    if (propertyDescriptor.get && !functionAllowed)\n      throw new Error(createForbiddenPropertyGetterMessage({ path, propertyNameOrSymbol }))\n\n    return {\n      configurable: propertyDescriptor.configurable,\n      writable: propertyDescriptor.writable,\n      enumerable: propertyDescriptor.enumerable,\n      getIdentifier:\n        \"get\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.get, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:get]]\",\n            ])\n          : undefined,\n      setIdentifier:\n        \"set\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.set, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:set]]\",\n            ])\n          : undefined,\n      valueIdentifier:\n        \"value\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.value, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:value]]\",\n            ])\n          : undefined,\n    }\n  }\n\n  const computeMethodDescriptionArray = (value, path) => {\n    const methodDescriptionArray = []\n\n    if (typeof Set === \"function\" && value instanceof Set) {\n      const callArray = []\n      value.forEach((entryValue, index) => {\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          `[[SetEntryValue]]`,\n          index,\n        ])\n        callArray.push([entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"add\"), callArray })\n    }\n\n    if (typeof Map === \"function\" && value instanceof Map) {\n      const callArray = []\n      value.forEach((entryValue, entryKey) => {\n        const entryKeyIdentifier = valueToIdentifier(entryKey, [\n          ...path,\n          \"[[MapEntryKey]]\",\n          entryKey,\n        ])\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          \"[[MapEntryValue]]\",\n          entryValue,\n        ])\n        callArray.push([entryKeyIdentifier, entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"set\"), callArray })\n    }\n\n    return methodDescriptionArray\n  }\n\n  const identifierForPrimitive = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      if (Object.is(value, existingValue)) return true\n      return value === existingValue\n    })\n  }\n\n  const identifierForComposite = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      return value === existingValue\n    })\n  }\n\n  const identifierForNewValue = (value) => {\n    const identifier = nextIdentifier()\n    valueMap[identifier] = value\n    return identifier\n  }\n\n  let currentIdentifier = -1\n  const nextIdentifier = () => {\n    const identifier = String(parseInt(currentIdentifier) + 1)\n    currentIdentifier = identifier\n    return identifier\n  }\n\n  const mainIdentifier = valueToIdentifier(mainValue)\n\n  // prototype, important to keep after the whole structure was visited\n  // so that we discover if any prototype is part of the value\n  const prototypeValueToIdentifier = (prototypeValue) => {\n    // prototype is null\n    if (prototypeValue === null) return valueToIdentifier(prototypeValue)\n\n    // prototype found somewhere already\n    const prototypeExistingIdentifier = identifierForComposite(prototypeValue)\n    if (prototypeExistingIdentifier !== undefined) return prototypeExistingIdentifier\n\n    // mark prototype as visited\n    const prototypeIdentifier = identifierForNewValue(prototypeValue)\n\n    // prototype is a global reference ?\n    const prototypeGlobalPath = getCompositeGlobalPath(prototypeValue)\n    if (prototypeGlobalPath) {\n      recipeArray[prototypeIdentifier] = createGlobalReferenceRecipe(prototypeGlobalPath)\n      return prototypeIdentifier\n    }\n\n    // otherwise prototype is unknown\n    if (prototypeStrict) {\n      throw new Error(createUnknownPrototypeMessage({ prototypeValue }))\n    }\n\n    return prototypeValueToIdentifier(Object.getPrototypeOf(prototypeValue), true)\n  }\n  const identifierForValueOf = (value, path = []) => {\n    if (value instanceof Array) return valueToIdentifier(value.length, [...path, \"length\"])\n\n    if (\"valueOf\" in value === false) return undefined\n\n    if (typeof value.valueOf !== \"function\") return undefined\n\n    const valueOfReturnValue = value.valueOf()\n    if (!isComposite(valueOfReturnValue))\n      return valueToIdentifier(valueOfReturnValue, [...path, \"valueOf()\"])\n\n    if (valueOfReturnValue === value) return undefined\n\n    throw new Error(createUnexpectedValueOfReturnValueMessage())\n  }\n\n  recipeArray.slice().forEach((recipe, index) => {\n    if (recipe.type === \"composite\") {\n      const value = valueMap[index]\n\n      if (typeof value === \"function\") {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      if (value instanceof RegExp) {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      // valueOf, mandatory to uneval new Date(10) for instance.\n      recipe.valueOfIdentifier = identifierForValueOf(value)\n      const prototypeValue = Object.getPrototypeOf(value)\n      recipe.prototypeIdentifier = prototypeValueToIdentifier(prototypeValue, true)\n    }\n  })\n\n  return {\n    recipeArray,\n    mainIdentifier,\n    valueMap,\n  }\n}\n\nconst primitiveToRecipe = (value) => {\n  if (typeof value === \"symbol\") return symbolToRecipe(value)\n\n  return createPimitiveRecipe(value)\n}\n\nconst symbolToRecipe = (symbol) => {\n  const globalSymbolKey = Symbol.keyFor(symbol)\n  if (globalSymbolKey !== undefined) return createGlobalSymbolRecipe(globalSymbolKey)\n\n  const symbolGlobalPath = getPrimitiveGlobalPath(symbol)\n  if (!symbolGlobalPath) throw new Error(createUnknownSymbolMessage({ symbol }))\n\n  return createGlobalReferenceRecipe(symbolGlobalPath)\n}\n\nconst createPimitiveRecipe = (value) => {\n  return {\n    type: \"primitive\",\n    value,\n  }\n}\n\nconst createGlobalReferenceRecipe = (path) => {\n  const recipe = {\n    type: \"global-reference\",\n    path,\n  }\n  return recipe\n}\n\nconst createGlobalSymbolRecipe = (key) => {\n  return {\n    type: \"global-symbol\",\n    key,\n  }\n}\n\nconst createCompositeRecipe = ({\n  prototypeIdentifier,\n  valueOfIdentifier,\n  propertyDescriptionArray,\n  symbolDescriptionArray,\n  methodDescriptionArray,\n  extensible,\n}) => {\n  return {\n    type: \"composite\",\n    prototypeIdentifier,\n    valueOfIdentifier,\n    propertyDescriptionArray,\n    symbolDescriptionArray,\n    methodDescriptionArray,\n    extensible,\n  }\n}\n\nconst createPromiseAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `promise are not supported.`\n\n  return `promise are not supported.\npromise found at: ${path.join(\"\")}`\n}\n\nconst createWeakSetAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `weakSet are not supported.`\n\n  return `weakSet are not supported.\nweakSet found at: ${path.join(\"\")}`\n}\n\nconst createWeakMapAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `weakMap are not supported.`\n\n  return `weakMap are not supported.\nweakMap found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenFunctionMessage = ({ path }) => {\n  if (path.length === 0) return `function are not allowed.`\n\n  return `function are not allowed.\nfunction found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenPropertyGetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property getter are not allowed.\ngetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createForbiddenPropertySetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property setter are not allowed.\nsetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createUnexpectedValueOfReturnValueMessage = () =>\n  `valueOf() must return a primitive of the object itself.`\n\nconst createUnknownSymbolMessage = ({\n  symbol,\n}) => `symbol must be global, like Symbol.iterator, or created using Symbol.for().\nsymbol: ${symbol.toString()}`\n\nconst createUnknownPrototypeMessage = ({ prototypeValue }) =>\n  `prototype must be global, like Object.prototype, or somewhere in the value.\nprototype constructor name: ${prototypeValue.constructor.name}`\n",
    "// be carefull because this function is mutating recipe objects inside the recipeArray.\n// this is not an issue because each recipe object is not accessible from the outside\n// when used internally by uneval\nexport const sortRecipe = (recipeArray) => {\n  const findInRecipePrototypeChain = (recipe, callback) => {\n    let currentRecipe = recipe\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      if (currentRecipe.type !== \"composite\") break\n      const prototypeIdentifier = currentRecipe.prototypeIdentifier\n      if (prototypeIdentifier === undefined) break\n      currentRecipe = recipeArray[prototypeIdentifier]\n\n      if (callback(currentRecipe, prototypeIdentifier)) return prototypeIdentifier\n    }\n    return undefined\n  }\n\n  const recipeArrayOrdered = recipeArray.slice()\n  recipeArrayOrdered.sort((leftRecipe, rightRecipe) => {\n    const leftType = leftRecipe.type\n    const rightType = rightRecipe.type\n\n    if (leftType === \"composite\" && rightType === \"composite\") {\n      const rightRecipeIsInLeftRecipePrototypeChain = findInRecipePrototypeChain(\n        leftRecipe,\n        (recipeCandidate) => recipeCandidate === rightRecipe,\n      )\n      // if left recipe requires right recipe, left must be after right\n      if (rightRecipeIsInLeftRecipePrototypeChain) return 1\n\n      const leftRecipeIsInRightRecipePrototypeChain = findInRecipePrototypeChain(\n        rightRecipe,\n        (recipeCandidate) => recipeCandidate === leftRecipe,\n      )\n      // if right recipe requires left recipe, right must be after left\n      if (leftRecipeIsInRightRecipePrototypeChain) return -1\n    }\n\n    if (leftType !== rightType) {\n      // if left is a composite, left must be after right\n      if (leftType === \"composite\") return 1\n      // if right is a composite, right must be after left\n      if (rightType === \"composite\") return -1\n    }\n\n    const leftIndex = recipeArray.indexOf(leftRecipe)\n    const rightIndex = recipeArray.indexOf(rightRecipe)\n    // left was before right, don't change that\n    if (leftIndex < rightIndex) return -1\n    // right was after left, don't change that\n    return 1\n  })\n\n  return recipeArrayOrdered\n}\n",
    "// https://github.com/joliss/js-string-escape/blob/master/index.js\n// http://javascript.crockford.com/remedial.html\nexport const escapeString = (value) => {\n  const string = String(value)\n  let i = 0\n  const j = string.length\n  var escapedString = \"\"\n  while (i < j) {\n    const char = string[i]\n    let escapedChar\n    if (char === '\"' || char === \"'\" || char === \"\\\\\") {\n      escapedChar = `\\\\${char}`\n    } else if (char === \"\\n\") {\n      escapedChar = \"\\\\n\"\n    } else if (char === \"\\r\") {\n      escapedChar = \"\\\\r\"\n    } else if (char === \"\\u2028\") {\n      escapedChar = \"\\\\u2028\"\n    } else if (char === \"\\u2029\") {\n      escapedChar = \"\\\\u2029\"\n    } else {\n      escapedChar = char\n    }\n    escapedString += escapedChar\n    i++\n  }\n  return escapedString\n}\n",
    "import { decompose } from \"./internal/decompose.js\"\nimport { sortRecipe } from \"./internal/sortRecipe.js\"\nimport { escapeString } from \"./internal/escapeString.js\"\n\nexport const uneval = (value, { functionAllowed = false, prototypeStrict = false } = {}) => {\n  const { recipeArray, mainIdentifier, valueMap } = decompose(value, {\n    functionAllowed,\n    prototypeStrict,\n  })\n  const recipeArraySorted = sortRecipe(recipeArray)\n\n  let source = `(function () {\nvar globalObject\ntry {\n  globalObject = Function('return this')() || (42, eval)('this');\n} catch(e) {\n  globalObject = window;\n}\n\nfunction safeDefineProperty(object, propertyNameOrSymbol, descriptor) {\n  var currentDescriptor = Object.getOwnPropertyDescriptor(object, propertyNameOrSymbol);\n  if (currentDescriptor && !currentDescriptor.configurable) return\n  Object.defineProperty(object, propertyNameOrSymbol, descriptor)\n};\n`\n\n  const variableNameMap = {}\n  recipeArray.forEach((recipe, index) => {\n    const indexSorted = recipeArraySorted.indexOf(recipe)\n    variableNameMap[index] = `_${indexSorted}`\n  })\n\n  const identifierToVariableName = (identifier) => variableNameMap[identifier]\n\n  const recipeToSetupSource = (recipe) => {\n    if (recipe.type === \"primitive\") return primitiveRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-symbol\") return globalSymbolRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-reference\") return globalReferenceRecipeToSetupSource(recipe)\n    return compositeRecipeToSetupSource(recipe)\n  }\n\n  const primitiveRecipeToSetupSource = ({ value }) => {\n    if (typeof value === \"string\") return `\"${escapeString(value)}\";`\n    if (Object.is(value, -0)) return \"-0;\"\n    return `${String(value)};`\n  }\n\n  const globalSymbolRecipeToSetupSource = (recipe) => {\n    return `Symbol.for(\"${escapeString(recipe.key)}\");`\n  }\n\n  const globalReferenceRecipeToSetupSource = (recipe) => {\n    const pathSource = recipe.path.map((part) => `[\"${escapeString(part)}\"]`).join(\"\")\n    return `globalObject${pathSource};`\n  }\n\n  const compositeRecipeToSetupSource = ({ prototypeIdentifier, valueOfIdentifier }) => {\n    if (prototypeIdentifier === undefined) return identifierToVariableName(valueOfIdentifier)\n\n    const prototypeValue = valueMap[prototypeIdentifier]\n    if (prototypeValue === null) return `Object.create(null);`\n\n    const prototypeConstructor = prototypeValue.constructor\n    if (prototypeConstructor === Object)\n      return `Object.create(${identifierToVariableName(prototypeIdentifier)});`\n\n    if (valueOfIdentifier === undefined) return `new ${prototypeConstructor.name}();`\n\n    return `new ${prototypeConstructor.name}(${identifierToVariableName(valueOfIdentifier)});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `var ${recipeVariableName} = ${recipeToSetupSource(recipe, recipeVariableName)}\n`\n  })\n\n  const recipeToMutateSource = (recipe, recipeVariableName) => {\n    if (recipe.type === \"composite\")\n      return compositeRecipeToMutateSource(recipe, recipeVariableName)\n    return ``\n  }\n\n  const compositeRecipeToMutateSource = (\n    { propertyDescriptionArray, symbolDescriptionArray, methodDescriptionArray, extensible },\n    recipeVariableName,\n  ) => {\n    let mutateSource = ``\n\n    propertyDescriptionArray.forEach(({ propertyNameIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        propertyNameIdentifier,\n        propertyDescription,\n      )\n    })\n\n    symbolDescriptionArray.forEach(({ symbolIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        symbolIdentifier,\n        propertyDescription,\n      )\n    })\n\n    methodDescriptionArray.forEach(({ methodNameIdentifier, callArray }) => {\n      mutateSource += generateMethodCallSource(recipeVariableName, methodNameIdentifier, callArray)\n    })\n\n    if (!extensible) {\n      mutateSource += generatePreventExtensionSource(recipeVariableName)\n    }\n\n    return mutateSource\n  }\n\n  const generateDefinePropertySource = (\n    recipeVariableName,\n    propertyNameOrSymbolIdentifier,\n    propertyDescription,\n  ) => {\n    const propertyOrSymbolVariableName = identifierToVariableName(propertyNameOrSymbolIdentifier)\n\n    const propertyDescriptorSource = generatePropertyDescriptorSource(propertyDescription)\n    return `safeDefineProperty(${recipeVariableName}, ${propertyOrSymbolVariableName}, ${propertyDescriptorSource});`\n  }\n\n  const generatePropertyDescriptorSource = ({\n    configurable,\n    writable,\n    enumerable,\n    getIdentifier,\n    setIdentifier,\n    valueIdentifier,\n  }) => {\n    if (valueIdentifier === undefined) {\n      return `{\n  configurable: ${configurable},\n  enumerable: ${enumerable},\n  get: ${getIdentifier === undefined ? undefined : identifierToVariableName(getIdentifier)},\n  set: ${setIdentifier === undefined ? undefined : identifierToVariableName(setIdentifier)},\n}`\n    }\n\n    return `{\n  configurable: ${configurable},\n  writable: ${writable},\n  enumerable: ${enumerable},\n  value: ${valueIdentifier === undefined ? undefined : identifierToVariableName(valueIdentifier)}\n}`\n  }\n\n  const generateMethodCallSource = (recipeVariableName, methodNameIdentifier, callArray) => {\n    let methodCallSource = ``\n\n    const methodVariableName = identifierToVariableName(methodNameIdentifier)\n    callArray.forEach((argumentIdentifiers) => {\n      const argumentVariableNames = argumentIdentifiers.map((argumentIdentifier) =>\n        identifierToVariableName(argumentIdentifier),\n      )\n\n      methodCallSource += `${recipeVariableName}[${methodVariableName}](${argumentVariableNames.join(\n        \",\",\n      )});`\n    })\n\n    return methodCallSource\n  }\n\n  const generatePreventExtensionSource = (recipeVariableName) => {\n    return `Object.preventExtensions(${recipeVariableName});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `${recipeToMutateSource(recipe, recipeVariableName)}`\n  })\n\n  source += `return ${identifierToVariableName(mainIdentifier)}; })()`\n\n  return source\n}\n",
    "export const memoize = (compute) => {\n  let memoized = false\n  let memoizedValue\n\n  const fnWithMemoization = (...args) => {\n    if (memoized) {\n      return memoizedValue\n    }\n    // if compute is recursive wait for it to be fully done before storing the lockValue\n    // so set locked later\n    memoizedValue = compute(...args)\n    memoized = true\n    return memoizedValue\n  }\n\n  fnWithMemoization.forget = () => {\n    const value = memoizedValue\n    memoized = false\n    memoizedValue = undefined\n    return value\n  }\n\n  return fnWithMemoization\n}\n",
    "export const pathnameToExtension = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex !== -1) {\n    pathname = pathname.slice(slashLastIndex + 1)\n  }\n\n  const dotLastIndex = pathname.lastIndexOf(\".\")\n  if (dotLastIndex === -1) return \"\"\n  // if (dotLastIndex === pathname.length - 1) return \"\"\n  return pathname.slice(dotLastIndex)\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\nimport { hasScheme } from \"./internal/hasScheme.js\"\nimport { tryUrlResolution } from \"./internal/tryUrlResolution.js\"\nimport { resolveSpecifier } from \"./resolveSpecifier.js\"\n\nexport const applyImportMap = ({ importMap, specifier, importer }) => {\n  assertImportMap(importMap)\n  if (typeof specifier !== \"string\") {\n    throw new TypeError(writeSpecifierMustBeAString({ specifier, importer }))\n  }\n  if (importer) {\n    if (typeof importer !== \"string\") {\n      throw new TypeError(writeImporterMustBeAString({ importer, specifier }))\n    }\n    if (!hasScheme(importer)) {\n      throw new Error(writeImporterMustBeAbsolute({ importer, specifier }))\n    }\n  }\n\n  const specifierUrl = resolveSpecifier(specifier, importer)\n  const specifierNormalized = specifierUrl || specifier\n\n  const { scopes } = importMap\n  if (scopes && importer) {\n    const scopeKeyMatching = Object.keys(scopes).find((scopeKey) => {\n      return scopeKey === importer || specifierIsPrefixOf(scopeKey, importer)\n    })\n    if (scopeKeyMatching) {\n      const scopeValue = scopes[scopeKeyMatching]\n      const remappingFromScopeImports = applyImports(specifierNormalized, scopeValue)\n      if (remappingFromScopeImports !== null) {\n        return remappingFromScopeImports\n      }\n    }\n  }\n\n  const { imports } = importMap\n  if (imports) {\n    const remappingFromImports = applyImports(specifierNormalized, imports)\n    if (remappingFromImports !== null) {\n      return remappingFromImports\n    }\n  }\n\n  if (specifierUrl) {\n    return specifierUrl\n  }\n\n  throw new Error(writeBareSpecifierMustBeRemapped({ specifier, importer }))\n}\n\nconst applyImports = (specifier, imports) => {\n  const importKeyArray = Object.keys(imports)\n\n  let i = 0\n  while (i < importKeyArray.length) {\n    const importKey = importKeyArray[i]\n    i++\n    if (importKey === specifier) {\n      const importValue = imports[importKey]\n      return importValue\n    }\n    if (specifierIsPrefixOf(importKey, specifier)) {\n      const importValue = imports[importKey]\n      const afterImportKey = specifier.slice(importKey.length)\n\n      return tryUrlResolution(afterImportKey, importValue)\n    }\n  }\n\n  return null\n}\n\nconst specifierIsPrefixOf = (specifierHref, href) => {\n  return specifierHref[specifierHref.length - 1] === \"/\" && href.startsWith(specifierHref)\n}\n\nconst writeSpecifierMustBeAString = ({ specifier, importer }) => `specifier must be a string.\n--- specifier ---\n${specifier}\n--- importer ---\n${importer}`\n\nconst writeImporterMustBeAString = ({ importer, specifier }) => `importer must be a string.\n--- importer ---\n${importer}\n--- specifier ---\n${specifier}`\n\nconst writeImporterMustBeAbsolute = ({ importer, specifier }) => `importer must be an absolute url.\n--- importer ---\n${importer}\n--- specifier ---\n${specifier}`\n\nconst writeBareSpecifierMustBeRemapped = ({ specifier, importer }) => `Unmapped bare specifier.\n--- specifier ---\n${specifier}\n--- importer ---\n${importer}`\n",
    "import { urlToPathname } from \"./internal/urlToPathname.js\"\nimport { pathnameToExtension } from \"./internal/pathnameToExtension.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\nimport { applyImportMap } from \"./applyImportMap.js\"\n\nexport const resolveImport = ({ specifier, importer, importMap, defaultExtension = true }) => {\n  return applyDefaultExtension({\n    url: importMap\n      ? applyImportMap({ importMap, specifier, importer })\n      : resolveUrl(specifier, importer),\n    importer,\n    defaultExtension,\n  })\n}\n\nconst applyDefaultExtension = ({ url, importer, defaultExtension }) => {\n  if (urlToPathname(url).endsWith(\"/\")) {\n    return url\n  }\n\n  if (typeof defaultExtension === \"string\") {\n    const extension = pathnameToExtension(url)\n    if (extension === \"\") {\n      return `${url}${defaultExtension}`\n    }\n    return url\n  }\n\n  if (defaultExtension === true) {\n    const extension = pathnameToExtension(url)\n    if (extension === \"\" && importer) {\n      const importerPathname = urlToPathname(importer)\n      const importerExtension = pathnameToExtension(importerPathname)\n      return `${url}${importerExtension}`\n    }\n  }\n  return url\n}\n",
    "/*\n* SJS 6.7.1\n* Minimal SystemJS Build\n*/\n(function () {\n  function errMsg(errCode, msg) {\n    return (msg || \"\") + \" (SystemJS https://git.io/JvFET#\" + errCode + \")\";\n  }\n\n  var hasSymbol = typeof Symbol !== 'undefined';\n  var hasSelf = typeof self !== 'undefined';\n  var hasDocument = typeof document !== 'undefined';\n\n  var envGlobal = hasSelf ? self : global;\n\n  var baseUrl;\n\n  if (hasDocument) {\n    var baseEl = document.querySelector('base[href]');\n    if (baseEl)\n      baseUrl = baseEl.href;\n  }\n\n  if (!baseUrl && typeof location !== 'undefined') {\n    baseUrl = location.href.split('#')[0].split('?')[0];\n    var lastSepIndex = baseUrl.lastIndexOf('/');\n    if (lastSepIndex !== -1)\n      baseUrl = baseUrl.slice(0, lastSepIndex + 1);\n  }\n\n  var backslashRegEx = /\\\\/g;\n  function resolveIfNotPlainOrUrl (relUrl, parentUrl) {\n    if (relUrl.indexOf('\\\\') !== -1)\n      relUrl = relUrl.replace(backslashRegEx, '/');\n    // protocol-relative\n    if (relUrl[0] === '/' && relUrl[1] === '/') {\n      return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\n    }\n    // relative-url\n    else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n        relUrl.length === 1  && (relUrl += '/')) ||\n        relUrl[0] === '/') {\n      var parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\n      // Disabled, but these cases will give inconsistent results for deep backtracking\n      //if (parentUrl[parentProtocol.length] !== '/')\n      //  throw Error('Cannot resolve');\n      // read pathname from parent URL\n      // pathname taken to be part after leading \"/\"\n      var pathname;\n      if (parentUrl[parentProtocol.length + 1] === '/') {\n        // resolving to a :// so we need to read out the auth and host\n        if (parentProtocol !== 'file:') {\n          pathname = parentUrl.slice(parentProtocol.length + 2);\n          pathname = pathname.slice(pathname.indexOf('/') + 1);\n        }\n        else {\n          pathname = parentUrl.slice(8);\n        }\n      }\n      else {\n        // resolving to :/ so pathname is the /... part\n        pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));\n      }\n\n      if (relUrl[0] === '/')\n        return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\n\n      // join together and split for removal of .. and . segments\n      // looping the string instead of anything fancy for perf reasons\n      // '../../../../../z' resolved to 'x/y' is just 'z'\n      var segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n      var output = [];\n      var segmentIndex = -1;\n      for (var i = 0; i < segmented.length; i++) {\n        // busy reading a segment - only terminate on '/'\n        if (segmentIndex !== -1) {\n          if (segmented[i] === '/') {\n            output.push(segmented.slice(segmentIndex, i + 1));\n            segmentIndex = -1;\n          }\n        }\n\n        // new segment - check if it is relative\n        else if (segmented[i] === '.') {\n          // ../ segment\n          if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n            output.pop();\n            i += 2;\n          }\n          // ./ segment\n          else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n            i += 1;\n          }\n          else {\n            // the start of a new segment as below\n            segmentIndex = i;\n          }\n        }\n        // it is the start of a new segment\n        else {\n          segmentIndex = i;\n        }\n      }\n      // finish reading out the last segment\n      if (segmentIndex !== -1)\n        output.push(segmented.slice(segmentIndex));\n      return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\n    }\n  }\n\n  /*\n   * Import maps implementation\n   *\n   * To make lookups fast we pre-resolve the entire import map\n   * and then match based on backtracked hash lookups\n   *\n   */\n\n  function resolveUrl (relUrl, parentUrl) {\n    return resolveIfNotPlainOrUrl(relUrl, parentUrl) || (relUrl.indexOf(':') !== -1 ? relUrl : resolveIfNotPlainOrUrl('./' + relUrl, parentUrl));\n  }\n\n  function resolveAndComposePackages (packages, outPackages, baseUrl, parentMap, parentUrl) {\n    for (var p in packages) {\n      var resolvedLhs = resolveIfNotPlainOrUrl(p, baseUrl) || p;\n      var rhs = packages[p];\n      // package fallbacks not currently supported\n      if (typeof rhs !== 'string')\n        continue;\n      var mapped = resolveImportMap(parentMap, resolveIfNotPlainOrUrl(rhs, baseUrl) || rhs, parentUrl);\n      if (!mapped) {\n        targetWarning('W1', p, rhs);\n      }\n      else\n        outPackages[resolvedLhs] = mapped;\n    }\n  }\n\n  function resolveAndComposeImportMap (json, baseUrl, outMap) {\n    if (json.imports)\n      resolveAndComposePackages(json.imports, outMap.imports, baseUrl, outMap, null);\n\n    var u;\n    for (u in json.scopes || {}) {\n      var resolvedScope = resolveUrl(u, baseUrl);\n      resolveAndComposePackages(json.scopes[u], outMap.scopes[resolvedScope] || (outMap.scopes[resolvedScope] = {}), baseUrl, outMap, resolvedScope);\n    }\n\n    for (u in json.depcache || {})\n      outMap.depcache[resolveUrl(u, baseUrl)] = json.depcache[u];\n\n    for (u in json.integrity || {})\n      outMap.integrity[resolveUrl(u, baseUrl)] = json.integrity[u];\n  }\n\n  function getMatch (path, matchObj) {\n    if (matchObj[path])\n      return path;\n    var sepIndex = path.length;\n    do {\n      var segment = path.slice(0, sepIndex + 1);\n      if (segment in matchObj)\n        return segment;\n    } while ((sepIndex = path.lastIndexOf('/', sepIndex - 1)) !== -1)\n  }\n\n  function applyPackages (id, packages) {\n    var pkgName = getMatch(id, packages);\n    if (pkgName) {\n      var pkg = packages[pkgName];\n      if (pkg === null) return;\n      if (id.length > pkgName.length && pkg[pkg.length - 1] !== '/') {\n        targetWarning('W2', pkgName, pkg);\n      }\n      else\n        return pkg + id.slice(pkgName.length);\n    }\n  }\n\n  function targetWarning (code, match, target, msg) {\n    console.warn(errMsg(code,  [target, match].join(', ') ));\n  }\n\n  function resolveImportMap (importMap, resolvedOrPlain, parentUrl) {\n    var scopes = importMap.scopes;\n    var scopeUrl = parentUrl && getMatch(parentUrl, scopes);\n    while (scopeUrl) {\n      var packageResolution = applyPackages(resolvedOrPlain, scopes[scopeUrl]);\n      if (packageResolution)\n        return packageResolution;\n      scopeUrl = getMatch(scopeUrl.slice(0, scopeUrl.lastIndexOf('/')), scopes);\n    }\n    return applyPackages(resolvedOrPlain, importMap.imports) || resolvedOrPlain.indexOf(':') !== -1 && resolvedOrPlain;\n  }\n\n  /*\n   * SystemJS Core\n   *\n   * Provides\n   * - System.import\n   * - System.register support for\n   *     live bindings, function hoisting through circular references,\n   *     reexports, dynamic import, import.meta.url, top-level await\n   * - System.getRegister to get the registration\n   * - Symbol.toStringTag support in Module objects\n   * - Hookable System.createContext to customize import.meta\n   * - System.onload(err, id, deps) handler for tracing / hot-reloading\n   *\n   * Core comes with no System.prototype.resolve or\n   * System.prototype.instantiate implementations\n   */\n\n  var toStringTag = hasSymbol && Symbol.toStringTag;\n  var REGISTRY = hasSymbol ? Symbol() : '@';\n\n  function SystemJS () {\n    this[REGISTRY] = {};\n  }\n\n  var systemJSPrototype = SystemJS.prototype;\n\n  systemJSPrototype.import = function (id, parentUrl) {\n    var loader = this;\n    return Promise.resolve(loader.prepareImport())\n    .then(function() {\n      return loader.resolve(id, parentUrl);\n    })\n    .then(function (id) {\n      var load = getOrCreateLoad(loader, id);\n      return load.C || topLevelLoad(loader, load);\n    });\n  };\n\n  // Hookable createContext function -> allowing eg custom import meta\n  systemJSPrototype.createContext = function (parentId) {\n    var loader = this;\n    return {\n      url: parentId,\n      resolve: function (id, parentUrl) {\n        return Promise.resolve(loader.resolve(id, parentUrl || parentId));\n      }\n    };\n  };\n  function loadToId (load) {\n    return load.id;\n  }\n  function triggerOnload (loader, load, err, isErrSource) {\n    loader.onload(err, load.id, load.d && load.d.map(loadToId), !!isErrSource);\n    if (err)\n      throw err;\n  }\n\n  var lastRegister;\n  systemJSPrototype.register = function (deps, declare) {\n    lastRegister = [deps, declare];\n  };\n\n  /*\n   * getRegister provides the last anonymous System.register call\n   */\n  systemJSPrototype.getRegister = function () {\n    var _lastRegister = lastRegister;\n    lastRegister = undefined;\n    return _lastRegister;\n  };\n\n  function getOrCreateLoad (loader, id, firstParentUrl) {\n    var load = loader[REGISTRY][id];\n    if (load)\n      return load;\n\n    var importerSetters = [];\n    var ns = Object.create(null);\n    if (toStringTag)\n      Object.defineProperty(ns, toStringTag, { value: 'Module' });\n\n    var instantiatePromise = Promise.resolve()\n    .then(function () {\n      return loader.instantiate(id, firstParentUrl);\n    })\n    .then(function (registration) {\n      if (!registration)\n        throw Error(errMsg(2,  id ));\n      function _export (name, value) {\n        // note if we have hoisted exports (including reexports)\n        load.h = true;\n        var changed = false;\n        if (typeof name === 'string') {\n          if (!(name in ns) || ns[name] !== value) {\n            ns[name] = value;\n            changed = true;\n          }\n        }\n        else {\n          for (var p in name) {\n            var value = name[p];\n            if (!(p in ns) || ns[p] !== value) {\n              ns[p] = value;\n              changed = true;\n            }\n          }\n\n          if (name.__esModule) {\n            ns.__esModule = name.__esModule;\n          }\n        }\n        if (changed)\n          for (var i = 0; i < importerSetters.length; i++) {\n            var setter = importerSetters[i];\n            if (setter) setter(ns);\n          }\n        return value;\n      }\n      var declared = registration[1](_export, registration[1].length === 2 ? {\n        import: function (importId) {\n          return loader.import(importId, id);\n        },\n        meta: loader.createContext(id)\n      } : undefined);\n      load.e = declared.execute || function () {};\n      return [registration[0], declared.setters || []];\n    });\n\n    var linkPromise = instantiatePromise\n    .then(function (instantiation) {\n      return Promise.all(instantiation[0].map(function (dep, i) {\n        var setter = instantiation[1][i];\n        return Promise.resolve(loader.resolve(dep, id))\n        .then(function (depId) {\n          var depLoad = getOrCreateLoad(loader, depId, id);\n          // depLoad.I may be undefined for already-evaluated\n          return Promise.resolve(depLoad.I)\n          .then(function () {\n            if (setter) {\n              depLoad.i.push(setter);\n              // only run early setters when there are hoisted exports of that module\n              // the timing works here as pending hoisted export calls will trigger through importerSetters\n              if (depLoad.h || !depLoad.I)\n                setter(depLoad.n);\n            }\n            return depLoad;\n          });\n        })\n      }))\n      .then(\n        function (depLoads) {\n          load.d = depLoads;\n        },\n        !true\n      )\n    });\n\n    linkPromise.catch(function (err) {\n      load.e = null;\n      load.er = err;\n    });\n\n    // Capital letter = a promise function\n    return load = loader[REGISTRY][id] = {\n      id: id,\n      // importerSetters, the setters functions registered to this dependency\n      // we retain this to add more later\n      i: importerSetters,\n      // module namespace object\n      n: ns,\n\n      // instantiate\n      I: instantiatePromise,\n      // link\n      L: linkPromise,\n      // whether it has hoisted exports\n      h: false,\n\n      // On instantiate completion we have populated:\n      // dependency load records\n      d: undefined,\n      // execution function\n      // set to NULL immediately after execution (or on any failure) to indicate execution has happened\n      // in such a case, C should be used, and E, I, L will be emptied\n      e: undefined,\n\n      // On execution we have populated:\n      // the execution error if any\n      er: undefined,\n      // in the case of TLA, the execution promise\n      E: undefined,\n\n      // On execution, L, I, E cleared\n\n      // Promise for top-level completion\n      C: undefined\n    };\n  }\n\n  function instantiateAll (loader, load, loaded) {\n    if (!loaded[load.id]) {\n      loaded[load.id] = true;\n      // load.L may be undefined for already-instantiated\n      return Promise.resolve(load.L)\n      .then(function () {\n        return Promise.all(load.d.map(function (dep) {\n          return instantiateAll(loader, dep, loaded);\n        }));\n      })\n    }\n  }\n\n  function topLevelLoad (loader, load) {\n    return load.C = instantiateAll(loader, load, {})\n    .then(function () {\n      return postOrderExec(loader, load, {});\n    })\n    .then(function () {\n      return load.n;\n    });\n  }\n\n  // the closest we can get to call(undefined)\n  var nullContext = Object.freeze(Object.create(null));\n\n  // returns a promise if and only if a top-level await subgraph\n  // throws on sync errors\n  function postOrderExec (loader, load, seen) {\n    if (seen[load.id])\n      return;\n    seen[load.id] = true;\n\n    if (!load.e) {\n      if (load.er)\n        throw load.er;\n      if (load.E)\n        return load.E;\n      return;\n    }\n\n    // deps execute first, unless circular\n    var depLoadPromises;\n    load.d.forEach(function (depLoad) {\n        try {\n          var depLoadPromise = postOrderExec(loader, depLoad, seen);\n          if (depLoadPromise)\n            (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n        }\n        catch (err) {\n          load.e = null;\n          load.er = err;\n          throw err;\n        }\n    });\n    if (depLoadPromises)\n      return Promise.all(depLoadPromises).then(doExec, function (err) {\n        load.e = null;\n        load.er = err;\n        throw err;\n      });\n\n    return doExec();\n\n    function doExec () {\n      try {\n        var execPromise = load.e.call(nullContext);\n        if (execPromise) {\n            execPromise = execPromise.then(function () {\n              load.C = load.n;\n              load.E = null; // indicates completion\n              if (!true) triggerOnload(loader, load, null, true);\n            }, function (err) {\n              load.er = err;\n              load.E = null;\n              if (!true) triggerOnload(loader, load, err, true);\n              else throw err;\n            });\n          return load.E = load.E || execPromise;\n        }\n        // (should be a promise, but a minify optimization to leave out Promise.resolve)\n        load.C = load.n;\n        if (!true) triggerOnload(loader, load, null, true);\n      }\n      catch (err) {\n        load.er = err;\n        throw err;\n      }\n      finally {\n        load.L = load.I = undefined;\n        load.e = null;\n      }\n    }\n  }\n\n  envGlobal.System = new SystemJS();\n\n  /*\n   * SystemJS browser attachments for script and import map processing\n   */\n\n  var importMapPromise = Promise.resolve();\n  var importMap = { imports: {}, scopes: {}, depcache: {}, integrity: {} };\n\n  // Scripts are processed immediately, on the first System.import, and on DOMReady.\n  // Import map scripts are processed only once (by being marked) and in order for each phase.\n  // This is to avoid using DOM mutation observers in core, although that would be an alternative.\n  var processFirst = hasDocument;\n  systemJSPrototype.prepareImport = function (doProcessScripts) {\n    if (processFirst || doProcessScripts) {\n      processScripts();\n      processFirst = false;\n    }\n    return importMapPromise;\n  };\n  if (hasDocument) {\n    processScripts();\n    window.addEventListener('DOMContentLoaded', processScripts);\n  }\n\n  function processScripts () {\n    [].forEach.call(document.querySelectorAll('script'), function (script) {\n      if (script.sp) // sp marker = systemjs processed\n        return;\n      // TODO: deprecate systemjs-module in next major now that we have auto import\n      if (script.type === 'systemjs-module') {\n        script.sp = true;\n        if (!script.src)\n          return;\n        System.import(script.src.slice(0, 7) === 'import:' ? script.src.slice(7) : resolveUrl(script.src, baseUrl));\n      }\n      else if (script.type === 'systemjs-importmap') {\n        script.sp = true;\n        var fetchPromise = script.src ? fetch(script.src, { integrity: script.integrity }).then(function (res) {\n          return res.text();\n        }) : script.innerHTML;\n        importMapPromise = importMapPromise.then(function () {\n          return fetchPromise;\n        }).then(function (text) {\n          extendImportMap(importMap, text, script.src || baseUrl);\n        });\n      }\n    });\n  }\n\n  function extendImportMap (importMap, newMapText, newMapUrl) {\n    try {\n      var newMap = JSON.parse(newMapText);\n    } catch (err) {\n      throw Error( errMsg(1) );\n    }\n    resolveAndComposeImportMap(newMap, newMapUrl, importMap);\n  }\n\n  /*\n   * Script instantiation loading\n   */\n\n  if (hasDocument) {\n    window.addEventListener('error', function (evt) {\n      lastWindowErrorUrl = evt.filename;\n      lastWindowError = evt.error;\n    });\n    var baseOrigin = location.origin;\n  }\n\n  systemJSPrototype.createScript = function (url) {\n    var script = document.createElement('script');\n    script.async = true;\n    // Only add cross origin for actual cross origin\n    // this is because Safari triggers for all\n    // - https://bugs.webkit.org/show_bug.cgi?id=171566\n    if (url.indexOf(baseOrigin + '/'))\n      script.crossOrigin = 'anonymous';\n    var integrity = importMap.integrity[url];\n    if (integrity)\n      script.integrity = integrity;\n    script.src = url;\n    return script;\n  };\n\n  // Auto imports -> script tags can be inlined directly for load phase\n  var lastAutoImportUrl, lastAutoImportDeps, lastAutoImportTimeout;\n  var autoImportCandidates = {};\n  var systemRegister = systemJSPrototype.register;\n  systemJSPrototype.register = function (deps, declare) {\n    if (hasDocument && document.readyState === 'loading' && typeof deps !== 'string') {\n      var scripts = document.querySelectorAll('script[src]');\n      var lastScript = scripts[scripts.length - 1];\n      if (lastScript) {\n        lastAutoImportUrl = lastScript.src;\n        lastAutoImportDeps = deps;\n        // if this is already a System load, then the instantiate has already begun\n        // so this re-import has no consequence\n        var loader = this;\n        lastAutoImportTimeout = setTimeout(function () {\n          autoImportCandidates[lastScript.src] = [deps, declare];\n          loader.import(lastScript.src);\n        });\n      }\n    }\n    else {\n      lastAutoImportDeps = undefined;\n    }\n    return systemRegister.call(this, deps, declare);\n  };\n\n  var lastWindowErrorUrl, lastWindowError;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var autoImportRegistration = autoImportCandidates[url];\n    if (autoImportRegistration) {\n      delete autoImportCandidates[url];\n      return autoImportRegistration;\n    }\n    var loader = this;\n    return new Promise(function (resolve, reject) {\n      var script = systemJSPrototype.createScript(url);\n      script.addEventListener('error', function () {\n        reject(Error(errMsg(3,  [url, firstParentUrl].join(', ') )));\n      });\n      script.addEventListener('load', function () {\n        document.head.removeChild(script);\n        // Note that if an error occurs that isn't caught by this if statement,\n        // that getRegister will return null and a \"did not instantiate\" error will be thrown.\n        if (lastWindowErrorUrl === url) {\n          reject(lastWindowError);\n        }\n        else {\n          var register = loader.getRegister();\n          // Clear any auto import registration for dynamic import scripts during load\n          if (register && register[0] === lastAutoImportDeps)\n            clearTimeout(lastAutoImportTimeout);\n          resolve(register);\n        }\n      });\n      document.head.appendChild(script);\n    });\n  };\n\n  /*\n   * Fetch loader, sets up shouldFetch and fetch hooks\n   */\n  systemJSPrototype.shouldFetch = function () {\n    return false;\n  };\n  if (typeof fetch !== 'undefined')\n    systemJSPrototype.fetch = fetch;\n\n  var instantiate = systemJSPrototype.instantiate;\n  var jsContentTypeRegEx = /^(text|application)\\/(x-)?javascript(;|$)/;\n  systemJSPrototype.instantiate = function (url, parent) {\n    var loader = this;\n    if (!this.shouldFetch(url))\n      return instantiate.apply(this, arguments);\n    return this.fetch(url, {\n      credentials: 'same-origin',\n      integrity: importMap.integrity[url]\n    })\n    .then(function (res) {\n      if (!res.ok)\n        throw Error(errMsg(7,  [res.status, res.statusText, url, parent].join(', ') ));\n      var contentType = res.headers.get('content-type');\n      if (!contentType || !jsContentTypeRegEx.test(contentType))\n        throw Error(errMsg(4,  contentType ));\n      return res.text().then(function (source) {\n        (0, eval)(source);\n        return loader.getRegister();\n      });\n    });\n  };\n\n  systemJSPrototype.resolve = function (id, parentUrl) {\n    parentUrl = parentUrl || !true  || baseUrl;\n    return resolveImportMap(( importMap), resolveIfNotPlainOrUrl(id, parentUrl) || id, parentUrl) || throwUnresolved(id, parentUrl);\n  };\n\n  function throwUnresolved (id, parentUrl) {\n    throw Error(errMsg(8,  [id, parentUrl].join(', ') ));\n  }\n\n  var systemInstantiate = systemJSPrototype.instantiate;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var preloads = ( importMap).depcache[url];\n    if (preloads) {\n      for (var i = 0; i < preloads.length; i++)\n        getOrCreateLoad(this, this.resolve(preloads[i], url), url);\n    }\n    return systemInstantiate.call(this, url, firstParentUrl);\n  };\n\n  /*\n   * Supports loading System.register in workers\n   */\n\n  if (hasSelf && typeof importScripts === 'function')\n    systemJSPrototype.instantiate = function (url) {\n      var loader = this;\n      return Promise.resolve().then(function () {\n        importScripts(url);\n        return loader.getRegister();\n      });\n    };\n\n}());",
    "export const valueInstall = (object, name, value) => {\n  const has = name in object\n  const previous = object[name]\n\n  object[name] = value\n\n  return () => {\n    if (has) {\n      object[name] = previous\n    } else {\n      delete object[name]\n    }\n  }\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\n\nexport const fromFunctionReturningNamespace = (fn, data) => {\n  return fromFunctionReturningRegisteredModule(() => {\n    // should we compute the namespace here\n    // or as it is done below, defer to execute ?\n    // I think defer to execute is better\n    return [\n      [],\n      (_export) => {\n        return {\n          execute: () => {\n            const namespace = fn()\n            _export(namespace)\n          },\n        }\n      },\n    ]\n  }, data)\n}\n\nconst fromFunctionReturningRegisteredModule = (fn, data) => {\n  try {\n    return fn()\n  } catch (error) {\n    if (error.name === \"SyntaxError\") {\n      throw new Error(\n        createDetailedMessage(`Syntax error in module.`, {\n          \"syntax error stack\": error.stack,\n          ...getModuleDetails(data),\n        }),\n      )\n    }\n    throw new Error(\n      createDetailedMessage(`Module instantiation error.`, {\n        [\"instantiation error stack\"]: error.stack,\n        ...getModuleDetails(data),\n      }),\n    )\n  }\n}\n\nexport const fromUrl = async ({\n  url,\n  importerUrl,\n  fetchSource,\n  instantiateJavaScript,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n}) => {\n  let moduleResponse\n  try {\n    moduleResponse = await fetchSource(url, {\n      importerUrl,\n    })\n\n    if (moduleResponse.status === 404) {\n      throw new Error(\n        createDetailedMessage(\n          `Module file cannot be found.`,\n          getModuleDetails({\n            url,\n            importerUrl,\n            compileServerOrigin,\n            outDirectoryRelativeUrl,\n            notFound: true,\n          }),\n        ),\n      )\n    }\n  } catch (e) {\n    e.code = \"NETWORK_FAILURE\"\n    throw e\n  }\n\n  const contentType = moduleResponse.headers[\"content-type\"] || \"\"\n\n  if (moduleResponse.status === 500 && contentType === \"application/json\") {\n    const bodyAsJson = await moduleResponse.json()\n    if (bodyAsJson.message && bodyAsJson.filename && \"columnNumber\" in bodyAsJson) {\n      const error = new Error(\n        createDetailedMessage(`Module file cannot be parsed.`, {\n          [\"parsing error message\"]: bodyAsJson.message,\n          ...getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl }),\n        }),\n      )\n      error.parsingError = bodyAsJson\n      throw error\n    }\n  }\n\n  if (moduleResponse.status < 200 || moduleResponse.status >= 300) {\n    throw new Error(\n      createDetailedMessage(`Module file response status is unexpected.`, {\n        [\"status\"]: moduleResponse.status,\n        [\"allowed status\"]: \"200 to 299\",\n        [\"statusText\"]: moduleResponse.statusText,\n        ...getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl }),\n      }),\n    )\n  }\n\n  // don't forget to keep it close to https://github.com/systemjs/systemjs/blob/9a15cfd3b7a9fab261e1848b1b2fa343d73afedb/src/extras/module-types.js#L21\n  // and in sync with loadModule in createJsenvRollupPlugin.js\n  if (contentType === \"application/javascript\" || contentType === \"text/javascript\") {\n    const bodyAsText = await moduleResponse.text()\n    return fromFunctionReturningRegisteredModule(\n      () => instantiateJavaScript(bodyAsText, moduleResponse.url),\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentType === \"application/json\" || contentType === \"application/importmap+json\") {\n    const bodyAsJson = await moduleResponse.json()\n    return fromFunctionReturningNamespace(\n      () => {\n        return {\n          default: bodyAsJson,\n        }\n      },\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentTypeShouldBeReadAsText(contentType)) {\n    return fromFunctionReturningNamespace(\n      () => {\n        return {\n          default: moduleResponse.url,\n        }\n      },\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentType) {\n    // for now content type different of javascript are not unusual anymore\n    // ideally we would not use static import to tell rollup we have a dependency to an url\n    // insetad we would write something that would be compatible with web strandard such as\n    // new URL('./whatever', import.meta.url)\n    // or import.meta.resolve('./whatever')\n    //     console.warn(`Module content-type is unusual.\n    // ['content-type']:   // ${contentType}\n    // ['allowed content-type']:   // application/javascript\n    // application/json\n    // text/*\n    // ${getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl })}`)\n  } else {\n    console.warn(`Module content-type is missing.`, {\n      [\"allowed content-type\"]: [\"aplication/javascript\", \"application/json\", \"text/*\"],\n      ...getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl }),\n    })\n  }\n\n  return fromFunctionReturningNamespace(\n    () => {\n      return {\n        default: moduleResponse.url,\n      }\n    },\n    {\n      url: moduleResponse.url,\n      importerUrl,\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n    },\n  )\n}\n\nconst contentTypeShouldBeReadAsText = (contentType) => {\n  if (contentType.startsWith(\"text/\")) {\n    return true\n  }\n  if (contentType === \"image/svg+xml\") {\n    return true\n  }\n  return false\n}\n\n// const textToBase64 =\n//   typeof window === \"object\"\n//     ? (text) => window.btoa(window.unescape(window.encodeURIComponent(text)))\n//     : (text) => Buffer.from(text, \"utf8\").toString(\"base64\")\n\nconst getModuleDetails = ({\n  url,\n  importerUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  notFound = false,\n}) => {\n  const relativeUrl = tryToFindProjectRelativeUrl(url, {\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const importerRelativeUrl = tryToFindProjectRelativeUrl(importerUrl, {\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const details = notFound\n    ? {\n        ...(importerUrl ? { [\"import declared in\"]: importerRelativeUrl || importerUrl } : {}),\n        ...(relativeUrl ? { file: relativeUrl } : {}),\n        [\"file url\"]: url,\n      }\n    : {\n        ...(relativeUrl ? { file: relativeUrl } : {}),\n        [\"file url\"]: url,\n        ...(importerUrl ? { [\"imported by\"]: importerRelativeUrl || importerUrl } : {}),\n      }\n\n  return details\n}\n\nconst tryToFindProjectRelativeUrl = (url, { compileServerOrigin, outDirectoryRelativeUrl }) => {\n  if (!url) {\n    return null\n  }\n\n  if (!url.startsWith(`${compileServerOrigin}/`)) {\n    return null\n  }\n\n  if (url === compileServerOrigin) {\n    return null\n  }\n\n  const afterOrigin = url.slice(`${compileServerOrigin}/`.length)\n  if (!afterOrigin.startsWith(outDirectoryRelativeUrl)) {\n    return null\n  }\n\n  const afterCompileDirectory = afterOrigin.slice(outDirectoryRelativeUrl.length)\n  const nextSlashIndex = afterCompileDirectory.indexOf(\"/\")\n  if (nextSlashIndex === -1) {\n    return null\n  }\n\n  const afterCompileId = afterCompileDirectory.slice(nextSlashIndex + 1)\n  return afterCompileId\n}\n",
    "// eslint-disable-next-line no-eval\nexport const evalSource = (code, href) => window.eval(appendSourceURL(code, href))\n\nconst appendSourceURL = (code, sourceURL) => {\n  return `${code}\n${\"//#\"} sourceURL=${sourceURL}`\n}\n",
    "import { resolveImport } from \"@jsenv/import-map/src/resolveImport.js\"\nimport \"../s.js\"\nimport { valueInstall } from \"../valueInstall.js\"\nimport { fromFunctionReturningNamespace, fromUrl } from \"../module-registration.js\"\nimport { evalSource } from \"./evalSource.js\"\n\nconst GLOBAL_SPECIFIER = \"global\"\n\nexport const createBrowserSystem = ({\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  importMap,\n  importDefaultExtension,\n  fetchSource,\n}) => {\n  if (typeof window.System === \"undefined\") {\n    throw new Error(`window.System is undefined`)\n  }\n\n  const browserSystem = new window.System.constructor()\n\n  const resolve = (specifier, importer = document.location.href) => {\n    if (specifier === GLOBAL_SPECIFIER) {\n      return specifier\n    }\n\n    return resolveImport({\n      specifier,\n      importer,\n      importMap,\n      defaultExtension: importDefaultExtension,\n    })\n  }\n\n  browserSystem.resolve = resolve\n\n  browserSystem.instantiate = (url, importerUrl) => {\n    if (url === GLOBAL_SPECIFIER) {\n      return fromFunctionReturningNamespace(() => window, {\n        url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      })\n    }\n\n    return fromUrl({\n      url,\n      importerUrl,\n      fetchSource,\n      instantiateJavaScript: (source, responseUrl) => {\n        const uninstallSystemGlobal = valueInstall(window, \"System\", browserSystem)\n        try {\n          evalSource(source, responseUrl)\n        } finally {\n          uninstallSystemGlobal()\n        }\n\n        return browserSystem.getRegister()\n      },\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n    })\n  }\n\n  browserSystem.createContext = (importerUrl) => {\n    return {\n      url: importerUrl,\n      resolve: (specifier) => resolve(specifier, importerUrl),\n    }\n  }\n\n  return browserSystem\n}\n",
    "export const displayErrorInDocument = (error) => {\n  const title = \"An error occured\"\n  let theme\n  let message\n\n  if (error && error.parsingError) {\n    theme = \"light\"\n    const { parsingError } = error\n    message = errorToHTML(parsingError.messageHTML || escapeHtml(parsingError.message))\n  } else {\n    theme = \"dark\"\n    message = errorToHTML(error)\n  }\n\n  const css = `\n    .jsenv-console {\n      position: static;\n      left: 0;\n      top: 0;\n      z-index: 1000;\n    }\n\n    #button-close-jsenv-console {\n      position: absolute;\n      right: 8px;\n    }\n\n    .jsenv-console pre {\n      overflow: auto;\n      /* avoid scrollbar to hide the text behind it */\n      padding-top: 20px;\n      padding-right: 20px;\n      padding-bottom: 20px;\n    }\n\n    .jsenv-console pre[data-theme=\"dark\"] {\n      background: transparent;\n      border: 1px solid black;\n    }\n\n    .jsenv-console pre[data-theme=\"light\"] {\n      background: #1E1E1E;\n      border: 1px solid white;\n      color: #EEEEEE;\n    }\n\n    .jsenv-console pre[data-theme=\"light\"] a {\n      color: inherit;\n    }\n    `\n  const html = `\n      <style type=\"text/css\">${css}></style>\n      <div class=\"jsenv-console\">\n        <h1>${title} <button id=\"button-close-jsenv-console\">X</button></h1>\n        <pre data-theme=\"${theme}\">${message}</pre>\n      </div>\n      `\n  const removeJsenvConsole = appendHMTLInside(html, document.body)\n\n  document.querySelector(\"#button-close-jsenv-console\").onclick = () => {\n    removeJsenvConsole()\n  }\n}\n\nconst escapeHtml = (string) => {\n  return string\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\")\n}\n\nconst errorToHTML = (error) => {\n  let html\n\n  if (error && error instanceof Error) {\n    //  stackTrace formatted by V8\n    if (Error.captureStackTrace) {\n      html = escapeHtml(error.stack)\n    } else {\n      // other stack trace such as firefox do not contain error.message\n      html = escapeHtml(`${error.message}\n  ${error.stack}`)\n    }\n  } else if (typeof error === \"string\") {\n    html = error\n  } else {\n    html = JSON.stringify(error)\n  }\n\n  const htmlWithCorrectLineBreaks = html.replace(/\\n/g, \"\\n\")\n  const htmlWithLinks = stringToStringWithLink(htmlWithCorrectLineBreaks, {\n    transform: (url) => {\n      return { href: url, text: url }\n    },\n  })\n  return htmlWithLinks\n}\n\n// `Error: yo\n// at Object.execute (http://127.0.0.1:57300/build/src/__test__/file-throw.js:9:13)\n// at doExec (http://127.0.0.1:3000/src/__test__/file-throw.js:452:38)\n// at postOrderExec (http://127.0.0.1:3000/src/__test__/file-throw.js:448:16)\n// at http://127.0.0.1:3000/src/__test__/file-throw.js:399:18`.replace(/(?:https?|ftp|file):\\/\\/(.*+)$/gm, (...args) => {\n//   debugger\n// })\nconst stringToStringWithLink = (\n  source,\n  {\n    transform = (url) => {\n      return {\n        href: url,\n        text: url,\n      }\n    },\n  } = {},\n) => {\n  return source.replace(/(?:https?|ftp|file):\\/\\/\\S+/gm, (match) => {\n    let linkHTML = \"\"\n\n    const lastChar = match[match.length - 1]\n\n    // hotfix because our url regex sucks a bit\n    const endsWithSeparationChar = lastChar === \")\" || lastChar === \":\"\n    if (endsWithSeparationChar) {\n      match = match.slice(0, -1)\n    }\n\n    const lineAndColumnPattern = /:([0-9]+):([0-9]+)$/\n    const lineAndColumMatch = match.match(lineAndColumnPattern)\n    if (lineAndColumMatch) {\n      const lineAndColumnString = lineAndColumMatch[0]\n      const lineNumber = lineAndColumMatch[1]\n      const columnNumber = lineAndColumMatch[2]\n      const url = match.slice(0, -lineAndColumnString.length)\n      const { href, text } = transform(url)\n      linkHTML = link({ href, text: `${text}:${lineNumber}:${columnNumber}` })\n    } else {\n      const linePattern = /:([0-9]+)$/\n      const lineMatch = match.match(linePattern)\n      if (lineMatch) {\n        const lineString = lineMatch[0]\n        const lineNumber = lineMatch[1]\n        const url = match.slice(0, -lineString.length)\n        const { href, text } = transform(url)\n        linkHTML = link({\n          href,\n          text: `${text}:${lineNumber}`,\n        })\n      } else {\n        const url = match\n        const { href, text } = transform(url)\n        linkHTML = link({ href, text })\n      }\n    }\n\n    if (endsWithSeparationChar) {\n      return `${linkHTML}${lastChar}`\n    }\n    return linkHTML\n  })\n}\n\nconst link = ({ href, text = href }) => `<a href=\"${href}\">${text}</a>`\n\nconst appendHMTLInside = (html, parentNode) => {\n  const temoraryParent = document.createElement(\"div\")\n  temoraryParent.innerHTML = html\n  return transferChildren(temoraryParent, parentNode)\n}\n\nconst transferChildren = (fromNode, toNode) => {\n  const childNodes = [].slice.call(fromNode.childNodes, 0)\n  let i = 0\n  while (i < childNodes.length) {\n    toNode.appendChild(childNodes[i])\n    i++\n  }\n  return () => {\n    let c = 0\n    while (c < childNodes.length) {\n      fromNode.appendChild(childNodes[c])\n      c++\n    }\n  }\n}\n",
    "const { Notification } = window\n\nconst displayErrorNotificationNotAvailable = () => {}\n\nconst displayErrorNotificationImplementation = async (error, { icon } = {}) => {\n  const permission = await Notification.requestPermission()\n\n  if (permission === \"granted\") {\n    const notification = new Notification(\"An error occured\", {\n      lang: \"en\",\n      body: error.stack,\n      icon,\n    })\n    notification.onclick = () => {\n      window.focus()\n    }\n  }\n}\n\nexport const displayErrorNotification =\n  typeof Notification === \"function\"\n    ? displayErrorNotificationImplementation\n    : displayErrorNotificationNotAvailable\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export const createCancellationToken = () => {\n  const register = (callback) => {\n    if (typeof callback !== \"function\") {\n      throw new Error(`callback must be a function, got ${callback}`)\n    }\n\n    return {\n      callback,\n      unregister: () => {},\n    }\n  }\n\n  const throwIfRequested = () => undefined\n\n  return {\n    register,\n    cancellationRequested: false,\n    throwIfRequested,\n  }\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { createDetailedMessage } from \"@jsenv/logger\"\n// ideally we should do some window.fetch detection (ensuring it has cancellation) and accordingly\n// fallback to this polyfill (or even use an existing polyfill would be better)\n// https://github.com/github/fetch/blob/master/fetch.js\n\nexport const fetchUsingXHR = async (\n  url,\n  {\n    cancellationToken = createCancellationToken(),\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  cancellationToken.register((cancelError) => {\n    xhr.abort()\n    failure(cancelError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl = \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    createDetailedMessage(`error during xhr request on ${url}.`, {\n      [\"error stack\"]: error.stack,\n    }),\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return value && viewClasses.includes(Object.prototype.toString.call(value))\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { fetchUsingXHR } from \"./fetchUsingXHR.js\"\n\nconst fetchNative = async (\n  url,\n  { cancellationToken = createCancellationToken(), mode = \"cors\", ...options } = {},\n) => {\n  const abortController = new AbortController()\n\n  let cancelError\n  cancellationToken.register((reason) => {\n    cancelError = reason\n    abortController.abort(reason)\n  })\n\n  let response\n  try {\n    response = await window.fetch(url, {\n      signal: abortController.signal,\n      mode,\n      ...options,\n    })\n  } catch (e) {\n    if (cancelError && e.name === \"AbortError\") {\n      throw cancelError\n    }\n    throw e\n  }\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" && typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { normalizeImportMap } from \"@jsenv/import-map/src/normalizeImportMap.js\"\nimport { uneval } from \"@jsenv/uneval\"\n// do not use memoize from @jsenv/util to avoid pulling @jsenv/util code into the browser build\nimport { memoize } from \"../../memoize.js\"\nimport { createBrowserSystem } from \"./createBrowserSystem.js\"\nimport { displayErrorInDocument } from \"./displayErrorInDocument.js\"\nimport { displayErrorNotification } from \"./displayErrorNotification.js\"\nimport { fetchUrl } from \"../../fetch-browser.js\"\n\nconst memoizedCreateBrowserSystem = memoize(createBrowserSystem)\n\nexport const createBrowserRuntime = async ({\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  compileId,\n  htmlFileRelativeUrl,\n}) => {\n  const fetchSource = (url) => {\n    return fetchUrl(url, {\n      credentials: \"include\",\n      headers: {\n        ...(htmlFileRelativeUrl ? { \"x-jsenv-execution-id\": htmlFileRelativeUrl } : {}),\n      },\n    })\n  }\n\n  const fetchJson = async (url) => {\n    const response = await fetchSource(url)\n    const json = await response.json()\n    return json\n  }\n\n  const outDirectoryUrl = `${compileServerOrigin}/${outDirectoryRelativeUrl}`\n  const envUrl = String(new URL(\"env.json\", outDirectoryUrl))\n  const { importDefaultExtension } = await fetchJson(envUrl)\n\n  const compileDirectoryRelativeUrl = `${outDirectoryRelativeUrl}${compileId}/`\n\n  // if there is an importmap in the document we should use it instead of fetching like this.\n  // systemjs style with systemjs-importmap\n  const importmapScript = document.querySelector(`script[type=\"jsenv-importmap\"]`)\n  let importMap\n  if (importmapScript) {\n    let importmapRaw\n    let importmapFileUrl\n    if (importmapScript.src) {\n      importmapFileUrl = importmapScript.src\n      const importmapFileResponse = await fetchSource(importmapFileUrl)\n      importmapRaw = importmapFileResponse.status === 404 ? {} : await importmapFileResponse.json()\n    } else {\n      importmapFileUrl = document.location.href\n      importmapRaw = JSON.parse(importmapScript.textContent) || {}\n    }\n    importMap = normalizeImportMap(importmapRaw, importmapFileUrl)\n  }\n\n  const importFile = async (specifier) => {\n    const browserSystem = await memoizedCreateBrowserSystem({\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n      importMap,\n      importDefaultExtension,\n      fetchSource,\n    })\n    return browserSystem.import(specifier)\n  }\n\n  const executeFile = async (\n    specifier,\n    {\n      transferableNamespace = false,\n      errorExposureInConsole = true,\n      errorExposureInNotification = false,\n      errorExposureInDocument = true,\n      executionExposureOnWindow = false,\n      errorTransform = (error) => error,\n    } = {},\n  ) => {\n    const browserSystem = await memoizedCreateBrowserSystem({\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n      importMap,\n      importDefaultExtension,\n      fetchSource,\n    })\n\n    let executionResult\n    try {\n      let namespace = await browserSystem.import(specifier)\n\n      if (transferableNamespace) {\n        namespace = makeNamespaceTransferable(namespace)\n      }\n\n      executionResult = {\n        status: \"completed\",\n        namespace,\n        coverageMap: readCoverage(),\n      }\n    } catch (error) {\n      let transformedError\n      try {\n        transformedError = await errorTransform(error)\n      } catch (e) {\n        transformedError = error\n      }\n\n      if (errorExposureInConsole) displayErrorInConsole(transformedError)\n      if (errorExposureInNotification) displayErrorNotification(transformedError)\n      if (errorExposureInDocument) displayErrorInDocument(transformedError)\n\n      executionResult = {\n        status: \"errored\",\n        exceptionSource: unevalException(transformedError),\n        coverageMap: readCoverage(),\n      }\n    }\n\n    if (executionExposureOnWindow) {\n      window.__executionResult__ = executionResult\n    }\n\n    return executionResult\n  }\n\n  return {\n    compileDirectoryRelativeUrl,\n    importFile,\n    executeFile,\n  }\n}\n\nconst makeNamespaceTransferable = (namespace) => {\n  const transferableNamespace = {}\n  Object.keys(namespace).forEach((key) => {\n    const value = namespace[key]\n    transferableNamespace[key] = isTransferable(value) ? value : hideNonTransferableValue(value)\n  })\n  return transferableNamespace\n}\n\nconst hideNonTransferableValue = (value) => {\n  if (typeof value === \"function\") {\n    return `[[HIDDEN: ${value.name} function cannot be transfered]]`\n  }\n\n  if (typeof value === \"symbol\") {\n    return `[[HIDDEN: symbol function cannot be transfered]]`\n  }\n\n  return `[[HIDDEN: ${value.constructor ? value.constructor.name : \"object\"} cannot be transfered]]`\n}\n\n// https://stackoverflow.com/a/32673910/2634179\nconst isTransferable = (value) => {\n  const seenArray = []\n  const visit = () => {\n    if (typeof value === \"function\") return false\n\n    if (typeof value === \"symbol\") return false\n\n    if (value === null) return false\n\n    if (typeof value === \"object\") {\n      const constructorName = value.constructor.namespace\n\n      if (supportedTypes.includes(constructorName)) {\n        return true\n      }\n\n      const maybe = maybeTypes.includes(constructorName)\n      if (maybe) {\n        const visited = seenArray.includes(value)\n        if (visited) {\n          // we don't really know until we are done visiting the object\n          // implementing it properly means waiting for the recursion to be done\n          // let's just\n          return true\n        }\n        seenArray.push(value)\n\n        if (constructorName === \"Array\" || constructorName === \"Object\") {\n          return Object.keys(value).every((key) => isTransferable(value[key]))\n        }\n        if (constructorName === \"Map\") {\n          return (\n            [...value.keys()].every(isTransferable) && [...value.values()].every(isTransferable)\n          )\n        }\n        if (constructorName === \"Set\") {\n          return [...value.keys()].every(isTransferable)\n        }\n      }\n\n      // Error, DOM Node and others\n      return false\n    }\n    return true\n  }\n\n  return visit(value)\n}\n\nconst supportedTypes = [\n  \"Boolean\",\n  \"Number\",\n  \"String\",\n  \"Date\",\n  \"RegExp\",\n  \"Blob\",\n  \"FileList\",\n  \"ImageData\",\n  \"ImageBitmap\",\n  \"ArrayBuffer\",\n]\n\nconst maybeTypes = [\"Array\", \"Object\", \"Map\", \"Set\"]\n\nconst unevalException = (value) => {\n  return uneval(value)\n}\n\nconst readCoverage = () => window.__coverage__\n\nconst displayErrorInConsole = (error) => {\n  console.error(error)\n}\n",
    "export const stackToString = (stack, { error, indent }) => {\n  const name = error.name || \"Error\"\n  const message = error.message || \"\"\n  const stackString = stack.map((callSite) => `\\n${indent}at ${callSite}`).join(\"\")\n\n  return `${name}: ${message}${stackString}`\n}\n",
    "export const parseDataUrl = (dataUrl) => {\n  const afterDataProtocol = dataUrl.slice(\"data:\".length)\n  const commaIndex = afterDataProtocol.indexOf(\",\")\n  const beforeComma = afterDataProtocol.slice(0, commaIndex)\n\n  let mediaType\n  let base64Flag\n  if (beforeComma.endsWith(`;base64`)) {\n    mediaType = beforeComma.slice(0, -`;base64`.length)\n    base64Flag = true\n  } else {\n    mediaType = beforeComma\n    base64Flag = false\n  }\n\n  const afterComma = afterDataProtocol.slice(commaIndex + 1)\n  return {\n    mediaType: mediaType === \"\" ? \"text/plain;charset=US-ASCII\" : mediaType,\n    base64Flag,\n    data: afterComma,\n  }\n}\n\nexport const stringifyDataUrl = ({ mediaType, base64Flag = true, data }) => {\n  if (!mediaType || mediaType === \"text/plain;charset=US-ASCII\") {\n    // can be a buffer or a string, hence check on data.length instead of !data or data === ''\n    if (data.length === 0) {\n      return `data:,`\n    }\n    if (base64Flag) {\n      return `data:,${data}`\n    }\n    return `data:,${dataToBase64(data)}`\n  }\n  if (base64Flag) {\n    return `data:${mediaType};base64,${dataToBase64(data)}`\n  }\n  return `data:${mediaType},${data}`\n}\n\nexport const dataUrlToRawData = ({ base64Flag, data }) => {\n  return base64Flag ? base64ToString(data) : data\n}\n\nexport const dataToBase64 =\n  typeof window === \"object\" ? window.atob : (data) => Buffer.from(data).toString(\"base64\")\n\nexport const base64ToString =\n  typeof window === \"object\"\n    ? window.btoa\n    : (base64String) => Buffer.from(base64String, \"base64\").toString(\"utf8\")\n",
    "export const getJavaScriptSourceMappingUrl = (javaScriptSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(javaScriptSource, javascriptSourceMappingUrlCommentRegexp, (value) => {\n    sourceMappingUrl = value\n  })\n  return sourceMappingUrl\n}\n\nexport const setJavaScriptSourceMappingUrl = (javaScriptSource, sourceMappingFileUrl) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    javaScriptSource,\n    javascriptSourceMappingUrlCommentRegexp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl ? writeJavaScriptSourceMappingURL(sourceMappingFileUrl) : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n\n  return sourceMappingFileUrl\n    ? `${javaScriptSource}\n${writeJavaScriptSourceMappingURL(sourceMappingFileUrl)}`\n    : javaScriptSource\n}\n\nexport const getCssSourceMappingUrl = (cssSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(cssSource, cssSourceMappingUrlCommentRegExp, (value) => {\n    sourceMappingUrl = value\n  })\n  return sourceMappingUrl\n}\n\nexport const setCssSourceMappingUrl = (cssSource, sourceMappingFileUrl) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    cssSource,\n    cssSourceMappingUrlCommentRegExp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl ? writeCssSourceMappingUrl(sourceMappingFileUrl) : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n  return sourceMappingFileUrl\n    ? `${cssSource}\n${writeCssSourceMappingUrl(sourceMappingFileUrl)}`\n    : cssSource\n}\n\nconst javascriptSourceMappingUrlCommentRegexp = /\\/\\/ ?# ?sourceMappingURL=([^\\s'\"]+)/g\nconst cssSourceMappingUrlCommentRegExp = /\\/\\*# ?sourceMappingURL=([^\\s'\"]+) \\*\\//g\n\n// ${\"//#\"} is to avoid a parser thinking there is a sourceMappingUrl for this file\nconst writeJavaScriptSourceMappingURL = (value) => `${\"//#\"} sourceMappingURL=${value}`\nconst writeCssSourceMappingUrl = (value) => `/*# sourceMappingURL=${value} */`\n\nexport const sourcemapToBase64Url = (sourcemap) => {\n  const asBase64 = Buffer.from(JSON.stringify(sourcemap)).toString(\"base64\")\n  return `data:application/json;charset=utf-8;base64,${asBase64}`\n}\n\nconst replaceSourceMappingUrl = (source, regexp, callback) => {\n  let lastSourceMappingUrl\n  let matchSourceMappingUrl\n  while ((matchSourceMappingUrl = regexp.exec(source))) {\n    lastSourceMappingUrl = matchSourceMappingUrl\n  }\n  if (lastSourceMappingUrl) {\n    const index = lastSourceMappingUrl.index\n    const before = source.slice(0, index)\n    const after = source.slice(index)\n    const mappedAfter = after.replace(regexp, (match, firstGroup) => {\n      return callback(firstGroup)\n    })\n    return `${before}${mappedAfter}`\n  }\n  return source\n}\n",
    "export const isWindowsFilePath = (path) => startsWithWindowsDriveLetter(path) && path[2] === \"\\\\\"\n\nexport const startsWithWindowsDriveLetter = (string) => {\n  const firstChar = string[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n\n  const secondChar = string[1]\n  if (secondChar !== \":\") return false\n\n  return true\n}\n\nexport const windowsFilePathToUrl = (windowsFilePath) => {\n  return `file:///${replaceBackSlashesWithSlashes(windowsFilePath)}`\n}\n\nexport const replaceBackSlashesWithSlashes = (string) => string.replace(/\\\\/g, \"/\")\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { startsWithWindowsDriveLetter, windowsFilePathToUrl } from \"../filePathUtils.js\"\n\nexport const remapCallSite = async (\n  callSite,\n  { urlToSourcemapConsumer, resolveFile, readErrorStack, onFailure },\n) => {\n  if (callSite.isNative()) {\n    return callSite\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  const source = callSite.getFileName() || callSite.getScriptNameOrSourceURL()\n  if (source) {\n    const line = callSite.getLineNumber()\n    const column = callSite.getColumnNumber() - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      readErrorStack,\n      onFailure,\n    })\n\n    const callSiteClone = cloneCallSite(callSite)\n\n    callSiteClone.getFunctionName = () => originalPosition.name || callSite.getFunctionName()\n    callSiteClone.getFileName = () => originalPosition.source\n    callSiteClone.getLineNumber = () => originalPosition.line\n    callSiteClone.getColumnNumber = () => originalPosition.column + 1\n    callSiteClone.getScriptNameOrSourceURL = () => originalPosition.source\n\n    return callSiteClone\n  }\n\n  // Code called using eval() needs special handling\n  if (callSite.isEval()) {\n    const origin = callSite.getEvalOrigin()\n    if (origin) {\n      const callSiteClone = cloneCallSite(callSite)\n      const originalEvalOrigin = await remapEvalOrigin(origin, {\n        resolveFile,\n        urlToSourcemapConsumer,\n        readErrorStack,\n        onFailure,\n      })\n      callSiteClone.getEvalOrigin = () => originalEvalOrigin\n      return callSiteClone\n    }\n    return callSite\n  }\n\n  // If we get here then we were unable to change the source position\n  return callSite\n}\n\nconst cloneCallSite = (callSite) => {\n  const callSiteClone = {}\n  methods.forEach((name) => {\n    callSiteClone[name] = () => callSite[name]()\n  })\n  callSiteClone.toString = () => callSiteToFunctionCall(callSiteClone)\n\n  return callSiteClone\n}\n\nconst methods = [\n  \"getColumnNumber\",\n  \"getEvalOrigin\",\n  \"getFileName\",\n  \"getFunction\",\n  \"getFunctionName\",\n  \"getLineNumber\",\n  \"getMethodName\",\n  \"getPosition\",\n  \"getScriptNameOrSourceURL\",\n  \"getThis\",\n  \"getTypeName\",\n  \"isConstructor\",\n  \"isEval\",\n  \"isNative\",\n  \"isToplevel\",\n  \"toString\",\n]\n\nconst callSiteToFunctionCall = (callSite) => {\n  const fileLocation = callSiteToFileLocation(callSite)\n  const isConstructor = callSite.isConstructor()\n  const isMethodCall = !callSite.isToplevel() && !isConstructor\n\n  if (isMethodCall) {\n    return `${callSiteToMethodCall(callSite)} (${fileLocation})`\n  }\n\n  const functionName = callSite.getFunctionName()\n  if (isConstructor) {\n    return `new ${functionName || \"<anonymous>\"} (${fileLocation})`\n  }\n\n  if (functionName) {\n    return `${functionName} (${fileLocation})`\n  }\n\n  return `${fileLocation}`\n}\n\nconst callSiteToMethodCall = (callSite) => {\n  const functionName = callSite.getFunctionName()\n  const typeName = callSiteToType(callSite)\n\n  if (!functionName) {\n    return `${typeName}.<anonymous>`\n  }\n\n  const methodName = callSite.getMethodName()\n  const as = generateAs({ methodName, functionName })\n\n  if (typeName && !functionName.startsWith(typeName)) {\n    return `${typeName}.${functionName}${as}`\n  }\n\n  return `${functionName}${as}`\n}\n\nconst generateAs = ({ methodName, functionName }) => {\n  if (!methodName) return \"\"\n  if (functionName.indexOf(`.${methodName}`) === functionName.length - methodName.length - 1)\n    return \"\"\n  return ` [as ${methodName}]`\n}\n\nconst callSiteToType = (callSite) => {\n  const typeName = callSite.getTypeName()\n  // Fixes shim to be backward compatible with Node v0 to v4\n  if (typeName === \"[object Object]\") {\n    return \"null\"\n  }\n  return typeName\n}\n\nconst callSiteToFileLocation = (callSite) => {\n  if (callSite.isNative()) return \"native\"\n\n  const sourceFile = callSiteToSourceFile(callSite)\n  const lineNumber = callSite.getLineNumber()\n  if (lineNumber === null) {\n    return sourceFile\n  }\n\n  const columnNumber = callSite.getColumnNumber()\n  if (!columnNumber) {\n    return `${sourceFile}:${lineNumber}`\n  }\n\n  return `${sourceFile}:${lineNumber}:${columnNumber}`\n}\n\nconst callSiteToSourceFile = (callSite) => {\n  const fileName = callSite.getScriptNameOrSourceURL()\n\n  if (fileName) {\n    return fileName\n  }\n\n  // Source code does not originate from a file and is not native, but we\n  // can still get the source position inside the source string, e.g. in\n  // an eval string.\n  if (callSite.isEval()) {\n    return `${callSite.getEvalOrigin()}, <anonymous>`\n  }\n\n  return \"<anonymous>\"\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nconst remapEvalOrigin = async (origin, { resolveFile, urlToSourcemapConsumer, onFailure }) => {\n  // Most eval() calls are in this format\n  const topLevelEvalMatch = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin)\n  if (topLevelEvalMatch) {\n    const source = topLevelEvalMatch[2]\n    const line = Number(topLevelEvalMatch[3])\n    const column = topLevelEvalMatch[4] - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${topLevelEvalMatch[1]} (${originalPosition.source}:${originalPosition.line}:${\n      originalPosition.column + 1\n    })`\n  }\n\n  // Parse nested eval() calls using recursion\n  const nestedEvalMatch = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin)\n  if (nestedEvalMatch) {\n    const originalEvalOrigin = await remapEvalOrigin(nestedEvalMatch[2], {\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${nestedEvalMatch[1]} (${originalEvalOrigin})`\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin\n}\n\nconst remapSourcePosition = async ({\n  source,\n  line,\n  column,\n  resolveFile,\n  urlToSourcemapConsumer,\n  readErrorStack,\n  onFailure,\n}) => {\n  const position = { source, line, column }\n\n  const url = sourceToUrl(source, { resolveFile })\n  if (!url) return position\n\n  const sourceMapConsumer = await urlToSourcemapConsumer(url)\n\n  if (!sourceMapConsumer) return position\n\n  try {\n    const originalPosition = sourceMapConsumer.originalPositionFor(position)\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    const originalSource = originalPosition.source\n\n    if (originalSource === null) return position\n    originalPosition.source = resolveFile(originalSource, url, { type: \"file-original\" })\n\n    return originalPosition\n  } catch (e) {\n    onFailure(\n      createDetailedMessage(`error while remapping position.`, {\n        [\"error stack\"]: readErrorStack(e),\n        [\"source\"]: source,\n        [\"line\"]: line,\n        [\"column\"]: column,\n      }),\n    )\n    return position\n  }\n}\n\nconst sourceToUrl = (source, { resolveFile }) => {\n  if (startsWithScheme(source)) {\n    return source\n  }\n\n  // linux filesystem path\n  if (source[0] === \"/\") {\n    return resolveFile(source)\n  }\n\n  // be careful, due to babel or something like that we might receive paths like\n  // C:/directory/file.js (without backslashes we would expect on windows)\n  // In that case we consider C: is the signe we are on windows\n  // And I avoid to rely on process.platform === \"win32\" because this file might be executed in chrome\n  if (startsWithWindowsDriveLetter(source)) {\n    return windowsFilePathToUrl(source)\n  }\n\n  // I don't think we will ever encounter relative file in the stack trace\n  // but if it ever happens we are safe :)\n  if (source.slice(0, 2) === \"./\" || source.slice(0, 3) === \"../\") {\n    return resolveFile(source)\n  }\n\n  // we have received a \"bare specifier\" for the source\n  // it happens for internal/process/task_queues.js for instance\n  // if we do return resolveFile(source) it will be converted to\n  // file:///C:/project-directory/internal/process/task_queues.js in node\n  // and\n  // http://domain.com/internal/process/task_queues.js\n  // but the file will certainly be a 404\n  // and if not it won't be the right file anyway\n  // for now we assume \"bare specifier\" in the stack trace\n  // are internal files that are pointless to try to remap\n  return null\n}\n\nconst startsWithScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { parseDataUrl, dataUrlToRawData } from \"../dataUrl.utils.js\"\nimport { getJavaScriptSourceMappingUrl } from \"../sourceMappingURLUtils.js\"\nimport { remapCallSite } from \"./remapCallSite.js\"\n\nexport const getOriginalCallsites = async ({\n  stack,\n  resolveFile,\n  fetchFile,\n  SourceMapConsumer,\n  readErrorStack,\n  onFailure,\n}) => {\n  const urlToSourcemapConsumer = memoizeByFirstArgStringValue(async (stackTraceFileUrl) => {\n    try {\n      let text\n      try {\n        const fileResponse = await fetchFile(stackTraceFileUrl)\n        const { status } = fileResponse\n        if (status !== 200) {\n          if (status === 404) {\n            onFailure(`stack trace file not found at ${stackTraceFileUrl}`)\n          } else {\n            onFailure(\n              createDetailedMessage(`unexpected response fetching stack trace file.`, {\n                [\"response status\"]: status,\n                [\"response text\"]: fileResponse.body,\n                [\"stack trace file\"]: stackTraceFileUrl,\n              }),\n            )\n          }\n          return null\n        }\n        text = await fileResponse.text()\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(`error while fetching stack trace file.`, {\n            [\"fetch error stack\"]: readErrorStack(e),\n            [\"stack trace file\"]: stackTraceFileUrl,\n          }),\n        )\n\n        return null\n      }\n\n      const jsSourcemapUrl = getJavaScriptSourceMappingUrl(text)\n      if (!jsSourcemapUrl) {\n        return null\n      }\n\n      let sourcemapUrl\n      let sourcemapString\n      if (jsSourcemapUrl.startsWith(\"data:\")) {\n        sourcemapUrl = stackTraceFileUrl\n        sourcemapString = dataUrlToRawData(parseDataUrl(jsSourcemapUrl))\n      } else {\n        sourcemapUrl = resolveFile(jsSourcemapUrl, stackTraceFileUrl, {\n          type: \"source-map\",\n        })\n\n        try {\n          const sourcemapResponse = await fetchFile(sourcemapUrl)\n          const { status } = sourcemapResponse\n          if (status !== 200) {\n            if (status === 404) {\n              onFailure(`sourcemap file not found at ${sourcemapUrl}`)\n            } else {\n              onFailure(\n                createDetailedMessage(`unexpected response for sourcemap file.`, {\n                  [\"response status\"]: status,\n                  [\"response text\"]: await sourcemapResponse.text(),\n                  [\"sourcemap url\"]: sourcemapUrl,\n                }),\n              )\n            }\n            return null\n          }\n          sourcemapString = await sourcemapResponse.text()\n        } catch (e) {\n          onFailure(\n            createDetailedMessage(`error while fetching sourcemap.`, {\n              [\"fetch error stack\"]: readErrorStack(e),\n              [\"sourcemap url\"]: sourcemapUrl,\n            }),\n          )\n          return null\n        }\n      }\n\n      let sourceMap\n      try {\n        sourceMap = JSON.parse(sourcemapString)\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(`error while parsing sourcemap.`, {\n            [\"parse error stack\"]: readErrorStack(e),\n            [\"sourcemap url\"]: sourcemapUrl,\n          }),\n        )\n        return null\n      }\n\n      let { sourcesContent } = sourceMap\n\n      if (!sourcesContent) {\n        sourcesContent = []\n        sourceMap.sourcesContent = sourcesContent\n      }\n\n      let firstSourceMapSourceFailure = null\n\n      await Promise.all(\n        sourceMap.sources.map(async (source, index) => {\n          if (index in sourcesContent) return\n\n          const sourcemapSourceUrl = resolveFile(source, sourcemapUrl, { type: \"source\" })\n          try {\n            const sourceResponse = await fetchFile(sourcemapSourceUrl)\n            const { status } = sourceResponse\n            if (status !== 200) {\n              if (firstSourceMapSourceFailure) return\n\n              if (status === 404) {\n                firstSourceMapSourceFailure = createDetailedMessage(`sourcemap source not found.`, {\n                  [\"sourcemap source url\"]: sourcemapSourceUrl,\n                  [\"sourcemap url\"]: sourcemapUrl,\n                })\n                return\n              }\n              firstSourceMapSourceFailure = createDetailedMessage(\n                `unexpected response for sourcemap source.`,\n                {\n                  [\"response status\"]: status,\n                  [\"response text\"]: await sourceResponse.text(),\n                  [\"sourcemap source url\"]: sourcemapSourceUrl,\n                  [\"sourcemap url\"]: sourcemapUrl,\n                },\n              )\n              return\n            }\n\n            const sourceString = await sourceResponse.text()\n            sourcesContent[index] = sourceString\n          } catch (e) {\n            if (firstSourceMapSourceFailure) return\n            firstSourceMapSourceFailure = createDetailedMessage(\n              `error while fetching sourcemap source.`,\n              {\n                [\"fetch error stack\"]: readErrorStack(e),\n                [\"sourcemap source url\"]: sourcemapSourceUrl,\n                [\"sourcemap url\"]: sourcemapUrl,\n              },\n            )\n          }\n        }),\n      )\n\n      if (firstSourceMapSourceFailure) {\n        onFailure(firstSourceMapSourceFailure)\n        return null\n      }\n\n      return new SourceMapConsumer(sourceMap)\n    } catch (e) {\n      onFailure(\n        createDetailedMessage(\n          `error while preparing a sourceMap consumer for a stack trace file.`,\n          {\n            [\"error stack\"]: readErrorStack(e),\n            [\"stack trace file\"]: stackTraceFileUrl,\n          },\n        ),\n      )\n      return null\n    }\n  })\n\n  const originalCallsites = await Promise.all(\n    stack.map((callSite) =>\n      remapCallSite(callSite, {\n        resolveFile,\n        urlToSourcemapConsumer,\n        readErrorStack,\n        onFailure,\n      }),\n    ),\n  )\n  return originalCallsites\n}\n\nconst memoizeByFirstArgStringValue = (fn) => {\n  const stringValueCache = {}\n  return (firstArgValue) => {\n    if (firstArgValue in stringValueCache) return stringValueCache[firstArgValue]\n    const value = fn(firstArgValue)\n    stringValueCache[firstArgValue] = value\n    return value\n  }\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { stackToString } from \"./stackToString.js\"\nimport { getOriginalCallsites } from \"./getOriginalCallsites.js\"\n\nexport const installErrorStackRemapping = ({\n  fetchFile,\n  resolveFile,\n  SourceMapConsumer,\n  indent = \"  \",\n}) => {\n  if (typeof fetchFile !== \"function\") {\n    throw new TypeError(`fetchFile must be a function, got ${fetchFile}`)\n  }\n  if (typeof SourceMapConsumer !== \"function\") {\n    throw new TypeError(`sourceMapConsumer must be a function, got ${SourceMapConsumer}`)\n  }\n  if (typeof indent !== \"string\") {\n    throw new TypeError(`indent must be a string, got ${indent}`)\n  }\n\n  const errorRemappingCache = new WeakMap()\n  const errorRemapFailureCallbackMap = new WeakMap()\n\n  let installed = false\n  const previousPrepareStackTrace = Error.prepareStackTrace\n  const install = () => {\n    if (installed) return\n    installed = true\n    Error.prepareStackTrace = prepareStackTrace\n  }\n\n  const uninstall = () => {\n    if (!installed) return\n    installed = false\n    Error.prepareStackTrace = previousPrepareStackTrace\n  }\n\n  // ensure we do not use prepareStackTrace for thoose error\n  // otherwise we would recursively remap error stack\n  // and if the reason causing the failure is still here\n  // it would create an infinite loop\n  const readErrorStack = (error) => {\n    uninstall()\n    const stack = error.stack\n    install()\n    return stack\n  }\n\n  const prepareStackTrace = (error, stack) => {\n    const onFailure = (failureData) => {\n      const failureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (failureCallbackArray) {\n        failureCallbackArray.forEach((callback) => callback(failureData))\n      }\n    }\n\n    const stackRemappingPromise = getOriginalCallsites({\n      stack,\n      error,\n      resolveFile,\n      fetchFile: memoizeFetch(fetchFile),\n      SourceMapConsumer,\n      readErrorStack,\n      indent,\n      onFailure,\n    })\n    errorRemappingCache.set(error, stackRemappingPromise)\n\n    return stackToString(stack, { error, indent })\n  }\n\n  const getErrorOriginalStackString = async (\n    error,\n    {\n      onFailure = (message) => {\n        console.warn(message)\n      },\n    } = {},\n  ) => {\n    if (onFailure) {\n      const remapFailureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (remapFailureCallbackArray) {\n        errorRemapFailureCallbackMap.set(error, [...remapFailureCallbackArray, onFailure])\n      } else {\n        errorRemapFailureCallbackMap.set(error, [onFailure])\n      }\n    }\n\n    // ensure Error.prepareStackTrace gets triggered by reading error.stack now\n    const { stack } = error\n    const promise = errorRemappingCache.get(error)\n\n    if (promise) {\n      try {\n        const originalCallsites = await promise\n        errorRemapFailureCallbackMap.get(error)\n\n        const firstCall = originalCallsites[0]\n        if (firstCall) {\n          Object.assign(error, {\n            filename: firstCall.getFileName(),\n            lineno: firstCall.getLineNumber(),\n            columnno: firstCall.getColumnNumber(),\n          })\n        }\n        return stackToString(originalCallsites, { error, indent })\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(`error while computing original stack.`, {\n            [\"stack from error while computing\"]: readErrorStack(e),\n            [\"stack from error to remap\"]: stack,\n          }),\n        )\n        return stack\n      }\n    }\n\n    return stack\n  }\n\n  install()\n\n  return { getErrorOriginalStackString, uninstall }\n}\n\nconst memoizeFetch = (fetchUrl) => {\n  const urlCache = {}\n  return async (url) => {\n    if (url in urlCache) {\n      return urlCache[url]\n    }\n    const responsePromise = fetchUrl(url)\n    urlCache[url] = responsePromise\n    return responsePromise\n  }\n}\n",
    "import { installErrorStackRemapping } from \"./installErrorStackRemapping.js\"\n\nexport const installBrowserErrorStackRemapping = (options = {}) =>\n  installErrorStackRemapping({\n    fetchFile: async (url) => {\n      // browser having Error.captureStackTrace got window.fetch\n      // and this executes only when Error.captureStackTrace exists\n      // so no need for polyfill or whatever here\n      const response = await window.fetch(url)\n      // we read response test before anything because once memoized fetch\n      // gets annoying preventing you to read\n      // body multiple times, even using response.clone()\n      const text = await response.text()\n      return {\n        status: response.status,\n        url: response.url,\n        statusText: response.statusText,\n        headers: responseToHeaders(response),\n        text: () => text,\n        json: response.json.bind(response),\n        blob: response.blob.bind(response),\n        arrayBuffer: response.arrayBuffer.bind(response),\n      }\n    },\n    resolveFile: (specifier, importer = window.location.href) => {\n      // browsers having Error.captureStrackTrace got window.URL\n      // and this executes only when Error.captureStackTrace exists\n      return String(new window.URL(specifier, importer))\n    },\n    ...options,\n  })\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { fetchUrl } from \"./fetch-browser.js\"\n\nexport const fetchAndEvalUsingFetch = async (url) => {\n  const response = await fetchUrl(url)\n\n  if (response.status >= 200 && response.status <= 299) {\n    const text = await response.text()\n    // eslint-disable-next-line no-eval\n    window.eval(appendSourceURL(text, url))\n  } else {\n    const text = await response.text()\n    throw new Error(\n      createDetailedMessage(`Unexpected response for script.`, {\n        [\"script url\"]: url,\n        [\"response body\"]: text,\n        [\"response status\"]: response.status,\n      }),\n    )\n  }\n}\n\nconst appendSourceURL = (code, sourceURL) => {\n  return `${code}\n${\"//#\"} sourceURL=${sourceURL}`\n}\n",
    "import { createBrowserRuntime } from \"../runtime/createBrowserRuntime/createBrowserRuntime.js\"\nimport { installBrowserErrorStackRemapping } from \"../error-stack-remapping/installBrowserErrorStackRemapping.js\"\nimport { fetchUrl } from \"../fetch-browser.js\"\nimport { fetchAndEvalUsingFetch } from \"../fetchAndEvalUsingFetch.js\"\nimport { memoize } from \"../memoize.js\"\n\nconst getNavigationStartTime = () => {\n  try {\n    return window.performance.timing.navigationStart\n  } catch (e) {\n    return Date.now()\n  }\n}\n\nconst navigationStartTime = getNavigationStartTime()\n\nconst readyPromise = new Promise((resolve) => {\n  if (document.readyState === \"complete\") {\n    resolve()\n  } else {\n    const loadCallback = () => {\n      window.removeEventListener(\"load\", loadCallback)\n      resolve()\n    }\n    window.addEventListener(\"load\", loadCallback)\n  }\n})\n\nconst fileExecutionMap = {}\n\nconst executionResultPromise = readyPromise.then(async () => {\n  const fileExecutionResultMap = {}\n  const fileExecutionResultPromises = []\n  let status = \"completed\"\n  let exceptionSource = \"\"\n  Object.keys(fileExecutionMap).forEach((key) => {\n    fileExecutionResultMap[key] = null // to get always same order for Object.keys(executionResult)\n    const fileExecutionResultPromise = fileExecutionMap[key]\n    fileExecutionResultPromises.push(fileExecutionResultPromise)\n    fileExecutionResultPromise.then((fileExecutionResult) => {\n      fileExecutionResultMap[key] = fileExecutionResult\n      if (fileExecutionResult.status === \"errored\") {\n        status = \"errored\"\n        exceptionSource = fileExecutionResult.exceptionSource\n      }\n    })\n  })\n  await Promise.all(fileExecutionResultPromises)\n\n  return {\n    status,\n    ...(status === \"errored\" ? { exceptionSource } : {}),\n    startTime: navigationStartTime,\n    endTime: Date.now(),\n    fileExecutionResultMap,\n  }\n})\n\nconst importFile = (specifier) => {\n  // si on a déja importer ce fichier ??\n  // if (specifier in fileExecutionMap) {\n\n  // }\n\n  const { currentScript } = document\n\n  const fileExecutionResultPromise = (async () => {\n    const browserRuntime = await getBrowserRuntime()\n    const executionResult = await browserRuntime.executeFile(specifier, {})\n    if (executionResult.status === \"errored\") {\n      // eslint-disable-next-line no-eval\n      const originalError = window.eval(executionResult.exceptionSource)\n      if (originalError.code === \"NETWORK_FAILURE\") {\n        if (currentScript) {\n          const errorEvent = new Event(\"error\")\n          currentScript.dispatchEvent(errorEvent)\n        }\n      } else {\n        const { parsingError } = originalError\n        const globalErrorEvent = new Event(\"error\")\n        if (parsingError) {\n          globalErrorEvent.filename = parsingError.filename\n          globalErrorEvent.lineno = parsingError.lineNumber\n          globalErrorEvent.message = parsingError.message\n          globalErrorEvent.colno = parsingError.columnNumber\n        } else {\n          globalErrorEvent.filename = originalError.filename\n          globalErrorEvent.lineno = originalError.lineno\n          globalErrorEvent.message = originalError.message\n          globalErrorEvent.colno = originalError.columnno\n        }\n        window.dispatchEvent(globalErrorEvent)\n      }\n    }\n    return executionResult\n  })()\n\n  fileExecutionMap[specifier] = fileExecutionResultPromise\n  return fileExecutionResultPromise\n}\n\nconst getBrowserRuntime = memoize(async () => {\n  const compileServerOrigin = document.location.origin\n  const compileMetaResponse = await fetchUrl(`${compileServerOrigin}/.jsenv/compile-meta.json`, {\n    headers: {\n      \"x-jsenv\": true,\n    },\n  })\n  const compileMeta = await compileMetaResponse.json()\n  const { outDirectoryRelativeUrl, errorStackRemapping } = compileMeta\n  const outDirectoryUrl = `${compileServerOrigin}/${outDirectoryRelativeUrl}`\n  const afterOutDirectory = document.location.href.slice(outDirectoryUrl.length)\n  const parts = afterOutDirectory.split(\"/\")\n  const compileId = parts[0]\n  const remaining = parts.slice(1).join(\"/\")\n  const htmlFileRelativeUrl = remaining\n\n  const browserRuntime = await createBrowserRuntime({\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n    compileId,\n    htmlFileRelativeUrl,\n  })\n\n  if (errorStackRemapping && Error.captureStackTrace) {\n    const { sourcemapMainFileRelativeUrl, sourcemapMappingFileRelativeUrl } = compileMeta\n\n    await fetchAndEvalUsingFetch(`${compileServerOrigin}/${sourcemapMainFileRelativeUrl}`)\n    const { SourceMapConsumer } = window.sourceMap\n    SourceMapConsumer.initialize({\n      \"lib/mappings.wasm\": `${compileServerOrigin}/${sourcemapMappingFileRelativeUrl}`,\n    })\n    const { getErrorOriginalStackString } = installBrowserErrorStackRemapping({\n      SourceMapConsumer,\n    })\n\n    const errorTransform = async (error) => {\n      // code can throw something else than an error\n      // in that case return it unchanged\n      if (!error || !(error instanceof Error)) return error\n      const originalStack = await getErrorOriginalStackString(error)\n      error.stack = originalStack\n      return error\n    }\n\n    const executeFile = browserRuntime.executeFile\n    browserRuntime.executeFile = (file, options = {}) => {\n      return executeFile(file, { errorTransform, ...options })\n    }\n  }\n\n  return browserRuntime\n})\n\nwindow.__jsenv__ = {\n  executionResultPromise,\n  importFile,\n}\n"
  ],
  "names": [
    "obj",
    "key",
    "value",
    "Object",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "target",
    "i",
    "arguments",
    "length",
    "source",
    "ownKeys",
    "forEach",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "getOwnPropertyDescriptor",
    "object",
    "enumerableOnly",
    "keys",
    "getOwnPropertySymbols",
    "symbols",
    "filter",
    "sym",
    "push",
    "apply",
    "arrayLikeToArray",
    "arr",
    "len",
    "arr2",
    "Array",
    "isArray",
    "iter",
    "Symbol",
    "iterator",
    "from",
    "unsupportedIterableToArray",
    "o",
    "minLen",
    "n",
    "prototype",
    "toString",
    "call",
    "slice",
    "constructor",
    "name",
    "test",
    "TypeError",
    "arrayWithoutHoles",
    "iterableToArray",
    "nonIterableSpread",
    "nativeTypeOf",
    "customTypeOf",
    "assertImportMap",
    "type",
    "hasScheme",
    "string",
    "urlToScheme",
    "urlString",
    "colonIndex",
    "indexOf",
    "urlToPathname",
    "ressourceToPathname",
    "urlToRessource",
    "scheme",
    "afterProtocol",
    "pathnameSlashIndex",
    "ressource",
    "searchSeparatorIndex",
    "urlToOrigin",
    "secondProtocolSlashIndex",
    "pathnameToParentPathname",
    "pathname",
    "slashLastIndex",
    "lastIndexOf",
    "resolveUrl",
    "specifier",
    "baseUrl",
    "writeBaseUrlMustBeAString",
    "Error",
    "writeBaseUrlMustBeAbsolute",
    "writeBaseUrlRequired",
    "baseOrigin",
    "basePathname",
    "baseDirectoryPathname",
    "unresolvedPathname",
    "importerFolders",
    "split",
    "pop",
    "resolvedPathname",
    "join",
    "tryUrlResolution",
    "url",
    "result",
    "resolveSpecifier",
    "importer",
    "startsWith",
    "sortImports",
    "imports",
    "importsSorted",
    "sort",
    "compareLengthOrLocaleCompare",
    "sortScopes",
    "scopes",
    "scopesSorted",
    "scopeName",
    "a",
    "b",
    "localeCompare",
    "normalizeImportMap",
    "importMap",
    "formulateBaseUrlMustBeAString",
    "normalizeImports",
    "undefined",
    "normalizeScopes",
    "importsNormalized",
    "address",
    "console",
    "warn",
    "formulateAddressMustBeAString",
    "specifierResolved",
    "addressUrl",
    "formulateAdressResolutionFailed",
    "endsWith",
    "formulateAddressUrlRequiresTrailingSlash",
    "scopesNormalized",
    "scope",
    "scopeValue",
    "scopeUrl",
    "formulateScopeResolutionFailed",
    "scopeValueNormalized",
    "addressURL",
    "isComposite",
    "compositeWellKnownMap",
    "WeakMap",
    "primitiveWellKnownMap",
    "Map",
    "getCompositeGlobalPath",
    "get",
    "getPrimitiveGlobalPath",
    "visitGlobalObject",
    "visitValue",
    "path",
    "has",
    "set",
    "visitProperty",
    "property",
    "descriptor",
    "e",
    "propertyValue",
    "getOwnPropertyNames",
    "symbol",
    "window",
    "global",
    "decompose",
    "mainValue",
    "functionAllowed",
    "prototypeStrict",
    "valueMap",
    "recipeArray",
    "valueToIdentifier",
    "existingIdentifier",
    "identifierForPrimitive",
    "identifier",
    "identifierForNewValue",
    "primitiveToRecipe",
    "Promise",
    "createPromiseAreNotSupportedMessage",
    "WeakSet",
    "createWeakSetAreNotSupportedMessage",
    "createWeakMapAreNotSupportedMessage",
    "createForbiddenFunctionMessage",
    "identifierForComposite",
    "compositeGlobalPath",
    "createGlobalReferenceRecipe",
    "propertyDescriptionArray",
    "propertyName",
    "propertyDescriptor",
    "propertyNameIdentifier",
    "propertyDescription",
    "computePropertyDescription",
    "symbolDescriptionArray",
    "symbolIdentifier",
    "methodDescriptionArray",
    "computeMethodDescriptionArray",
    "extensible",
    "isExtensible",
    "createCompositeRecipe",
    "propertyNameOrSymbol",
    "createForbiddenPropertySetterMessage",
    "createForbiddenPropertyGetterMessage",
    "getIdentifier",
    "String",
    "setIdentifier",
    "valueIdentifier",
    "Set",
    "callArray",
    "entryValue",
    "index",
    "entryValueIdentifier",
    "methodNameIdentifier",
    "entryKey",
    "entryKeyIdentifier",
    "find",
    "existingValue",
    "is",
    "nextIdentifier",
    "currentIdentifier",
    "parseInt",
    "mainIdentifier",
    "prototypeValueToIdentifier",
    "prototypeValue",
    "prototypeExistingIdentifier",
    "prototypeIdentifier",
    "prototypeGlobalPath",
    "createUnknownPrototypeMessage",
    "getPrototypeOf",
    "identifierForValueOf",
    "valueOf",
    "valueOfReturnValue",
    "createUnexpectedValueOfReturnValueMessage",
    "recipe",
    "valueOfIdentifier",
    "RegExp",
    "symbolToRecipe",
    "createPimitiveRecipe",
    "globalSymbolKey",
    "keyFor",
    "createGlobalSymbolRecipe",
    "symbolGlobalPath",
    "createUnknownSymbolMessage",
    "sortRecipe",
    "findInRecipePrototypeChain",
    "callback",
    "currentRecipe",
    "recipeArrayOrdered",
    "leftRecipe",
    "rightRecipe",
    "leftType",
    "rightType",
    "rightRecipeIsInLeftRecipePrototypeChain",
    "recipeCandidate",
    "leftRecipeIsInRightRecipePrototypeChain",
    "leftIndex",
    "rightIndex",
    "escapeString",
    "j",
    "escapedString",
    "char",
    "escapedChar",
    "uneval",
    "recipeArraySorted",
    "variableNameMap",
    "indexSorted",
    "identifierToVariableName",
    "recipeToSetupSource",
    "primitiveRecipeToSetupSource",
    "globalSymbolRecipeToSetupSource",
    "globalReferenceRecipeToSetupSource",
    "compositeRecipeToSetupSource",
    "pathSource",
    "map",
    "part",
    "prototypeConstructor",
    "recipeVariableName",
    "recipeToMutateSource",
    "compositeRecipeToMutateSource",
    "mutateSource",
    "generateDefinePropertySource",
    "generateMethodCallSource",
    "generatePreventExtensionSource",
    "propertyNameOrSymbolIdentifier",
    "propertyOrSymbolVariableName",
    "propertyDescriptorSource",
    "generatePropertyDescriptorSource",
    "methodCallSource",
    "methodVariableName",
    "argumentIdentifiers",
    "argumentVariableNames",
    "argumentIdentifier",
    "memoize",
    "compute",
    "memoized",
    "memoizedValue",
    "fnWithMemoization",
    "forget",
    "pathnameToExtension",
    "dotLastIndex",
    "applyImportMap",
    "writeSpecifierMustBeAString",
    "writeImporterMustBeAString",
    "writeImporterMustBeAbsolute",
    "specifierUrl",
    "specifierNormalized",
    "scopeKeyMatching",
    "scopeKey",
    "specifierIsPrefixOf",
    "remappingFromScopeImports",
    "applyImports",
    "remappingFromImports",
    "writeBareSpecifierMustBeRemapped",
    "importKeyArray",
    "importKey",
    "importValue",
    "afterImportKey",
    "specifierHref",
    "href",
    "resolveImport",
    "defaultExtension",
    "applyDefaultExtension",
    "extension",
    "importerPathname",
    "importerExtension",
    "errMsg",
    "errCode",
    "msg",
    "hasSymbol",
    "hasSelf",
    "self",
    "hasDocument",
    "document",
    "envGlobal",
    "baseEl",
    "querySelector",
    "location",
    "lastSepIndex",
    "backslashRegEx",
    "resolveIfNotPlainOrUrl",
    "relUrl",
    "parentUrl",
    "replace",
    "parentProtocol",
    "segmented",
    "output",
    "segmentIndex",
    "resolveAndComposePackages",
    "packages",
    "outPackages",
    "parentMap",
    "p",
    "resolvedLhs",
    "rhs",
    "mapped",
    "resolveImportMap",
    "targetWarning",
    "resolveAndComposeImportMap",
    "json",
    "outMap",
    "u",
    "resolvedScope",
    "depcache",
    "integrity",
    "getMatch",
    "matchObj",
    "sepIndex",
    "segment",
    "applyPackages",
    "id",
    "pkgName",
    "pkg",
    "code",
    "match",
    "resolvedOrPlain",
    "packageResolution",
    "toStringTag",
    "REGISTRY",
    "SystemJS",
    "systemJSPrototype",
    "import",
    "loader",
    "resolve",
    "prepareImport",
    "then",
    "load",
    "getOrCreateLoad",
    "C",
    "topLevelLoad",
    "createContext",
    "parentId",
    "loadToId",
    "triggerOnload",
    "err",
    "isErrSource",
    "onload",
    "d",
    "lastRegister",
    "register",
    "deps",
    "declare",
    "getRegister",
    "_lastRegister",
    "firstParentUrl",
    "importerSetters",
    "ns",
    "create",
    "instantiatePromise",
    "instantiate",
    "registration",
    "_export",
    "h",
    "changed",
    "__esModule",
    "setter",
    "declared",
    "importId",
    "meta",
    "execute",
    "setters",
    "linkPromise",
    "instantiation",
    "all",
    "dep",
    "depId",
    "depLoad",
    "I",
    "depLoads",
    "catch",
    "er",
    "L",
    "E",
    "instantiateAll",
    "loaded",
    "postOrderExec",
    "nullContext",
    "freeze",
    "seen",
    "depLoadPromises",
    "depLoadPromise",
    "doExec",
    "execPromise",
    "System",
    "importMapPromise",
    "processFirst",
    "doProcessScripts",
    "processScripts",
    "addEventListener",
    "querySelectorAll",
    "script",
    "sp",
    "src",
    "fetchPromise",
    "fetch",
    "res",
    "text",
    "innerHTML",
    "extendImportMap",
    "newMapText",
    "newMapUrl",
    "newMap",
    "JSON",
    "parse",
    "evt",
    "lastWindowErrorUrl",
    "filename",
    "lastWindowError",
    "error",
    "origin",
    "createScript",
    "createElement",
    "async",
    "crossOrigin",
    "lastAutoImportUrl",
    "lastAutoImportDeps",
    "lastAutoImportTimeout",
    "autoImportCandidates",
    "systemRegister",
    "readyState",
    "scripts",
    "lastScript",
    "setTimeout",
    "autoImportRegistration",
    "reject",
    "head",
    "removeChild",
    "clearTimeout",
    "appendChild",
    "shouldFetch",
    "jsContentTypeRegEx",
    "parent",
    "credentials",
    "ok",
    "status",
    "statusText",
    "contentType",
    "headers",
    "eval",
    "throwUnresolved",
    "systemInstantiate",
    "preloads",
    "importScripts",
    "valueInstall",
    "previous",
    "createDetailedMessage",
    "message",
    "details",
    "direct",
    "body",
    "recover",
    "f",
    "args",
    "fromFunctionReturningNamespace",
    "fn",
    "data",
    "fromFunctionReturningRegisteredModule",
    "namespace",
    "stack",
    "getModuleDetails",
    "fromUrl",
    "importerUrl",
    "fetchSource",
    "instantiateJavaScript",
    "compileServerOrigin",
    "outDirectoryRelativeUrl",
    "moduleResponse",
    "notFound",
    "bodyAsJson",
    "parsingError",
    "bodyAsText",
    "default",
    "contentTypeShouldBeReadAsText",
    "relativeUrl",
    "tryToFindProjectRelativeUrl",
    "importerRelativeUrl",
    "file",
    "afterOrigin",
    "afterCompileDirectory",
    "nextSlashIndex",
    "afterCompileId",
    "evalSource",
    "appendSourceURL",
    "sourceURL",
    "GLOBAL_SPECIFIER",
    "createBrowserSystem",
    "importDefaultExtension",
    "browserSystem",
    "responseUrl",
    "uninstallSystemGlobal",
    "displayErrorInDocument",
    "title",
    "theme",
    "errorToHTML",
    "messageHTML",
    "escapeHtml",
    "css",
    "html",
    "removeJsenvConsole",
    "appendHMTLInside",
    "onclick",
    "captureStackTrace",
    "stringify",
    "htmlWithCorrectLineBreaks",
    "htmlWithLinks",
    "stringToStringWithLink",
    "transform",
    "linkHTML",
    "lastChar",
    "endsWithSeparationChar",
    "lineAndColumnPattern",
    "lineAndColumMatch",
    "lineAndColumnString",
    "lineNumber",
    "columnNumber",
    "link",
    "linePattern",
    "lineMatch",
    "lineString",
    "parentNode",
    "temoraryParent",
    "transferChildren",
    "fromNode",
    "toNode",
    "childNodes",
    "c",
    "Notification",
    "_async",
    "displayErrorNotificationNotAvailable",
    "displayErrorNotificationImplementation",
    "icon",
    "requestPermission",
    "permission",
    "notification",
    "lang",
    "focus",
    "displayErrorNotification",
    "excluded",
    "sourceKeys",
    "objectWithoutPropertiesLoose",
    "sourceSymbolKeys",
    "propertyIsEnumerable",
    "createCancellationToken",
    "unregister",
    "throwIfRequested",
    "cancellationRequested",
    "fetchUsingXHR",
    "cancellationToken",
    "method",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "settled",
    "cleanup",
    "ontimeout",
    "onerror",
    "onreadystatechange",
    "createRequestError",
    "cancelError",
    "abort",
    "open",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseURL",
    "responseStatus",
    "responseStatusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "FileReader",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "promise",
    "rej",
    "originSameAsGlobalOrigin",
    "globalOrigin",
    "hrefToOrigin",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "line",
    "parts",
    "shift",
    "toLowerCase",
    "hrefToScheme",
    "DataView",
    "isView",
    "viewClasses",
    "includes",
    "form",
    "bytes",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "fromCharCode",
    "byteLength",
    "_await",
    "fetchNative",
    "mode",
    "options",
    "abortController",
    "AbortController",
    "reason",
    "signal",
    "responseToHeaders",
    "_catch",
    "fetchUrl",
    "memoizedCreateBrowserSystem",
    "createBrowserRuntime",
    "compileId",
    "htmlFileRelativeUrl",
    "fetchJson",
    "outDirectoryUrl",
    "envUrl",
    "URL",
    "compileDirectoryRelativeUrl",
    "importmapScript",
    "importmapRaw",
    "importmapFileUrl",
    "importmapFileResponse",
    "textContent",
    "importFile",
    "executeFile",
    "transferableNamespace",
    "errorExposureInConsole",
    "errorExposureInNotification",
    "errorExposureInDocument",
    "executionExposureOnWindow",
    "errorTransform",
    "executionResult",
    "makeNamespaceTransferable",
    "coverageMap",
    "readCoverage",
    "transformedError",
    "displayErrorInConsole",
    "exceptionSource",
    "unevalException",
    "__executionResult__",
    "isTransferable",
    "hideNonTransferableValue",
    "seenArray",
    "visit",
    "constructorName",
    "supportedTypes",
    "maybe",
    "maybeTypes",
    "visited",
    "every",
    "values",
    "__coverage__",
    "stackToString",
    "indent",
    "stackString",
    "callSite",
    "parseDataUrl",
    "dataUrl",
    "afterDataProtocol",
    "commaIndex",
    "beforeComma",
    "mediaType",
    "base64Flag",
    "afterComma",
    "dataUrlToRawData",
    "base64ToString",
    "dataToBase64",
    "atob",
    "Buffer",
    "btoa",
    "base64String",
    "getJavaScriptSourceMappingUrl",
    "javaScriptSource",
    "sourceMappingUrl",
    "replaceSourceMappingUrl",
    "javascriptSourceMappingUrlCommentRegexp",
    "regexp",
    "lastSourceMappingUrl",
    "matchSourceMappingUrl",
    "exec",
    "before",
    "after",
    "mappedAfter",
    "firstGroup",
    "startsWithWindowsDriveLetter",
    "firstChar",
    "secondChar",
    "windowsFilePathToUrl",
    "windowsFilePath",
    "replaceBackSlashesWithSlashes",
    "remapCallSite",
    "urlToSourcemapConsumer",
    "resolveFile",
    "readErrorStack",
    "onFailure",
    "isNative",
    "getFileName",
    "getScriptNameOrSourceURL",
    "getLineNumber",
    "column",
    "getColumnNumber",
    "remapSourcePosition",
    "originalPosition",
    "callSiteClone",
    "cloneCallSite",
    "getFunctionName",
    "isEval",
    "getEvalOrigin",
    "remapEvalOrigin",
    "originalEvalOrigin",
    "methods",
    "callSiteToFunctionCall",
    "fileLocation",
    "callSiteToFileLocation",
    "isConstructor",
    "isMethodCall",
    "isToplevel",
    "callSiteToMethodCall",
    "functionName",
    "typeName",
    "callSiteToType",
    "methodName",
    "getMethodName",
    "as",
    "generateAs",
    "getTypeName",
    "sourceFile",
    "callSiteToSourceFile",
    "fileName",
    "topLevelEvalMatch",
    "Number",
    "nestedEvalMatch",
    "position",
    "sourceToUrl",
    "sourceMapConsumer",
    "originalPositionFor",
    "originalSource",
    "startsWithScheme",
    "getOriginalCallsites",
    "fetchFile",
    "SourceMapConsumer",
    "memoizeByFirstArgStringValue",
    "stackTraceFileUrl",
    "fileResponse",
    "jsSourcemapUrl",
    "sourcemapUrl",
    "sourcemapString",
    "sourcemapResponse",
    "sourceMap",
    "sourcesContent",
    "firstSourceMapSourceFailure",
    "sources",
    "sourcemapSourceUrl",
    "sourceResponse",
    "sourceString",
    "stringValueCache",
    "firstArgValue",
    "installErrorStackRemapping",
    "errorRemappingCache",
    "errorRemapFailureCallbackMap",
    "installed",
    "previousPrepareStackTrace",
    "prepareStackTrace",
    "install",
    "uninstall",
    "failureData",
    "failureCallbackArray",
    "stackRemappingPromise",
    "memoizeFetch",
    "getErrorOriginalStackString",
    "remapFailureCallbackArray",
    "originalCallsites",
    "firstCall",
    "assign",
    "lineno",
    "columnno",
    "urlCache",
    "responsePromise",
    "installBrowserErrorStackRemapping",
    "bind",
    "fetchAndEvalUsingFetch",
    "getNavigationStartTime",
    "performance",
    "timing",
    "navigationStart",
    "Date",
    "now",
    "navigationStartTime",
    "_call",
    "readyPromise",
    "loadCallback",
    "removeEventListener",
    "_invoke",
    "fileExecutionMap",
    "executionResultPromise",
    "fileExecutionResultMap",
    "fileExecutionResultPromises",
    "fileExecutionResultPromise",
    "fileExecutionResult",
    "startTime",
    "endTime",
    "currentScript",
    "getBrowserRuntime",
    "browserRuntime",
    "originalError",
    "errorEvent",
    "Event",
    "dispatchEvent",
    "globalErrorEvent",
    "colno",
    "compileMetaResponse",
    "compileMeta",
    "errorStackRemapping",
    "afterOutDirectory",
    "remaining",
    "sourcemapMainFileRelativeUrl",
    "sourcemapMappingFileRelativeUrl",
    "initialize",
    "originalStack",
    "__jsenv__"
  ],
  "mappings": "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"
}