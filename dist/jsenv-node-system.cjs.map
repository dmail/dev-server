{
  "version": 3,
  "file": "jsenv-node-system.cjs",
  "sources": [
    "../helpers/babel/defineProperty/defineProperty.js",
    "../helpers/babel/objectSpread2/objectSpread2.js",
    "../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../helpers/import-meta/import-meta-url-commonjs.js",
    "../src/internal/require.js",
    "../src/internal/fetchUrl.js",
    "../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../helpers/babel/arrayWithoutHoles/arrayWithoutHoles.js",
    "../helpers/babel/iterableToArray/iterableToArray.js",
    "../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../helpers/babel/nonIterableSpread/nonIterableSpread.js",
    "../helpers/babel/toConsumableArray/toConsumableArray.js",
    "../src/internal/error-stack-remapping/stackToString.js",
    "../helpers/babel/typeof/typeof.js",
    "../src/internal/dataUrl.utils.js",
    "../src/internal/sourceMappingURLUtils.js",
    "../src/internal/filePathUtils.js",
    "../src/internal/error-stack-remapping/remapCallSite.js",
    "../src/internal/error-stack-remapping/getOriginalCallsites.js",
    "../src/internal/error-stack-remapping/installErrorStackRemapping.js",
    "../src/internal/error-stack-remapping/installNodeErrorStackRemapping.js",
    "../helpers/babel/arrayWithHoles/arrayWithHoles.js",
    "../helpers/babel/iterableToArrayLimit/iterableToArrayLimit.js",
    "../helpers/babel/nonIterableRest/nonIterableRest.js",
    "../helpers/babel/slicedToArray/slicedToArray.js",
    "../src/internal/memoize.js",
    "../src/internal/runtime/createNodeRuntime/fetchSource.js",
    "../src/internal/CONSTANTS.js",
    "../src/internal/runtime/computeCompileIdFromGroupId.js",
    "../src/internal/runtime/detectNode/detectNode.js",
    "../src/internal/semantic-versioning/valueToVersion.js",
    "../src/internal/semantic-versioning/versionCompare.js",
    "../src/internal/semantic-versioning/versionIsBelow.js",
    "../src/internal/semantic-versioning/findHighestVersion.js",
    "../src/internal/runtime/resolveGroup.js",
    "../src/internal/runtime/resolveNodeGroup.js",
    "../src/internal/runtime/s.js",
    "../src/internal/runtime/module-registration.js",
    "../src/internal/runtime/valueInstall.js",
    "../src/internal/runtime/createNodeRuntime/isNativeNodeModuleBareSpecifier.js",
    "../src/internal/runtime/createNodeRuntime/evalSource.js",
    "../src/internal/runtime/createNodeRuntime/createNodeSystem.js",
    "../src/internal/runtime/createNodeRuntime/createNodeRuntime.js",
    "../src/nodeRuntime.js",
    "../src/internal/node-launcher/node-js-file.js"
  ],
  "sourcesContent": [
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nexport default function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    // eslint-disable-next-line prefer-rest-params\n    var source = arguments[i] === null ? {} : arguments[i]\n    if (i % 2) {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n\n// This function is different to \"Reflect.ownKeys\". The enumerableOnly\n// filters on symbol properties only. Returned string properties are always\n// enumerable. It is good to use in objectSpread.\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly)\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    // eslint-disable-next-line prefer-spread\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "/* global __filename */\n\nconst filenameContainsBackSlashes = __filename.indexOf(\"\\\\\") > -1\n\nconst url = filenameContainsBackSlashes\n  ? `file:///${__filename.replace(/\\\\/g, \"/\")}`\n  : `file://${__filename}`\n\nexport default url\n",
    "import { createRequire } from \"module\"\n\nexport const require = createRequire(import.meta.url)\n",
    "import { globalAgent } from \"https\"\nimport { fetchUrl as serverFetchUrl, headersToObject } from \"@jsenv/server\"\n\n// ideally we should only pass this to the fetch below\nglobalAgent.options.rejectUnauthorized = false\n\nexport const fetchUrl = async (url, { ignoreHttpsError = true, ...rest } = {}) => {\n  const response = await serverFetchUrl(url, { ignoreHttpsError, ...rest })\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: response.statusText,\n    headers: headersToObject(response.headers),\n    text: response.text.bind(response),\n    json: response.json.bind(response),\n    blob: response.blob.bind(response),\n    arrayBuffer: response.arrayBuffer.bind(response),\n  }\n}\n",
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "import arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\n// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr)\n}\n",
    "// eslint-disable-next-line consistent-return\nexport default (iter) => {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter)\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithoutHoles from \"../arrayWithoutHoles/arrayWithoutHoles.js\"\nimport iterableToArray from \"../iterableToArray/iterableToArray.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableSpread from \"../nonIterableSpread/nonIterableSpread.js\"\n\nexport default (arr) =>\n  arrayWithoutHoles(arr) ||\n  iterableToArray(arr) ||\n  unsupportedIterableToArray(arr) ||\n  nonIterableSpread()\n",
    "export const stackToString = (stack, { error, indent }) => {\n  const name = error.name || \"Error\"\n  const message = error.message || \"\"\n  const stackString = stack.map((callSite) => `\\n${indent}at ${callSite}`).join(\"\")\n\n  return `${name}: ${message}${stackString}`\n}\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const parseDataUrl = (dataUrl) => {\n  const afterDataProtocol = dataUrl.slice(\"data:\".length)\n  const commaIndex = afterDataProtocol.indexOf(\",\")\n  const beforeComma = afterDataProtocol.slice(0, commaIndex)\n\n  let mediaType\n  let base64Flag\n  if (beforeComma.endsWith(`;base64`)) {\n    mediaType = beforeComma.slice(0, -`;base64`.length)\n    base64Flag = true\n  } else {\n    mediaType = beforeComma\n    base64Flag = false\n  }\n\n  const afterComma = afterDataProtocol.slice(commaIndex + 1)\n  return {\n    mediaType: mediaType === \"\" ? \"text/plain;charset=US-ASCII\" : mediaType,\n    base64Flag,\n    data: afterComma,\n  }\n}\n\nexport const stringifyDataUrl = ({ mediaType, base64Flag = true, data }) => {\n  if (!mediaType || mediaType === \"text/plain;charset=US-ASCII\") {\n    // can be a buffer or a string, hence check on data.length instead of !data or data === ''\n    if (data.length === 0) {\n      return `data:,`\n    }\n    if (base64Flag) {\n      return `data:,${data}`\n    }\n    return `data:,${dataToBase64(data)}`\n  }\n  if (base64Flag) {\n    return `data:${mediaType};base64,${dataToBase64(data)}`\n  }\n  return `data:${mediaType},${data}`\n}\n\nexport const dataUrlToRawData = ({ base64Flag, data }) => {\n  return base64Flag ? base64ToString(data) : data\n}\n\nexport const dataToBase64 =\n  typeof window === \"object\" ? window.atob : (data) => Buffer.from(data).toString(\"base64\")\n\nexport const base64ToString =\n  typeof window === \"object\"\n    ? window.btoa\n    : (base64String) => Buffer.from(base64String, \"base64\").toString(\"utf8\")\n",
    "export const getJavaScriptSourceMappingUrl = (javaScriptSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(javaScriptSource, javascriptSourceMappingUrlCommentRegexp, (value) => {\n    sourceMappingUrl = value\n  })\n  return sourceMappingUrl\n}\n\nexport const setJavaScriptSourceMappingUrl = (javaScriptSource, sourceMappingFileUrl) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    javaScriptSource,\n    javascriptSourceMappingUrlCommentRegexp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl ? writeJavaScriptSourceMappingURL(sourceMappingFileUrl) : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n\n  return sourceMappingFileUrl\n    ? `${javaScriptSource}\n${writeJavaScriptSourceMappingURL(sourceMappingFileUrl)}`\n    : javaScriptSource\n}\n\nexport const getCssSourceMappingUrl = (cssSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(cssSource, cssSourceMappingUrlCommentRegExp, (value) => {\n    sourceMappingUrl = value\n  })\n  return sourceMappingUrl\n}\n\nexport const setCssSourceMappingUrl = (cssSource, sourceMappingFileUrl) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    cssSource,\n    cssSourceMappingUrlCommentRegExp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl ? writeCssSourceMappingUrl(sourceMappingFileUrl) : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n  return sourceMappingFileUrl\n    ? `${cssSource}\n${writeCssSourceMappingUrl(sourceMappingFileUrl)}`\n    : cssSource\n}\n\nconst javascriptSourceMappingUrlCommentRegexp = /\\/\\/ ?# ?sourceMappingURL=([^\\s'\"]+)/g\nconst cssSourceMappingUrlCommentRegExp = /\\/\\*# ?sourceMappingURL=([^\\s'\"]+) \\*\\//g\n\n// ${\"//#\"} is to avoid a parser thinking there is a sourceMappingUrl for this file\nconst writeJavaScriptSourceMappingURL = (value) => `${\"//#\"} sourceMappingURL=${value}`\nconst writeCssSourceMappingUrl = (value) => `/*# sourceMappingURL=${value} */`\n\nexport const sourcemapToBase64Url = (sourcemap) => {\n  const asBase64 = Buffer.from(JSON.stringify(sourcemap)).toString(\"base64\")\n  return `data:application/json;charset=utf-8;base64,${asBase64}`\n}\n\nconst replaceSourceMappingUrl = (source, regexp, callback) => {\n  let lastSourceMappingUrl\n  let matchSourceMappingUrl\n  while ((matchSourceMappingUrl = regexp.exec(source))) {\n    lastSourceMappingUrl = matchSourceMappingUrl\n  }\n  if (lastSourceMappingUrl) {\n    const index = lastSourceMappingUrl.index\n    const before = source.slice(0, index)\n    const after = source.slice(index)\n    const mappedAfter = after.replace(regexp, (match, firstGroup) => {\n      return callback(firstGroup)\n    })\n    return `${before}${mappedAfter}`\n  }\n  return source\n}\n",
    "export const isWindowsFilePath = (path) => startsWithWindowsDriveLetter(path) && path[2] === \"\\\\\"\n\nexport const startsWithWindowsDriveLetter = (string) => {\n  const firstChar = string[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n\n  const secondChar = string[1]\n  if (secondChar !== \":\") return false\n\n  return true\n}\n\nexport const windowsFilePathToUrl = (windowsFilePath) => {\n  return `file:///${replaceBackSlashesWithSlashes(windowsFilePath)}`\n}\n\nexport const replaceBackSlashesWithSlashes = (string) => string.replace(/\\\\/g, \"/\")\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { startsWithWindowsDriveLetter, windowsFilePathToUrl } from \"../filePathUtils.js\"\n\nexport const remapCallSite = async (\n  callSite,\n  { urlToSourcemapConsumer, resolveFile, readErrorStack, onFailure },\n) => {\n  if (callSite.isNative()) {\n    return callSite\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  const source = callSite.getFileName() || callSite.getScriptNameOrSourceURL()\n  if (source) {\n    const line = callSite.getLineNumber()\n    const column = callSite.getColumnNumber() - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      readErrorStack,\n      onFailure,\n    })\n\n    const callSiteClone = cloneCallSite(callSite)\n\n    callSiteClone.getFunctionName = () => originalPosition.name || callSite.getFunctionName()\n    callSiteClone.getFileName = () => originalPosition.source\n    callSiteClone.getLineNumber = () => originalPosition.line\n    callSiteClone.getColumnNumber = () => originalPosition.column + 1\n    callSiteClone.getScriptNameOrSourceURL = () => originalPosition.source\n\n    return callSiteClone\n  }\n\n  // Code called using eval() needs special handling\n  if (callSite.isEval()) {\n    const origin = callSite.getEvalOrigin()\n    if (origin) {\n      const callSiteClone = cloneCallSite(callSite)\n      const originalEvalOrigin = await remapEvalOrigin(origin, {\n        resolveFile,\n        urlToSourcemapConsumer,\n        readErrorStack,\n        onFailure,\n      })\n      callSiteClone.getEvalOrigin = () => originalEvalOrigin\n      return callSiteClone\n    }\n    return callSite\n  }\n\n  // If we get here then we were unable to change the source position\n  return callSite\n}\n\nconst cloneCallSite = (callSite) => {\n  const callSiteClone = {}\n  methods.forEach((name) => {\n    callSiteClone[name] = () => callSite[name]()\n  })\n  callSiteClone.toString = () => callSiteToFunctionCall(callSiteClone)\n\n  return callSiteClone\n}\n\nconst methods = [\n  \"getColumnNumber\",\n  \"getEvalOrigin\",\n  \"getFileName\",\n  \"getFunction\",\n  \"getFunctionName\",\n  \"getLineNumber\",\n  \"getMethodName\",\n  \"getPosition\",\n  \"getScriptNameOrSourceURL\",\n  \"getThis\",\n  \"getTypeName\",\n  \"isConstructor\",\n  \"isEval\",\n  \"isNative\",\n  \"isToplevel\",\n  \"toString\",\n]\n\nconst callSiteToFunctionCall = (callSite) => {\n  const fileLocation = callSiteToFileLocation(callSite)\n  const isConstructor = callSite.isConstructor()\n  const isMethodCall = !callSite.isToplevel() && !isConstructor\n\n  if (isMethodCall) {\n    return `${callSiteToMethodCall(callSite)} (${fileLocation})`\n  }\n\n  const functionName = callSite.getFunctionName()\n  if (isConstructor) {\n    return `new ${functionName || \"<anonymous>\"} (${fileLocation})`\n  }\n\n  if (functionName) {\n    return `${functionName} (${fileLocation})`\n  }\n\n  return `${fileLocation}`\n}\n\nconst callSiteToMethodCall = (callSite) => {\n  const functionName = callSite.getFunctionName()\n  const typeName = callSiteToType(callSite)\n\n  if (!functionName) {\n    return `${typeName}.<anonymous>`\n  }\n\n  const methodName = callSite.getMethodName()\n  const as = generateAs({ methodName, functionName })\n\n  if (typeName && !functionName.startsWith(typeName)) {\n    return `${typeName}.${functionName}${as}`\n  }\n\n  return `${functionName}${as}`\n}\n\nconst generateAs = ({ methodName, functionName }) => {\n  if (!methodName) return \"\"\n  if (functionName.indexOf(`.${methodName}`) === functionName.length - methodName.length - 1)\n    return \"\"\n  return ` [as ${methodName}]`\n}\n\nconst callSiteToType = (callSite) => {\n  const typeName = callSite.getTypeName()\n  // Fixes shim to be backward compatible with Node v0 to v4\n  if (typeName === \"[object Object]\") {\n    return \"null\"\n  }\n  return typeName\n}\n\nconst callSiteToFileLocation = (callSite) => {\n  if (callSite.isNative()) return \"native\"\n\n  const sourceFile = callSiteToSourceFile(callSite)\n  const lineNumber = callSite.getLineNumber()\n  if (lineNumber === null) {\n    return sourceFile\n  }\n\n  const columnNumber = callSite.getColumnNumber()\n  if (!columnNumber) {\n    return `${sourceFile}:${lineNumber}`\n  }\n\n  return `${sourceFile}:${lineNumber}:${columnNumber}`\n}\n\nconst callSiteToSourceFile = (callSite) => {\n  const fileName = callSite.getScriptNameOrSourceURL()\n\n  if (fileName) {\n    return fileName\n  }\n\n  // Source code does not originate from a file and is not native, but we\n  // can still get the source position inside the source string, e.g. in\n  // an eval string.\n  if (callSite.isEval()) {\n    return `${callSite.getEvalOrigin()}, <anonymous>`\n  }\n\n  return \"<anonymous>\"\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nconst remapEvalOrigin = async (origin, { resolveFile, urlToSourcemapConsumer, onFailure }) => {\n  // Most eval() calls are in this format\n  const topLevelEvalMatch = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin)\n  if (topLevelEvalMatch) {\n    const source = topLevelEvalMatch[2]\n    const line = Number(topLevelEvalMatch[3])\n    const column = topLevelEvalMatch[4] - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${topLevelEvalMatch[1]} (${originalPosition.source}:${originalPosition.line}:${\n      originalPosition.column + 1\n    })`\n  }\n\n  // Parse nested eval() calls using recursion\n  const nestedEvalMatch = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin)\n  if (nestedEvalMatch) {\n    const originalEvalOrigin = await remapEvalOrigin(nestedEvalMatch[2], {\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${nestedEvalMatch[1]} (${originalEvalOrigin})`\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin\n}\n\nconst remapSourcePosition = async ({\n  source,\n  line,\n  column,\n  resolveFile,\n  urlToSourcemapConsumer,\n  readErrorStack,\n  onFailure,\n}) => {\n  const position = { source, line, column }\n\n  const url = sourceToUrl(source, { resolveFile })\n  if (!url) return position\n\n  const sourceMapConsumer = await urlToSourcemapConsumer(url)\n\n  if (!sourceMapConsumer) return position\n\n  try {\n    const originalPosition = sourceMapConsumer.originalPositionFor(position)\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    const originalSource = originalPosition.source\n\n    if (originalSource === null) return position\n    originalPosition.source = resolveFile(originalSource, url, { type: \"file-original\" })\n\n    return originalPosition\n  } catch (e) {\n    onFailure(\n      createDetailedMessage(`error while remapping position.`, {\n        [\"error stack\"]: readErrorStack(e),\n        [\"source\"]: source,\n        [\"line\"]: line,\n        [\"column\"]: column,\n      }),\n    )\n    return position\n  }\n}\n\nconst sourceToUrl = (source, { resolveFile }) => {\n  if (startsWithScheme(source)) {\n    return source\n  }\n\n  // linux filesystem path\n  if (source[0] === \"/\") {\n    return resolveFile(source)\n  }\n\n  // be careful, due to babel or something like that we might receive paths like\n  // C:/directory/file.js (without backslashes we would expect on windows)\n  // In that case we consider C: is the signe we are on windows\n  // And I avoid to rely on process.platform === \"win32\" because this file might be executed in chrome\n  if (startsWithWindowsDriveLetter(source)) {\n    return windowsFilePathToUrl(source)\n  }\n\n  // I don't think we will ever encounter relative file in the stack trace\n  // but if it ever happens we are safe :)\n  if (source.slice(0, 2) === \"./\" || source.slice(0, 3) === \"../\") {\n    return resolveFile(source)\n  }\n\n  // we have received a \"bare specifier\" for the source\n  // it happens for internal/process/task_queues.js for instance\n  // if we do return resolveFile(source) it will be converted to\n  // file:///C:/project-directory/internal/process/task_queues.js in node\n  // and\n  // http://domain.com/internal/process/task_queues.js\n  // but the file will certainly be a 404\n  // and if not it won't be the right file anyway\n  // for now we assume \"bare specifier\" in the stack trace\n  // are internal files that are pointless to try to remap\n  return null\n}\n\nconst startsWithScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { parseDataUrl, dataUrlToRawData } from \"../dataUrl.utils.js\"\nimport { getJavaScriptSourceMappingUrl } from \"../sourceMappingURLUtils.js\"\nimport { remapCallSite } from \"./remapCallSite.js\"\n\nexport const getOriginalCallsites = async ({\n  stack,\n  resolveFile,\n  fetchFile,\n  SourceMapConsumer,\n  readErrorStack,\n  onFailure,\n}) => {\n  const urlToSourcemapConsumer = memoizeByFirstArgStringValue(async (stackTraceFileUrl) => {\n    try {\n      let text\n      try {\n        const fileResponse = await fetchFile(stackTraceFileUrl)\n        const { status } = fileResponse\n        if (status !== 200) {\n          if (status === 404) {\n            onFailure(`stack trace file not found at ${stackTraceFileUrl}`)\n          } else {\n            onFailure(\n              createDetailedMessage(`unexpected response fetching stack trace file.`, {\n                [\"response status\"]: status,\n                [\"response text\"]: fileResponse.body,\n                [\"stack trace file\"]: stackTraceFileUrl,\n              }),\n            )\n          }\n          return null\n        }\n        text = await fileResponse.text()\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(`error while fetching stack trace file.`, {\n            [\"fetch error stack\"]: readErrorStack(e),\n            [\"stack trace file\"]: stackTraceFileUrl,\n          }),\n        )\n\n        return null\n      }\n\n      const jsSourcemapUrl = getJavaScriptSourceMappingUrl(text)\n      if (!jsSourcemapUrl) {\n        return null\n      }\n\n      let sourcemapUrl\n      let sourcemapString\n      if (jsSourcemapUrl.startsWith(\"data:\")) {\n        sourcemapUrl = stackTraceFileUrl\n        sourcemapString = dataUrlToRawData(parseDataUrl(jsSourcemapUrl))\n      } else {\n        sourcemapUrl = resolveFile(jsSourcemapUrl, stackTraceFileUrl, {\n          type: \"source-map\",\n        })\n\n        try {\n          const sourcemapResponse = await fetchFile(sourcemapUrl)\n          const { status } = sourcemapResponse\n          if (status !== 200) {\n            if (status === 404) {\n              onFailure(`sourcemap file not found at ${sourcemapUrl}`)\n            } else {\n              onFailure(\n                createDetailedMessage(`unexpected response for sourcemap file.`, {\n                  [\"response status\"]: status,\n                  [\"response text\"]: await sourcemapResponse.text(),\n                  [\"sourcemap url\"]: sourcemapUrl,\n                }),\n              )\n            }\n            return null\n          }\n          sourcemapString = await sourcemapResponse.text()\n        } catch (e) {\n          onFailure(\n            createDetailedMessage(`error while fetching sourcemap.`, {\n              [\"fetch error stack\"]: readErrorStack(e),\n              [\"sourcemap url\"]: sourcemapUrl,\n            }),\n          )\n          return null\n        }\n      }\n\n      let sourceMap\n      try {\n        sourceMap = JSON.parse(sourcemapString)\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(`error while parsing sourcemap.`, {\n            [\"parse error stack\"]: readErrorStack(e),\n            [\"sourcemap url\"]: sourcemapUrl,\n          }),\n        )\n        return null\n      }\n\n      let { sourcesContent } = sourceMap\n\n      if (!sourcesContent) {\n        sourcesContent = []\n        sourceMap.sourcesContent = sourcesContent\n      }\n\n      let firstSourceMapSourceFailure = null\n\n      await Promise.all(\n        sourceMap.sources.map(async (source, index) => {\n          if (index in sourcesContent) return\n\n          const sourcemapSourceUrl = resolveFile(source, sourcemapUrl, { type: \"source\" })\n          try {\n            const sourceResponse = await fetchFile(sourcemapSourceUrl)\n            const { status } = sourceResponse\n            if (status !== 200) {\n              if (firstSourceMapSourceFailure) return\n\n              if (status === 404) {\n                firstSourceMapSourceFailure = createDetailedMessage(`sourcemap source not found.`, {\n                  [\"sourcemap source url\"]: sourcemapSourceUrl,\n                  [\"sourcemap url\"]: sourcemapUrl,\n                })\n                return\n              }\n              firstSourceMapSourceFailure = createDetailedMessage(\n                `unexpected response for sourcemap source.`,\n                {\n                  [\"response status\"]: status,\n                  [\"response text\"]: await sourceResponse.text(),\n                  [\"sourcemap source url\"]: sourcemapSourceUrl,\n                  [\"sourcemap url\"]: sourcemapUrl,\n                },\n              )\n              return\n            }\n\n            const sourceString = await sourceResponse.text()\n            sourcesContent[index] = sourceString\n          } catch (e) {\n            if (firstSourceMapSourceFailure) return\n            firstSourceMapSourceFailure = createDetailedMessage(\n              `error while fetching sourcemap source.`,\n              {\n                [\"fetch error stack\"]: readErrorStack(e),\n                [\"sourcemap source url\"]: sourcemapSourceUrl,\n                [\"sourcemap url\"]: sourcemapUrl,\n              },\n            )\n          }\n        }),\n      )\n\n      if (firstSourceMapSourceFailure) {\n        onFailure(firstSourceMapSourceFailure)\n        return null\n      }\n\n      return new SourceMapConsumer(sourceMap)\n    } catch (e) {\n      onFailure(\n        createDetailedMessage(\n          `error while preparing a sourceMap consumer for a stack trace file.`,\n          {\n            [\"error stack\"]: readErrorStack(e),\n            [\"stack trace file\"]: stackTraceFileUrl,\n          },\n        ),\n      )\n      return null\n    }\n  })\n\n  const originalCallsites = await Promise.all(\n    stack.map((callSite) =>\n      remapCallSite(callSite, {\n        resolveFile,\n        urlToSourcemapConsumer,\n        readErrorStack,\n        onFailure,\n      }),\n    ),\n  )\n  return originalCallsites\n}\n\nconst memoizeByFirstArgStringValue = (fn) => {\n  const stringValueCache = {}\n  return (firstArgValue) => {\n    if (firstArgValue in stringValueCache) return stringValueCache[firstArgValue]\n    const value = fn(firstArgValue)\n    stringValueCache[firstArgValue] = value\n    return value\n  }\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { stackToString } from \"./stackToString.js\"\nimport { getOriginalCallsites } from \"./getOriginalCallsites.js\"\n\nexport const installErrorStackRemapping = ({\n  fetchFile,\n  resolveFile,\n  SourceMapConsumer,\n  indent = \"  \",\n}) => {\n  if (typeof fetchFile !== \"function\") {\n    throw new TypeError(`fetchFile must be a function, got ${fetchFile}`)\n  }\n  if (typeof SourceMapConsumer !== \"function\") {\n    throw new TypeError(`sourceMapConsumer must be a function, got ${SourceMapConsumer}`)\n  }\n  if (typeof indent !== \"string\") {\n    throw new TypeError(`indent must be a string, got ${indent}`)\n  }\n\n  const errorRemappingCache = new WeakMap()\n  const errorRemapFailureCallbackMap = new WeakMap()\n\n  let installed = false\n  const previousPrepareStackTrace = Error.prepareStackTrace\n  const install = () => {\n    if (installed) return\n    installed = true\n    Error.prepareStackTrace = prepareStackTrace\n  }\n\n  const uninstall = () => {\n    if (!installed) return\n    installed = false\n    Error.prepareStackTrace = previousPrepareStackTrace\n  }\n\n  // ensure we do not use prepareStackTrace for thoose error\n  // otherwise we would recursively remap error stack\n  // and if the reason causing the failure is still here\n  // it would create an infinite loop\n  const readErrorStack = (error) => {\n    uninstall()\n    const stack = error.stack\n    install()\n    return stack\n  }\n\n  const prepareStackTrace = (error, stack) => {\n    const onFailure = (failureData) => {\n      const failureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (failureCallbackArray) {\n        failureCallbackArray.forEach((callback) => callback(failureData))\n      }\n    }\n\n    const stackRemappingPromise = getOriginalCallsites({\n      stack,\n      error,\n      resolveFile,\n      fetchFile: memoizeFetch(fetchFile),\n      SourceMapConsumer,\n      readErrorStack,\n      indent,\n      onFailure,\n    })\n    errorRemappingCache.set(error, stackRemappingPromise)\n\n    return stackToString(stack, { error, indent })\n  }\n\n  const getErrorOriginalStackString = async (\n    error,\n    {\n      onFailure = (message) => {\n        console.warn(message)\n      },\n    } = {},\n  ) => {\n    if (onFailure) {\n      const remapFailureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (remapFailureCallbackArray) {\n        errorRemapFailureCallbackMap.set(error, [...remapFailureCallbackArray, onFailure])\n      } else {\n        errorRemapFailureCallbackMap.set(error, [onFailure])\n      }\n    }\n\n    // ensure Error.prepareStackTrace gets triggered by reading error.stack now\n    const { stack } = error\n    const promise = errorRemappingCache.get(error)\n\n    if (promise) {\n      try {\n        const originalCallsites = await promise\n        errorRemapFailureCallbackMap.get(error)\n\n        const firstCall = originalCallsites[0]\n        if (firstCall) {\n          Object.assign(error, {\n            filename: firstCall.getFileName(),\n            lineno: firstCall.getLineNumber(),\n            columnno: firstCall.getColumnNumber(),\n          })\n        }\n        return stackToString(originalCallsites, { error, indent })\n      } catch (e) {\n        onFailure(\n          createDetailedMessage(`error while computing original stack.`, {\n            [\"stack from error while computing\"]: readErrorStack(e),\n            [\"stack from error to remap\"]: stack,\n          }),\n        )\n        return stack\n      }\n    }\n\n    return stack\n  }\n\n  install()\n\n  return { getErrorOriginalStackString, uninstall }\n}\n\nconst memoizeFetch = (fetchUrl) => {\n  const urlCache = {}\n  return async (url) => {\n    if (url in urlCache) {\n      return urlCache[url]\n    }\n    const responsePromise = fetchUrl(url)\n    urlCache[url] = responsePromise\n    return responsePromise\n  }\n}\n",
    "import { ensureWindowsDriveLetter, resolveUrl } from \"@jsenv/util\"\nimport { require } from \"@jsenv/core/src/internal/require.js\"\nimport { fetchUrl } from \"../fetchUrl.js\"\nimport { installErrorStackRemapping } from \"./installErrorStackRemapping.js\"\n\nconst { SourceMapConsumer } = require(\"source-map\")\n\nexport const installNodeErrorStackRemapping = ({ projectDirectoryUrl, ...options }) =>\n  installErrorStackRemapping({\n    SourceMapConsumer,\n    fetchFile: fetchUrl,\n    resolveFile: (specifier, importer = projectDirectoryUrl) => {\n      return ensureWindowsDriveLetter(resolveUrl(specifier, importer), importer)\n    },\n    ...options,\n  })\n",
    "// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arr\n}\n",
    "export default (arr, i) => {\n  // this is an expanded form of \\`for...of\\` that properly supports abrupt completions of\n  // iterators etc. variable names have been minimised to reduce the size of this massive\n  // helper. sometimes spec compliance is annoying :(\n  //\n  // _n = _iteratorNormalCompletion\n  // _d = _didIteratorError\n  // _e = _iteratorError\n  // _i = _iterator\n  // _s = _step\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return\n  var _arr = []\n  var _n = true\n  var _d = false\n  var _e\n  var _i = arr[Symbol.iterator]()\n  var _s\n  try {\n    for (; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value)\n      if (i && _arr.length === i) break\n    }\n  } catch (err) {\n    _d = true\n    _e = err\n  } finally {\n    try {\n      if (!_n && _i.return !== null) _i.return()\n    } finally {\n      if (_d) throw _e\n    }\n  }\n  // eslint-disable-next-line consistent-return\n  return _arr\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithHoles from \"../arrayWithHoles/arrayWithHoles.js\"\nimport iterableToArrayLimit from \"../iterableToArrayLimit/iterableToArrayLimit.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableRest from \"../nonIterableRest/nonIterableRest.js\"\n\nexport default (arr, i) =>\n  arrayWithHoles(arr) ||\n  iterableToArrayLimit(arr, i) ||\n  unsupportedIterableToArray(arr, i) ||\n  nonIterableRest()\n",
    "export const memoize = (compute) => {\n  let memoized = false\n  let memoizedValue\n\n  const fnWithMemoization = (...args) => {\n    if (memoized) {\n      return memoizedValue\n    }\n    // if compute is recursive wait for it to be fully done before storing the lockValue\n    // so set locked later\n    memoizedValue = compute(...args)\n    memoized = true\n    return memoizedValue\n  }\n\n  fnWithMemoization.forget = () => {\n    const value = memoizedValue\n    memoized = false\n    memoizedValue = undefined\n    return value\n  }\n\n  return fnWithMemoization\n}\n",
    "import { fetchUrl } from \"../../fetchUrl.js\"\n\nexport const fetchSource = (url, { executionId } = {}) => {\n  return fetchUrl(url, {\n    ignoreHttpsError: true,\n    headers: {\n      ...(executionId ? { \"x-jsenv-execution-id\": executionId } : {}),\n    },\n  })\n}\n",
    "export const COMPILE_ID_BEST = \"best\"\n\nexport const COMPILE_ID_OTHERWISE = \"otherwise\"\n\nexport const COMPILE_ID_BUILD_GLOBAL = \"otherwise-build-global\"\n\nexport const COMPILE_ID_BUILD_GLOBAL_FILES = \"otherwise-build-global-files\"\n\nexport const COMPILE_ID_BUILD_COMMONJS = \"otherwise-build-commonjs\"\n\nexport const COMPILE_ID_BUILD_COMMONJS_FILES = \"otherwise-build-commonjs-files\"\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { COMPILE_ID_OTHERWISE } from \"../CONSTANTS.js\"\n\nexport const computeCompileIdFromGroupId = ({ groupId, groupMap }) => {\n  if (typeof groupId === \"undefined\") {\n    if (COMPILE_ID_OTHERWISE in groupMap) return COMPILE_ID_OTHERWISE\n\n    const keys = Object.keys(groupMap)\n    if (keys.length === 1) return keys[0]\n\n    throw new Error(createUnexpectedGroupIdMessage({ groupMap }))\n  }\n\n  if (groupId in groupMap === false)\n    throw new Error(createUnexpectedGroupIdMessage({ groupId, groupMap }))\n\n  return groupId\n}\n\nconst createUnexpectedGroupIdMessage = ({ compileId, groupMap }) =>\n  createDetailedMessage(`unexpected groupId.`, {\n    [\"expected compiled id\"]: Object.keys(groupMap),\n    [\"received compile id\"]: compileId,\n  })\n",
    "export const detectNode = () => {\n  return { name: \"node\", version: process.version.slice(1) }\n}\n",
    "export const valueToVersion = (value) => {\n  if (typeof value === \"number\") {\n    return numberToVersion(value)\n  }\n\n  if (typeof value === \"string\") {\n    return stringToVersion(value)\n  }\n\n  throw new TypeError(createValueErrorMessage({ version: value }))\n}\n\nconst numberToVersion = (number) => {\n  return {\n    major: number,\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst stringToVersion = (string) => {\n  if (string.indexOf(\".\") > -1) {\n    const parts = string.split(\".\")\n    return {\n      major: Number(parts[0]),\n      minor: parts[1] ? Number(parts[1]) : 0,\n      patch: parts[2] ? Number(parts[2]) : 0,\n    }\n  }\n\n  if (isNaN(string)) {\n    return {\n      major: 0,\n      minor: 0,\n      patch: 0,\n    }\n  }\n\n  return {\n    major: Number(string),\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst createValueErrorMessage = ({ value }) => `value must be a number or a string.\nvalue: ${value}`\n",
    "import { valueToVersion } from \"./valueToVersion.js\"\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = valueToVersion(versionA)\n  const semanticVersionB = valueToVersion(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n",
    "import { versionCompare } from \"./versionCompare.js\"\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n",
    "import { versionIsBelow } from \"./versionIsBelow.js\"\n\nexport const findHighestVersion = (...values) => {\n  if (values.length === 0) throw new Error(`missing argument`)\n\n  return values.reduce((highestVersion, value) => {\n    if (versionIsBelow(highestVersion, value)) {\n      return value\n    }\n    return highestVersion\n  })\n}\n",
    "import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const resolveGroup = ({ name, version }, groupMap) => {\n  return Object.keys(groupMap).find((compileIdCandidate) => {\n    const { runtimeCompatMap } = groupMap[compileIdCandidate]\n    if (name in runtimeCompatMap === false) {\n      return false\n    }\n    const versionForGroup = runtimeCompatMap[name]\n\n    const highestVersion = findHighestVersion(version, versionForGroup)\n    return highestVersion === version\n  })\n}\n",
    "import { detectNode } from \"./detectNode/detectNode.js\"\nimport { resolveGroup } from \"./resolveGroup.js\"\n\nexport const resolveNodeGroup = (groupMap) => resolveGroup(detectNode(), groupMap)\n",
    "/*\n* SJS 6.7.1\n* Minimal SystemJS Build\n*/\n(function () {\n  function errMsg(errCode, msg) {\n    return (msg || \"\") + \" (SystemJS https://git.io/JvFET#\" + errCode + \")\";\n  }\n\n  var hasSymbol = typeof Symbol !== 'undefined';\n  var hasSelf = typeof self !== 'undefined';\n  var hasDocument = typeof document !== 'undefined';\n\n  var envGlobal = hasSelf ? self : global;\n\n  var baseUrl;\n\n  if (hasDocument) {\n    var baseEl = document.querySelector('base[href]');\n    if (baseEl)\n      baseUrl = baseEl.href;\n  }\n\n  if (!baseUrl && typeof location !== 'undefined') {\n    baseUrl = location.href.split('#')[0].split('?')[0];\n    var lastSepIndex = baseUrl.lastIndexOf('/');\n    if (lastSepIndex !== -1)\n      baseUrl = baseUrl.slice(0, lastSepIndex + 1);\n  }\n\n  var backslashRegEx = /\\\\/g;\n  function resolveIfNotPlainOrUrl (relUrl, parentUrl) {\n    if (relUrl.indexOf('\\\\') !== -1)\n      relUrl = relUrl.replace(backslashRegEx, '/');\n    // protocol-relative\n    if (relUrl[0] === '/' && relUrl[1] === '/') {\n      return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\n    }\n    // relative-url\n    else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n        relUrl.length === 1  && (relUrl += '/')) ||\n        relUrl[0] === '/') {\n      var parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\n      // Disabled, but these cases will give inconsistent results for deep backtracking\n      //if (parentUrl[parentProtocol.length] !== '/')\n      //  throw Error('Cannot resolve');\n      // read pathname from parent URL\n      // pathname taken to be part after leading \"/\"\n      var pathname;\n      if (parentUrl[parentProtocol.length + 1] === '/') {\n        // resolving to a :// so we need to read out the auth and host\n        if (parentProtocol !== 'file:') {\n          pathname = parentUrl.slice(parentProtocol.length + 2);\n          pathname = pathname.slice(pathname.indexOf('/') + 1);\n        }\n        else {\n          pathname = parentUrl.slice(8);\n        }\n      }\n      else {\n        // resolving to :/ so pathname is the /... part\n        pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));\n      }\n\n      if (relUrl[0] === '/')\n        return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\n\n      // join together and split for removal of .. and . segments\n      // looping the string instead of anything fancy for perf reasons\n      // '../../../../../z' resolved to 'x/y' is just 'z'\n      var segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n      var output = [];\n      var segmentIndex = -1;\n      for (var i = 0; i < segmented.length; i++) {\n        // busy reading a segment - only terminate on '/'\n        if (segmentIndex !== -1) {\n          if (segmented[i] === '/') {\n            output.push(segmented.slice(segmentIndex, i + 1));\n            segmentIndex = -1;\n          }\n        }\n\n        // new segment - check if it is relative\n        else if (segmented[i] === '.') {\n          // ../ segment\n          if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n            output.pop();\n            i += 2;\n          }\n          // ./ segment\n          else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n            i += 1;\n          }\n          else {\n            // the start of a new segment as below\n            segmentIndex = i;\n          }\n        }\n        // it is the start of a new segment\n        else {\n          segmentIndex = i;\n        }\n      }\n      // finish reading out the last segment\n      if (segmentIndex !== -1)\n        output.push(segmented.slice(segmentIndex));\n      return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\n    }\n  }\n\n  /*\n   * Import maps implementation\n   *\n   * To make lookups fast we pre-resolve the entire import map\n   * and then match based on backtracked hash lookups\n   *\n   */\n\n  function resolveUrl (relUrl, parentUrl) {\n    return resolveIfNotPlainOrUrl(relUrl, parentUrl) || (relUrl.indexOf(':') !== -1 ? relUrl : resolveIfNotPlainOrUrl('./' + relUrl, parentUrl));\n  }\n\n  function resolveAndComposePackages (packages, outPackages, baseUrl, parentMap, parentUrl) {\n    for (var p in packages) {\n      var resolvedLhs = resolveIfNotPlainOrUrl(p, baseUrl) || p;\n      var rhs = packages[p];\n      // package fallbacks not currently supported\n      if (typeof rhs !== 'string')\n        continue;\n      var mapped = resolveImportMap(parentMap, resolveIfNotPlainOrUrl(rhs, baseUrl) || rhs, parentUrl);\n      if (!mapped) {\n        targetWarning('W1', p, rhs);\n      }\n      else\n        outPackages[resolvedLhs] = mapped;\n    }\n  }\n\n  function resolveAndComposeImportMap (json, baseUrl, outMap) {\n    if (json.imports)\n      resolveAndComposePackages(json.imports, outMap.imports, baseUrl, outMap, null);\n\n    var u;\n    for (u in json.scopes || {}) {\n      var resolvedScope = resolveUrl(u, baseUrl);\n      resolveAndComposePackages(json.scopes[u], outMap.scopes[resolvedScope] || (outMap.scopes[resolvedScope] = {}), baseUrl, outMap, resolvedScope);\n    }\n\n    for (u in json.depcache || {})\n      outMap.depcache[resolveUrl(u, baseUrl)] = json.depcache[u];\n\n    for (u in json.integrity || {})\n      outMap.integrity[resolveUrl(u, baseUrl)] = json.integrity[u];\n  }\n\n  function getMatch (path, matchObj) {\n    if (matchObj[path])\n      return path;\n    var sepIndex = path.length;\n    do {\n      var segment = path.slice(0, sepIndex + 1);\n      if (segment in matchObj)\n        return segment;\n    } while ((sepIndex = path.lastIndexOf('/', sepIndex - 1)) !== -1)\n  }\n\n  function applyPackages (id, packages) {\n    var pkgName = getMatch(id, packages);\n    if (pkgName) {\n      var pkg = packages[pkgName];\n      if (pkg === null) return;\n      if (id.length > pkgName.length && pkg[pkg.length - 1] !== '/') {\n        targetWarning('W2', pkgName, pkg);\n      }\n      else\n        return pkg + id.slice(pkgName.length);\n    }\n  }\n\n  function targetWarning (code, match, target, msg) {\n    console.warn(errMsg(code,  [target, match].join(', ') ));\n  }\n\n  function resolveImportMap (importMap, resolvedOrPlain, parentUrl) {\n    var scopes = importMap.scopes;\n    var scopeUrl = parentUrl && getMatch(parentUrl, scopes);\n    while (scopeUrl) {\n      var packageResolution = applyPackages(resolvedOrPlain, scopes[scopeUrl]);\n      if (packageResolution)\n        return packageResolution;\n      scopeUrl = getMatch(scopeUrl.slice(0, scopeUrl.lastIndexOf('/')), scopes);\n    }\n    return applyPackages(resolvedOrPlain, importMap.imports) || resolvedOrPlain.indexOf(':') !== -1 && resolvedOrPlain;\n  }\n\n  /*\n   * SystemJS Core\n   *\n   * Provides\n   * - System.import\n   * - System.register support for\n   *     live bindings, function hoisting through circular references,\n   *     reexports, dynamic import, import.meta.url, top-level await\n   * - System.getRegister to get the registration\n   * - Symbol.toStringTag support in Module objects\n   * - Hookable System.createContext to customize import.meta\n   * - System.onload(err, id, deps) handler for tracing / hot-reloading\n   *\n   * Core comes with no System.prototype.resolve or\n   * System.prototype.instantiate implementations\n   */\n\n  var toStringTag = hasSymbol && Symbol.toStringTag;\n  var REGISTRY = hasSymbol ? Symbol() : '@';\n\n  function SystemJS () {\n    this[REGISTRY] = {};\n  }\n\n  var systemJSPrototype = SystemJS.prototype;\n\n  systemJSPrototype.import = function (id, parentUrl) {\n    var loader = this;\n    return Promise.resolve(loader.prepareImport())\n    .then(function() {\n      return loader.resolve(id, parentUrl);\n    })\n    .then(function (id) {\n      var load = getOrCreateLoad(loader, id);\n      return load.C || topLevelLoad(loader, load);\n    });\n  };\n\n  // Hookable createContext function -> allowing eg custom import meta\n  systemJSPrototype.createContext = function (parentId) {\n    var loader = this;\n    return {\n      url: parentId,\n      resolve: function (id, parentUrl) {\n        return Promise.resolve(loader.resolve(id, parentUrl || parentId));\n      }\n    };\n  };\n  function loadToId (load) {\n    return load.id;\n  }\n  function triggerOnload (loader, load, err, isErrSource) {\n    loader.onload(err, load.id, load.d && load.d.map(loadToId), !!isErrSource);\n    if (err)\n      throw err;\n  }\n\n  var lastRegister;\n  systemJSPrototype.register = function (deps, declare) {\n    lastRegister = [deps, declare];\n  };\n\n  /*\n   * getRegister provides the last anonymous System.register call\n   */\n  systemJSPrototype.getRegister = function () {\n    var _lastRegister = lastRegister;\n    lastRegister = undefined;\n    return _lastRegister;\n  };\n\n  function getOrCreateLoad (loader, id, firstParentUrl) {\n    var load = loader[REGISTRY][id];\n    if (load)\n      return load;\n\n    var importerSetters = [];\n    var ns = Object.create(null);\n    if (toStringTag)\n      Object.defineProperty(ns, toStringTag, { value: 'Module' });\n\n    var instantiatePromise = Promise.resolve()\n    .then(function () {\n      return loader.instantiate(id, firstParentUrl);\n    })\n    .then(function (registration) {\n      if (!registration)\n        throw Error(errMsg(2,  id ));\n      function _export (name, value) {\n        // note if we have hoisted exports (including reexports)\n        load.h = true;\n        var changed = false;\n        if (typeof name === 'string') {\n          if (!(name in ns) || ns[name] !== value) {\n            ns[name] = value;\n            changed = true;\n          }\n        }\n        else {\n          for (var p in name) {\n            var value = name[p];\n            if (!(p in ns) || ns[p] !== value) {\n              ns[p] = value;\n              changed = true;\n            }\n          }\n\n          if (name.__esModule) {\n            ns.__esModule = name.__esModule;\n          }\n        }\n        if (changed)\n          for (var i = 0; i < importerSetters.length; i++) {\n            var setter = importerSetters[i];\n            if (setter) setter(ns);\n          }\n        return value;\n      }\n      var declared = registration[1](_export, registration[1].length === 2 ? {\n        import: function (importId) {\n          return loader.import(importId, id);\n        },\n        meta: loader.createContext(id)\n      } : undefined);\n      load.e = declared.execute || function () {};\n      return [registration[0], declared.setters || []];\n    });\n\n    var linkPromise = instantiatePromise\n    .then(function (instantiation) {\n      return Promise.all(instantiation[0].map(function (dep, i) {\n        var setter = instantiation[1][i];\n        return Promise.resolve(loader.resolve(dep, id))\n        .then(function (depId) {\n          var depLoad = getOrCreateLoad(loader, depId, id);\n          // depLoad.I may be undefined for already-evaluated\n          return Promise.resolve(depLoad.I)\n          .then(function () {\n            if (setter) {\n              depLoad.i.push(setter);\n              // only run early setters when there are hoisted exports of that module\n              // the timing works here as pending hoisted export calls will trigger through importerSetters\n              if (depLoad.h || !depLoad.I)\n                setter(depLoad.n);\n            }\n            return depLoad;\n          });\n        })\n      }))\n      .then(\n        function (depLoads) {\n          load.d = depLoads;\n        },\n        !true\n      )\n    });\n\n    linkPromise.catch(function (err) {\n      load.e = null;\n      load.er = err;\n    });\n\n    // Capital letter = a promise function\n    return load = loader[REGISTRY][id] = {\n      id: id,\n      // importerSetters, the setters functions registered to this dependency\n      // we retain this to add more later\n      i: importerSetters,\n      // module namespace object\n      n: ns,\n\n      // instantiate\n      I: instantiatePromise,\n      // link\n      L: linkPromise,\n      // whether it has hoisted exports\n      h: false,\n\n      // On instantiate completion we have populated:\n      // dependency load records\n      d: undefined,\n      // execution function\n      // set to NULL immediately after execution (or on any failure) to indicate execution has happened\n      // in such a case, C should be used, and E, I, L will be emptied\n      e: undefined,\n\n      // On execution we have populated:\n      // the execution error if any\n      er: undefined,\n      // in the case of TLA, the execution promise\n      E: undefined,\n\n      // On execution, L, I, E cleared\n\n      // Promise for top-level completion\n      C: undefined\n    };\n  }\n\n  function instantiateAll (loader, load, loaded) {\n    if (!loaded[load.id]) {\n      loaded[load.id] = true;\n      // load.L may be undefined for already-instantiated\n      return Promise.resolve(load.L)\n      .then(function () {\n        return Promise.all(load.d.map(function (dep) {\n          return instantiateAll(loader, dep, loaded);\n        }));\n      })\n    }\n  }\n\n  function topLevelLoad (loader, load) {\n    return load.C = instantiateAll(loader, load, {})\n    .then(function () {\n      return postOrderExec(loader, load, {});\n    })\n    .then(function () {\n      return load.n;\n    });\n  }\n\n  // the closest we can get to call(undefined)\n  var nullContext = Object.freeze(Object.create(null));\n\n  // returns a promise if and only if a top-level await subgraph\n  // throws on sync errors\n  function postOrderExec (loader, load, seen) {\n    if (seen[load.id])\n      return;\n    seen[load.id] = true;\n\n    if (!load.e) {\n      if (load.er)\n        throw load.er;\n      if (load.E)\n        return load.E;\n      return;\n    }\n\n    // deps execute first, unless circular\n    var depLoadPromises;\n    load.d.forEach(function (depLoad) {\n        try {\n          var depLoadPromise = postOrderExec(loader, depLoad, seen);\n          if (depLoadPromise)\n            (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n        }\n        catch (err) {\n          load.e = null;\n          load.er = err;\n          throw err;\n        }\n    });\n    if (depLoadPromises)\n      return Promise.all(depLoadPromises).then(doExec, function (err) {\n        load.e = null;\n        load.er = err;\n        throw err;\n      });\n\n    return doExec();\n\n    function doExec () {\n      try {\n        var execPromise = load.e.call(nullContext);\n        if (execPromise) {\n            execPromise = execPromise.then(function () {\n              load.C = load.n;\n              load.E = null; // indicates completion\n              if (!true) triggerOnload(loader, load, null, true);\n            }, function (err) {\n              load.er = err;\n              load.E = null;\n              if (!true) triggerOnload(loader, load, err, true);\n              else throw err;\n            });\n          return load.E = load.E || execPromise;\n        }\n        // (should be a promise, but a minify optimization to leave out Promise.resolve)\n        load.C = load.n;\n        if (!true) triggerOnload(loader, load, null, true);\n      }\n      catch (err) {\n        load.er = err;\n        throw err;\n      }\n      finally {\n        load.L = load.I = undefined;\n        load.e = null;\n      }\n    }\n  }\n\n  envGlobal.System = new SystemJS();\n\n  /*\n   * SystemJS browser attachments for script and import map processing\n   */\n\n  var importMapPromise = Promise.resolve();\n  var importMap = { imports: {}, scopes: {}, depcache: {}, integrity: {} };\n\n  // Scripts are processed immediately, on the first System.import, and on DOMReady.\n  // Import map scripts are processed only once (by being marked) and in order for each phase.\n  // This is to avoid using DOM mutation observers in core, although that would be an alternative.\n  var processFirst = hasDocument;\n  systemJSPrototype.prepareImport = function (doProcessScripts) {\n    if (processFirst || doProcessScripts) {\n      processScripts();\n      processFirst = false;\n    }\n    return importMapPromise;\n  };\n  if (hasDocument) {\n    processScripts();\n    window.addEventListener('DOMContentLoaded', processScripts);\n  }\n\n  function processScripts () {\n    [].forEach.call(document.querySelectorAll('script'), function (script) {\n      if (script.sp) // sp marker = systemjs processed\n        return;\n      // TODO: deprecate systemjs-module in next major now that we have auto import\n      if (script.type === 'systemjs-module') {\n        script.sp = true;\n        if (!script.src)\n          return;\n        System.import(script.src.slice(0, 7) === 'import:' ? script.src.slice(7) : resolveUrl(script.src, baseUrl));\n      }\n      else if (script.type === 'systemjs-importmap') {\n        script.sp = true;\n        var fetchPromise = script.src ? fetch(script.src, { integrity: script.integrity }).then(function (res) {\n          return res.text();\n        }) : script.innerHTML;\n        importMapPromise = importMapPromise.then(function () {\n          return fetchPromise;\n        }).then(function (text) {\n          extendImportMap(importMap, text, script.src || baseUrl);\n        });\n      }\n    });\n  }\n\n  function extendImportMap (importMap, newMapText, newMapUrl) {\n    try {\n      var newMap = JSON.parse(newMapText);\n    } catch (err) {\n      throw Error( errMsg(1) );\n    }\n    resolveAndComposeImportMap(newMap, newMapUrl, importMap);\n  }\n\n  /*\n   * Script instantiation loading\n   */\n\n  if (hasDocument) {\n    window.addEventListener('error', function (evt) {\n      lastWindowErrorUrl = evt.filename;\n      lastWindowError = evt.error;\n    });\n    var baseOrigin = location.origin;\n  }\n\n  systemJSPrototype.createScript = function (url) {\n    var script = document.createElement('script');\n    script.async = true;\n    // Only add cross origin for actual cross origin\n    // this is because Safari triggers for all\n    // - https://bugs.webkit.org/show_bug.cgi?id=171566\n    if (url.indexOf(baseOrigin + '/'))\n      script.crossOrigin = 'anonymous';\n    var integrity = importMap.integrity[url];\n    if (integrity)\n      script.integrity = integrity;\n    script.src = url;\n    return script;\n  };\n\n  // Auto imports -> script tags can be inlined directly for load phase\n  var lastAutoImportUrl, lastAutoImportDeps, lastAutoImportTimeout;\n  var autoImportCandidates = {};\n  var systemRegister = systemJSPrototype.register;\n  systemJSPrototype.register = function (deps, declare) {\n    if (hasDocument && document.readyState === 'loading' && typeof deps !== 'string') {\n      var scripts = document.querySelectorAll('script[src]');\n      var lastScript = scripts[scripts.length - 1];\n      if (lastScript) {\n        lastAutoImportUrl = lastScript.src;\n        lastAutoImportDeps = deps;\n        // if this is already a System load, then the instantiate has already begun\n        // so this re-import has no consequence\n        var loader = this;\n        lastAutoImportTimeout = setTimeout(function () {\n          autoImportCandidates[lastScript.src] = [deps, declare];\n          loader.import(lastScript.src);\n        });\n      }\n    }\n    else {\n      lastAutoImportDeps = undefined;\n    }\n    return systemRegister.call(this, deps, declare);\n  };\n\n  var lastWindowErrorUrl, lastWindowError;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var autoImportRegistration = autoImportCandidates[url];\n    if (autoImportRegistration) {\n      delete autoImportCandidates[url];\n      return autoImportRegistration;\n    }\n    var loader = this;\n    return new Promise(function (resolve, reject) {\n      var script = systemJSPrototype.createScript(url);\n      script.addEventListener('error', function () {\n        reject(Error(errMsg(3,  [url, firstParentUrl].join(', ') )));\n      });\n      script.addEventListener('load', function () {\n        document.head.removeChild(script);\n        // Note that if an error occurs that isn't caught by this if statement,\n        // that getRegister will return null and a \"did not instantiate\" error will be thrown.\n        if (lastWindowErrorUrl === url) {\n          reject(lastWindowError);\n        }\n        else {\n          var register = loader.getRegister();\n          // Clear any auto import registration for dynamic import scripts during load\n          if (register && register[0] === lastAutoImportDeps)\n            clearTimeout(lastAutoImportTimeout);\n          resolve(register);\n        }\n      });\n      document.head.appendChild(script);\n    });\n  };\n\n  /*\n   * Fetch loader, sets up shouldFetch and fetch hooks\n   */\n  systemJSPrototype.shouldFetch = function () {\n    return false;\n  };\n  if (typeof fetch !== 'undefined')\n    systemJSPrototype.fetch = fetch;\n\n  var instantiate = systemJSPrototype.instantiate;\n  var jsContentTypeRegEx = /^(text|application)\\/(x-)?javascript(;|$)/;\n  systemJSPrototype.instantiate = function (url, parent) {\n    var loader = this;\n    if (!this.shouldFetch(url))\n      return instantiate.apply(this, arguments);\n    return this.fetch(url, {\n      credentials: 'same-origin',\n      integrity: importMap.integrity[url]\n    })\n    .then(function (res) {\n      if (!res.ok)\n        throw Error(errMsg(7,  [res.status, res.statusText, url, parent].join(', ') ));\n      var contentType = res.headers.get('content-type');\n      if (!contentType || !jsContentTypeRegEx.test(contentType))\n        throw Error(errMsg(4,  contentType ));\n      return res.text().then(function (source) {\n        (0, eval)(source);\n        return loader.getRegister();\n      });\n    });\n  };\n\n  systemJSPrototype.resolve = function (id, parentUrl) {\n    parentUrl = parentUrl || !true  || baseUrl;\n    return resolveImportMap(( importMap), resolveIfNotPlainOrUrl(id, parentUrl) || id, parentUrl) || throwUnresolved(id, parentUrl);\n  };\n\n  function throwUnresolved (id, parentUrl) {\n    throw Error(errMsg(8,  [id, parentUrl].join(', ') ));\n  }\n\n  var systemInstantiate = systemJSPrototype.instantiate;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var preloads = ( importMap).depcache[url];\n    if (preloads) {\n      for (var i = 0; i < preloads.length; i++)\n        getOrCreateLoad(this, this.resolve(preloads[i], url), url);\n    }\n    return systemInstantiate.call(this, url, firstParentUrl);\n  };\n\n  /*\n   * Supports loading System.register in workers\n   */\n\n  if (hasSelf && typeof importScripts === 'function')\n    systemJSPrototype.instantiate = function (url) {\n      var loader = this;\n      return Promise.resolve().then(function () {\n        importScripts(url);\n        return loader.getRegister();\n      });\n    };\n\n}());",
    "import { createDetailedMessage } from \"@jsenv/logger\"\n\nexport const fromFunctionReturningNamespace = (fn, data) => {\n  return fromFunctionReturningRegisteredModule(() => {\n    // should we compute the namespace here\n    // or as it is done below, defer to execute ?\n    // I think defer to execute is better\n    return [\n      [],\n      (_export) => {\n        return {\n          execute: () => {\n            const namespace = fn()\n            _export(namespace)\n          },\n        }\n      },\n    ]\n  }, data)\n}\n\nconst fromFunctionReturningRegisteredModule = (fn, data) => {\n  try {\n    return fn()\n  } catch (error) {\n    if (error.name === \"SyntaxError\") {\n      throw new Error(\n        createDetailedMessage(`Syntax error in module.`, {\n          \"syntax error stack\": error.stack,\n          ...getModuleDetails(data),\n        }),\n      )\n    }\n    throw new Error(\n      createDetailedMessage(`Module instantiation error.`, {\n        [\"instantiation error stack\"]: error.stack,\n        ...getModuleDetails(data),\n      }),\n    )\n  }\n}\n\nexport const fromUrl = async ({\n  url,\n  importerUrl,\n  fetchSource,\n  instantiateJavaScript,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n}) => {\n  let moduleResponse\n  try {\n    moduleResponse = await fetchSource(url, {\n      importerUrl,\n    })\n\n    if (moduleResponse.status === 404) {\n      throw new Error(\n        createDetailedMessage(\n          `Module file cannot be found.`,\n          getModuleDetails({\n            url,\n            importerUrl,\n            compileServerOrigin,\n            outDirectoryRelativeUrl,\n            notFound: true,\n          }),\n        ),\n      )\n    }\n  } catch (e) {\n    e.code = \"NETWORK_FAILURE\"\n    throw e\n  }\n\n  const contentType = moduleResponse.headers[\"content-type\"] || \"\"\n\n  if (moduleResponse.status === 500 && contentType === \"application/json\") {\n    const bodyAsJson = await moduleResponse.json()\n    if (bodyAsJson.message && bodyAsJson.filename && \"columnNumber\" in bodyAsJson) {\n      const error = new Error(\n        createDetailedMessage(`Module file cannot be parsed.`, {\n          [\"parsing error message\"]: bodyAsJson.message,\n          ...getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl }),\n        }),\n      )\n      error.parsingError = bodyAsJson\n      throw error\n    }\n  }\n\n  if (moduleResponse.status < 200 || moduleResponse.status >= 300) {\n    throw new Error(\n      createDetailedMessage(`Module file response status is unexpected.`, {\n        [\"status\"]: moduleResponse.status,\n        [\"allowed status\"]: \"200 to 299\",\n        [\"statusText\"]: moduleResponse.statusText,\n        ...getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl }),\n      }),\n    )\n  }\n\n  // don't forget to keep it close to https://github.com/systemjs/systemjs/blob/9a15cfd3b7a9fab261e1848b1b2fa343d73afedb/src/extras/module-types.js#L21\n  // and in sync with loadModule in createJsenvRollupPlugin.js\n  if (contentType === \"application/javascript\" || contentType === \"text/javascript\") {\n    const bodyAsText = await moduleResponse.text()\n    return fromFunctionReturningRegisteredModule(\n      () => instantiateJavaScript(bodyAsText, moduleResponse.url),\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentType === \"application/json\" || contentType === \"application/importmap+json\") {\n    const bodyAsJson = await moduleResponse.json()\n    return fromFunctionReturningNamespace(\n      () => {\n        return {\n          default: bodyAsJson,\n        }\n      },\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentTypeShouldBeReadAsText(contentType)) {\n    return fromFunctionReturningNamespace(\n      () => {\n        return {\n          default: moduleResponse.url,\n        }\n      },\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentType) {\n    // for now content type different of javascript are not unusual anymore\n    // ideally we would not use static import to tell rollup we have a dependency to an url\n    // insetad we would write something that would be compatible with web strandard such as\n    // new URL('./whatever', import.meta.url)\n    // or import.meta.resolve('./whatever')\n    //     console.warn(`Module content-type is unusual.\n    // ['content-type']:   // ${contentType}\n    // ['allowed content-type']:   // application/javascript\n    // application/json\n    // text/*\n    // ${getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl })}`)\n  } else {\n    console.warn(`Module content-type is missing.`, {\n      [\"allowed content-type\"]: [\"aplication/javascript\", \"application/json\", \"text/*\"],\n      ...getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl }),\n    })\n  }\n\n  return fromFunctionReturningNamespace(\n    () => {\n      return {\n        default: moduleResponse.url,\n      }\n    },\n    {\n      url: moduleResponse.url,\n      importerUrl,\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n    },\n  )\n}\n\nconst contentTypeShouldBeReadAsText = (contentType) => {\n  if (contentType.startsWith(\"text/\")) {\n    return true\n  }\n  if (contentType === \"image/svg+xml\") {\n    return true\n  }\n  return false\n}\n\n// const textToBase64 =\n//   typeof window === \"object\"\n//     ? (text) => window.btoa(window.unescape(window.encodeURIComponent(text)))\n//     : (text) => Buffer.from(text, \"utf8\").toString(\"base64\")\n\nconst getModuleDetails = ({\n  url,\n  importerUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  notFound = false,\n}) => {\n  const relativeUrl = tryToFindProjectRelativeUrl(url, {\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const importerRelativeUrl = tryToFindProjectRelativeUrl(importerUrl, {\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const details = notFound\n    ? {\n        ...(importerUrl ? { [\"import declared in\"]: importerRelativeUrl || importerUrl } : {}),\n        ...(relativeUrl ? { file: relativeUrl } : {}),\n        [\"file url\"]: url,\n      }\n    : {\n        ...(relativeUrl ? { file: relativeUrl } : {}),\n        [\"file url\"]: url,\n        ...(importerUrl ? { [\"imported by\"]: importerRelativeUrl || importerUrl } : {}),\n      }\n\n  return details\n}\n\nexport const tryToFindProjectRelativeUrl = (\n  url,\n  { compileServerOrigin, outDirectoryRelativeUrl },\n) => {\n  if (!url) {\n    return null\n  }\n\n  if (!url.startsWith(`${compileServerOrigin}/`)) {\n    return null\n  }\n\n  if (url === compileServerOrigin) {\n    return null\n  }\n\n  const afterOrigin = url.slice(`${compileServerOrigin}/`.length)\n  if (!afterOrigin.startsWith(outDirectoryRelativeUrl)) {\n    return null\n  }\n\n  const afterCompileDirectory = afterOrigin.slice(outDirectoryRelativeUrl.length)\n  const nextSlashIndex = afterCompileDirectory.indexOf(\"/\")\n  if (nextSlashIndex === -1) {\n    return null\n  }\n\n  const afterCompileId = afterCompileDirectory.slice(nextSlashIndex + 1)\n  return afterCompileId\n}\n",
    "export const valueInstall = (object, name, value) => {\n  const has = name in object\n  const previous = object[name]\n\n  object[name] = value\n\n  return () => {\n    if (has) {\n      object[name] = previous\n    } else {\n      delete object[name]\n    }\n  }\n}\n",
    "const NATIVE_NODE_MODULE_SPECIFIER_ARRAY = [\n  \"assert\",\n  \"async_hooks\",\n  \"buffer_ieee754\",\n  \"buffer\",\n  \"child_process\",\n  \"cluster\",\n  \"console\",\n  \"constants\",\n  \"crypto\",\n  \"_debugger\",\n  \"dgram\",\n  \"dns\",\n  \"domain\",\n  \"events\",\n  \"freelist\",\n  \"fs\",\n  \"fs/promises\",\n  \"_http_agent\",\n  \"_http_client\",\n  \"_http_common\",\n  \"_http_incoming\",\n  \"_http_outgoing\",\n  \"_http_server\",\n  \"http\",\n  \"http2\",\n  \"https\",\n  \"inspector\",\n  \"_linklist\",\n  \"module\",\n  \"net\",\n  \"node-inspect/lib/_inspect\",\n  \"node-inspect/lib/internal/inspect_client\",\n  \"node-inspect/lib/internal/inspect_repl\",\n  \"os\",\n  \"path\",\n  \"perf_hooks\",\n  \"process\",\n  \"punycode\",\n  \"querystring\",\n  \"readline\",\n  \"repl\",\n  \"smalloc\",\n  \"_stream_duplex\",\n  \"_stream_transform\",\n  \"_stream_wrap\",\n  \"_stream_passthrough\",\n  \"_stream_readable\",\n  \"_stream_writable\",\n  \"stream\",\n  \"string_decoder\",\n  \"sys\",\n  \"timers\",\n  \"_tls_common\",\n  \"_tls_legacy\",\n  \"_tls_wrap\",\n  \"tls\",\n  \"trace_events\",\n  \"tty\",\n  \"url\",\n  \"util\",\n  \"v8/tools/arguments\",\n  \"v8/tools/codemap\",\n  \"v8/tools/consarray\",\n  \"v8/tools/csvparser\",\n  \"v8/tools/logreader\",\n  \"v8/tools/profile_view\",\n  \"v8/tools/splaytree\",\n  \"v8\",\n  \"vm\",\n  \"worker_threads\",\n  \"zlib\",\n  // global is special\n  \"global\",\n]\n\nexport const isNativeNodeModuleBareSpecifier = (specifier) =>\n  NATIVE_NODE_MODULE_SPECIFIER_ARRAY.includes(specifier)\n",
    "import { Script } from \"vm\"\n\nexport const evalSource = (code, filePath) => {\n  const script = new Script(code, { filename: filePath })\n  return script.runInThisContext()\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport { urlToFileSystemPath, resolveUrl } from \"@jsenv/util\"\nimport { resolveImport } from \"@jsenv/import-map\"\nimport { require } from \"../../require.js\"\nimport \"../s.js\"\nimport {\n  fromFunctionReturningNamespace,\n  fromUrl,\n  tryToFindProjectRelativeUrl,\n} from \"../module-registration.js\"\nimport { valueInstall } from \"../valueInstall.js\"\nimport { isNativeNodeModuleBareSpecifier } from \"./isNativeNodeModuleBareSpecifier.js\"\nimport { evalSource } from \"./evalSource.js\"\n\nconst GLOBAL_SPECIFIER = \"global\"\n\nexport const createNodeSystem = ({\n  projectDirectoryUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  importMap,\n  importDefaultExtension,\n  fetchSource,\n} = {}) => {\n  if (typeof global.System === \"undefined\") {\n    throw new Error(`global.System is undefined`)\n  }\n\n  const nodeSystem = new global.System.constructor()\n\n  const resolve = (specifier, importer) => {\n    if (specifier === GLOBAL_SPECIFIER) {\n      return specifier\n    }\n\n    if (isNativeNodeModuleBareSpecifier(specifier)) {\n      return specifier\n    }\n\n    return resolveImport({\n      specifier,\n      importer,\n      importMap,\n      defaultExtension: importDefaultExtension,\n      formatImporterForError: (importer) => {\n        const importerProjectRelativeUrl = tryToFindProjectRelativeUrl(importer, {\n          compileServerOrigin,\n          outDirectoryRelativeUrl,\n        })\n        return importerProjectRelativeUrl || importer\n      },\n    })\n  }\n\n  nodeSystem.resolve = resolve\n\n  nodeSystem.instantiate = async (url, importerUrl) => {\n    if (url === GLOBAL_SPECIFIER) {\n      return fromFunctionReturningNamespace(() => global, {\n        url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      })\n    }\n\n    if (isNativeNodeModuleBareSpecifier(url)) {\n      return fromFunctionReturningNamespace(\n        () => {\n          // eslint-disable-next-line import/no-dynamic-require\n          const moduleExportsForNativeNodeModule = require(url)\n          return moduleExportsToModuleNamespace(moduleExportsForNativeNodeModule)\n        },\n        {\n          url,\n          importerUrl,\n          compileServerOrigin,\n          outDirectoryRelativeUrl,\n        },\n      )\n    }\n\n    return fromUrl({\n      url,\n      importerUrl,\n      fetchSource,\n      instantiateJavaScript: (responseBody, responseUrl) => {\n        const uninstallSystemGlobal = valueInstall(global, \"System\", nodeSystem)\n        try {\n          evalSource(\n            responseBody,\n            responseUrlToSourceUrl(responseUrl, {\n              projectDirectoryUrl,\n              compileServerOrigin,\n            }),\n          )\n        } finally {\n          uninstallSystemGlobal()\n        }\n\n        return nodeSystem.getRegister()\n      },\n      outDirectoryRelativeUrl,\n      compileServerOrigin,\n    })\n  }\n\n  // https://github.com/systemjs/systemjs/blob/master/docs/hooks.md#createcontexturl---object\n  nodeSystem.createContext = (url) => {\n    const originalUrl = urlToOriginalUrl(url, {\n      projectDirectoryUrl,\n      outDirectoryRelativeUrl,\n      compileServerOrigin,\n    })\n\n    return {\n      url: originalUrl,\n      resolve: (specifier) => {\n        const urlResolved = resolve(specifier, url)\n        return urlToOriginalUrl(urlResolved, {\n          projectDirectoryUrl,\n          outDirectoryRelativeUrl,\n          compileServerOrigin,\n        })\n      },\n    }\n  }\n\n  return nodeSystem\n}\n\nconst responseUrlToSourceUrl = (responseUrl, { compileServerOrigin, projectDirectoryUrl }) => {\n  if (responseUrl.startsWith(\"file://\")) {\n    return urlToFileSystemPath(responseUrl)\n  }\n  // compileServerOrigin is optionnal\n  // because we can also create a node system and use it to import a build\n  // from filesystem. In that case there is no compileServerOrigin\n  if (compileServerOrigin && responseUrl.startsWith(`${compileServerOrigin}/`)) {\n    const afterOrigin = responseUrl.slice(`${compileServerOrigin}/`.length)\n    const fileUrl = resolveUrl(afterOrigin, projectDirectoryUrl)\n    return urlToFileSystemPath(fileUrl)\n  }\n  return responseUrl\n}\n\nconst urlToOriginalUrl = (\n  url,\n  { projectDirectoryUrl, outDirectoryRelativeUrl, compileServerOrigin },\n) => {\n  if (!url.startsWith(`${compileServerOrigin}/`)) {\n    return url\n  }\n\n  if (url === compileServerOrigin) {\n    return url\n  }\n\n  const afterOrigin = url.slice(`${compileServerOrigin}/`.length)\n  if (!afterOrigin.startsWith(outDirectoryRelativeUrl)) {\n    return url\n  }\n\n  const afterCompileDirectory = afterOrigin.slice(outDirectoryRelativeUrl.length)\n  const nextSlashIndex = afterCompileDirectory.indexOf(\"/\")\n  if (nextSlashIndex === -1) {\n    return url\n  }\n\n  const afterCompileId = afterCompileDirectory.slice(nextSlashIndex + 1)\n  return resolveUrl(afterCompileId, projectDirectoryUrl)\n}\n\nconst moduleExportsToModuleNamespace = (moduleExports) => {\n  // keep in mind moduleExports can be a function (like require('stream'))\n  if (typeof moduleExports === \"object\" && \"default\" in moduleExports) {\n    return moduleExports\n  }\n\n  return {\n    ...moduleExports,\n    default: moduleExports,\n  }\n}\n",
    "import { normalizeImportMap } from \"@jsenv/import-map\"\nimport { uneval } from \"@jsenv/uneval\"\n// do not use memoize from @jsenv/util to avoid pulling @jsenv/util code into the node build\nimport { memoize } from \"../../memoize.js\"\nimport { fetchUrl } from \"../../fetchUrl.js\"\nimport { fetchSource } from \"./fetchSource.js\"\nimport { computeCompileIdFromGroupId } from \"../computeCompileIdFromGroupId.js\"\nimport { resolveNodeGroup } from \"../resolveNodeGroup.js\"\nimport { createNodeSystem } from \"./createNodeSystem.js\"\n\nconst memoizedCreateNodeSystem = memoize(createNodeSystem)\n\nexport const createNodeRuntime = async ({\n  projectDirectoryUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n}) => {\n  const outDirectoryUrl = `${projectDirectoryUrl}${outDirectoryRelativeUrl}`\n  const groupMapUrl = String(new URL(\"groupMap.json\", outDirectoryUrl))\n  const envUrl = String(new URL(\"env.json\", outDirectoryUrl))\n  const [groupMap, { importMapFileRelativeUrl, importDefaultExtension }] = await Promise.all([\n    importJson(groupMapUrl),\n    importJson(envUrl),\n  ])\n  const compileId = computeCompileIdFromGroupId({\n    groupId: resolveNodeGroup(groupMap),\n    groupMap,\n  })\n  const compileDirectoryRelativeUrl = `${outDirectoryRelativeUrl}${compileId}/`\n\n  let importMap\n  if (importMapFileRelativeUrl) {\n    const importmapFileUrl = `${compileServerOrigin}/${compileDirectoryRelativeUrl}${importMapFileRelativeUrl}`\n    const importmapFileResponse = await fetchUrl(importmapFileUrl)\n    const importmap = importmapFileResponse.status === 404 ? {} : await importmapFileResponse.json()\n    const importmapNormalized = normalizeImportMap(importmap, importmapFileUrl)\n    importMap = importmapNormalized\n  }\n\n  const importFile = async (specifier) => {\n    const nodeSystem = await memoizedCreateNodeSystem({\n      projectDirectoryUrl,\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n      importMap,\n      importDefaultExtension,\n      fetchSource,\n    })\n    return makePromiseKeepNodeProcessAlive(nodeSystem.import(specifier))\n  }\n\n  const executeFile = async (\n    specifier,\n    { errorExposureInConsole = true, errorTransform = (error) => error } = {},\n  ) => {\n    const nodeSystem = await memoizedCreateNodeSystem({\n      projectDirectoryUrl,\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n      importMap,\n      importDefaultExtension,\n      fetchSource,\n    })\n    try {\n      const namespace = await makePromiseKeepNodeProcessAlive(nodeSystem.import(specifier))\n      return {\n        status: \"completed\",\n        namespace,\n        coverageMap: readCoverage(),\n      }\n    } catch (error) {\n      let transformedError\n      try {\n        transformedError = await errorTransform(error)\n      } catch (e) {\n        transformedError = error\n      }\n\n      if (errorExposureInConsole) console.error(transformedError)\n\n      return {\n        status: \"errored\",\n        exceptionSource: unevalException(transformedError),\n        coverageMap: readCoverage(),\n      }\n    }\n  }\n\n  return {\n    compileDirectoryRelativeUrl,\n    importFile,\n    executeFile,\n  }\n}\n\nconst importJson = async (url) => {\n  const response = await fetchSource(url)\n  const object = await response.json()\n  return object\n}\n\nconst unevalException = (value) => {\n  return uneval(value)\n}\n\nconst readCoverage = () => global.__coverage__\n\nconst makePromiseKeepNodeProcessAlive = async (promise) => {\n  const timerId = setInterval(() => {}, 10000)\n\n  try {\n    const value = await promise\n    return value\n  } finally {\n    clearInterval(timerId)\n  }\n}\n",
    "import { createNodeRuntime } from \"./internal/runtime/createNodeRuntime/createNodeRuntime.js\"\n\nexport const nodeRuntime = {\n  create: createNodeRuntime,\n}\n",
    "import { resolveUrl } from \"@jsenv/util\"\nimport { installNodeErrorStackRemapping } from \"../error-stack-remapping/installNodeErrorStackRemapping.js\"\nimport { nodeRuntime } from \"../../nodeRuntime.js\"\n\nexport const execute = async ({\n  projectDirectoryUrl,\n  fileRelativeUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n\n  executionId,\n  // do not log in the console\n  // because error handling becomes responsability\n  // of node code launching node process\n  // it avoids seeing error in runtime logs during testing\n  errorExposureInConsole = false,\n}) => {\n  const { compileDirectoryRelativeUrl, executeFile } = await nodeRuntime.create({\n    projectDirectoryUrl,\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const { getErrorOriginalStackString } = installNodeErrorStackRemapping({\n    projectDirectoryUrl,\n  })\n\n  const compiledFileRemoteUrl = resolveUrl(\n    fileRelativeUrl,\n    `${compileServerOrigin}/${compileDirectoryRelativeUrl}`,\n  )\n  return executeFile(compiledFileRemoteUrl, {\n    executionId,\n    errorTransform: async (error) => {\n      // code can throw something else than an error\n      // in that case return it unchanged\n      if (!error || !(error instanceof Error)) return error\n\n      const originalStack = await getErrorOriginalStackString(error)\n      error.stack = originalStack\n      return error\n    },\n    errorExposureInConsole,\n  })\n}\n"
  ],
  "names": [
    "obj",
    "key",
    "value",
    "Object",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "target",
    "i",
    "arguments",
    "length",
    "source",
    "ownKeys",
    "forEach",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "getOwnPropertyDescriptor",
    "object",
    "enumerableOnly",
    "keys",
    "getOwnPropertySymbols",
    "symbols",
    "filter",
    "sym",
    "push",
    "apply",
    "excluded",
    "sourceKeys",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "sourceSymbolKeys",
    "prototype",
    "propertyIsEnumerable",
    "call",
    "filenameContainsBackSlashes",
    "__filename",
    "url",
    "replace",
    "require",
    "createRequire",
    "then",
    "direct",
    "Promise",
    "resolve",
    "f",
    "args",
    "e",
    "reject",
    "globalAgent",
    "options",
    "rejectUnauthorized",
    "fetchUrl",
    "ignoreHttpsError",
    "rest",
    "serverFetchUrl",
    "response",
    "status",
    "statusText",
    "headers",
    "headersToObject",
    "text",
    "bind",
    "json",
    "blob",
    "arrayBuffer",
    "arrayLikeToArray",
    "arr",
    "len",
    "arr2",
    "Array",
    "isArray",
    "iter",
    "Symbol",
    "iterator",
    "from",
    "unsupportedIterableToArray",
    "o",
    "minLen",
    "n",
    "toString",
    "slice",
    "constructor",
    "name",
    "test",
    "TypeError",
    "arrayWithoutHoles",
    "iterableToArray",
    "nonIterableSpread",
    "stackToString",
    "stack",
    "error",
    "indent",
    "message",
    "stackString",
    "map",
    "callSite",
    "join",
    "nativeTypeOf",
    "customTypeOf",
    "parseDataUrl",
    "dataUrl",
    "afterDataProtocol",
    "commaIndex",
    "beforeComma",
    "mediaType",
    "base64Flag",
    "endsWith",
    "afterComma",
    "data",
    "dataUrlToRawData",
    "base64ToString",
    "dataToBase64",
    "window",
    "atob",
    "Buffer",
    "btoa",
    "base64String",
    "getJavaScriptSourceMappingUrl",
    "javaScriptSource",
    "sourceMappingUrl",
    "replaceSourceMappingUrl",
    "javascriptSourceMappingUrlCommentRegexp",
    "regexp",
    "callback",
    "lastSourceMappingUrl",
    "matchSourceMappingUrl",
    "exec",
    "index",
    "before",
    "after",
    "mappedAfter",
    "match",
    "firstGroup",
    "startsWithWindowsDriveLetter",
    "string",
    "firstChar",
    "secondChar",
    "windowsFilePathToUrl",
    "windowsFilePath",
    "replaceBackSlashesWithSlashes",
    "body",
    "result",
    "remapCallSite",
    "urlToSourcemapConsumer",
    "resolveFile",
    "readErrorStack",
    "onFailure",
    "isNative",
    "getFileName",
    "getScriptNameOrSourceURL",
    "line",
    "getLineNumber",
    "column",
    "getColumnNumber",
    "remapSourcePosition",
    "originalPosition",
    "callSiteClone",
    "cloneCallSite",
    "getFunctionName",
    "isEval",
    "origin",
    "getEvalOrigin",
    "remapEvalOrigin",
    "originalEvalOrigin",
    "methods",
    "callSiteToFunctionCall",
    "fileLocation",
    "callSiteToFileLocation",
    "isConstructor",
    "isMethodCall",
    "isToplevel",
    "callSiteToMethodCall",
    "functionName",
    "typeName",
    "callSiteToType",
    "methodName",
    "getMethodName",
    "as",
    "generateAs",
    "startsWith",
    "getTypeName",
    "sourceFile",
    "callSiteToSourceFile",
    "lineNumber",
    "columnNumber",
    "fileName",
    "topLevelEvalMatch",
    "Number",
    "nestedEvalMatch",
    "position",
    "sourceToUrl",
    "sourceMapConsumer",
    "originalPositionFor",
    "originalSource",
    "type",
    "createDetailedMessage",
    "startsWithScheme",
    "recover",
    "getOriginalCallsites",
    "fetchFile",
    "SourceMapConsumer",
    "memoizeByFirstArgStringValue",
    "stackTraceFileUrl",
    "fileResponse",
    "jsSourcemapUrl",
    "sourcemapUrl",
    "sourcemapString",
    "sourcemapResponse",
    "sourceMap",
    "JSON",
    "parse",
    "sourcesContent",
    "firstSourceMapSourceFailure",
    "all",
    "sources",
    "sourcemapSourceUrl",
    "sourceResponse",
    "sourceString",
    "fn",
    "stringValueCache",
    "firstArgValue",
    "installErrorStackRemapping",
    "errorRemappingCache",
    "WeakMap",
    "errorRemapFailureCallbackMap",
    "installed",
    "previousPrepareStackTrace",
    "Error",
    "prepareStackTrace",
    "install",
    "uninstall",
    "failureData",
    "failureCallbackArray",
    "get",
    "stackRemappingPromise",
    "memoizeFetch",
    "set",
    "getErrorOriginalStackString",
    "console",
    "warn",
    "remapFailureCallbackArray",
    "promise",
    "originalCallsites",
    "firstCall",
    "assign",
    "filename",
    "lineno",
    "columnno",
    "urlCache",
    "responsePromise",
    "installNodeErrorStackRemapping",
    "projectDirectoryUrl",
    "specifier",
    "importer",
    "ensureWindowsDriveLetter",
    "resolveUrl",
    "_arr",
    "_n",
    "_d",
    "_e",
    "_i",
    "_s",
    "next",
    "done",
    "err",
    "return",
    "arrayWithHoles",
    "iterableToArrayLimit",
    "nonIterableRest",
    "memoize",
    "compute",
    "memoized",
    "memoizedValue",
    "fnWithMemoization",
    "forget",
    "undefined",
    "fetchSource",
    "executionId",
    "COMPILE_ID_OTHERWISE",
    "computeCompileIdFromGroupId",
    "groupId",
    "groupMap",
    "createUnexpectedGroupIdMessage",
    "compileId",
    "detectNode",
    "version",
    "process",
    "valueToVersion",
    "numberToVersion",
    "stringToVersion",
    "createValueErrorMessage",
    "number",
    "major",
    "minor",
    "patch",
    "parts",
    "split",
    "isNaN",
    "versionCompare",
    "versionA",
    "versionB",
    "semanticVersionA",
    "semanticVersionB",
    "majorDiff",
    "minorDiff",
    "patchDiff",
    "versionIsBelow",
    "versionSupposedBelow",
    "versionSupposedAbove",
    "findHighestVersion",
    "values",
    "reduce",
    "highestVersion",
    "resolveGroup",
    "find",
    "compileIdCandidate",
    "runtimeCompatMap",
    "versionForGroup",
    "resolveNodeGroup",
    "errMsg",
    "errCode",
    "msg",
    "hasSymbol",
    "hasSelf",
    "self",
    "hasDocument",
    "document",
    "envGlobal",
    "global",
    "baseUrl",
    "baseEl",
    "querySelector",
    "href",
    "location",
    "lastSepIndex",
    "lastIndexOf",
    "backslashRegEx",
    "resolveIfNotPlainOrUrl",
    "relUrl",
    "parentUrl",
    "parentProtocol",
    "pathname",
    "segmented",
    "output",
    "segmentIndex",
    "pop",
    "resolveAndComposePackages",
    "packages",
    "outPackages",
    "parentMap",
    "p",
    "resolvedLhs",
    "rhs",
    "mapped",
    "resolveImportMap",
    "targetWarning",
    "resolveAndComposeImportMap",
    "outMap",
    "imports",
    "u",
    "scopes",
    "resolvedScope",
    "depcache",
    "integrity",
    "getMatch",
    "path",
    "matchObj",
    "sepIndex",
    "segment",
    "applyPackages",
    "id",
    "pkgName",
    "pkg",
    "code",
    "importMap",
    "resolvedOrPlain",
    "scopeUrl",
    "packageResolution",
    "toStringTag",
    "REGISTRY",
    "SystemJS",
    "systemJSPrototype",
    "import",
    "loader",
    "prepareImport",
    "load",
    "getOrCreateLoad",
    "C",
    "topLevelLoad",
    "createContext",
    "parentId",
    "loadToId",
    "triggerOnload",
    "isErrSource",
    "onload",
    "d",
    "lastRegister",
    "register",
    "deps",
    "declare",
    "getRegister",
    "_lastRegister",
    "firstParentUrl",
    "importerSetters",
    "ns",
    "create",
    "instantiatePromise",
    "instantiate",
    "registration",
    "_export",
    "h",
    "changed",
    "__esModule",
    "setter",
    "declared",
    "importId",
    "meta",
    "execute",
    "setters",
    "linkPromise",
    "instantiation",
    "dep",
    "depId",
    "depLoad",
    "I",
    "depLoads",
    "catch",
    "er",
    "L",
    "E",
    "instantiateAll",
    "loaded",
    "postOrderExec",
    "nullContext",
    "freeze",
    "seen",
    "depLoadPromises",
    "depLoadPromise",
    "doExec",
    "execPromise",
    "System",
    "importMapPromise",
    "processFirst",
    "doProcessScripts",
    "processScripts",
    "addEventListener",
    "querySelectorAll",
    "script",
    "sp",
    "src",
    "fetchPromise",
    "fetch",
    "res",
    "innerHTML",
    "extendImportMap",
    "newMapText",
    "newMapUrl",
    "newMap",
    "evt",
    "lastWindowErrorUrl",
    "lastWindowError",
    "baseOrigin",
    "createScript",
    "createElement",
    "async",
    "crossOrigin",
    "lastAutoImportUrl",
    "lastAutoImportDeps",
    "lastAutoImportTimeout",
    "autoImportCandidates",
    "systemRegister",
    "readyState",
    "scripts",
    "lastScript",
    "setTimeout",
    "autoImportRegistration",
    "head",
    "removeChild",
    "clearTimeout",
    "appendChild",
    "shouldFetch",
    "jsContentTypeRegEx",
    "parent",
    "credentials",
    "ok",
    "contentType",
    "eval",
    "throwUnresolved",
    "systemInstantiate",
    "preloads",
    "importScripts",
    "fromFunctionReturningNamespace",
    "fromFunctionReturningRegisteredModule",
    "namespace",
    "getModuleDetails",
    "fromUrl",
    "importerUrl",
    "instantiateJavaScript",
    "compileServerOrigin",
    "outDirectoryRelativeUrl",
    "moduleResponse",
    "notFound",
    "bodyAsJson",
    "parsingError",
    "bodyAsText",
    "default",
    "contentTypeShouldBeReadAsText",
    "relativeUrl",
    "tryToFindProjectRelativeUrl",
    "importerRelativeUrl",
    "details",
    "file",
    "afterOrigin",
    "afterCompileDirectory",
    "nextSlashIndex",
    "afterCompileId",
    "valueInstall",
    "has",
    "previous",
    "NATIVE_NODE_MODULE_SPECIFIER_ARRAY",
    "isNativeNodeModuleBareSpecifier",
    "includes",
    "evalSource",
    "filePath",
    "Script",
    "runInThisContext",
    "_async",
    "GLOBAL_SPECIFIER",
    "createNodeSystem",
    "importDefaultExtension",
    "nodeSystem",
    "resolveImport",
    "defaultExtension",
    "formatImporterForError",
    "importerProjectRelativeUrl",
    "moduleExportsForNativeNodeModule",
    "moduleExportsToModuleNamespace",
    "responseBody",
    "responseUrl",
    "uninstallSystemGlobal",
    "responseUrlToSourceUrl",
    "originalUrl",
    "urlToOriginalUrl",
    "urlResolved",
    "urlToFileSystemPath",
    "fileUrl",
    "moduleExports",
    "_await",
    "memoizedCreateNodeSystem",
    "thrown",
    "finalizer",
    "createNodeRuntime",
    "outDirectoryUrl",
    "groupMapUrl",
    "String",
    "URL",
    "envUrl",
    "importJson",
    "importMapFileRelativeUrl",
    "compileDirectoryRelativeUrl",
    "importmapFileUrl",
    "importmapFileResponse",
    "importmap",
    "importmapNormalized",
    "normalizeImportMap",
    "importFile",
    "makePromiseKeepNodeProcessAlive",
    "executeFile",
    "errorExposureInConsole",
    "errorTransform",
    "coverageMap",
    "readCoverage",
    "transformedError",
    "exceptionSource",
    "unevalException",
    "uneval",
    "__coverage__",
    "timerId",
    "setInterval",
    "clearInterval",
    "nodeRuntime",
    "fileRelativeUrl",
    "compiledFileRemoteUrl",
    "originalStack"
  ],
  "mappings": "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"
}