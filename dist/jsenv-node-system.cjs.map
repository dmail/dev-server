{
  "version": 3,
  "file": "jsenv-node-system.cjs",
  "sources": [
    "../helpers/babel/defineProperty/defineProperty.js",
    "../helpers/babel/objectSpread2/objectSpread2.js",
    "../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../helpers/babel/typeof/typeof.js",
    "../node_modules/@jsenv/util/src/internal/ensureUrlTrailingSlash.js",
    "../node_modules/@jsenv/util/src/isFileSystemPath.js",
    "../node_modules/@jsenv/util/src/fileSystemPathToUrl.js",
    "../node_modules/@jsenv/util/src/assertAndNormalizeDirectoryUrl.js",
    "../node_modules/@jsenv/util/src/assertAndNormalizeFileUrl.js",
    "../node_modules/@jsenv/util/src/urlToFileSystemPath.js",
    "../node_modules/@jsenv/util/src/readFileSystemNodeStat.js",
    "../node_modules/@jsenv/util/src/bufferToEtag.js",
    "../node_modules/@jsenv/cancellation/src/createCancellationToken.js",
    "../node_modules/@jsenv/cancellation/src/operation/createOperation.js",
    "../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../helpers/babel/arrayWithoutHoles/arrayWithoutHoles.js",
    "../helpers/babel/iterableToArray/iterableToArray.js",
    "../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../helpers/babel/nonIterableSpread/nonIterableSpread.js",
    "../helpers/babel/toConsumableArray/toConsumableArray.js",
    "../node_modules/@jsenv/util/src/readDirectory.js",
    "../node_modules/@jsenv/util/src/writeDirectory.js",
    "../node_modules/@jsenv/util/src/resolveUrl.js",
    "../node_modules/@jsenv/util/src/ensureWindowsDriveLetter.js",
    "../node_modules/@jsenv/util/src/writeSymbolicLink.js",
    "../node_modules/@jsenv/util/src/readFileSystemNodePermissions.js",
    "../node_modules/@jsenv/util/src/readFile.js",
    "../node_modules/@jsenv/util/src/internal/createWatcher.js",
    "../node_modules/@jsenv/util/src/registerDirectoryLifecycle.js",
    "../node_modules/@jsenv/util/src/testFileSystemNodePermissions.js",
    "../node_modules/@jsenv/util/src/writeFile.js",
    "../node_modules/@jsenv/import-map/src/internal/assertImportMap.js",
    "../node_modules/@jsenv/import-map/src/internal/hasScheme.js",
    "../node_modules/@jsenv/import-map/src/internal/urlToScheme.js",
    "../node_modules/@jsenv/import-map/src/internal/urlToPathname.js",
    "../node_modules/@jsenv/import-map/src/internal/urlToOrigin.js",
    "../node_modules/@jsenv/import-map/src/internal/pathnameToParentPathname.js",
    "../node_modules/@jsenv/import-map/src/resolveUrl.js",
    "../node_modules/@jsenv/import-map/src/internal/tryUrlResolution.js",
    "../node_modules/@jsenv/import-map/src/resolveSpecifier.js",
    "../node_modules/@jsenv/import-map/src/sortImportMap.js",
    "../node_modules/@jsenv/import-map/src/normalizeImportMap.js",
    "../node_modules/@jsenv/import-map/src/internal/pathnameToExtension.js",
    "../node_modules/@jsenv/import-map/src/applyImportMap.js",
    "../node_modules/@jsenv/import-map/src/resolveImport.js",
    "../src/internal/bundling/import-meta-commonjs.js",
    "../src/internal/require.js",
    "../node_modules/@jsenv/server/src/internal/compositionMappingToComposeStrict.js",
    "../node_modules/@jsenv/server/src/internal/compositionMappingToCompose.js",
    "../node_modules/@jsenv/server/src/internal/composeResponseHeaders.js",
    "../node_modules/@jsenv/server/src/composeResponse.js",
    "../node_modules/@jsenv/server/src/convertFileSystemErrorToResponseProperties.js",
    "../node_modules/@jsenv/server/src/internal/observable.js",
    "../helpers/babel/arrayWithHoles/arrayWithHoles.js",
    "../helpers/babel/iterableToArrayLimit/iterableToArrayLimit.js",
    "../helpers/babel/nonIterableRest/nonIterableRest.js",
    "../helpers/babel/slicedToArray/slicedToArray.js",
    "../node_modules/@jsenv/server/src/serverTiming.js",
    "../node_modules/@jsenv/server/src/jsenvContentTypeMap.js",
    "../node_modules/@jsenv/server/src/urlToContentType.js",
    "../node_modules/@jsenv/server/src/serveFile.js",
    "../node_modules/@jsenv/server/src/fetchUrl.js",
    "../node_modules/@jsenv/server/src/startServer.js",
    "../src/internal/fetchUrl.js",
    "../src/internal/error-stack-remapping/stackToString.js",
    "../src/internal/dataUrl.utils.js",
    "../src/internal/sourceMappingURLUtils.js",
    "../src/internal/filePathUtils.js",
    "../src/internal/error-stack-remapping/remapCallSite.js",
    "../src/internal/error-stack-remapping/getOriginalStackString.js",
    "../src/internal/error-stack-remapping/installErrorStackRemapping.js",
    "../src/internal/error-stack-remapping/installNodeErrorStackRemapping.js",
    "../node_modules/@jsenv/uneval/src/internal/isComposite.js",
    "../node_modules/@jsenv/uneval/src/internal/global-value-path.js",
    "../node_modules/@jsenv/uneval/src/internal/decompose.js",
    "../node_modules/@jsenv/uneval/src/internal/sortRecipe.js",
    "../node_modules/@jsenv/uneval/src/internal/escapeString.js",
    "../node_modules/@jsenv/uneval/src/uneval.js",
    "../src/internal/memoize.js",
    "../src/internal/runtime/createNodeRuntime/fetchSource.js",
    "../src/internal/CONSTANTS.js",
    "../src/internal/runtime/computeCompileIdFromGroupId.js",
    "../src/internal/runtime/detectNode/detectNode.js",
    "../src/internal/semantic-versioning/valueToVersion.js",
    "../src/internal/semantic-versioning/versionCompare.js",
    "../src/internal/semantic-versioning/versionIsBelow.js",
    "../src/internal/semantic-versioning/findHighestVersion.js",
    "../src/internal/runtime/resolveGroup.js",
    "../src/internal/runtime/resolveNodeGroup.js",
    "../src/internal/runtime/s.js",
    "../src/internal/runtime/module-registration.js",
    "../src/internal/runtime/valueInstall.js",
    "../src/internal/runtime/createNodeRuntime/isNativeNodeModuleBareSpecifier.js",
    "../src/internal/runtime/createNodeRuntime/evalSource.js",
    "../src/internal/runtime/createNodeRuntime/createNodeSystem.js",
    "../src/internal/runtime/createNodeRuntime/createNodeRuntime.js",
    "../src/nodeRuntime.js",
    "../src/internal/node-launcher/node-js-file.js"
  ],
  "sourcesContent": [
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nexport default function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    // eslint-disable-next-line prefer-rest-params\n    var source = arguments[i] === null ? {} : arguments[i]\n    if (i % 2) {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n\n// This function is different to \"Reflect.ownKeys\". The enumerableOnly\n// filters on symbol properties only. Returned string properties are always\n// enumerable. It is good to use in objectSpread.\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly)\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    // eslint-disable-next-line prefer-spread\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const ensureUrlTrailingSlash = (url) => {\n  return url.endsWith(\"/\") ? url : `${url}/`\n}\n",
    "export const isFileSystemPath = (value) => {\n  if (typeof value !== \"string\") {\n    throw new TypeError(`isFileSystemPath first arg must be a string, got ${value}`)\n  }\n\n  if (value[0] === \"/\") return true\n  return startsWithWindowsDriveLetter(value)\n}\n\nconst startsWithWindowsDriveLetter = (string) => {\n  const firstChar = string[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n\n  const secondChar = string[1]\n  if (secondChar !== \":\") return false\n\n  return true\n}\n",
    "import { pathToFileURL } from \"url\"\nimport { isFileSystemPath } from \"./isFileSystemPath.js\"\n\nexport const fileSystemPathToUrl = (value) => {\n  if (!isFileSystemPath(value)) {\n    throw new Error(`received an invalid value for fileSystemPath: ${value}`)\n  }\n  return String(pathToFileURL(value))\n}\n",
    "import { ensureUrlTrailingSlash } from \"./internal/ensureUrlTrailingSlash.js\"\nimport { isFileSystemPath } from \"./isFileSystemPath.js\"\nimport { fileSystemPathToUrl } from \"./fileSystemPathToUrl.js\"\n\nexport const assertAndNormalizeDirectoryUrl = (value) => {\n  let urlString\n\n  if (value instanceof URL) {\n    urlString = value.href\n  } else if (typeof value === \"string\") {\n    if (isFileSystemPath(value)) {\n      urlString = fileSystemPathToUrl(value)\n    } else {\n      try {\n        urlString = String(new URL(value))\n      } catch (e) {\n        throw new TypeError(`directoryUrl must be a valid url, received ${value}`)\n      }\n    }\n  } else {\n    throw new TypeError(`directoryUrl must be a string or an url, received ${value}`)\n  }\n\n  if (!urlString.startsWith(\"file://\")) {\n    throw new Error(`directoryUrl must starts with file://, received ${value}`)\n  }\n\n  return ensureUrlTrailingSlash(urlString)\n}\n",
    "import { isFileSystemPath } from \"./isFileSystemPath.js\"\nimport { fileSystemPathToUrl } from \"./fileSystemPathToUrl.js\"\n\nexport const assertAndNormalizeFileUrl = (value, baseUrl) => {\n  let urlString\n\n  if (value instanceof URL) {\n    urlString = value.href\n  } else if (typeof value === \"string\") {\n    if (isFileSystemPath(value)) {\n      urlString = fileSystemPathToUrl(value)\n    } else {\n      try {\n        urlString = String(new URL(value, baseUrl))\n      } catch (e) {\n        throw new TypeError(`fileUrl must be a valid url, received ${value}`)\n      }\n    }\n  } else {\n    throw new TypeError(`fileUrl must be a string or an url, received ${value}`)\n  }\n\n  if (!urlString.startsWith(\"file://\")) {\n    throw new Error(`fileUrl must starts with file://, received ${value}`)\n  }\n\n  return urlString\n}\n",
    "import { fileURLToPath } from \"url\"\n\nexport const urlToFileSystemPath = (fileUrl) => {\n  if (fileUrl[fileUrl.length - 1] === \"/\") {\n    // remove trailing / so that nodejs path becomes predictable otherwise it logs\n    // the trailing slash on linux but does not on windows\n    fileUrl = fileUrl.slice(0, -1)\n  }\n  const fileSystemPath = fileURLToPath(fileUrl)\n  return fileSystemPath\n}\n",
    "import { lstat, stat } from \"fs\"\nimport { assertAndNormalizeFileUrl } from \"./assertAndNormalizeFileUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\nimport { writeFileSystemNodePermissions } from \"./writeFileSystemNodePermissions.js\"\n\nconst isWindows = process.platform === \"win32\"\n\nexport const readFileSystemNodeStat = async (\n  source,\n  { nullIfNotFound = false, followLink = true } = {},\n) => {\n  if (source.endsWith(\"/\")) source = source.slice(0, -1)\n\n  const sourceUrl = assertAndNormalizeFileUrl(source)\n  const sourcePath = urlToFileSystemPath(sourceUrl)\n\n  const handleNotFoundOption = nullIfNotFound\n    ? {\n        handleNotFoundError: () => null,\n      }\n    : {}\n\n  return readStat(sourcePath, {\n    followLink,\n    ...handleNotFoundOption,\n    ...(isWindows\n      ? {\n          // Windows can EPERM on stat\n          handlePermissionDeniedError: async (error) => {\n            console.error(`trying to fix windows EPERM after stats on ${sourcePath}`)\n\n            try {\n              // unfortunately it means we mutate the permissions\n              // without being able to restore them to the previous value\n              // (because reading current permission would also throw)\n              await writeFileSystemNodePermissions(sourceUrl, 0o666)\n              const stats = await readStat(sourcePath, {\n                followLink,\n                ...handleNotFoundOption,\n                // could not fix the permission error, give up and throw original error\n                handlePermissionDeniedError: () => {\n                  console.error(`still got EPERM after stats on ${sourcePath}`)\n                  throw error\n                },\n              })\n              return stats\n            } catch (e) {\n              console.error(\n                `error while trying to fix windows EPERM after stats on ${sourcePath}: ${e.stack}`,\n              )\n              throw error\n            }\n          },\n        }\n      : {}),\n  })\n}\n\nconst readStat = (\n  sourcePath,\n  { followLink, handleNotFoundError = null, handlePermissionDeniedError = null } = {},\n) => {\n  const nodeMethod = followLink ? stat : lstat\n\n  return new Promise((resolve, reject) => {\n    nodeMethod(sourcePath, (error, statsObject) => {\n      if (error) {\n        if (handleNotFoundError && error.code === \"ENOENT\") {\n          resolve(handleNotFoundError(error))\n        } else if (\n          handlePermissionDeniedError &&\n          (error.code === \"EPERM\" || error.code === \"EACCES\")\n        ) {\n          resolve(handlePermissionDeniedError(error))\n        } else {\n          reject(error)\n        }\n      } else {\n        resolve(statsObject)\n      }\n    })\n  })\n}\n",
    "import { createHash } from \"crypto\"\n\nconst ETAG_FOR_EMPTY_CONTENT = '\"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk\"'\n\nexport const bufferToEtag = (buffer) => {\n  if (!Buffer.isBuffer(buffer)) {\n    throw new TypeError(`buffer expected, got ${buffer}`)\n  }\n\n  if (buffer.length === 0) {\n    return ETAG_FOR_EMPTY_CONTENT\n  }\n\n  const hash = createHash(\"sha1\")\n  hash.update(buffer, \"utf8\")\n\n  const hashBase64String = hash.digest(\"base64\")\n  const hashBase64StringSubset = hashBase64String.slice(0, 27)\n  const length = buffer.length\n\n  return `\"${length.toString(16)}-${hashBase64StringSubset}\"`\n}\n",
    "export const createCancellationToken = () => {\n  const register = (callback) => {\n    if (typeof callback !== \"function\") {\n      throw new Error(`callback must be a function, got ${callback}`)\n    }\n\n    return {\n      callback,\n      unregister: () => {},\n    }\n  }\n\n  const throwIfRequested = () => undefined\n\n  return {\n    register,\n    cancellationRequested: false,\n    throwIfRequested,\n  }\n}\n",
    "import { createCancellationToken } from \"../createCancellationToken.js\"\n\nexport const createOperation = ({\n  cancellationToken = createCancellationToken(),\n  start,\n  ...rest\n}) => {\n  const unknownArgumentNames = Object.keys(rest)\n  if (unknownArgumentNames.length) {\n    throw new Error(`createOperation called with unknown argument names.\n--- unknown argument names ---\n${unknownArgumentNames}\n--- possible argument names ---\ncancellationToken\nstart`)\n  }\n\n  cancellationToken.throwIfRequested()\n  const promise = new Promise((resolve) => {\n    resolve(start())\n  })\n  const cancelPromise = new Promise((resolve, reject) => {\n    const cancelRegistration = cancellationToken.register((cancelError) => {\n      cancelRegistration.unregister()\n      reject(cancelError)\n    })\n    promise.then(cancelRegistration.unregister, () => {})\n  })\n  const operationPromise = Promise.race([promise, cancelPromise])\n\n  return operationPromise\n}\n",
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "import arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\n// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr)\n}\n",
    "// eslint-disable-next-line consistent-return\nexport default (iter) => {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter)\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithoutHoles from \"../arrayWithoutHoles/arrayWithoutHoles.js\"\nimport iterableToArray from \"../iterableToArray/iterableToArray.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableSpread from \"../nonIterableSpread/nonIterableSpread.js\"\n\nexport default (arr) =>\n  arrayWithoutHoles(arr) ||\n  iterableToArray(arr) ||\n  unsupportedIterableToArray(arr) ||\n  nonIterableSpread()\n",
    "import { readdir } from \"fs\"\nimport { assertAndNormalizeDirectoryUrl } from \"./assertAndNormalizeDirectoryUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\n\nexport const readDirectory = async (url, { emfileMaxWait = 1000 } = {}) => {\n  const directoryUrl = assertAndNormalizeDirectoryUrl(url)\n  const directoryPath = urlToFileSystemPath(directoryUrl)\n  const startMs = Date.now()\n  let attemptCount = 0\n\n  const attempt = () => {\n    return readdirNaive(directoryPath, {\n      handleTooManyFilesOpenedError: async (error) => {\n        attemptCount++\n        const nowMs = Date.now()\n        const timeSpentWaiting = nowMs - startMs\n        if (timeSpentWaiting > emfileMaxWait) {\n          throw error\n        }\n\n        return new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(attempt())\n          }, attemptCount)\n        })\n      },\n    })\n  }\n\n  return attempt()\n}\n\nconst readdirNaive = (directoryPath, { handleTooManyFilesOpenedError = null } = {}) => {\n  return new Promise((resolve, reject) => {\n    readdir(directoryPath, (error, names) => {\n      if (error) {\n        // https://nodejs.org/dist/latest-v13.x/docs/api/errors.html#errors_common_system_errors\n        if (handleTooManyFilesOpenedError && (error.code === \"EMFILE\" || error.code === \"ENFILE\")) {\n          resolve(handleTooManyFilesOpenedError(error))\n        } else {\n          reject(error)\n        }\n      } else {\n        resolve(names)\n      }\n    })\n  })\n}\n",
    "import { promises } from \"fs\"\nimport { statsToType } from \"./internal/statsToType.js\"\nimport { assertAndNormalizeDirectoryUrl } from \"./assertAndNormalizeDirectoryUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\nimport { readFileSystemNodeStat } from \"./readFileSystemNodeStat.js\"\n\n// https://nodejs.org/dist/latest-v13.x/docs/api/fs.html#fs_fspromises_mkdir_path_options\nconst { mkdir } = promises\n\nexport const writeDirectory = async (\n  destination,\n  { recursive = true, allowUseless = false } = {},\n) => {\n  const destinationUrl = assertAndNormalizeDirectoryUrl(destination)\n  const destinationPath = urlToFileSystemPath(destinationUrl)\n\n  const destinationStats = await readFileSystemNodeStat(destinationUrl, {\n    nullIfNotFound: true,\n    followLink: false,\n  })\n\n  if (destinationStats) {\n    if (destinationStats.isDirectory()) {\n      if (allowUseless) {\n        return\n      }\n      throw new Error(`directory already exists at ${destinationPath}`)\n    }\n\n    const destinationType = statsToType(destinationStats)\n    throw new Error(\n      `cannot write directory at ${destinationPath} because there is a ${destinationType}`,\n    )\n  }\n\n  try {\n    await mkdir(destinationPath, { recursive })\n  } catch (error) {\n    if (allowUseless && error.code === \"EEXIST\") {\n      return\n    }\n    throw error\n  }\n}\n",
    "export const resolveUrl = (specifier, baseUrl) => {\n  if (typeof baseUrl === \"undefined\") {\n    throw new TypeError(`baseUrl missing to resolve ${specifier}`)\n  }\n\n  return String(new URL(specifier, baseUrl))\n}\n",
    "import { fileSystemPathToUrl } from \"./fileSystemPathToUrl.js\"\n\nconst isWindows = process.platform === \"win32\"\nconst baseUrlFallback = fileSystemPathToUrl(process.cwd())\n\n/**\n * Some url might be resolved or remapped to url without the windows drive letter.\n * For instance\n * new URL('/foo.js', 'file:///C:/dir/file.js')\n * resolves to\n * 'file:///foo.js'\n *\n * But on windows it becomes a problem because we need the drive letter otherwise\n * url cannot be converted to a filesystem path.\n *\n * ensureWindowsDriveLetter ensure a resolved url still contains the drive letter.\n */\n\nexport const ensureWindowsDriveLetter = (url, baseUrl) => {\n  try {\n    url = String(new URL(url))\n  } catch (e) {\n    throw new Error(`absolute url expected but got ${url}`)\n  }\n\n  if (!isWindows) {\n    return url\n  }\n\n  try {\n    baseUrl = String(new URL(baseUrl))\n  } catch (e) {\n    throw new Error(\n      `absolute baseUrl expected but got ${baseUrl} to ensure windows drive letter on ${url}`,\n    )\n  }\n\n  if (!url.startsWith(\"file://\")) {\n    return url\n  }\n  const afterProtocol = url.slice(\"file://\".length)\n  // we still have the windows drive letter\n  if (extractDriveLetter(afterProtocol)) {\n    return url\n  }\n\n  // drive letter was lost, restore it\n  const baseUrlOrFallback = baseUrl.startsWith(\"file://\") ? baseUrl : baseUrlFallback\n  const driveLetter = extractDriveLetter(baseUrlOrFallback.slice(\"file://\".length))\n  if (!driveLetter) {\n    throw new Error(\n      `drive letter expected on baseUrl but got ${baseUrl} to ensure windows drive letter on ${url}`,\n    )\n  }\n  return `file:///${driveLetter}:${afterProtocol}`\n}\n\nconst extractDriveLetter = (ressource) => {\n  // we still have the windows drive letter\n  if (/[a-zA-Z]/.test(ressource[1]) && ressource[2] === \":\") {\n    return ressource[1]\n  }\n  return null\n}\n",
    "import { promises } from \"fs\"\nimport { assertAndNormalizeFileUrl } from \"./assertAndNormalizeFileUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\nimport { isFileSystemPath } from \"./isFileSystemPath.js\"\nimport { ensureParentDirectories } from \"./ensureParentDirectories.js\"\nimport { readFileSystemNodeStat } from \"./readFileSystemNodeStat.js\"\n\n// https://nodejs.org/dist/latest-v13.x/docs/api/fs.html#fs_fspromises_symlink_target_path_type\nconst { symlink } = promises\nconst isWindows = process.platform === \"win32\"\n\nexport const writeSymbolicLink = async (destination, target, { type } = {}) => {\n  const destinationUrl = assertAndNormalizeFileUrl(destination)\n\n  let targetValue\n  if (typeof target === \"string\") {\n    // absolute filesystem path\n    if (isFileSystemPath(target)) {\n      targetValue = target\n    }\n    // relative url\n    else if (target.startsWith(\"./\") || target.startsWith(\"../\")) {\n      targetValue = target\n    }\n    // absolute url\n    else {\n      const targetUrl = String(new URL(target, destinationUrl))\n      targetValue = urlToFileSystemPath(targetUrl)\n    }\n  } else if (target instanceof URL) {\n    targetValue = urlToFileSystemPath(target)\n  } else {\n    throw new TypeError(`symbolic link target must be a string or an url, received ${target}`)\n  }\n\n  if (isWindows && typeof type !== \"string\") {\n    // without this if you write a symbolic link without specifying the type on windows\n    // you later get EPERM when doing stat on the symlink\n    const targetUrl = resolveUrl(targetValue, destinationUrl)\n    const targetStats = await readFileSystemNodeStat(targetUrl, { nullIfNotFound: true })\n    type = targetStats && targetStats.isDirectory() ? \"dir\" : \"file\"\n  }\n\n  const symbolicLinkPath = urlToFileSystemPath(destinationUrl)\n  try {\n    await symlink(targetValue, symbolicLinkPath, type)\n  } catch (error) {\n    if (error.code === \"ENOENT\") {\n      await ensureParentDirectories(destinationUrl)\n      await symlink(targetValue, symbolicLinkPath, type)\n      return\n    }\n    throw error\n  }\n}\n",
    "import { promises } from \"fs\"\nimport { binaryFlagsToPermissions } from \"./internal/permissions.js\"\nimport { assertAndNormalizeFileUrl } from \"./assertAndNormalizeFileUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\n\nconst { stat } = promises\n\nexport const readFileSystemNodePermissions = async (source) => {\n  const sourceUrl = assertAndNormalizeFileUrl(source)\n  const sourcePath = urlToFileSystemPath(sourceUrl)\n\n  const { mode } = await stat(sourcePath)\n  return binaryFlagsToPermissions(mode)\n}\n",
    "import { promisify } from \"util\"\nimport { readFile as readFileNode } from \"fs\"\nimport { assertAndNormalizeFileUrl } from \"./assertAndNormalizeFileUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\n\nconst readFilePromisified = promisify(readFileNode)\nexport const readFile = async (value, { as = \"string\" } = {}) => {\n  const fileUrl = assertAndNormalizeFileUrl(value)\n  const filePath = urlToFileSystemPath(fileUrl)\n  const buffer = await readFilePromisified(filePath)\n  if (as === \"buffer\") {\n    return buffer\n  }\n  if (as === \"string\") {\n    return buffer.toString()\n  }\n  if (as === \"json\") {\n    return JSON.parse(buffer.toString())\n  }\n  throw new Error(`as must be one of buffer,string,json, received ${as}.`)\n}\n",
    "import { watch, openSync, closeSync } from \"fs\"\n\nconst isWindows = process.platform === \"win32\"\n\nexport const createWatcher = (sourcePath, options) => {\n  const watcher = watch(sourcePath, options)\n\n  if (isWindows) {\n    watcher.on(\"error\", async (error) => {\n      // https://github.com/joyent/node/issues/4337\n      if (error.code === \"EPERM\") {\n        try {\n          const fd = openSync(sourcePath, \"r\")\n          closeSync(fd)\n        } catch (e) {\n          if (e.code === \"ENOENT\") {\n            return\n          }\n          console.error(`error while fixing windows eperm: ${e.stack}`)\n          throw error\n        }\n      } else {\n        throw error\n      }\n    })\n  }\n\n  return watcher\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport { readdirSync } from \"fs\"\nimport {\n  metaMapToSpecifierMetaMap,\n  normalizeSpecifierMetaMap,\n  urlCanContainsMetaMatching,\n  urlToMeta,\n} from \"@jsenv/url-meta\"\nimport { replaceBackSlashesWithSlashes } from \"./internal/replaceBackSlashesWithSlashes.js\"\nimport { fileSystemNodeToTypeOrNull } from \"./internal/fileSystemNodeToTypeOrNull.js\"\nimport { createWatcher } from \"./internal/createWatcher.js\"\nimport { trackRessources } from \"./internal/trackRessources.js\"\nimport { ensureUrlTrailingSlash } from \"./internal/ensureUrlTrailingSlash.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\nimport { assertAndNormalizeFileUrl } from \"./assertAndNormalizeFileUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\nimport { urlToRelativeUrl } from \"./urlToRelativeUrl.js\"\n\nconst isLinux = process.platform === \"linux\"\n// linux does not support recursive option\nconst fsWatchSupportsRecursive = !isLinux\n\nexport const registerDirectoryLifecycle = (\n  source,\n  {\n    added,\n    updated,\n    removed,\n    watchDescription = {\n      \"./**/*\": true,\n    },\n    notifyExistent = false,\n    keepProcessAlive = true,\n    recursive = false,\n  },\n) => {\n  const sourceUrl = ensureUrlTrailingSlash(assertAndNormalizeFileUrl(source))\n  if (!undefinedOrFunction(added)) {\n    throw new TypeError(`added must be a function or undefined, got ${added}`)\n  }\n  if (!undefinedOrFunction(updated)) {\n    throw new TypeError(`updated must be a function or undefined, got ${updated}`)\n  }\n  if (!undefinedOrFunction(removed)) {\n    throw new TypeError(`removed must be a function or undefined, got ${removed}`)\n  }\n\n  const specifierMetaMap = normalizeSpecifierMetaMap(\n    metaMapToSpecifierMetaMap({\n      watch: watchDescription,\n    }),\n    sourceUrl,\n  )\n  const entryShouldBeWatched = ({ relativeUrl, type }) => {\n    const entryUrl = resolveUrl(relativeUrl, sourceUrl)\n\n    if (type === \"directory\") {\n      const canContainEntryToWatch = urlCanContainsMetaMatching({\n        url: `${entryUrl}/`,\n        specifierMetaMap,\n        predicate: ({ watch }) => watch,\n      })\n      return canContainEntryToWatch\n    }\n\n    const entryMeta = urlToMeta({\n      url: entryUrl,\n      specifierMetaMap,\n    })\n\n    return entryMeta.watch\n  }\n\n  const tracker = trackRessources()\n\n  const contentMap = new Map()\n\n  const handleDirectoryEvent = ({ directoryRelativeUrl, filename, eventType }) => {\n    if (filename) {\n      if (directoryRelativeUrl) {\n        handleChange(`${directoryRelativeUrl}/${filename}`)\n      } else {\n        handleChange(`${filename}`)\n      }\n    } else if ((removed || added) && eventType === \"rename\") {\n      // we might receive `rename` without filename\n      // in that case we try to find ourselves which file was removed.\n\n      let relativeUrlCandidateArray = Array.from(contentMap.keys())\n\n      if (recursive && !fsWatchSupportsRecursive) {\n        relativeUrlCandidateArray = relativeUrlCandidateArray.filter((relativeUrlCandidate) => {\n          if (!directoryRelativeUrl) {\n            // ensure entry is top level\n            if (relativeUrlCandidate.includes(\"/\")) return false\n            return true\n          }\n\n          // entry not inside this directory\n          if (!relativeUrlCandidate.startsWith(directoryRelativeUrl)) return false\n\n          const afterDirectory = relativeUrlCandidate.slice(directoryRelativeUrl.length + 1)\n          // deep inside this directory\n          if (afterDirectory.includes(\"/\")) return false\n\n          return true\n        })\n      }\n\n      const removedEntryRelativeUrl = relativeUrlCandidateArray.find((relativeUrlCandidate) => {\n        const entryUrl = resolveUrl(relativeUrlCandidate, sourceUrl)\n        const type = fileSystemNodeToTypeOrNull(entryUrl)\n        return type === null\n      })\n\n      if (removedEntryRelativeUrl) {\n        handleEntryLost({\n          relativeUrl: removedEntryRelativeUrl,\n          type: contentMap.get(removedEntryRelativeUrl),\n        })\n      }\n    }\n  }\n\n  const handleChange = (relativeUrl) => {\n    const entryUrl = resolveUrl(relativeUrl, sourceUrl)\n    const previousType = contentMap.get(relativeUrl)\n    const type = fileSystemNodeToTypeOrNull(entryUrl)\n\n    if (!entryShouldBeWatched({ relativeUrl, type })) {\n      return\n    }\n\n    // it's something new\n    if (!previousType) {\n      if (type !== null) {\n        handleEntryFound({ relativeUrl, type, existent: false })\n      }\n      return\n    }\n\n    // it existed but now it's not here anymore\n    if (type === null) {\n      handleEntryLost({ relativeUrl, type: previousType })\n      return\n    }\n\n    // it existed but was replaced by something else\n    // it's not really an update\n    if (previousType !== type) {\n      handleEntryLost({ relativeUrl, type: previousType })\n      handleEntryFound({ relativeUrl, type })\n      return\n    }\n\n    // a directory cannot really be updated in way that matters for us\n    // filesystem is trying to tell us the directory content have changed\n    // but we don't care about that\n    // we'll already be notified about what has changed\n    if (type === \"directory\") {\n      return\n    }\n\n    // right same type, and the file existed and was not deleted\n    // it's likely an update ?\n    // but are we sure it's an update ?\n    if (updated) {\n      updated({ relativeUrl, type })\n    }\n  }\n\n  const handleEntryFound = ({ relativeUrl, type, existent }) => {\n    if (!entryShouldBeWatched({ relativeUrl, type })) {\n      return\n    }\n\n    contentMap.set(relativeUrl, type)\n\n    const entryUrl = resolveUrl(relativeUrl, sourceUrl)\n\n    if (type === \"directory\") {\n      visitDirectory({\n        directoryUrl: `${entryUrl}/`,\n        entryFound: (entry) => {\n          handleEntryFound({\n            relativeUrl: `${relativeUrl}/${entry.relativeUrl}`,\n            type: entry.type,\n            existent,\n          })\n        },\n      })\n    }\n\n    if (added) {\n      if (existent) {\n        if (notifyExistent) {\n          added({ relativeUrl, type, existent: true })\n        }\n      } else {\n        added({ relativeUrl, type })\n      }\n    }\n\n    // we must watch manually every directory we find\n    if (!fsWatchSupportsRecursive && type === \"directory\") {\n      const watcher = createWatcher(urlToFileSystemPath(entryUrl), { persistent: keepProcessAlive })\n      tracker.registerCleanupCallback(() => {\n        watcher.close()\n      })\n      watcher.on(\"change\", (eventType, filename) => {\n        handleDirectoryEvent({\n          directoryRelativeUrl: relativeUrl,\n          filename: filename ? replaceBackSlashesWithSlashes(filename) : \"\",\n          eventType,\n        })\n      })\n    }\n  }\n\n  const handleEntryLost = ({ relativeUrl, type }) => {\n    contentMap.delete(relativeUrl)\n    if (removed) {\n      removed({ relativeUrl, type })\n    }\n  }\n\n  visitDirectory({\n    directoryUrl: sourceUrl,\n    entryFound: ({ relativeUrl, type }) => {\n      handleEntryFound({ relativeUrl, type, existent: true })\n    },\n  })\n\n  const watcher = createWatcher(urlToFileSystemPath(sourceUrl), {\n    recursive: recursive && fsWatchSupportsRecursive,\n    persistent: keepProcessAlive,\n  })\n  tracker.registerCleanupCallback(() => {\n    watcher.close()\n  })\n  watcher.on(\"change\", (eventType, fileSystemPath) => {\n    handleDirectoryEvent({\n      ...fileSystemPathToDirectoryRelativeUrlAndFilename(fileSystemPath),\n      eventType,\n    })\n  })\n\n  return tracker.cleanup\n}\n\nconst undefinedOrFunction = (value) => typeof value === \"undefined\" || typeof value === \"function\"\n\nconst visitDirectory = ({ directoryUrl, entryFound }) => {\n  const directoryPath = urlToFileSystemPath(directoryUrl)\n  readdirSync(directoryPath).forEach((entry) => {\n    const entryUrl = resolveUrl(entry, directoryUrl)\n    const type = fileSystemNodeToTypeOrNull(entryUrl)\n    if (type === null) {\n      return\n    }\n\n    const relativeUrl = urlToRelativeUrl(entryUrl, directoryUrl)\n    entryFound({\n      relativeUrl,\n      type,\n    })\n  })\n}\n\nconst fileSystemPathToDirectoryRelativeUrlAndFilename = (path) => {\n  if (!path) {\n    return {\n      directoryRelativeUrl: \"\",\n      filename: \"\",\n    }\n  }\n\n  const normalizedPath = replaceBackSlashesWithSlashes(path)\n  const slashLastIndex = normalizedPath.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return {\n      directoryRelativeUrl: \"\",\n      filename: normalizedPath,\n    }\n  }\n\n  const directoryRelativeUrl = normalizedPath.slice(0, slashLastIndex)\n  const filename = normalizedPath.slice(slashLastIndex + 1)\n  return {\n    directoryRelativeUrl,\n    filename,\n  }\n}\n",
    "import { promises, constants } from \"fs\"\nimport { assertAndNormalizeFileUrl } from \"./assertAndNormalizeFileUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\n\nconst { access } = promises\nconst {\n  // F_OK,\n  R_OK,\n  W_OK,\n  X_OK,\n} = constants\n\nexport const testFileSystemNodePermissions = async (\n  source,\n  { read = false, write = false, execute = false, allowedIfNotFound = false } = {},\n) => {\n  const sourceUrl = assertAndNormalizeFileUrl(source)\n  const sourcePath = urlToFileSystemPath(sourceUrl)\n  let binaryFlags = 0\n\n  // if (visible) binaryFlags |= F_OK\n  if (read) binaryFlags |= R_OK\n  if (write) binaryFlags |= W_OK\n  if (execute) binaryFlags |= X_OK\n\n  try {\n    await access(sourcePath, binaryFlags)\n    return true\n  } catch (error) {\n    if (error.code === \"ENOENT\") {\n      if (allowedIfNotFound) {\n        return true\n      }\n      throw error\n    }\n    return false\n  }\n}\n",
    "import { promises } from \"fs\"\nimport { assertAndNormalizeFileUrl } from \"./assertAndNormalizeFileUrl.js\"\nimport { urlToFileSystemPath } from \"./urlToFileSystemPath.js\"\nimport { ensureParentDirectories } from \"./ensureParentDirectories.js\"\n\n// https://nodejs.org/dist/latest-v13.x/docs/api/fs.html#fs_fspromises_writefile_file_data_options\nconst { writeFile: writeFileNode } = promises\n\nexport const writeFile = async (destination, content = \"\") => {\n  const destinationUrl = assertAndNormalizeFileUrl(destination)\n\n  const destinationPath = urlToFileSystemPath(destinationUrl)\n  try {\n    await writeFileNode(destinationPath, content)\n  } catch (error) {\n    if (error.code === \"ENOENT\") {\n      await ensureParentDirectories(destinationUrl)\n      await writeFileNode(destinationPath, content)\n      return\n    }\n    throw error\n  }\n}\n",
    "export const assertImportMap = (value) => {\n  if (value === null) {\n    throw new TypeError(`an importMap must be an object, got null`)\n  }\n\n  const type = typeof value\n  if (type !== \"object\") {\n    throw new TypeError(`an importMap must be an object, received ${value}`)\n  }\n\n  if (Array.isArray(value)) {\n    throw new TypeError(`an importMap must be an object, received array ${value}`)\n  }\n}\n",
    "export const hasScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n",
    "export const urlToScheme = (urlString) => {\n  const colonIndex = urlString.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return urlString.slice(0, colonIndex)\n}\n",
    "import { urlToScheme } from \"./urlToScheme.js\"\n\nexport const urlToPathname = (urlString) => {\n  return ressourceToPathname(urlToRessource(urlString))\n}\n\nconst urlToRessource = (urlString) => {\n  const scheme = urlToScheme(urlString)\n\n  if (scheme === \"file\") {\n    return urlString.slice(\"file://\".length)\n  }\n\n  if (scheme === \"https\" || scheme === \"http\") {\n    // remove origin\n    const afterProtocol = urlString.slice(scheme.length + \"://\".length)\n    const pathnameSlashIndex = afterProtocol.indexOf(\"/\", \"://\".length)\n    return afterProtocol.slice(pathnameSlashIndex)\n  }\n\n  return urlString.slice(scheme.length + 1)\n}\n\nconst ressourceToPathname = (ressource) => {\n  const searchSeparatorIndex = ressource.indexOf(\"?\")\n  return searchSeparatorIndex === -1 ? ressource : ressource.slice(0, searchSeparatorIndex)\n}\n",
    "import { urlToScheme } from \"./urlToScheme.js\"\n\nexport const urlToOrigin = (urlString) => {\n  const scheme = urlToScheme(urlString)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = urlString.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return urlString\n    return urlString.slice(0, pathnameSlashIndex)\n  }\n\n  return urlString.slice(0, scheme.length + 1)\n}\n",
    "export const pathnameToParentPathname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return \"/\"\n  }\n\n  return pathname.slice(0, slashLastIndex + 1)\n}\n",
    "// could be useful: https://url.spec.whatwg.org/#url-miscellaneous\n\nimport { urlToScheme } from \"./internal/urlToScheme.js\"\nimport { urlToPathname } from \"./internal/urlToPathname.js\"\nimport { urlToOrigin } from \"./internal/urlToOrigin.js\"\nimport { pathnameToParentPathname } from \"./internal/pathnameToParentPathname.js\"\nimport { hasScheme } from \"./internal/hasScheme.js\"\n\nexport const resolveUrl = (specifier, baseUrl) => {\n  if (baseUrl) {\n    if (typeof baseUrl !== \"string\") {\n      throw new TypeError(writeBaseUrlMustBeAString({ baseUrl, specifier }))\n    }\n    if (!hasScheme(baseUrl)) {\n      throw new Error(writeBaseUrlMustBeAbsolute({ baseUrl, specifier }))\n    }\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  if (!baseUrl) {\n    throw new Error(writeBaseUrlRequired({ baseUrl, specifier }))\n  }\n\n  // scheme relative\n  if (specifier.slice(0, 2) === \"//\") {\n    return `${urlToScheme(baseUrl)}:${specifier}`\n  }\n\n  // origin relative\n  if (specifier[0] === \"/\") {\n    return `${urlToOrigin(baseUrl)}${specifier}`\n  }\n\n  const baseOrigin = urlToOrigin(baseUrl)\n  const basePathname = urlToPathname(baseUrl)\n\n  if (specifier === \".\") {\n    const baseDirectoryPathname = pathnameToParentPathname(basePathname)\n    return `${baseOrigin}${baseDirectoryPathname}`\n  }\n\n  // pathname relative inside\n  if (specifier.slice(0, 2) === \"./\") {\n    const baseDirectoryPathname = pathnameToParentPathname(basePathname)\n    return `${baseOrigin}${baseDirectoryPathname}${specifier.slice(2)}`\n  }\n\n  // pathname relative outside\n  if (specifier.slice(0, 3) === \"../\") {\n    let unresolvedPathname = specifier\n    const importerFolders = basePathname.split(\"/\")\n    importerFolders.pop()\n\n    while (unresolvedPathname.slice(0, 3) === \"../\") {\n      unresolvedPathname = unresolvedPathname.slice(3)\n      // when there is no folder left to resolved\n      // we just ignore '../'\n      if (importerFolders.length) {\n        importerFolders.pop()\n      }\n    }\n\n    const resolvedPathname = `${importerFolders.join(\"/\")}/${unresolvedPathname}`\n    return `${baseOrigin}${resolvedPathname}`\n  }\n\n  // bare\n  if (basePathname === \"\") {\n    return `${baseOrigin}/${specifier}`\n  }\n  if (basePathname[basePathname.length] === \"/\") {\n    return `${baseOrigin}${basePathname}${specifier}`\n  }\n  return `${baseOrigin}${pathnameToParentPathname(basePathname)}${specifier}`\n}\n\nconst writeBaseUrlMustBeAString = ({ baseUrl, specifier }) => `baseUrl must be a string.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlMustBeAbsolute = ({ baseUrl, specifier }) => `baseUrl must be absolute.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst writeBaseUrlRequired = ({\n  baseUrl,\n  specifier,\n}) => `baseUrl required to resolve relative specifier.\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n",
    "import { hasScheme } from \"./hasScheme.js\"\nimport { resolveUrl } from \"../resolveUrl.js\"\n\nexport const tryUrlResolution = (string, url) => {\n  const result = resolveUrl(string, url)\n  return hasScheme(result) ? result : null\n}\n",
    "import { hasScheme } from \"./internal/hasScheme.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\n\nexport const resolveSpecifier = (specifier, importer) => {\n  if (\n    specifier === \".\" ||\n    specifier[0] === \"/\" ||\n    specifier.startsWith(\"./\") ||\n    specifier.startsWith(\"../\")\n  ) {\n    return resolveUrl(specifier, importer)\n  }\n\n  if (hasScheme(specifier)) {\n    return specifier\n  }\n\n  return null\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\n\nexport const sortImportMap = (importMap) => {\n  assertImportMap(importMap)\n\n  const { imports, scopes } = importMap\n  return {\n    imports: imports ? sortImports(imports) : undefined,\n    scopes: scopes ? sortScopes(scopes) : undefined,\n  }\n}\n\nexport const sortImports = (imports) => {\n  const importsSorted = {}\n  Object.keys(imports)\n    .sort(compareLengthOrLocaleCompare)\n    .forEach((name) => {\n      importsSorted[name] = imports[name]\n    })\n  return importsSorted\n}\n\nexport const sortScopes = (scopes) => {\n  const scopesSorted = {}\n  Object.keys(scopes)\n    .sort(compareLengthOrLocaleCompare)\n    .forEach((scopeName) => {\n      scopesSorted[scopeName] = sortImports(scopes[scopeName])\n    })\n  return scopesSorted\n}\n\nconst compareLengthOrLocaleCompare = (a, b) => {\n  return b.length - a.length || a.localeCompare(b)\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\nimport { tryUrlResolution } from \"./internal/tryUrlResolution.js\"\nimport { resolveSpecifier } from \"./resolveSpecifier.js\"\nimport { sortImports, sortScopes } from \"./sortImportMap.js\"\n\nexport const normalizeImportMap = (importMap, baseUrl) => {\n  assertImportMap(importMap)\n  if (typeof baseUrl !== \"string\") {\n    throw new TypeError(formulateBaseUrlMustBeAString({ baseUrl }))\n  }\n\n  const { imports, scopes } = importMap\n\n  return {\n    imports: imports ? normalizeImports(imports, baseUrl) : undefined,\n    scopes: scopes ? normalizeScopes(scopes, baseUrl) : undefined,\n  }\n}\n\nconst normalizeImports = (imports, baseUrl) => {\n  const importsNormalized = {}\n  Object.keys(imports).forEach((specifier) => {\n    const address = imports[specifier]\n\n    if (typeof address !== \"string\") {\n      console.warn(\n        formulateAddressMustBeAString({\n          address,\n          specifier,\n        }),\n      )\n      return\n    }\n\n    const specifierResolved = resolveSpecifier(specifier, baseUrl) || specifier\n\n    const addressUrl = tryUrlResolution(address, baseUrl)\n    if (addressUrl === null) {\n      console.warn(\n        formulateAdressResolutionFailed({\n          address,\n          baseUrl,\n          specifier,\n        }),\n      )\n      return\n    }\n\n    if (specifier.endsWith(\"/\") && !addressUrl.endsWith(\"/\")) {\n      console.warn(\n        formulateAddressUrlRequiresTrailingSlash({\n          addressUrl,\n          address,\n          specifier,\n        }),\n      )\n      return\n    }\n    importsNormalized[specifierResolved] = addressUrl\n  })\n  return sortImports(importsNormalized)\n}\n\nconst normalizeScopes = (scopes, baseUrl) => {\n  const scopesNormalized = {}\n  Object.keys(scopes).forEach((scope) => {\n    const scopeValue = scopes[scope]\n    const scopeUrl = tryUrlResolution(scope, baseUrl)\n    if (scopeUrl === null) {\n      console.warn(\n        formulateScopeResolutionFailed({\n          scope,\n          baseUrl,\n        }),\n      )\n      return\n    }\n    const scopeValueNormalized = normalizeImports(scopeValue, baseUrl)\n    scopesNormalized[scopeUrl] = scopeValueNormalized\n  })\n  return sortScopes(scopesNormalized)\n}\n\nconst formulateBaseUrlMustBeAString = ({ baseUrl }) => `baseUrl must be a string.\n--- base url ---\n${baseUrl}`\n\nconst formulateAddressMustBeAString = ({ specifier, address }) => `Address must be a string.\n--- address ---\n${address}\n--- specifier ---\n${specifier}`\n\nconst formulateAdressResolutionFailed = ({\n  address,\n  baseUrl,\n  specifier,\n}) => `Address url resolution failed.\n--- address ---\n${address}\n--- base url ---\n${baseUrl}\n--- specifier ---\n${specifier}`\n\nconst formulateAddressUrlRequiresTrailingSlash = ({\n  addressURL,\n  address,\n  specifier,\n}) => `Address must end with /.\n--- address url ---\n${addressURL}\n--- address ---\n${address}\n--- specifier ---\n${specifier}`\n\nconst formulateScopeResolutionFailed = ({ scope, baseUrl }) => `Scope url resolution failed.\n--- scope ---\n${scope}\n--- base url ---\n${baseUrl}`\n",
    "export const pathnameToExtension = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex !== -1) {\n    pathname = pathname.slice(slashLastIndex + 1)\n  }\n\n  const dotLastIndex = pathname.lastIndexOf(\".\")\n  if (dotLastIndex === -1) return \"\"\n  // if (dotLastIndex === pathname.length - 1) return \"\"\n  return pathname.slice(dotLastIndex)\n}\n",
    "import { assertImportMap } from \"./internal/assertImportMap.js\"\nimport { hasScheme } from \"./internal/hasScheme.js\"\nimport { tryUrlResolution } from \"./internal/tryUrlResolution.js\"\nimport { resolveSpecifier } from \"./resolveSpecifier.js\"\n\nexport const applyImportMap = ({ importMap, specifier, importer }) => {\n  assertImportMap(importMap)\n  if (typeof specifier !== \"string\") {\n    throw new TypeError(writeSpecifierMustBeAString({ specifier, importer }))\n  }\n  if (importer) {\n    if (typeof importer !== \"string\") {\n      throw new TypeError(writeImporterMustBeAString({ importer, specifier }))\n    }\n    if (!hasScheme(importer)) {\n      throw new Error(writeImporterMustBeAbsolute({ importer, specifier }))\n    }\n  }\n\n  const specifierUrl = resolveSpecifier(specifier, importer)\n  const specifierNormalized = specifierUrl || specifier\n\n  const { scopes } = importMap\n  if (scopes && importer) {\n    const scopeKeyMatching = Object.keys(scopes).find((scopeKey) => {\n      return scopeKey === importer || specifierIsPrefixOf(scopeKey, importer)\n    })\n    if (scopeKeyMatching) {\n      const scopeValue = scopes[scopeKeyMatching]\n      const remappingFromScopeImports = applyImports(specifierNormalized, scopeValue)\n      if (remappingFromScopeImports !== null) {\n        return remappingFromScopeImports\n      }\n    }\n  }\n\n  const { imports } = importMap\n  if (imports) {\n    const remappingFromImports = applyImports(specifierNormalized, imports)\n    if (remappingFromImports !== null) {\n      return remappingFromImports\n    }\n  }\n\n  if (specifierUrl) {\n    return specifierUrl\n  }\n\n  throw new Error(writeBareSpecifierMustBeRemapped({ specifier, importer }))\n}\n\nconst applyImports = (specifier, imports) => {\n  const importKeyArray = Object.keys(imports)\n\n  let i = 0\n  while (i < importKeyArray.length) {\n    const importKey = importKeyArray[i]\n    i++\n    if (importKey === specifier) {\n      const importValue = imports[importKey]\n      return importValue\n    }\n    if (specifierIsPrefixOf(importKey, specifier)) {\n      const importValue = imports[importKey]\n      const afterImportKey = specifier.slice(importKey.length)\n\n      return tryUrlResolution(afterImportKey, importValue)\n    }\n  }\n\n  return null\n}\n\nconst specifierIsPrefixOf = (specifierHref, href) => {\n  return specifierHref[specifierHref.length - 1] === \"/\" && href.startsWith(specifierHref)\n}\n\nconst writeSpecifierMustBeAString = ({ specifier, importer }) => `specifier must be a string.\n--- specifier ---\n${specifier}\n--- importer ---\n${importer}`\n\nconst writeImporterMustBeAString = ({ importer, specifier }) => `importer must be a string.\n--- importer ---\n${importer}\n--- specifier ---\n${specifier}`\n\nconst writeImporterMustBeAbsolute = ({ importer, specifier }) => `importer must be an absolute url.\n--- importer ---\n${importer}\n--- specifier ---\n${specifier}`\n\nconst writeBareSpecifierMustBeRemapped = ({ specifier, importer }) => `Unmapped bare specifier.\n--- specifier ---\n${specifier}\n--- importer ---\n${importer}`\n",
    "import { urlToPathname } from \"./internal/urlToPathname.js\"\nimport { pathnameToExtension } from \"./internal/pathnameToExtension.js\"\nimport { resolveUrl } from \"./resolveUrl.js\"\nimport { applyImportMap } from \"./applyImportMap.js\"\n\nexport const resolveImport = ({ specifier, importer, importMap, defaultExtension = true }) => {\n  return applyDefaultExtension({\n    url: importMap\n      ? applyImportMap({ importMap, specifier, importer })\n      : resolveUrl(specifier, importer),\n    importer,\n    defaultExtension,\n  })\n}\n\nconst applyDefaultExtension = ({ url, importer, defaultExtension }) => {\n  if (urlToPathname(url).endsWith(\"/\")) {\n    return url\n  }\n\n  if (typeof defaultExtension === \"string\") {\n    const extension = pathnameToExtension(url)\n    if (extension === \"\") {\n      return `${url}${defaultExtension}`\n    }\n    return url\n  }\n\n  if (defaultExtension === true) {\n    const extension = pathnameToExtension(url)\n    if (extension === \"\" && importer) {\n      const importerPathname = urlToPathname(importer)\n      const importerExtension = pathnameToExtension(importerPathname)\n      return `${url}${importerExtension}`\n    }\n  }\n  return url\n}\n",
    "/* global require, __filename */\n// eslint-disable-next-line import/no-unresolved\nimport importMap from \"/jsenv.importmap\"\nimport { normalizeImportMap } from \"@jsenv/import-map/src/normalizeImportMap.js\"\nimport { resolveImport } from \"@jsenv/import-map/src/resolveImport.js\"\n\nconst nodeRequire = require\nexport { nodeRequire as require }\n\nconst filenameContainsBackSlashes = __filename.indexOf(\"\\\\\") > -1\n\nexport const url = filenameContainsBackSlashes\n  ? `file:///${__filename.replace(/\\\\/g, \"/\")}`\n  : `file://${__filename}`\n\nexport const resolve = (specifier) => {\n  return Promise.resolve(\n    resolveImport({\n      specifier,\n      importer: url,\n      importMap: memoizedGetImportMap(),\n      defaultExtension: false,\n    }),\n  )\n}\n\n// better for perf and helps rollup to tree shake this out\n// when import.meta.resolve is not used\nlet memoizedImportMap\nconst memoizedGetImportMap = () => {\n  if (memoizedImportMap) return memoizedImportMap\n  memoizedImportMap = normalizeImportMap(importMap, url)\n  return memoizedImportMap\n}\n",
    "import { createRequire } from \"module\"\n\nexport const require = createRequire(import.meta.url)\n",
    "export const compositionMappingToComposeStrict = (\n  compositionMapping,\n  createInitial = () => ({}),\n) => {\n  const reducer = compositionMappingToStrictReducer(compositionMapping)\n  return (...objects) => objects.reduce(reducer, createInitial())\n}\n\nconst compositionMappingToStrictReducer = (compositionMapping) => {\n  const propertyComposeStrict = (key, previous, current) => {\n    const propertyExistInCurrent = key in current\n    if (!propertyExistInCurrent) return previous[key]\n\n    const propertyExistInPrevious = key in previous\n    if (!propertyExistInPrevious) return current[key]\n\n    const composeProperty = compositionMapping[key]\n    return composeProperty(previous[key], current[key])\n  }\n\n  return (previous, current) => {\n    if (typeof current !== \"object\" || current === null) return previous\n\n    const composed = {}\n    Object.keys(compositionMapping).forEach((key) => {\n      composed[key] = propertyComposeStrict(key, previous, current)\n    })\n    return composed\n  }\n}\n",
    "export const compositionMappingToCompose = (compositionMapping, createInitial = () => ({})) => {\n  const reducer = compositionMappingToReducer(compositionMapping)\n  return (...objects) => objects.reduce(reducer, createInitial())\n}\n\nconst compositionMappingToReducer = (compositionMapping) => {\n  const composeProperty = (key, previous, current) => {\n    const propertyExistInCurrent = key in current\n    if (!propertyExistInCurrent) return previous[key]\n\n    const propertyExistInPrevious = key in previous\n    if (!propertyExistInPrevious) return current[key]\n\n    const propertyHasComposer = key in compositionMapping\n    if (!propertyHasComposer) return current[key]\n\n    const composerForProperty = compositionMapping[key]\n    return composerForProperty(previous[key], current[key])\n  }\n\n  return (previous, current) => {\n    if (typeof current !== \"object\" || current === null) return previous\n\n    const composed = { ...previous }\n    Object.keys(current).forEach((key) => {\n      composed[key] = composeProperty(key, previous, current)\n    })\n    return composed\n  }\n}\n",
    "import { compositionMappingToCompose } from \"./compositionMappingToCompose.js\"\n\nconst composeHeaderValues = (value, nextValue) => {\n  const headerValues = value.split(\", \")\n  nextValue.split(\", \").forEach((value) => {\n    if (!headerValues.includes(value)) {\n      headerValues.push(value)\n    }\n  })\n  return headerValues.join(\", \")\n}\n\nconst headerCompositionMapping = {\n  \"accept\": composeHeaderValues,\n  \"accept-charset\": composeHeaderValues,\n  \"accept-language\": composeHeaderValues,\n  \"access-control-allow-headers\": composeHeaderValues,\n  \"access-control-allow-methods\": composeHeaderValues,\n  \"access-control-allow-origin\": composeHeaderValues,\n  // https://www.w3.org/TR/server-timing/\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing\n  \"server-timing\": composeHeaderValues,\n  // 'content-type', // https://github.com/ninenines/cowboy/issues/1230\n  \"vary\": composeHeaderValues,\n}\n\nexport const composeResponseHeaders = compositionMappingToCompose(headerCompositionMapping)\n",
    "import { compositionMappingToComposeStrict } from \"./internal/compositionMappingToComposeStrict.js\"\nimport { composeResponseHeaders } from \"./internal/composeResponseHeaders.js\"\n\nconst responseCompositionMapping = {\n  status: (prevStatus, status) => status,\n  statusText: (prevStatusText, statusText) => statusText,\n  headers: composeResponseHeaders,\n  body: (prevBody, body) => body,\n  bodyEncoding: (prevEncoding, encoding) => encoding,\n  timing: (prevTiming, timing) => {\n    return { ...prevTiming, ...timing }\n  },\n}\n\nexport const composeResponse = compositionMappingToComposeStrict(responseCompositionMapping)\n",
    "export const convertFileSystemErrorToResponseProperties = (error) => {\n  // https://iojs.org/api/errors.html#errors_eacces_permission_denied\n  if (isErrorWithCode(error, \"EACCES\")) {\n    return {\n      status: 403,\n      statusText: `EACCES: No permission to read file at ${error.path}`,\n    }\n  }\n\n  if (isErrorWithCode(error, \"EPERM\")) {\n    return {\n      status: 403,\n      statusText: `EPERM: No permission to read file at ${error.path}`,\n    }\n  }\n\n  if (isErrorWithCode(error, \"ENOENT\")) {\n    return {\n      status: 404,\n      statusText: `ENOENT: File not found at ${error.path}`,\n    }\n  }\n\n  // file access may be temporarily blocked\n  // (by an antivirus scanning it because recently modified for instance)\n  if (isErrorWithCode(error, \"EBUSY\")) {\n    return {\n      status: 503,\n      statusText: `EBUSY: File is busy ${error.path}`,\n      headers: {\n        \"retry-after\": 0.01, // retry in 10ms\n      },\n    }\n  }\n\n  // emfile means there is too many files currently opened\n  if (isErrorWithCode(error, \"EMFILE\")) {\n    return {\n      status: 503,\n      statusText: \"EMFILE: too many file opened\",\n      headers: {\n        \"retry-after\": 0.1, // retry in 100ms\n      },\n    }\n  }\n\n  if (isErrorWithCode(error, \"EISDIR\")) {\n    return {\n      status: 500,\n      statusText: `EISDIR: Unexpected directory operation at ${error.path}`,\n    }\n  }\n\n  return Promise.reject(error)\n}\n\nconst isErrorWithCode = (error, code) => {\n  return typeof error === \"object\" && error.code === code\n}\n",
    "if (\"observable\" in Symbol === false) {\n  Symbol.observable = Symbol.for(\"observable\")\n}\n\nexport const createObservable = ({ subscribe }) => {\n  const observable = {\n    [Symbol.observable]: () => observable,\n    subscribe,\n  }\n  return observable\n}\n\nexport const subscribe = (\n  observable,\n  {\n    next = () => {},\n    error = (value) => {\n      throw value\n    },\n    complete = () => {},\n  },\n) => {\n  const { subscribe } = observable[Symbol.observable]()\n  const subscription = subscribe({\n    next,\n    error,\n    complete,\n  })\n  return subscription || { unsubscribe: () => {} }\n}\n\nexport const isObservable = (value) => {\n  if (value === null) return false\n  if (value === undefined) return false\n  if (typeof value === \"object\") return Symbol.observable in value\n  if (typeof value === \"function\") return Symbol.observable in value\n  return false\n}\n",
    "// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arr\n}\n",
    "export default (arr, i) => {\n  // this is an expanded form of \\`for...of\\` that properly supports abrupt completions of\n  // iterators etc. variable names have been minimised to reduce the size of this massive\n  // helper. sometimes spec compliance is annoying :(\n  //\n  // _n = _iteratorNormalCompletion\n  // _d = _didIteratorError\n  // _e = _iteratorError\n  // _i = _iterator\n  // _s = _step\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return\n  var _arr = []\n  var _n = true\n  var _d = false\n  var _e\n  var _i = arr[Symbol.iterator]()\n  var _s\n  try {\n    for (; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value)\n      if (i && _arr.length === i) break\n    }\n  } catch (err) {\n    _d = true\n    _e = err\n  } finally {\n    try {\n      if (!_n && _i.return !== null) _i.return()\n    } finally {\n      if (_d) throw _e\n    }\n  }\n  // eslint-disable-next-line consistent-return\n  return _arr\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithHoles from \"../arrayWithHoles/arrayWithHoles.js\"\nimport iterableToArrayLimit from \"../iterableToArrayLimit/iterableToArrayLimit.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableRest from \"../nonIterableRest/nonIterableRest.js\"\n\nexport default (arr, i) =>\n  arrayWithHoles(arr) ||\n  iterableToArrayLimit(arr, i) ||\n  unsupportedIterableToArray(arr, i) ||\n  nonIterableRest()\n",
    "import { performance } from \"perf_hooks\"\n\nexport const timeStart = (name) => {\n  // as specified in https://w3c.github.io/server-timing/#the-performanceservertiming-interface\n  // duration is a https://www.w3.org/TR/hr-time-2/#sec-domhighrestimestamp\n  const startTimestamp = performance.now()\n  const timeEnd = () => {\n    const endTimestamp = performance.now()\n    const timing = {\n      [name]: endTimestamp - startTimestamp,\n    }\n    return timing\n  }\n  return timeEnd\n}\n\nexport const timeFunction = (name, fn) => {\n  const timeEnd = timeStart(name)\n  const returnValue = fn()\n  if (returnValue && typeof returnValue.then === \"function\") {\n    return returnValue.then((value) => {\n      return [timeEnd(), value]\n    })\n  }\n  return [timeEnd(), returnValue]\n}\n\n// to predict order in chrome devtools we should put a,b,c,d,e or something\n// because in chrome dev tools they are shown in alphabetic order\n// also we should manipulate a timing object instead of a header to facilitate\n// manipulation of the object so that the timing header response generation logic belongs to @jsenv/server\n// so response can return a new timing object\n// yes it's awful, feel free to PR with a better approach :)\nexport const timingToServerTimingResponseHeaders = (timing) => {\n  const serverTimingValue = Object.keys(timing)\n    .map((key, index) => {\n      const time = timing[key]\n      return `${letters[index] || \"zz\"};desc=\"${key}\";dur=${time}`\n    })\n    .join(\", \")\n\n  return { \"server-timing\": serverTimingValue }\n}\n\nconst letters = [\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n]\n",
    "export const jsenvContentTypeMap = {\n  \"application/javascript\": {\n    extensions: [\"js\", \"cjs\", \"mjs\", \"ts\", \"jsx\"],\n  },\n  \"application/json\": {\n    extensions: [\"json\"],\n  },\n  \"application/importmap+json\": {\n    extensions: [\"importmap\"],\n  },\n  \"application/octet-stream\": {},\n  \"application/pdf\": {\n    extensions: [\"pdf\"],\n  },\n  \"application/xml\": {\n    extensions: [\"xml\"],\n  },\n  \"application/x-gzip\": {\n    extensions: [\"gz\"],\n  },\n  \"application/wasm\": {\n    extensions: [\"wasm\"],\n  },\n  \"application/zip\": {\n    extensions: [\"zip\"],\n  },\n  \"audio/basic\": {\n    extensions: [\"au\", \"snd\"],\n  },\n  \"audio/mpeg\": {\n    extensions: [\"mpga\", \"mp2\", \"mp2a\", \"mp3\", \"m2a\", \"m3a\"],\n  },\n  \"audio/midi\": {\n    extensions: [\"midi\", \"mid\", \"kar\", \"rmi\"],\n  },\n  \"audio/mp4\": {\n    extensions: [\"m4a\", \"mp4a\"],\n  },\n  \"audio/ogg\": {\n    extensions: [\"oga\", \"ogg\", \"spx\"],\n  },\n  \"audio/webm\": {\n    extensions: [\"weba\"],\n  },\n  \"audio/x-wav\": {\n    extensions: [\"wav\"],\n  },\n  \"font/ttf\": {\n    extensions: [\"ttf\"],\n  },\n  \"font/woff\": {\n    extensions: [\"woff\"],\n  },\n  \"font/woff2\": {\n    extensions: [\"woff2\"],\n  },\n  \"image/png\": {\n    extensions: [\"png\"],\n  },\n  \"image/gif\": {\n    extensions: [\"gif\"],\n  },\n  \"image/jpeg\": {\n    extensions: [\"jpg\"],\n  },\n  \"image/svg+xml\": {\n    extensions: [\"svg\", \"svgz\"],\n  },\n  \"text/plain\": {\n    extensions: [\"txt\"],\n  },\n  \"text/html\": {\n    extensions: [\"html\"],\n  },\n  \"text/css\": {\n    extensions: [\"css\"],\n  },\n  \"text/cache-manifest\": {\n    extensions: [\"appcache\"],\n  },\n  \"video/mp4\": {\n    extensions: [\"mp4\", \"mp4v\", \"mpg4\"],\n  },\n  \"video/mpeg\": {\n    extensions: [\"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\"],\n  },\n  \"video/ogg\": {\n    extensions: [\"ogv\"],\n  },\n  \"video/webm\": {\n    extensions: [\"webm\"],\n  },\n}\n",
    "// https://github.com/jshttp/mime-db/blob/master/src/apache-types.json\n\nimport { extname } from \"path\"\nimport { jsenvContentTypeMap } from \"./jsenvContentTypeMap.js\"\n\nexport const urlToContentType = (\n  url,\n  contentTypeMap = jsenvContentTypeMap,\n  contentTypeDefault = \"application/octet-stream\",\n) => {\n  if (typeof contentTypeMap !== \"object\") {\n    throw new TypeError(`contentTypeMap must be an object, got ${contentTypeMap}`)\n  }\n  const pathname = new URL(url).pathname\n\n  const extensionWithDot = extname(pathname)\n\n  if (!extensionWithDot || extensionWithDot === \".\") {\n    return contentTypeDefault\n  }\n\n  const extension = extensionWithDot.slice(1)\n  const availableContentTypes = Object.keys(contentTypeMap)\n  const contentTypeForExtension = availableContentTypes.find((contentTypeName) => {\n    const contentType = contentTypeMap[contentTypeName]\n    return contentType.extensions && contentType.extensions.indexOf(extension) > -1\n  })\n  return contentTypeForExtension || contentTypeDefault\n}\n",
    "import { createReadStream, promises, statSync } from \"fs\"\nimport {\n  bufferToEtag,\n  assertAndNormalizeFileUrl,\n  readDirectory,\n  urlToFileSystemPath,\n} from \"@jsenv/util\"\nimport { createCancellationToken, createOperation } from \"@jsenv/cancellation\"\nimport { timeFunction } from \"./serverTiming.js\"\nimport { convertFileSystemErrorToResponseProperties } from \"./convertFileSystemErrorToResponseProperties.js\"\nimport { urlToContentType } from \"./urlToContentType.js\"\nimport { jsenvContentTypeMap } from \"./jsenvContentTypeMap.js\"\nimport { composeResponse } from \"./composeResponse.js\"\n\nconst { readFile } = promises\n\nexport const serveFile = async (\n  source,\n  {\n    cancellationToken = createCancellationToken(),\n    method = \"GET\",\n    headers = {},\n    contentTypeMap = jsenvContentTypeMap,\n    etagEnabled = false,\n    mtimeEnabled = false,\n    cacheControl = etagEnabled || mtimeEnabled ? \"private,max-age=0,must-revalidate\" : \"no-store\",\n    canReadDirectory = false,\n    readableStreamLifetimeInSeconds = 5,\n  } = {},\n) => {\n  // here you might be tempted to add || cacheControl === 'no-cache'\n  // but no-cache means ressource can be cache but must be revalidated (yeah naming is strange)\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#Cacheability\n  if (cacheControl === \"no-store\") {\n    if (etagEnabled) {\n      console.warn(`cannot enable etag when cache-control is ${cacheControl}`)\n      etagEnabled = false\n    }\n    if (mtimeEnabled) {\n      console.warn(`cannot enable mtime when cache-control is ${cacheControl}`)\n      mtimeEnabled = false\n    }\n  }\n  if (etagEnabled && mtimeEnabled) {\n    console.warn(`cannot enable both etag and mtime, mtime disabled in favor of etag.`)\n    mtimeEnabled = false\n  }\n\n  if (method !== \"GET\" && method !== \"HEAD\") {\n    return {\n      status: 501,\n    }\n  }\n\n  const sourceUrl = assertAndNormalizeFileUrl(source)\n\n  try {\n    const [readStatTiming, sourceStat] = await timeFunction(\"file service>read file stat\", () =>\n      statSync(urlToFileSystemPath(sourceUrl)),\n    )\n\n    const clientCacheResponse = await getClientCacheResponse({\n      cancellationToken,\n      etagEnabled,\n      mtimeEnabled,\n      method,\n      headers,\n      sourceStat,\n      sourceUrl,\n    })\n\n    // send 304 (redirect response to client cache)\n    // because the response body does not have to be transmitted\n    if (clientCacheResponse.status === 304) {\n      return composeResponse(\n        {\n          timing: readStatTiming,\n          headers: {\n            ...(cacheControl ? { \"cache-control\": cacheControl } : {}),\n          },\n        },\n        clientCacheResponse,\n      )\n    }\n\n    const rawResponse = await getRawResponse({\n      cancellationToken,\n      canReadDirectory,\n      contentTypeMap,\n      method,\n      headers,\n      sourceStat,\n      sourceUrl,\n    })\n\n    // do not keep readable stream opened on that file\n    // otherwise file is kept open forever.\n    // moreover it will prevent to unlink the file on windows.\n    if (clientCacheResponse.body) {\n      rawResponse.body.destroy()\n    } else if (readableStreamLifetimeInSeconds && readableStreamLifetimeInSeconds !== Infinity) {\n      // safe measure, ensure the readable stream gets used in the next ${readableStreamLifetimeInSeconds} otherwise destroys it\n      const timeout = setTimeout(() => {\n        console.warn(\n          `readable stream on ${sourceUrl} still unused after ${readableStreamLifetimeInSeconds} seconds -> destroying it to release file handle`,\n        )\n        rawResponse.body.destroy()\n      }, readableStreamLifetimeInSeconds * 1000)\n      onceReadableStreamUsedOrClosed(rawResponse.body, () => {\n        clearTimeout(timeout)\n      })\n    }\n\n    return composeResponse(\n      {\n        timing: readStatTiming,\n        headers: {\n          ...(cacheControl ? { \"cache-control\": cacheControl } : {}),\n          // even if client cache is disabled, server can still\n          // send his own cache control but client should just ignore it\n          // and keep sending cache-control: 'no-store'\n          // if not, uncomment the line below to preserve client\n          // desired to ignore cache\n          // ...(headers[\"cache-control\"] === \"no-store\" ? { \"cache-control\": \"no-store\" } : {}),\n        },\n      },\n      rawResponse,\n      clientCacheResponse,\n    )\n  } catch (e) {\n    return convertFileSystemErrorToResponseProperties(e)\n  }\n}\n\nconst getClientCacheResponse = async ({ headers, etagEnabled, mtimeEnabled, ...rest }) => {\n  // here you might be tempted to add || headers[\"cache-control\"] === \"no-cache\"\n  // but no-cache means ressource can be cache but must be revalidated (yeah naming is strange)\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#Cacheability\n  if (headers[\"cache-control\"] === \"no-store\") {\n    return { status: 200 }\n  }\n\n  if (etagEnabled) {\n    return getEtagResponse({\n      headers,\n      ...rest,\n    })\n  }\n\n  if (mtimeEnabled) {\n    return getMtimeResponse({\n      headers,\n      ...rest,\n    })\n  }\n\n  return { status: 200 }\n}\n\nconst getEtagResponse = async ({ cancellationToken, sourceUrl, headers }) => {\n  const [readFileTiming, fileContentAsBuffer] = await timeFunction(\"file service>read file\", () =>\n    createOperation({\n      cancellationToken,\n      start: () => readFile(urlToFileSystemPath(sourceUrl)),\n    }),\n  )\n  const [computeEtagTiming, fileContentEtag] = await timeFunction(\n    \"file service>generate file etag\",\n    () => bufferToEtag(fileContentAsBuffer),\n  )\n\n  if (\"if-none-match\" in headers && headers[\"if-none-match\"] === fileContentEtag) {\n    return {\n      status: 304,\n      timing: {\n        ...readFileTiming,\n        ...computeEtagTiming,\n      },\n    }\n  }\n\n  return {\n    status: 200,\n    headers: {\n      etag: fileContentEtag,\n    },\n    body: fileContentAsBuffer,\n    timing: {\n      ...readFileTiming,\n      ...computeEtagTiming,\n    },\n  }\n}\n\nconst getMtimeResponse = async ({ sourceStat, headers }) => {\n  if (\"if-modified-since\" in headers) {\n    let cachedModificationDate\n    try {\n      cachedModificationDate = new Date(headers[\"if-modified-since\"])\n    } catch (e) {\n      return {\n        status: 400,\n        statusText: \"if-modified-since header is not a valid date\",\n      }\n    }\n\n    const actualModificationDate = dateToSecondsPrecision(sourceStat.mtime)\n    if (Number(cachedModificationDate) >= Number(actualModificationDate)) {\n      return {\n        status: 304,\n      }\n    }\n  }\n\n  return {\n    status: 200,\n    headers: {\n      \"last-modified\": dateToUTCString(sourceStat.mtime),\n    },\n  }\n}\n\nconst getRawResponse = async ({\n  cancellationToken,\n  sourceStat,\n  sourceUrl,\n  canReadDirectory,\n  contentTypeMap,\n}) => {\n  if (sourceStat.isDirectory()) {\n    if (canReadDirectory === false) {\n      return {\n        status: 403,\n        statusText: \"not allowed to read directory\",\n      }\n    }\n\n    const [readDirectoryTiming, directoryContentArray] = await timeFunction(\n      \"file service>read directory\",\n      () =>\n        createOperation({\n          cancellationToken,\n          start: () => readDirectory(sourceUrl),\n        }),\n    )\n    const directoryContentJson = JSON.stringify(directoryContentArray)\n\n    return {\n      status: 200,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"content-length\": directoryContentJson.length,\n      },\n      body: directoryContentJson,\n      timing: readDirectoryTiming,\n    }\n  }\n\n  // not a file, give up\n  if (!sourceStat.isFile()) {\n    return {\n      status: 404,\n    }\n  }\n\n  return {\n    status: 200,\n    headers: {\n      \"content-type\": urlToContentType(sourceUrl, contentTypeMap),\n      \"content-length\": sourceStat.size,\n    },\n    body: createReadStream(urlToFileSystemPath(sourceUrl), { emitClose: true }),\n  }\n}\n\nconst onceReadableStreamUsedOrClosed = (readableStream, callback) => {\n  const dataOrCloseCallback = () => {\n    readableStream.removeListener(\"data\", dataOrCloseCallback)\n    readableStream.removeListener(\"close\", dataOrCloseCallback)\n    callback()\n  }\n  readableStream.on(\"data\", dataOrCloseCallback)\n  readableStream.on(\"close\", dataOrCloseCallback)\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toUTCString\nconst dateToUTCString = (date) => date.toUTCString()\n\nconst dateToSecondsPrecision = (date) => {\n  const dateWithSecondsPrecision = new Date(date)\n  dateWithSecondsPrecision.setMilliseconds(0)\n  return dateWithSecondsPrecision\n}\n",
    "// https://github.com/node-fetch/node-fetch/blob/8c197f8982a238b3c345c64b17bfa92e16b4f7c4/src/response.js#L1\n\nimport { createRequire } from \"module\"\nimport { Agent } from \"https\"\nimport { createCancellationToken } from \"@jsenv/cancellation\"\nimport { serveFile } from \"./serveFile.js\"\n\nconst require = createRequire(import.meta.url)\nconst nodeFetch = require(\"node-fetch\")\nconst AbortController = require(\"abort-controller\")\n\nconst { Response } = nodeFetch\n\nexport const fetchUrl = async (\n  url,\n  {\n    cancellationToken = createCancellationToken(),\n    simplified = false,\n    ignoreHttpsError = false,\n    canReadDirectory,\n    contentTypeMap,\n    cacheStrategy,\n    ...options\n  } = {},\n) => {\n  try {\n    url = String(new URL(url))\n  } catch (e) {\n    throw new Error(`fetchUrl first argument must be an absolute url, received ${url}`)\n  }\n\n  if (url.startsWith(\"file://\")) {\n    const { status, statusText, headers, body } = await serveFile(url, {\n      cancellationToken,\n      cacheStrategy,\n      canReadDirectory,\n      contentTypeMap,\n      ...options,\n    })\n    const response = new Response(typeof body === \"string\" ? Buffer.from(body) : body, {\n      url,\n      status,\n      statusText,\n      headers,\n    })\n    return simplified ? standardResponseToSimplifiedResponse(response) : response\n  }\n\n  // cancellation might be requested early, abortController does not support that\n  // so we have to throw if requested right away\n  cancellationToken.throwIfRequested()\n\n  // https://github.com/bitinn/node-fetch#request-cancellation-with-abortsignal\n  const abortController = new AbortController()\n\n  let cancelError\n  cancellationToken.register((reason) => {\n    cancelError = reason\n    abortController.abort(reason)\n  })\n\n  let response\n  try {\n    response = await nodeFetch(url, {\n      signal: abortController.signal,\n      ...(ignoreHttpsError && url.startsWith(\"https\")\n        ? {\n            agent: new Agent({\n              rejectUnauthorized: false,\n            }),\n          }\n        : {}),\n      ...options,\n    })\n  } catch (e) {\n    if (e.message.includes(\"reason: connect ECONNRESET\")) {\n      if (cancelError) {\n        throw cancelError\n      }\n      throw e\n    }\n    if (e.name === \"AbortError\") {\n      if (cancelError) {\n        throw cancelError\n      }\n      throw e\n    }\n    throw e\n  }\n\n  return simplified ? standardResponseToSimplifiedResponse(response) : response\n}\n\nconst standardResponseToSimplifiedResponse = async (response) => {\n  const text = await response.text()\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: response.statusText,\n    headers: responseToHeaders(response),\n    body: text,\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n",
    "/* eslint-disable import/max-dependencies */\n\nimport { createRequire } from \"module\"\nimport { STATUS_CODES } from \"http\"\nimport {\n  createCancellationToken,\n  createOperation,\n  createStoppableOperation,\n  composeCancellationToken,\n  createCancellationSource,\n  isCancelError,\n} from \"@jsenv/cancellation\"\nimport { SIGINTSignal, unadvisedCrashSignal, teardownSignal } from \"@jsenv/node-signals\"\nimport { catchCancellation, memoize } from \"@jsenv/util\"\nimport { createLogger } from \"@jsenv/logger\"\nimport { createTracker } from \"./internal/createTracker.js\"\nimport { urlToOrigin } from \"./internal/urlToOrigin.js\"\nimport { createServer } from \"./internal/createServer.js\"\nimport { trackServerPendingConnections } from \"./internal/trackServerPendingConnections.js\"\nimport { trackServerPendingRequests } from \"./internal/trackServerPendingRequests.js\"\nimport { nodeRequestToRequest } from \"./internal/nodeRequestToRequest.js\"\nimport { composeResponseHeaders } from \"./internal/composeResponseHeaders.js\"\nimport { populateNodeResponse } from \"./internal/populateNodeResponse.js\"\nimport { colorizeResponseStatus } from \"./internal/colorizeResponseStatus.js\"\nimport { getServerOrigins } from \"./internal/getServerOrigins.js\"\nimport { listen, stopListening } from \"./internal/listen.js\"\nimport { composeResponse } from \"./composeResponse.js\"\nimport {\n  STOP_REASON_INTERNAL_ERROR,\n  STOP_REASON_PROCESS_SIGHUP,\n  STOP_REASON_PROCESS_SIGTERM,\n  STOP_REASON_PROCESS_SIGINT,\n  STOP_REASON_PROCESS_BEFORE_EXIT,\n  STOP_REASON_PROCESS_EXIT,\n  STOP_REASON_NOT_SPECIFIED,\n} from \"./stopReasons.js\"\nimport { jsenvAccessControlAllowedHeaders } from \"./jsenvAccessControlAllowedHeaders.js\"\nimport { jsenvAccessControlAllowedMethods } from \"./jsenvAccessControlAllowedMethods.js\"\nimport { jsenvPrivateKey, jsenvCertificate } from \"./jsenvSignature.js\"\nimport { findFreePort } from \"./findFreePort.js\"\nimport { trackServerRequest } from \"./internal/trackServerRequest.js\"\nimport { timeFunction, timingToServerTimingResponseHeaders } from \"./serverTiming.js\"\n\nconst require = createRequire(import.meta.url)\nconst killPort = require(\"kill-port\")\n\nexport const startServer = async ({\n  cancellationToken = createCancellationToken(),\n  logLevel,\n  serverName = \"server\",\n\n  protocol = \"http\",\n  http2 = false,\n  http1Allowed = true,\n  redirectHttpToHttps = false,\n  ip = \"0.0.0.0\", // will it work on windows ? https://github.com/nodejs/node/issues/14900\n  port = 0, // assign a random available port\n  portHint,\n  forcePort = false,\n  privateKey = jsenvPrivateKey,\n  certificate = jsenvCertificate,\n\n  stopOnSIGINT = true,\n  // auto close the server when the process exits\n  stopOnExit = true,\n  // auto close when requestToResponse throw an error\n  stopOnInternalError = false,\n  // auto close the server when an uncaughtException happens\n  stopOnCrash = false,\n  keepProcessAlive = true,\n  requestToResponse = () => null,\n\n  accessControlAllowedOrigins = [],\n  accessControlAllowedMethods = jsenvAccessControlAllowedMethods,\n  accessControlAllowedHeaders = jsenvAccessControlAllowedHeaders,\n  accessControlAllowRequestOrigin = false,\n  accessControlAllowRequestMethod = false,\n  accessControlAllowRequestHeaders = false,\n  accessControlAllowCredentials = false,\n  // by default OPTIONS request can be cache for a long time, it's not going to change soon ?\n  // we could put a lot here, see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Max-Age\n  accessControlMaxAge = 600,\n\n  // https://www.w3.org/TR/server-timing/\n  sendServerTiming = false,\n  sendInternalErrorStack = false,\n  internalErrorToResponseProperties = (error) => {\n    const body = error\n      ? JSON.stringify({\n          code: error.code || \"UNKNOWN_ERROR\",\n          ...(sendInternalErrorStack ? { stack: error.stack } : {}),\n        })\n      : JSON.stringify({ code: \"VALUE_THROWED\", value: error })\n\n    return {\n      headers: {\n        \"content-type\": \"application/json\",\n        \"content-length\": Buffer.byteLength(body),\n      },\n      body,\n    }\n  },\n\n  requestWaitingMs = 20000,\n  requestWaitingCallback = (request, { logger }) => {\n    logger.warn(\n      `still no response found for request after ${requestWaitingMs} ms\n--- request url ---\n${request.origin}${request.ressource}\n--- request headers ---\n${JSON.stringify(request.headers, null, \"  \")}\n`,\n    )\n  },\n\n  startedCallback = () => {},\n  stoppedCallback = () => {},\n  errorIsCancellation = () => false,\n  nagle = true,\n} = {}) => {\n  return catchCancellation(async () => {\n    if (port === 0 && forcePort) {\n      throw new Error(`no need to pass forcePort when port is 0`)\n    }\n    if (protocol !== \"http\" && protocol !== \"https\") {\n      throw new Error(`protocol must be http or https, got ${protocol}`)\n    }\n    if (protocol === \"https\") {\n      if (!privateKey) {\n        throw new Error(`missing privateKey for https server`)\n      }\n      if (!certificate) {\n        throw new Error(`missing certificate for https server`)\n      }\n      if (privateKey !== jsenvPrivateKey && certificate === jsenvCertificate) {\n        throw new Error(`you passed a privateKey without certificate`)\n      }\n      if (certificate !== jsenvCertificate && privateKey === jsenvPrivateKey) {\n        throw new Error(`you passed a certificate without privateKey`)\n      }\n    }\n    if (http2 && protocol !== \"https\") {\n      throw new Error(`http2 needs \"https\" but protocol is \"${protocol}\"`)\n    }\n\n    const internalCancellationSource = createCancellationSource()\n    const externalCancellationToken = cancellationToken\n    const internalCancellationToken = internalCancellationSource.token\n    const serverCancellationToken = composeCancellationToken(\n      externalCancellationToken,\n      internalCancellationToken,\n    )\n\n    const logger = createLogger({ logLevel })\n    if (redirectHttpToHttps && protocol === \"http\") {\n      logger.warn(`redirectHttpToHttps ignored because protocol is http`)\n      redirectHttpToHttps = false\n    }\n    if (redirectHttpToHttps && http2) {\n      logger.warn(\n        `redirectHttpToHttps ignored because it does not work with http2. see https://github.com/nodejs/node/issues/23331`,\n      )\n      redirectHttpToHttps = false\n    }\n\n    const onError = (error) => {\n      if (errorIsCancellation(error)) {\n        return\n      }\n      throw error\n    }\n    errorIsCancellation = composePredicate(errorIsCancellation, isCancelError)\n\n    const { registerCleanupCallback, cleanup } = createTracker()\n\n    if (stopOnCrash) {\n      const unregister = unadvisedCrashSignal.addCallback((reason) => {\n        internalCancellationSource.cancel(reason.value)\n      })\n      registerCleanupCallback(unregister)\n    }\n\n    if (stopOnExit) {\n      const unregister = teardownSignal.addCallback((tearDownReason) => {\n        if (!stopOnSIGINT && tearDownReason === \"SIGINT\") {\n          return\n        }\n\n        internalCancellationSource.cancel(\n          {\n            SIGHUP: STOP_REASON_PROCESS_SIGHUP,\n            SIGTERM: STOP_REASON_PROCESS_SIGTERM,\n            SIGINT: STOP_REASON_PROCESS_SIGINT,\n            beforeExit: STOP_REASON_PROCESS_BEFORE_EXIT,\n            exit: STOP_REASON_PROCESS_EXIT,\n          }[tearDownReason],\n        )\n      })\n      registerCleanupCallback(unregister)\n    } else if (stopOnSIGINT) {\n      const unregister = SIGINTSignal.addCallback(() => {\n        internalCancellationSource.cancel(STOP_REASON_PROCESS_SIGINT)\n      })\n      registerCleanupCallback(unregister)\n    }\n\n    if (forcePort) {\n      await createOperation({\n        cancellationToken: serverCancellationToken,\n        start: () => killPort(port),\n      })\n    }\n\n    const nodeServer = await createServer({\n      http2,\n      http1Allowed,\n      protocol,\n      privateKey,\n      certificate,\n    })\n\n    // https://nodejs.org/api/net.html#net_server_unref\n    if (!keepProcessAlive) {\n      nodeServer.unref()\n    }\n\n    let status = \"starting\"\n\n    let stoppedResolve\n    const stoppedPromise = new Promise((resolve) => {\n      stoppedResolve = resolve\n    })\n    const stop = memoize(async (reason = STOP_REASON_NOT_SPECIFIED) => {\n      status = \"stopping\"\n\n      errorIsCancellation = composePredicate(errorIsCancellation, (error) => error === reason)\n      errorIsCancellation = composePredicate(\n        errorIsCancellation,\n        (error) => error && error.code === \"ECONNRESET\",\n      )\n      logger.info(`${serverName} stopped because ${reason}`)\n\n      await cleanup(reason)\n      await stopListening(nodeServer)\n      status = \"stopped\"\n      stoppedCallback({ reason })\n      stoppedResolve(reason)\n    })\n    serverCancellationToken.register(stop)\n    const startOperation = createStoppableOperation({\n      cancellationToken: serverCancellationToken,\n      start: async () => {\n        if (portHint) {\n          port = await findFreePort(portHint, { cancellationToken: serverCancellationToken, ip })\n        }\n        return listen({\n          cancellationToken: serverCancellationToken,\n          server: nodeServer,\n          port,\n          ip,\n        })\n      },\n      stop: (_, reason) => stop(reason),\n    })\n\n    port = await startOperation\n    status = \"opened\"\n    const serverOrigins = getServerOrigins({ protocol, ip, port })\n    const serverOrigin = serverOrigins.main\n\n    const connectionsTracker = trackServerPendingConnections(nodeServer, {\n      http2,\n      onConnectionError: (error, connection) => {\n        if (!connection.destroyed) {\n          onError(error)\n        }\n      },\n    })\n    // opened connection must be shutdown before the close event is emitted\n    registerCleanupCallback(connectionsTracker.stop)\n\n    const pendingRequestsTracker = trackServerPendingRequests(nodeServer, { http2 })\n    // ensure pending requests got a response from the server\n    registerCleanupCallback((reason) => {\n      pendingRequestsTracker.stop({\n        status: reason === STOP_REASON_INTERNAL_ERROR ? 500 : 503,\n        reason,\n      })\n    })\n\n    const requestCallback = async (nodeRequest, nodeResponse) => {\n      if (!nagle) {\n        nodeRequest.connection.setNoDelay(true)\n      }\n      if (redirectHttpToHttps && !nodeRequest.connection.encrypted) {\n        nodeResponse.writeHead(301, {\n          location: `${serverOrigin}${nodeRequest.ressource}`,\n        })\n        return\n      }\n\n      const request = nodeRequestToRequest(nodeRequest, { serverCancellationToken, serverOrigin })\n      nodeRequest.on(\"error\", (error) => {\n        logger.error(`error on request.\n--- request ressource ---\n${request.ressource}\n--- error stack ---\n${error.stack}`)\n      })\n\n      const [\n        startRespondingTiming,\n        { response, error },\n      ] = await timeFunction(\"time to start responding\", () => generateResponseDescription(request))\n      if (sendServerTiming) {\n        const serverTiming = {\n          ...response.timing,\n          ...startRespondingTiming,\n        }\n        response.headers = composeResponseHeaders(\n          timingToServerTimingResponseHeaders(serverTiming),\n          response.headers,\n        )\n      }\n\n      logger.info(`${request.method} ${request.origin}${request.ressource}`)\n\n      if (error && isCancelError(error) && internalCancellationToken.cancellationRequested) {\n        logger.info(\"ignored because server closing\")\n        nodeResponse.destroy()\n        return\n      }\n\n      if (request.aborted) {\n        logger.info(`request aborted by client`)\n        nodeResponse.destroy()\n        return\n      }\n\n      if (\n        request.method !== \"HEAD\" &&\n        response.headers[\"content-length\"] > 0 &&\n        response.body === \"\"\n      ) {\n        logger.error(\n          createContentLengthMismatchError(\n            `content-length header is ${response.headers[\"content-length\"]} but body is empty`,\n          ),\n        )\n      }\n\n      if (error) {\n        logger.error(`internal error while handling request.\n--- error stack ---\n${error.stack}\n--- request ---\n${request.method} ${request.origin}${request.ressource}`)\n      }\n      logger.info(`${colorizeResponseStatus(response.status)} ${response.statusText}`)\n\n      populateNodeResponse(nodeResponse, response, {\n        cancellationToken: request.cancellationToken,\n        ignoreBody: request.method === \"HEAD\",\n        // https://github.com/nodejs/node/blob/79296dc2d02c0b9872bbfcbb89148ea036a546d0/lib/internal/http2/compat.js#L97\n        ignoreStatusText: Boolean(nodeRequest.stream),\n        // https://github.com/nodejs/node/blob/79296dc2d02c0b9872bbfcbb89148ea036a546d0/lib/internal/http2/compat.js#L112\n        ignoreConnectionHeader: Boolean(nodeRequest.stream),\n      })\n\n      if (\n        stopOnInternalError &&\n        // stopOnInternalError stops server only if requestToResponse generated\n        // a non controlled error (internal error).\n        // if requestToResponse gracefully produced a 500 response (it did not throw)\n        // then we can assume we are still in control of what we are doing\n        error\n      ) {\n        // il faudrais pouvoir stop que les autres response ?\n        stop(STOP_REASON_INTERNAL_ERROR)\n      }\n    }\n\n    const removeRequestListener = trackServerRequest(nodeServer, requestCallback, { http2 })\n    // ensure we don't try to handle new requests while server is stopping\n    registerCleanupCallback(removeRequestListener)\n\n    logger.info(`${serverName} started at ${serverOrigin} (${serverOrigins.external})`)\n    startedCallback({ origin: serverOrigin })\n\n    const corsEnabled = accessControlAllowRequestOrigin || accessControlAllowedOrigins.length\n    // here we check access control options to throw or warn if we find strange values\n\n    const generateResponseDescription = async (request) => {\n      const responsePropertiesToResponse = ({\n        status = 501,\n        statusText = statusToStatusText(status),\n        headers = {},\n        body = \"\",\n        bodyEncoding,\n        timing,\n      }) => {\n        if (corsEnabled) {\n          const accessControlHeaders = generateAccessControlHeaders({\n            request,\n            accessControlAllowedOrigins,\n            accessControlAllowRequestOrigin,\n            accessControlAllowedMethods,\n            accessControlAllowRequestMethod,\n            accessControlAllowedHeaders,\n            accessControlAllowRequestHeaders,\n            accessControlAllowCredentials,\n            accessControlMaxAge,\n            sendServerTiming,\n          })\n\n          return {\n            status,\n            statusText,\n            headers: composeResponseHeaders(headers, accessControlHeaders),\n            body,\n            bodyEncoding,\n            timing,\n          }\n        }\n\n        return {\n          status,\n          statusText,\n          headers,\n          body,\n          bodyEncoding,\n          timing,\n        }\n      }\n\n      let timeout\n      try {\n        if (corsEnabled && request.method === \"OPTIONS\") {\n          return {\n            response: responsePropertiesToResponse({\n              status: 200,\n              headers: {\n                \"content-length\": 0,\n              },\n            }),\n          }\n        }\n\n        timeout = setTimeout(\n          () => requestWaitingCallback(request, { logger, requestWaitingMs }),\n          requestWaitingMs,\n        )\n\n        const responseProperties = await requestToResponse(request)\n        clearTimeout(timeout)\n        return {\n          response: responsePropertiesToResponse(responseProperties || {}),\n        }\n      } catch (error) {\n        clearTimeout(timeout)\n        return {\n          response: composeResponse(\n            responsePropertiesToResponse({\n              status: 500,\n              headers: {\n                // ensure error are not cached\n                \"cache-control\": \"no-store\",\n                \"content-type\": \"text/plain\",\n              },\n            }),\n            internalErrorToResponseProperties(error),\n          ),\n          error,\n        }\n      }\n    }\n\n    return {\n      getStatus: () => status,\n      origin: serverOrigin,\n      nodeServer,\n      stop,\n      stoppedPromise,\n    }\n  })\n}\n\nconst statusToStatusText = (status) => STATUS_CODES[status] || \"not specified\"\n\nconst createContentLengthMismatchError = (message) => {\n  const error = new Error(message)\n  error.code = \"CONTENT_LENGTH_MISMATCH\"\n  error.name = error.code\n  return error\n}\n\n// https://www.w3.org/TR/cors/\n// https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\nconst generateAccessControlHeaders = ({\n  request: { headers },\n  accessControlAllowedOrigins,\n  accessControlAllowRequestOrigin,\n  accessControlAllowedMethods,\n  accessControlAllowRequestMethod,\n  accessControlAllowedHeaders,\n  accessControlAllowRequestHeaders,\n  accessControlAllowCredentials,\n  // by default OPTIONS request can be cache for a long time, it's not going to change soon ?\n  // we could put a lot here, see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Max-Age\n  accessControlMaxAge = 600,\n  sendServerTiming,\n} = {}) => {\n  const vary = []\n\n  const allowedOriginArray = [...accessControlAllowedOrigins]\n  if (accessControlAllowRequestOrigin) {\n    if (\"origin\" in headers && headers.origin !== \"null\") {\n      allowedOriginArray.push(headers.origin)\n      vary.push(\"origin\")\n    } else if (\"referer\" in headers) {\n      allowedOriginArray.push(urlToOrigin(headers.referer))\n      vary.push(\"referer\")\n    } else {\n      allowedOriginArray.push(\"*\")\n    }\n  }\n\n  const allowedMethodArray = [...accessControlAllowedMethods]\n  if (accessControlAllowRequestMethod && \"access-control-request-method\" in headers) {\n    const requestMethodName = headers[\"access-control-request-method\"]\n    if (!allowedMethodArray.includes(requestMethodName)) {\n      allowedMethodArray.push(requestMethodName)\n      vary.push(\"access-control-request-method\")\n    }\n  }\n\n  const allowedHeaderArray = [...accessControlAllowedHeaders]\n  if (accessControlAllowRequestHeaders && \"access-control-request-headers\" in headers) {\n    const requestHeaderNameArray = headers[\"access-control-request-headers\"].split(\", \")\n    requestHeaderNameArray.forEach((headerName) => {\n      const headerNameLowerCase = headerName.toLowerCase()\n      if (!allowedHeaderArray.includes(headerNameLowerCase)) {\n        allowedHeaderArray.push(headerNameLowerCase)\n        if (!vary.includes(\"access-control-request-headers\")) {\n          vary.push(\"access-control-request-headers\")\n        }\n      }\n    })\n  }\n\n  return {\n    \"access-control-allow-origin\": allowedOriginArray.join(\", \"),\n    \"access-control-allow-methods\": allowedMethodArray.join(\", \"),\n    \"access-control-allow-headers\": allowedHeaderArray.join(\", \"),\n    ...(accessControlAllowCredentials ? { \"access-control-allow-credentials\": true } : {}),\n    \"access-control-max-age\": accessControlMaxAge,\n    ...(sendServerTiming ? { \"timing-allow-origin\": allowedOriginArray.join(\", \") } : {}),\n    ...(vary.length ? { vary: vary.join(\", \") } : {}),\n  }\n}\n\nconst composePredicate = (previousPredicate, predicate) => {\n  return (value) => {\n    return previousPredicate(value) || predicate(value)\n  }\n}\n",
    "import { globalAgent } from \"https\"\nimport { fetchUrl as serverFetchUrl } from \"@jsenv/server\"\n\n// ideally we should only pass this to the fetch below\nglobalAgent.options.rejectUnauthorized = false\n\nexport const fetchUrl = async (\n  url,\n  { simplified = false, ignoreHttpsError = true, ...rest } = {},\n) => {\n  const response = await serverFetchUrl(url, { simplified, ignoreHttpsError, ...rest })\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: response.statusText,\n    headers: responseToHeaders(response),\n    text: response.text.bind(response),\n    json: response.json.bind(response),\n    blob: response.blob.bind(response),\n    arrayBuffer: response.arrayBuffer.bind(response),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n",
    "export const stackToString = (stack, { error, indent }) => {\n  const name = error.name || \"Error\"\n  const message = error.message || \"\"\n  const stackString = stack.map((callSite) => `\\n${indent}at ${callSite}`).join(\"\")\n\n  return `${name}: ${message}${stackString}`\n}\n",
    "export const parseDataUrl = (dataUrl) => {\n  const afterDataProtocol = dataUrl.slice(\"data:\".length)\n  const commaIndex = afterDataProtocol.indexOf(\",\")\n  const beforeComma = afterDataProtocol.slice(0, commaIndex)\n\n  let mediaType\n  let base64Flag\n  if (beforeComma.endsWith(`;base64`)) {\n    mediaType = beforeComma.slice(0, -`;base64`.length)\n    base64Flag = true\n  } else {\n    mediaType = beforeComma\n    base64Flag = false\n  }\n\n  const afterComma = afterDataProtocol.slice(commaIndex + 1)\n  return {\n    mediaType: mediaType === \"\" ? \"text/plain;charset=US-ASCII\" : mediaType,\n    base64Flag,\n    data: afterComma,\n  }\n}\n\nexport const stringifyDataUrl = ({ mediaType, base64Flag = true, data }) => {\n  if (!mediaType || mediaType === \"text/plain;charset=US-ASCII\") {\n    // can be a buffer or a string, hence check on data.length instead of !data or data === ''\n    if (data.length === 0) {\n      return `data:,`\n    }\n    if (base64Flag) {\n      return `data:,${data}`\n    }\n    return `data:,${dataToBase64(data)}`\n  }\n  if (base64Flag) {\n    return `data:${mediaType};base64,${dataToBase64(data)}`\n  }\n  return `data:${mediaType},${data}`\n}\n\nexport const dataUrlToRawData = ({ base64Flag, data }) => {\n  return base64Flag ? base64ToString(data) : data\n}\n\nexport const dataToBase64 =\n  typeof window === \"object\" ? window.atob : (data) => Buffer.from(data).toString(\"base64\")\n\nexport const base64ToString =\n  typeof window === \"object\"\n    ? window.btoa\n    : (base64String) => Buffer.from(base64String, \"base64\").toString(\"utf8\")\n",
    "export const getJavaScriptSourceMappingUrl = (javaScriptSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(javaScriptSource, javascriptSourceMappingUrlCommentRegexp, (value) => {\n    sourceMappingUrl = value\n  })\n  return sourceMappingUrl\n}\n\nexport const setJavaScriptSourceMappingUrl = (javaScriptSource, sourceMappingFileUrl) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    javaScriptSource,\n    javascriptSourceMappingUrlCommentRegexp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl ? writeJavaScriptSourceMappingURL(sourceMappingFileUrl) : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n\n  return sourceMappingFileUrl\n    ? `${javaScriptSource}\n${writeJavaScriptSourceMappingURL(sourceMappingFileUrl)}`\n    : javaScriptSource\n}\n\nexport const getCssSourceMappingUrl = (cssSource) => {\n  let sourceMappingUrl\n  replaceSourceMappingUrl(cssSource, cssSourceMappingUrlCommentRegExp, (value) => {\n    sourceMappingUrl = value\n  })\n  return sourceMappingUrl\n}\n\nexport const setCssSourceMappingUrl = (cssSource, sourceMappingFileUrl) => {\n  let replaced\n  const sourceAfterReplace = replaceSourceMappingUrl(\n    cssSource,\n    cssSourceMappingUrlCommentRegExp,\n    () => {\n      replaced = true\n      return sourceMappingFileUrl ? writeCssSourceMappingUrl(sourceMappingFileUrl) : \"\"\n    },\n  )\n  if (replaced) {\n    return sourceAfterReplace\n  }\n  return sourceMappingFileUrl\n    ? `${cssSource}\n${writeCssSourceMappingUrl(sourceMappingFileUrl)}`\n    : cssSource\n}\n\nconst javascriptSourceMappingUrlCommentRegexp = /\\/\\/ ?# ?sourceMappingURL=([^\\s'\"]+)/g\nconst cssSourceMappingUrlCommentRegExp = /\\/\\*# ?sourceMappingURL=([^\\s'\"]+) \\*\\//g\n\n// ${\"//#\"} is to avoid a parser thinking there is a sourceMappingUrl for this file\nconst writeJavaScriptSourceMappingURL = (value) => `${\"//#\"} sourceMappingURL=${value}`\nconst writeCssSourceMappingUrl = (value) => `/*# sourceMappingURL=${value} */`\n\nexport const sourcemapToBase64Url = (sourcemap) => {\n  const asBase64 = Buffer.from(JSON.stringify(sourcemap)).toString(\"base64\")\n  return `data:application/json;charset=utf-8;base64,${asBase64}`\n}\n\nconst replaceSourceMappingUrl = (source, regexp, callback) => {\n  let lastSourceMappingUrl\n  let matchSourceMappingUrl\n  while ((matchSourceMappingUrl = regexp.exec(source))) {\n    lastSourceMappingUrl = matchSourceMappingUrl\n  }\n  if (lastSourceMappingUrl) {\n    const index = lastSourceMappingUrl.index\n    const before = source.slice(0, index)\n    const after = source.slice(index)\n    const mappedAfter = after.replace(regexp, (match, firstGroup) => {\n      return callback(firstGroup)\n    })\n    return `${before}${mappedAfter}`\n  }\n  return source\n}\n",
    "export const isWindowsFilePath = (path) => startsWithWindowsDriveLetter(path) && path[2] === \"\\\\\"\n\nexport const startsWithWindowsDriveLetter = (string) => {\n  const firstChar = string[0]\n  if (!/[a-zA-Z]/.test(firstChar)) return false\n\n  const secondChar = string[1]\n  if (secondChar !== \":\") return false\n\n  return true\n}\n\nexport const windowsFilePathToUrl = (windowsFilePath) => {\n  return `file:///${replaceBackSlashesWithSlashes(windowsFilePath)}`\n}\n\nexport const replaceBackSlashesWithSlashes = (string) => string.replace(/\\\\/g, \"/\")\n",
    "import { startsWithWindowsDriveLetter, windowsFilePathToUrl } from \"../filePathUtils.js\"\n\nexport const remapCallSite = async (\n  callSite,\n  { urlToSourcemapConsumer, resolveFile, readErrorStack, onFailure },\n) => {\n  if (callSite.isNative()) {\n    return callSite\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  const source = callSite.getFileName() || callSite.getScriptNameOrSourceURL()\n  if (source) {\n    const line = callSite.getLineNumber()\n    const column = callSite.getColumnNumber() - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      readErrorStack,\n      onFailure,\n    })\n\n    const callSiteClone = cloneCallSite(callSite)\n\n    callSiteClone.getFunctionName = () => originalPosition.name || callSite.getFunctionName()\n    callSiteClone.getFileName = () => originalPosition.source\n    callSiteClone.getLineNumber = () => originalPosition.line\n    callSiteClone.getColumnNumber = () => originalPosition.column + 1\n    callSiteClone.getScriptNameOrSourceURL = () => originalPosition.source\n\n    return callSiteClone\n  }\n\n  // Code called using eval() needs special handling\n  if (callSite.isEval()) {\n    const origin = callSite.getEvalOrigin()\n    if (origin) {\n      const callSiteClone = cloneCallSite(callSite)\n      const originalEvalOrigin = await remapEvalOrigin(origin, {\n        resolveFile,\n        urlToSourcemapConsumer,\n        readErrorStack,\n        onFailure,\n      })\n      callSiteClone.getEvalOrigin = () => originalEvalOrigin\n      return callSiteClone\n    }\n    return callSite\n  }\n\n  // If we get here then we were unable to change the source position\n  return callSite\n}\n\nconst cloneCallSite = (callSite) => {\n  const callSiteClone = {}\n  methods.forEach((name) => {\n    callSiteClone[name] = () => callSite[name]()\n  })\n  callSiteClone.toString = () => callSiteToFunctionCall(callSiteClone)\n\n  return callSiteClone\n}\n\nconst methods = [\n  \"getColumnNumber\",\n  \"getEvalOrigin\",\n  \"getFileName\",\n  \"getFunction\",\n  \"getFunctionName\",\n  \"getLineNumber\",\n  \"getMethodName\",\n  \"getPosition\",\n  \"getScriptNameOrSourceURL\",\n  \"getThis\",\n  \"getTypeName\",\n  \"isConstructor\",\n  \"isEval\",\n  \"isNative\",\n  \"isToplevel\",\n  \"toString\",\n]\n\nconst callSiteToFunctionCall = (callSite) => {\n  const fileLocation = callSiteToFileLocation(callSite)\n  const isConstructor = callSite.isConstructor()\n  const isMethodCall = !callSite.isToplevel() && !isConstructor\n\n  if (isMethodCall) {\n    return `${callSiteToMethodCall(callSite)} (${fileLocation})`\n  }\n\n  const functionName = callSite.getFunctionName()\n  if (isConstructor) {\n    return `new ${functionName || \"<anonymous>\"} (${fileLocation})`\n  }\n\n  if (functionName) {\n    return `${functionName} (${fileLocation})`\n  }\n\n  return `${fileLocation}`\n}\n\nconst callSiteToMethodCall = (callSite) => {\n  const functionName = callSite.getFunctionName()\n  const typeName = callSiteToType(callSite)\n\n  if (!functionName) {\n    return `${typeName}.<anonymous>`\n  }\n\n  const methodName = callSite.getMethodName()\n  const as = generateAs({ methodName, functionName })\n\n  if (typeName && !functionName.startsWith(typeName)) {\n    return `${typeName}.${functionName}${as}`\n  }\n\n  return `${functionName}${as}`\n}\n\nconst generateAs = ({ methodName, functionName }) => {\n  if (!methodName) return \"\"\n  if (functionName.indexOf(`.${methodName}`) === functionName.length - methodName.length - 1)\n    return \"\"\n  return ` [as ${methodName}]`\n}\n\nconst callSiteToType = (callSite) => {\n  const typeName = callSite.getTypeName()\n  // Fixes shim to be backward compatible with Node v0 to v4\n  if (typeName === \"[object Object]\") {\n    return \"null\"\n  }\n  return typeName\n}\n\nconst callSiteToFileLocation = (callSite) => {\n  if (callSite.isNative()) return \"native\"\n\n  const sourceFile = callSiteToSourceFile(callSite)\n  const lineNumber = callSite.getLineNumber()\n  if (lineNumber === null) {\n    return sourceFile\n  }\n\n  const columnNumber = callSite.getColumnNumber()\n  if (!columnNumber) {\n    return `${sourceFile}:${lineNumber}`\n  }\n\n  return `${sourceFile}:${lineNumber}:${columnNumber}`\n}\n\nconst callSiteToSourceFile = (callSite) => {\n  const fileName = callSite.getScriptNameOrSourceURL()\n\n  if (fileName) {\n    return fileName\n  }\n\n  // Source code does not originate from a file and is not native, but we\n  // can still get the source position inside the source string, e.g. in\n  // an eval string.\n  if (callSite.isEval()) {\n    return `${callSite.getEvalOrigin()}, <anonymous>`\n  }\n\n  return \"<anonymous>\"\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nconst remapEvalOrigin = async (origin, { resolveFile, urlToSourcemapConsumer, onFailure }) => {\n  // Most eval() calls are in this format\n  const topLevelEvalMatch = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin)\n  if (topLevelEvalMatch) {\n    const source = topLevelEvalMatch[2]\n    const line = Number(topLevelEvalMatch[3])\n    const column = topLevelEvalMatch[4] - 1\n    const originalPosition = await remapSourcePosition({\n      source,\n      line,\n      column,\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${topLevelEvalMatch[1]} (${originalPosition.source}:${originalPosition.line}:${\n      originalPosition.column + 1\n    })`\n  }\n\n  // Parse nested eval() calls using recursion\n  const nestedEvalMatch = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin)\n  if (nestedEvalMatch) {\n    const originalEvalOrigin = await remapEvalOrigin(nestedEvalMatch[2], {\n      resolveFile,\n      urlToSourcemapConsumer,\n      onFailure,\n    })\n    return `eval at ${nestedEvalMatch[1]} (${originalEvalOrigin})`\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin\n}\n\nconst remapSourcePosition = async ({\n  source,\n  line,\n  column,\n  resolveFile,\n  urlToSourcemapConsumer,\n  readErrorStack,\n  onFailure,\n}) => {\n  const position = { source, line, column }\n\n  const url = sourceToUrl(source, { resolveFile })\n  if (!url) return position\n\n  const sourceMapConsumer = await urlToSourcemapConsumer(url)\n\n  if (!sourceMapConsumer) return position\n\n  try {\n    const originalPosition = sourceMapConsumer.originalPositionFor(position)\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    const originalSource = originalPosition.source\n\n    if (originalSource === null) return position\n    originalPosition.source = resolveFile(originalSource, url, { type: \"file-original\" })\n\n    return originalPosition\n  } catch (e) {\n    onFailure(`error while remapping position.\n--- error stack ---\n${readErrorStack(e)}\n--- source ---\n${source}\n--- line ---\n${line}\n--- column ---\n${column}`)\n    return position\n  }\n}\n\nconst sourceToUrl = (source, { resolveFile }) => {\n  if (startsWithScheme(source)) {\n    return source\n  }\n\n  // linux filesystem path\n  if (source[0] === \"/\") {\n    return resolveFile(source)\n  }\n\n  // be careful, due to babel or something like that we might receive paths like\n  // C:/directory/file.js (without backslashes we would expect on windows)\n  // In that case we consider C: is the signe we are on windows\n  // And I avoid to rely on process.platform === \"win32\" because this file might be executed in chrome\n  if (startsWithWindowsDriveLetter(source)) {\n    return windowsFilePathToUrl(source)\n  }\n\n  // I don't think we will ever encounter relative file in the stack trace\n  // but if it ever happens we are safe :)\n  if (source.slice(0, 2) === \"./\" || source.slice(0, 3) === \"../\") {\n    return resolveFile(source)\n  }\n\n  // we have received a \"bare specifier\" for the source\n  // it happens for internal/process/task_queues.js for instance\n  // if we do return resolveFile(source) it will be converted to\n  // file:///C:/project-directory/internal/process/task_queues.js in node\n  // and\n  // http://domain.com/internal/process/task_queues.js\n  // but the file will certainly be a 404\n  // and if not it won't be the right file anyway\n  // for now we assume \"bare specifier\" in the stack trace\n  // are internal files that are pointless to try to remap\n  return null\n}\n\nconst startsWithScheme = (string) => {\n  return /^[a-zA-Z]{2,}:/.test(string)\n}\n",
    "import { parseDataUrl, dataUrlToRawData } from \"../dataUrl.utils.js\"\nimport { getJavaScriptSourceMappingUrl } from \"../sourceMappingURLUtils.js\"\nimport { remapCallSite } from \"./remapCallSite.js\"\nimport { stackToString } from \"./stackToString.js\"\n\nexport const generateOriginalStackString = async ({\n  stack,\n  error,\n  resolveFile,\n  fetchFile,\n  SourceMapConsumer,\n  indent,\n  readErrorStack,\n  onFailure,\n}) => {\n  const urlToSourcemapConsumer = memoizeByFirstArgStringValue(async (stackTraceFileUrl) => {\n    try {\n      let text\n      try {\n        const fileResponse = await fetchFile(stackTraceFileUrl)\n        const { status } = fileResponse\n        if (status !== 200) {\n          if (status === 404) {\n            onFailure(`stack trace file not found at ${stackTraceFileUrl}`)\n          } else {\n            onFailure(`unexpected response fetching stack trace file.\n--- response status ---\n${status}\n--- response text ---\n${fileResponse.body}\n--- stack trace file ---\n${stackTraceFileUrl}`)\n          }\n          return null\n        }\n        text = await fileResponse.text()\n      } catch (e) {\n        onFailure(`error while fetching stack trace file.\n--- fetch error stack ---\n${readErrorStack(e)}\n--- stack trace file ---\n${stackTraceFileUrl}`)\n\n        return null\n      }\n\n      const jsSourcemapUrl = getJavaScriptSourceMappingUrl(text)\n      if (!jsSourcemapUrl) {\n        return null\n      }\n\n      let sourcemapUrl\n      let sourcemapString\n      if (jsSourcemapUrl.startsWith(\"data:\")) {\n        sourcemapUrl = stackTraceFileUrl\n        sourcemapString = dataUrlToRawData(parseDataUrl(jsSourcemapUrl))\n      } else {\n        sourcemapUrl = resolveFile(jsSourcemapUrl, stackTraceFileUrl, {\n          type: \"source-map\",\n        })\n\n        try {\n          const sourcemapResponse = await fetchFile(sourcemapUrl)\n          const { status } = sourcemapResponse\n          if (status !== 200) {\n            if (status === 404) {\n              onFailure(`sourcemap file not found at ${sourcemapUrl}`)\n            } else {\n              onFailure(`unexpected response for sourcemap file.\n--- response status ---\n${status}\n--- response text ---\n${await sourcemapResponse.text()}\n--- sourcemap url ---\n${sourcemapUrl}`)\n            }\n            return null\n          }\n          sourcemapString = await sourcemapResponse.text()\n        } catch (e) {\n          onFailure(`error while fetching sourcemap.\n--- fetch error stack ---\n${readErrorStack(e)}\n--- sourcemap url ---\n${sourcemapUrl}`)\n          return null\n        }\n      }\n\n      let sourceMap\n      try {\n        sourceMap = JSON.parse(sourcemapString)\n      } catch (e) {\n        onFailure(`error while parsing sourcemap.\n--- parse error stack ---\n${readErrorStack(e)}\n--- sourcemap url ---\n${sourcemapUrl}`)\n        return null\n      }\n\n      let { sourcesContent } = sourceMap\n\n      if (!sourcesContent) {\n        sourcesContent = []\n        sourceMap.sourcesContent = sourcesContent\n      }\n\n      let firstSourceMapSourceFailure = null\n\n      await Promise.all(\n        sourceMap.sources.map(async (source, index) => {\n          if (index in sourcesContent) return\n\n          const sourcemapSourceUrl = resolveFile(source, sourcemapUrl, { type: \"source\" })\n          try {\n            const sourceResponse = await fetchFile(sourcemapSourceUrl)\n            const { status } = sourceResponse\n            if (status !== 200) {\n              if (firstSourceMapSourceFailure) return\n\n              if (status === 404) {\n                firstSourceMapSourceFailure = `sourcemap source not found.\n--- sourcemap source url ---\n${sourcemapSourceUrl}\n--- sourcemap url ---\n${sourcemapUrl}`\n                return\n              }\n              firstSourceMapSourceFailure = `unexpected response for sourcemap source.\n  --- response status ---\n  ${status}\n  --- response text ---\n  ${await sourceResponse.text()}\n  --- sourcemap source url ---\n  ${sourcemapSourceUrl}\n  --- sourcemap url ---\n  ${sourcemapUrl}`\n              return\n            }\n\n            const sourceString = await sourceResponse.text()\n            sourcesContent[index] = sourceString\n          } catch (e) {\n            if (firstSourceMapSourceFailure) return\n            firstSourceMapSourceFailure = `error while fetching sourcemap source.\n--- fetch error stack ---\n${readErrorStack(e)}\n--- sourcemap source url ---\n${sourcemapSourceUrl}\n--- sourcemap url ---\n${sourcemapUrl}`\n          }\n        }),\n      )\n\n      if (firstSourceMapSourceFailure) {\n        onFailure(firstSourceMapSourceFailure)\n        return null\n      }\n\n      return new SourceMapConsumer(sourceMap)\n    } catch (e) {\n      onFailure(`error while preparing a sourceMap consumer for a stack trace file.\n--- error stack ---\n${readErrorStack(e)}\n--- stack trace file ---\n${stackTraceFileUrl}`)\n      return null\n    }\n  })\n\n  try {\n    const originalStack = await Promise.all(\n      stack.map((callSite) =>\n        remapCallSite(callSite, {\n          resolveFile,\n          urlToSourcemapConsumer,\n          readErrorStack,\n          onFailure,\n        }),\n      ),\n    )\n    return stackToString(originalStack, { error, indent })\n  } catch (e) {\n    const unmappedStack = stackToString(stack, { error, indent })\n    onFailure(`error while computing original stack.\n--- stack from error while computing ---\n${readErrorStack(e)}\n--- stack from error to remap ---\n${unmappedStack}`)\n    // in case of error return the non remapped stack\n    return unmappedStack\n  }\n}\n\nconst memoizeByFirstArgStringValue = (fn) => {\n  const stringValueCache = {}\n  return (firstArgValue) => {\n    if (firstArgValue in stringValueCache) return stringValueCache[firstArgValue]\n    const value = fn(firstArgValue)\n    stringValueCache[firstArgValue] = value\n    return value\n  }\n}\n",
    "import { stackToString } from \"./stackToString.js\"\nimport { generateOriginalStackString } from \"./getOriginalStackString.js\"\n\nexport const installErrorStackRemapping = ({\n  fetchFile,\n  resolveFile,\n  SourceMapConsumer,\n  indent = \"  \",\n}) => {\n  if (typeof fetchFile !== \"function\") {\n    throw new TypeError(`fetchFile must be a function, got ${fetchFile}`)\n  }\n  if (typeof SourceMapConsumer !== \"function\") {\n    throw new TypeError(`sourceMapConsumer must be a function, got ${SourceMapConsumer}`)\n  }\n  if (typeof indent !== \"string\") {\n    throw new TypeError(`indent must be a string, got ${indent}`)\n  }\n\n  const errorOriginalStackStringCache = new WeakMap()\n  const errorRemapFailureCallbackMap = new WeakMap()\n\n  let installed = false\n  const previousPrepareStackTrace = Error.prepareStackTrace\n  const install = () => {\n    if (installed) return\n    installed = true\n    Error.prepareStackTrace = prepareStackTrace\n  }\n\n  const uninstall = () => {\n    if (!installed) return\n    installed = false\n    Error.prepareStackTrace = previousPrepareStackTrace\n  }\n\n  // ensure we do not use prepareStackTrace for thoose error\n  // otherwise we would recursively remap error stack\n  // and if the reason causing the failure is still here\n  // it would create an infinite loop\n  const readErrorStack = (error) => {\n    uninstall()\n    const stack = error.stack\n    install()\n    return stack\n  }\n\n  const prepareStackTrace = (error, stack) => {\n    const onFailure = (failureData) => {\n      const failureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (failureCallbackArray) {\n        failureCallbackArray.forEach((callback) => callback(failureData))\n      }\n    }\n\n    const originalStackStringPromise = generateOriginalStackString({\n      stack,\n      error,\n      resolveFile,\n      fetchFile: memoizeFetch(fetchFile),\n      SourceMapConsumer,\n      readErrorStack,\n      indent,\n      onFailure,\n    })\n    errorOriginalStackStringCache.set(error, originalStackStringPromise)\n\n    return stackToString(stack, { error, indent })\n  }\n\n  const getErrorOriginalStackString = async (\n    error,\n    {\n      onFailure = (message) => {\n        console.warn(message)\n      },\n    } = {},\n  ) => {\n    if (onFailure) {\n      const remapFailureCallbackArray = errorRemapFailureCallbackMap.get(error)\n      if (remapFailureCallbackArray) {\n        errorRemapFailureCallbackMap.set(error, [...remapFailureCallbackArray, onFailure])\n      } else {\n        errorRemapFailureCallbackMap.set(error, [onFailure])\n      }\n    }\n\n    // ensure Error.prepareStackTrace gets triggered by reading error.stack now\n    const { stack } = error\n    const promise = errorOriginalStackStringCache.get(error)\n\n    if (promise) {\n      const originalStack = await promise\n      errorRemapFailureCallbackMap.get(error)\n      return originalStack\n    }\n\n    return stack\n  }\n\n  install()\n\n  return { getErrorOriginalStackString, uninstall }\n}\n\nconst memoizeFetch = (fetchUrl) => {\n  const urlCache = {}\n  return async (url) => {\n    if (url in urlCache) {\n      return urlCache[url]\n    }\n    const responsePromise = fetchUrl(url)\n    urlCache[url] = responsePromise\n    return responsePromise\n  }\n}\n",
    "import { ensureWindowsDriveLetter, resolveUrl } from \"@jsenv/util\"\nimport { require } from \"@jsenv/core/src/internal/require.js\"\nimport { fetchUrl } from \"../fetchUrl.js\"\nimport { installErrorStackRemapping } from \"./installErrorStackRemapping.js\"\n\nconst { SourceMapConsumer } = require(\"source-map\")\n\nexport const installNodeErrorStackRemapping = ({ projectDirectoryUrl, ...options }) =>\n  installErrorStackRemapping({\n    SourceMapConsumer,\n    fetchFile: fetchUrl,\n    resolveFile: (specifier, importer = projectDirectoryUrl) => {\n      return ensureWindowsDriveLetter(resolveUrl(specifier, importer), importer)\n    },\n    ...options,\n  })\n",
    "// https://developer.mozilla.org/en-US/docs/Glossary/Primitive\n\nexport const isComposite = (value) => {\n  if (value === null) return false\n  const type = typeof value\n  if (type === \"object\") return true\n  if (type === \"function\") return true\n  return false\n}\n",
    "import { isComposite } from \"./isComposite.js\"\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\nconst compositeWellKnownMap = new WeakMap()\nconst primitiveWellKnownMap = new Map()\n\nexport const getCompositeGlobalPath = (value) => compositeWellKnownMap.get(value)\n\nexport const getPrimitiveGlobalPath = (value) => primitiveWellKnownMap.get(value)\n\nconst visitGlobalObject = (value) => {\n  const visitValue = (value, path) => {\n    if (isComposite(value)) {\n      if (compositeWellKnownMap.has(value)) return // prevent infinite recursion\n      compositeWellKnownMap.set(value, path)\n\n      const visitProperty = (property) => {\n        let descriptor\n        try {\n          descriptor = Object.getOwnPropertyDescriptor(value, property)\n        } catch (e) {\n          if (e.name === \"SecurityError\") {\n            return\n          }\n          throw e\n        }\n\n        if (!descriptor) {\n          // it's apparently possible to have getOwnPropertyNames returning\n          // a property that later returns a null descriptor\n          // for instance window.showModalDialog in webkit 13.0\n          return\n        }\n\n        // do not trigger getter/setter\n        if (\"value\" in descriptor) {\n          const propertyValue = descriptor.value\n          visitValue(propertyValue, [...path, property])\n        }\n      }\n\n      Object.getOwnPropertyNames(value).forEach((name) => visitProperty(name))\n      Object.getOwnPropertySymbols(value).forEach((symbol) => visitProperty(symbol))\n    }\n\n    primitiveWellKnownMap.set(value, path)\n    return\n  }\n\n  visitValue(value, [])\n}\n\nif (typeof window === \"object\") visitGlobalObject(window)\n\nif (typeof global === \"object\") visitGlobalObject(global)\n",
    "/**\n * transforms a javascript value into an object describing it.\n *\n */\n\nimport { isComposite } from \"./isComposite.js\"\nimport { getCompositeGlobalPath, getPrimitiveGlobalPath } from \"./global-value-path.js\"\n\nexport const decompose = (mainValue, { functionAllowed, prototypeStrict }) => {\n  const valueMap = {}\n  const recipeArray = []\n\n  const valueToIdentifier = (value, path = []) => {\n    if (!isComposite(value)) {\n      const existingIdentifier = identifierForPrimitive(value)\n      if (existingIdentifier !== undefined) return existingIdentifier\n      const identifier = identifierForNewValue(value)\n      recipeArray[identifier] = primitiveToRecipe(value)\n      return identifier\n    }\n\n    if (typeof Promise === \"function\" && value instanceof Promise)\n      throw new Error(createPromiseAreNotSupportedMessage({ path }))\n    if (typeof WeakSet === \"function\" && value instanceof WeakSet)\n      throw new Error(createWeakSetAreNotSupportedMessage({ path }))\n    if (typeof WeakMap === \"function\" && value instanceof WeakMap)\n      throw new Error(createWeakMapAreNotSupportedMessage({ path }))\n    if (typeof value === \"function\" && !functionAllowed)\n      throw new Error(createForbiddenFunctionMessage({ path }))\n\n    const existingIdentifier = identifierForComposite(value)\n    if (existingIdentifier !== undefined) return existingIdentifier\n    const identifier = identifierForNewValue(value)\n\n    const compositeGlobalPath = getCompositeGlobalPath(value)\n    if (compositeGlobalPath) {\n      recipeArray[identifier] = createGlobalReferenceRecipe(compositeGlobalPath)\n      return identifier\n    }\n\n    const propertyDescriptionArray = []\n    Object.getOwnPropertyNames(value).forEach((propertyName) => {\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(value, propertyName)\n      const propertyNameIdentifier = valueToIdentifier(propertyName, [...path, propertyName])\n      const propertyDescription = computePropertyDescription(propertyDescriptor, propertyName, path)\n      propertyDescriptionArray.push({ propertyNameIdentifier, propertyDescription })\n    })\n\n    const symbolDescriptionArray = []\n    Object.getOwnPropertySymbols(value).forEach((symbol) => {\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(value, symbol)\n      const symbolIdentifier = valueToIdentifier(symbol, [...path, `[${symbol.toString()}]`])\n      const propertyDescription = computePropertyDescription(propertyDescriptor, symbol, path)\n      symbolDescriptionArray.push({ symbolIdentifier, propertyDescription })\n    })\n\n    const methodDescriptionArray = computeMethodDescriptionArray(value, path)\n\n    const extensible = Object.isExtensible(value)\n\n    recipeArray[identifier] = createCompositeRecipe({\n      propertyDescriptionArray,\n      symbolDescriptionArray,\n      methodDescriptionArray,\n      extensible,\n    })\n    return identifier\n  }\n\n  const computePropertyDescription = (propertyDescriptor, propertyNameOrSymbol, path) => {\n    if (propertyDescriptor.set && !functionAllowed)\n      throw new Error(createForbiddenPropertySetterMessage({ path, propertyNameOrSymbol }))\n    if (propertyDescriptor.get && !functionAllowed)\n      throw new Error(createForbiddenPropertyGetterMessage({ path, propertyNameOrSymbol }))\n\n    return {\n      configurable: propertyDescriptor.configurable,\n      writable: propertyDescriptor.writable,\n      enumerable: propertyDescriptor.enumerable,\n      getIdentifier:\n        \"get\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.get, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:get]]\",\n            ])\n          : undefined,\n      setIdentifier:\n        \"set\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.set, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:set]]\",\n            ])\n          : undefined,\n      valueIdentifier:\n        \"value\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.value, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:value]]\",\n            ])\n          : undefined,\n    }\n  }\n\n  const computeMethodDescriptionArray = (value, path) => {\n    const methodDescriptionArray = []\n\n    if (typeof Set === \"function\" && value instanceof Set) {\n      const callArray = []\n      value.forEach((entryValue, index) => {\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          `[[SetEntryValue]]`,\n          index,\n        ])\n        callArray.push([entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"add\"), callArray })\n    }\n\n    if (typeof Map === \"function\" && value instanceof Map) {\n      const callArray = []\n      value.forEach((entryValue, entryKey) => {\n        const entryKeyIdentifier = valueToIdentifier(entryKey, [\n          ...path,\n          \"[[MapEntryKey]]\",\n          entryKey,\n        ])\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          \"[[MapEntryValue]]\",\n          entryValue,\n        ])\n        callArray.push([entryKeyIdentifier, entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"set\"), callArray })\n    }\n\n    return methodDescriptionArray\n  }\n\n  const identifierForPrimitive = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      if (Object.is(value, existingValue)) return true\n      return value === existingValue\n    })\n  }\n\n  const identifierForComposite = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      return value === existingValue\n    })\n  }\n\n  const identifierForNewValue = (value) => {\n    const identifier = nextIdentifier()\n    valueMap[identifier] = value\n    return identifier\n  }\n\n  let currentIdentifier = -1\n  const nextIdentifier = () => {\n    const identifier = String(parseInt(currentIdentifier) + 1)\n    currentIdentifier = identifier\n    return identifier\n  }\n\n  const mainIdentifier = valueToIdentifier(mainValue)\n\n  // prototype, important to keep after the whole structure was visited\n  // so that we discover if any prototype is part of the value\n  const prototypeValueToIdentifier = (prototypeValue) => {\n    // prototype is null\n    if (prototypeValue === null) return valueToIdentifier(prototypeValue)\n\n    // prototype found somewhere already\n    const prototypeExistingIdentifier = identifierForComposite(prototypeValue)\n    if (prototypeExistingIdentifier !== undefined) return prototypeExistingIdentifier\n\n    // mark prototype as visited\n    const prototypeIdentifier = identifierForNewValue(prototypeValue)\n\n    // prototype is a global reference ?\n    const prototypeGlobalPath = getCompositeGlobalPath(prototypeValue)\n    if (prototypeGlobalPath) {\n      recipeArray[prototypeIdentifier] = createGlobalReferenceRecipe(prototypeGlobalPath)\n      return prototypeIdentifier\n    }\n\n    // otherwise prototype is unknown\n    if (prototypeStrict) {\n      throw new Error(createUnknownPrototypeMessage({ prototypeValue }))\n    }\n\n    return prototypeValueToIdentifier(Object.getPrototypeOf(prototypeValue), true)\n  }\n  const identifierForValueOf = (value, path = []) => {\n    if (value instanceof Array) return valueToIdentifier(value.length, [...path, \"length\"])\n\n    if (\"valueOf\" in value === false) return undefined\n\n    if (typeof value.valueOf !== \"function\") return undefined\n\n    const valueOfReturnValue = value.valueOf()\n    if (!isComposite(valueOfReturnValue))\n      return valueToIdentifier(valueOfReturnValue, [...path, \"valueOf()\"])\n\n    if (valueOfReturnValue === value) return undefined\n\n    throw new Error(createUnexpectedValueOfReturnValueMessage())\n  }\n\n  recipeArray.slice().forEach((recipe, index) => {\n    if (recipe.type === \"composite\") {\n      const value = valueMap[index]\n\n      if (typeof value === \"function\") {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      if (value instanceof RegExp) {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      // valueOf, mandatory to uneval new Date(10) for instance.\n      recipe.valueOfIdentifier = identifierForValueOf(value)\n      const prototypeValue = Object.getPrototypeOf(value)\n      recipe.prototypeIdentifier = prototypeValueToIdentifier(prototypeValue, true)\n    }\n  })\n\n  return {\n    recipeArray,\n    mainIdentifier,\n    valueMap,\n  }\n}\n\nconst primitiveToRecipe = (value) => {\n  if (typeof value === \"symbol\") return symbolToRecipe(value)\n\n  return createPimitiveRecipe(value)\n}\n\nconst symbolToRecipe = (symbol) => {\n  const globalSymbolKey = Symbol.keyFor(symbol)\n  if (globalSymbolKey !== undefined) return createGlobalSymbolRecipe(globalSymbolKey)\n\n  const symbolGlobalPath = getPrimitiveGlobalPath(symbol)\n  if (!symbolGlobalPath) throw new Error(createUnknownSymbolMessage({ symbol }))\n\n  return createGlobalReferenceRecipe(symbolGlobalPath)\n}\n\nconst createPimitiveRecipe = (value) => {\n  return {\n    type: \"primitive\",\n    value,\n  }\n}\n\nconst createGlobalReferenceRecipe = (path) => {\n  const recipe = {\n    type: \"global-reference\",\n    path,\n  }\n  return recipe\n}\n\nconst createGlobalSymbolRecipe = (key) => {\n  return {\n    type: \"global-symbol\",\n    key,\n  }\n}\n\nconst createCompositeRecipe = ({\n  prototypeIdentifier,\n  valueOfIdentifier,\n  propertyDescriptionArray,\n  symbolDescriptionArray,\n  methodDescriptionArray,\n  extensible,\n}) => {\n  return {\n    type: \"composite\",\n    prototypeIdentifier,\n    valueOfIdentifier,\n    propertyDescriptionArray,\n    symbolDescriptionArray,\n    methodDescriptionArray,\n    extensible,\n  }\n}\n\nconst createPromiseAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `promise are not supported.`\n\n  return `promise are not supported.\npromise found at: ${path.join(\"\")}`\n}\n\nconst createWeakSetAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `weakSet are not supported.`\n\n  return `weakSet are not supported.\nweakSet found at: ${path.join(\"\")}`\n}\n\nconst createWeakMapAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `weakMap are not supported.`\n\n  return `weakMap are not supported.\nweakMap found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenFunctionMessage = ({ path }) => {\n  if (path.length === 0) return `function are not allowed.`\n\n  return `function are not allowed.\nfunction found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenPropertyGetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property getter are not allowed.\ngetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createForbiddenPropertySetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property setter are not allowed.\nsetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createUnexpectedValueOfReturnValueMessage = () =>\n  `valueOf() must return a primitive of the object itself.`\n\nconst createUnknownSymbolMessage = ({\n  symbol,\n}) => `symbol must be global, like Symbol.iterator, or created using Symbol.for().\nsymbol: ${symbol.toString()}`\n\nconst createUnknownPrototypeMessage = ({ prototypeValue }) =>\n  `prototype must be global, like Object.prototype, or somewhere in the value.\nprototype constructor name: ${prototypeValue.constructor.name}`\n",
    "// be carefull because this function is mutating recipe objects inside the recipeArray.\n// this is not an issue because each recipe object is not accessible from the outside\n// when used internally by uneval\nexport const sortRecipe = (recipeArray) => {\n  const findInRecipePrototypeChain = (recipe, callback) => {\n    let currentRecipe = recipe\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      if (currentRecipe.type !== \"composite\") break\n      const prototypeIdentifier = currentRecipe.prototypeIdentifier\n      if (prototypeIdentifier === undefined) break\n      currentRecipe = recipeArray[prototypeIdentifier]\n\n      if (callback(currentRecipe, prototypeIdentifier)) return prototypeIdentifier\n    }\n    return undefined\n  }\n\n  const recipeArrayOrdered = recipeArray.slice()\n  recipeArrayOrdered.sort((leftRecipe, rightRecipe) => {\n    const leftType = leftRecipe.type\n    const rightType = rightRecipe.type\n\n    if (leftType === \"composite\" && rightType === \"composite\") {\n      const rightRecipeIsInLeftRecipePrototypeChain = findInRecipePrototypeChain(\n        leftRecipe,\n        (recipeCandidate) => recipeCandidate === rightRecipe,\n      )\n      // if left recipe requires right recipe, left must be after right\n      if (rightRecipeIsInLeftRecipePrototypeChain) return 1\n\n      const leftRecipeIsInRightRecipePrototypeChain = findInRecipePrototypeChain(\n        rightRecipe,\n        (recipeCandidate) => recipeCandidate === leftRecipe,\n      )\n      // if right recipe requires left recipe, right must be after left\n      if (leftRecipeIsInRightRecipePrototypeChain) return -1\n    }\n\n    if (leftType !== rightType) {\n      // if left is a composite, left must be after right\n      if (leftType === \"composite\") return 1\n      // if right is a composite, right must be after left\n      if (rightType === \"composite\") return -1\n    }\n\n    const leftIndex = recipeArray.indexOf(leftRecipe)\n    const rightIndex = recipeArray.indexOf(rightRecipe)\n    // left was before right, don't change that\n    if (leftIndex < rightIndex) return -1\n    // right was after left, don't change that\n    return 1\n  })\n\n  return recipeArrayOrdered\n}\n",
    "// https://github.com/joliss/js-string-escape/blob/master/index.js\n// http://javascript.crockford.com/remedial.html\nexport const escapeString = (value) => {\n  const string = String(value)\n  let i = 0\n  const j = string.length\n  var escapedString = \"\"\n  while (i < j) {\n    const char = string[i]\n    let escapedChar\n    if (char === '\"' || char === \"'\" || char === \"\\\\\") {\n      escapedChar = `\\\\${char}`\n    } else if (char === \"\\n\") {\n      escapedChar = \"\\\\n\"\n    } else if (char === \"\\r\") {\n      escapedChar = \"\\\\r\"\n    } else if (char === \"\\u2028\") {\n      escapedChar = \"\\\\u2028\"\n    } else if (char === \"\\u2029\") {\n      escapedChar = \"\\\\u2029\"\n    } else {\n      escapedChar = char\n    }\n    escapedString += escapedChar\n    i++\n  }\n  return escapedString\n}\n",
    "import { decompose } from \"./internal/decompose.js\"\nimport { sortRecipe } from \"./internal/sortRecipe.js\"\nimport { escapeString } from \"./internal/escapeString.js\"\n\nexport const uneval = (value, { functionAllowed = false, prototypeStrict = false } = {}) => {\n  const { recipeArray, mainIdentifier, valueMap } = decompose(value, {\n    functionAllowed,\n    prototypeStrict,\n  })\n  const recipeArraySorted = sortRecipe(recipeArray)\n\n  let source = `(function () {\nvar globalObject\ntry {\n  globalObject = Function('return this')() || (42, eval)('this');\n} catch(e) {\n  globalObject = window;\n}\n\nfunction safeDefineProperty(object, propertyNameOrSymbol, descriptor) {\n  var currentDescriptor = Object.getOwnPropertyDescriptor(object, propertyNameOrSymbol);\n  if (currentDescriptor && !currentDescriptor.configurable) return\n  Object.defineProperty(object, propertyNameOrSymbol, descriptor)\n};\n`\n\n  const variableNameMap = {}\n  recipeArray.forEach((recipe, index) => {\n    const indexSorted = recipeArraySorted.indexOf(recipe)\n    variableNameMap[index] = `_${indexSorted}`\n  })\n\n  const identifierToVariableName = (identifier) => variableNameMap[identifier]\n\n  const recipeToSetupSource = (recipe) => {\n    if (recipe.type === \"primitive\") return primitiveRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-symbol\") return globalSymbolRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-reference\") return globalReferenceRecipeToSetupSource(recipe)\n    return compositeRecipeToSetupSource(recipe)\n  }\n\n  const primitiveRecipeToSetupSource = ({ value }) => {\n    if (typeof value === \"string\") return `\"${escapeString(value)}\";`\n    if (Object.is(value, -0)) return \"-0;\"\n    return `${String(value)};`\n  }\n\n  const globalSymbolRecipeToSetupSource = (recipe) => {\n    return `Symbol.for(\"${escapeString(recipe.key)}\");`\n  }\n\n  const globalReferenceRecipeToSetupSource = (recipe) => {\n    const pathSource = recipe.path.map((part) => `[\"${escapeString(part)}\"]`).join(\"\")\n    return `globalObject${pathSource};`\n  }\n\n  const compositeRecipeToSetupSource = ({ prototypeIdentifier, valueOfIdentifier }) => {\n    if (prototypeIdentifier === undefined) return identifierToVariableName(valueOfIdentifier)\n\n    const prototypeValue = valueMap[prototypeIdentifier]\n    if (prototypeValue === null) return `Object.create(null);`\n\n    const prototypeConstructor = prototypeValue.constructor\n    if (prototypeConstructor === Object)\n      return `Object.create(${identifierToVariableName(prototypeIdentifier)});`\n\n    if (valueOfIdentifier === undefined) return `new ${prototypeConstructor.name}();`\n\n    return `new ${prototypeConstructor.name}(${identifierToVariableName(valueOfIdentifier)});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `var ${recipeVariableName} = ${recipeToSetupSource(recipe, recipeVariableName)}\n`\n  })\n\n  const recipeToMutateSource = (recipe, recipeVariableName) => {\n    if (recipe.type === \"composite\")\n      return compositeRecipeToMutateSource(recipe, recipeVariableName)\n    return ``\n  }\n\n  const compositeRecipeToMutateSource = (\n    { propertyDescriptionArray, symbolDescriptionArray, methodDescriptionArray, extensible },\n    recipeVariableName,\n  ) => {\n    let mutateSource = ``\n\n    propertyDescriptionArray.forEach(({ propertyNameIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        propertyNameIdentifier,\n        propertyDescription,\n      )\n    })\n\n    symbolDescriptionArray.forEach(({ symbolIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        symbolIdentifier,\n        propertyDescription,\n      )\n    })\n\n    methodDescriptionArray.forEach(({ methodNameIdentifier, callArray }) => {\n      mutateSource += generateMethodCallSource(recipeVariableName, methodNameIdentifier, callArray)\n    })\n\n    if (!extensible) {\n      mutateSource += generatePreventExtensionSource(recipeVariableName)\n    }\n\n    return mutateSource\n  }\n\n  const generateDefinePropertySource = (\n    recipeVariableName,\n    propertyNameOrSymbolIdentifier,\n    propertyDescription,\n  ) => {\n    const propertyOrSymbolVariableName = identifierToVariableName(propertyNameOrSymbolIdentifier)\n\n    const propertyDescriptorSource = generatePropertyDescriptorSource(propertyDescription)\n    return `safeDefineProperty(${recipeVariableName}, ${propertyOrSymbolVariableName}, ${propertyDescriptorSource});`\n  }\n\n  const generatePropertyDescriptorSource = ({\n    configurable,\n    writable,\n    enumerable,\n    getIdentifier,\n    setIdentifier,\n    valueIdentifier,\n  }) => {\n    if (valueIdentifier === undefined) {\n      return `{\n  configurable: ${configurable},\n  enumerable: ${enumerable},\n  get: ${getIdentifier === undefined ? undefined : identifierToVariableName(getIdentifier)},\n  set: ${setIdentifier === undefined ? undefined : identifierToVariableName(setIdentifier)},\n}`\n    }\n\n    return `{\n  configurable: ${configurable},\n  writable: ${writable},\n  enumerable: ${enumerable},\n  value: ${valueIdentifier === undefined ? undefined : identifierToVariableName(valueIdentifier)}\n}`\n  }\n\n  const generateMethodCallSource = (recipeVariableName, methodNameIdentifier, callArray) => {\n    let methodCallSource = ``\n\n    const methodVariableName = identifierToVariableName(methodNameIdentifier)\n    callArray.forEach((argumentIdentifiers) => {\n      const argumentVariableNames = argumentIdentifiers.map((argumentIdentifier) =>\n        identifierToVariableName(argumentIdentifier),\n      )\n\n      methodCallSource += `${recipeVariableName}[${methodVariableName}](${argumentVariableNames.join(\n        \",\",\n      )});`\n    })\n\n    return methodCallSource\n  }\n\n  const generatePreventExtensionSource = (recipeVariableName) => {\n    return `Object.preventExtensions(${recipeVariableName});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `${recipeToMutateSource(recipe, recipeVariableName)}`\n  })\n\n  source += `return ${identifierToVariableName(mainIdentifier)}; })()`\n\n  return source\n}\n",
    "export const memoize = (compute) => {\n  let memoized = false\n  let memoizedValue\n\n  const fnWithMemoization = (...args) => {\n    if (memoized) {\n      return memoizedValue\n    }\n    // if compute is recursive wait for it to be fully done before storing the lockValue\n    // so set locked later\n    memoizedValue = compute(...args)\n    memoized = true\n    return memoizedValue\n  }\n\n  fnWithMemoization.forget = () => {\n    const value = memoizedValue\n    memoized = false\n    memoizedValue = undefined\n    return value\n  }\n\n  return fnWithMemoization\n}\n",
    "import { fetchUrl } from \"../../fetchUrl.js\"\n\nexport const fetchSource = (url, { executionId } = {}) => {\n  return fetchUrl(url, {\n    ignoreHttpsError: true,\n    headers: {\n      ...(executionId ? { \"x-jsenv-execution-id\": executionId } : {}),\n    },\n  })\n}\n",
    "export const COMPILE_ID_BEST = \"best\"\n\nexport const COMPILE_ID_OTHERWISE = \"otherwise\"\n\nexport const COMPILE_ID_GLOBAL_BUNDLE = \"otherwise-global-bundle\"\n\nexport const COMPILE_ID_GLOBAL_BUNDLE_FILES = \"otherwise-global-bundle-files\"\n\nexport const COMPILE_ID_COMMONJS_BUNDLE = \"otherwise-commonjs-bundle\"\n\nexport const COMPILE_ID_COMMONJS_BUNDLE_FILES = \"otherwise-commonjs-bundle-files\"\n",
    "import { COMPILE_ID_OTHERWISE } from \"../CONSTANTS.js\"\n\nexport const computeCompileIdFromGroupId = ({ groupId, groupMap }) => {\n  if (typeof groupId === \"undefined\") {\n    if (COMPILE_ID_OTHERWISE in groupMap) return COMPILE_ID_OTHERWISE\n\n    const keys = Object.keys(groupMap)\n    if (keys.length === 1) return keys[0]\n\n    throw new Error(createUnexpectedGroupIdMessage({ groupMap }))\n  }\n\n  if (groupId in groupMap === false)\n    throw new Error(createUnexpectedGroupIdMessage({ groupId, groupMap }))\n\n  return groupId\n}\n\nconst createUnexpectedGroupIdMessage = ({ compileId, groupMap }) => `unexpected groupId.\n--- expected compiled id ----\n${Object.keys(groupMap)}\n--- received compile id ---\n${compileId}`\n",
    "export const detectNode = () => {\n  return { name: \"node\", version: process.version.slice(1) }\n}\n",
    "export const valueToVersion = (value) => {\n  if (typeof value === \"number\") {\n    return numberToVersion(value)\n  }\n\n  if (typeof value === \"string\") {\n    return stringToVersion(value)\n  }\n\n  throw new TypeError(createValueErrorMessage({ version: value }))\n}\n\nconst numberToVersion = (number) => {\n  return {\n    major: number,\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst stringToVersion = (string) => {\n  if (string.indexOf(\".\") > -1) {\n    const parts = string.split(\".\")\n    return {\n      major: Number(parts[0]),\n      minor: parts[1] ? Number(parts[1]) : 0,\n      patch: parts[2] ? Number(parts[2]) : 0,\n    }\n  }\n\n  if (isNaN(string)) {\n    return {\n      major: 0,\n      minor: 0,\n      patch: 0,\n    }\n  }\n\n  return {\n    major: Number(string),\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst createValueErrorMessage = ({ value }) => `value must be a number or a string.\nvalue: ${value}`\n",
    "import { valueToVersion } from \"./valueToVersion.js\"\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = valueToVersion(versionA)\n  const semanticVersionB = valueToVersion(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n",
    "import { versionCompare } from \"./versionCompare.js\"\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n",
    "import { versionIsBelow } from \"./versionIsBelow.js\"\n\nexport const findHighestVersion = (...values) => {\n  if (values.length === 0) throw new Error(`missing argument`)\n\n  return values.reduce((highestVersion, value) => {\n    if (versionIsBelow(highestVersion, value)) {\n      return value\n    }\n    return highestVersion\n  })\n}\n",
    "import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const resolveGroup = ({ name, version }, groupMap) => {\n  return Object.keys(groupMap).find((compileIdCandidate) => {\n    const { runtimeCompatMap } = groupMap[compileIdCandidate]\n    if (name in runtimeCompatMap === false) {\n      return false\n    }\n    const versionForGroup = runtimeCompatMap[name]\n\n    const highestVersion = findHighestVersion(version, versionForGroup)\n    return highestVersion === version\n  })\n}\n",
    "import { detectNode } from \"./detectNode/detectNode.js\"\nimport { resolveGroup } from \"./resolveGroup.js\"\n\nexport const resolveNodeGroup = (groupMap) => resolveGroup(detectNode(), groupMap)\n",
    "/*\n* SJS 6.6.1\n* Minimal SystemJS Build\n*/\n(function () {\n  function errMsg(errCode, msg) {\n    return (msg || \"\") + \" (SystemJS https://git.io/JvFET#\" + errCode + \")\";\n  }\n\n  var hasSymbol = typeof Symbol !== 'undefined';\n  var hasSelf = typeof self !== 'undefined';\n  var hasDocument = typeof document !== 'undefined';\n\n  var envGlobal = hasSelf ? self : global;\n\n  var baseUrl;\n\n  if (hasDocument) {\n    var baseEl = document.querySelector('base[href]');\n    if (baseEl)\n      baseUrl = baseEl.href;\n  }\n\n  if (!baseUrl && typeof location !== 'undefined') {\n    baseUrl = location.href.split('#')[0].split('?')[0];\n    var lastSepIndex = baseUrl.lastIndexOf('/');\n    if (lastSepIndex !== -1)\n      baseUrl = baseUrl.slice(0, lastSepIndex + 1);\n  }\n\n  var backslashRegEx = /\\\\/g;\n  function resolveIfNotPlainOrUrl (relUrl, parentUrl) {\n    if (relUrl.indexOf('\\\\') !== -1)\n      relUrl = relUrl.replace(backslashRegEx, '/');\n    // protocol-relative\n    if (relUrl[0] === '/' && relUrl[1] === '/') {\n      return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\n    }\n    // relative-url\n    else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n        relUrl.length === 1  && (relUrl += '/')) ||\n        relUrl[0] === '/') {\n      var parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\n      // Disabled, but these cases will give inconsistent results for deep backtracking\n      //if (parentUrl[parentProtocol.length] !== '/')\n      //  throw Error('Cannot resolve');\n      // read pathname from parent URL\n      // pathname taken to be part after leading \"/\"\n      var pathname;\n      if (parentUrl[parentProtocol.length + 1] === '/') {\n        // resolving to a :// so we need to read out the auth and host\n        if (parentProtocol !== 'file:') {\n          pathname = parentUrl.slice(parentProtocol.length + 2);\n          pathname = pathname.slice(pathname.indexOf('/') + 1);\n        }\n        else {\n          pathname = parentUrl.slice(8);\n        }\n      }\n      else {\n        // resolving to :/ so pathname is the /... part\n        pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));\n      }\n\n      if (relUrl[0] === '/')\n        return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\n\n      // join together and split for removal of .. and . segments\n      // looping the string instead of anything fancy for perf reasons\n      // '../../../../../z' resolved to 'x/y' is just 'z'\n      var segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n      var output = [];\n      var segmentIndex = -1;\n      for (var i = 0; i < segmented.length; i++) {\n        // busy reading a segment - only terminate on '/'\n        if (segmentIndex !== -1) {\n          if (segmented[i] === '/') {\n            output.push(segmented.slice(segmentIndex, i + 1));\n            segmentIndex = -1;\n          }\n        }\n\n        // new segment - check if it is relative\n        else if (segmented[i] === '.') {\n          // ../ segment\n          if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n            output.pop();\n            i += 2;\n          }\n          // ./ segment\n          else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n            i += 1;\n          }\n          else {\n            // the start of a new segment as below\n            segmentIndex = i;\n          }\n        }\n        // it is the start of a new segment\n        else {\n          segmentIndex = i;\n        }\n      }\n      // finish reading out the last segment\n      if (segmentIndex !== -1)\n        output.push(segmented.slice(segmentIndex));\n      return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\n    }\n  }\n\n  /*\n   * Import maps implementation\n   *\n   * To make lookups fast we pre-resolve the entire import map\n   * and then match based on backtracked hash lookups\n   *\n   */\n\n  function resolveUrl (relUrl, parentUrl) {\n    return resolveIfNotPlainOrUrl(relUrl, parentUrl) || (relUrl.indexOf(':') !== -1 ? relUrl : resolveIfNotPlainOrUrl('./' + relUrl, parentUrl));\n  }\n\n  function resolveAndComposePackages (packages, outPackages, baseUrl, parentMap, parentUrl) {\n    for (var p in packages) {\n      var resolvedLhs = resolveIfNotPlainOrUrl(p, baseUrl) || p;\n      var rhs = packages[p];\n      // package fallbacks not currently supported\n      if (typeof rhs !== 'string')\n        continue;\n      var mapped = resolveImportMap(parentMap, resolveIfNotPlainOrUrl(rhs, baseUrl) || rhs, parentUrl);\n      if (!mapped) {\n        targetWarning('W1', p, rhs);\n      }\n      else\n        outPackages[resolvedLhs] = mapped;\n    }\n  }\n\n  function resolveAndComposeImportMap (json, baseUrl, outMap) {\n    if (json.imports)\n      resolveAndComposePackages(json.imports, outMap.imports, baseUrl, outMap, null);\n\n    var u;\n    for (u in json.scopes || {}) {\n      var resolvedScope = resolveUrl(u, baseUrl);\n      resolveAndComposePackages(json.scopes[u], outMap.scopes[resolvedScope] || (outMap.scopes[resolvedScope] = {}), baseUrl, outMap, resolvedScope);\n    }\n\n    for (u in json.depcache || {})\n      outMap.depcache[resolveUrl(u, baseUrl)] = json.depcache[u];\n\n    for (u in json.integrity || {})\n      outMap.integrity[resolveUrl(u, baseUrl)] = json.integrity[u];\n  }\n\n  function getMatch (path, matchObj) {\n    if (matchObj[path])\n      return path;\n    var sepIndex = path.length;\n    do {\n      var segment = path.slice(0, sepIndex + 1);\n      if (segment in matchObj)\n        return segment;\n    } while ((sepIndex = path.lastIndexOf('/', sepIndex - 1)) !== -1)\n  }\n\n  function applyPackages (id, packages) {\n    var pkgName = getMatch(id, packages);\n    if (pkgName) {\n      var pkg = packages[pkgName];\n      if (pkg === null) return;\n      if (id.length > pkgName.length && pkg[pkg.length - 1] !== '/') {\n        targetWarning('W2', pkgName, pkg);\n      }\n      else\n        return pkg + id.slice(pkgName.length);\n    }\n  }\n\n  function targetWarning (code, match, target, msg) {\n    console.warn(errMsg(code,  [target, match].join(', ') ));\n  }\n\n  function resolveImportMap (importMap, resolvedOrPlain, parentUrl) {\n    var scopes = importMap.scopes;\n    var scopeUrl = parentUrl && getMatch(parentUrl, scopes);\n    while (scopeUrl) {\n      var packageResolution = applyPackages(resolvedOrPlain, scopes[scopeUrl]);\n      if (packageResolution)\n        return packageResolution;\n      scopeUrl = getMatch(scopeUrl.slice(0, scopeUrl.lastIndexOf('/')), scopes);\n    }\n    return applyPackages(resolvedOrPlain, importMap.imports) || resolvedOrPlain.indexOf(':') !== -1 && resolvedOrPlain;\n  }\n\n  /*\n   * SystemJS Core\n   *\n   * Provides\n   * - System.import\n   * - System.register support for\n   *     live bindings, function hoisting through circular references,\n   *     reexports, dynamic import, import.meta.url, top-level await\n   * - System.getRegister to get the registration\n   * - Symbol.toStringTag support in Module objects\n   * - Hookable System.createContext to customize import.meta\n   * - System.onload(err, id, deps) handler for tracing / hot-reloading\n   *\n   * Core comes with no System.prototype.resolve or\n   * System.prototype.instantiate implementations\n   */\n\n  var toStringTag = hasSymbol && Symbol.toStringTag;\n  var REGISTRY = hasSymbol ? Symbol() : '@';\n\n  function SystemJS () {\n    this[REGISTRY] = {};\n  }\n\n  var systemJSPrototype = SystemJS.prototype;\n\n  systemJSPrototype.import = function (id, parentUrl) {\n    var loader = this;\n    return Promise.resolve(loader.prepareImport())\n    .then(function() {\n      return loader.resolve(id, parentUrl);\n    })\n    .then(function (id) {\n      var load = getOrCreateLoad(loader, id);\n      return load.C || topLevelLoad(loader, load);\n    });\n  };\n\n  // Hookable createContext function -> allowing eg custom import meta\n  systemJSPrototype.createContext = function (parentId) {\n    var loader = this;\n    return {\n      url: parentId,\n      resolve: function (id, parentUrl) {\n        return Promise.resolve(loader.resolve(id, parentUrl || parentId));\n      }\n    };\n  };\n  function loadToId (load) {\n    return load.id;\n  }\n  function triggerOnload (loader, load, err, isErrSource) {\n    loader.onload(err, load.id, load.d && load.d.map(loadToId), !!isErrSource);\n    if (err)\n      throw err;\n  }\n\n  var lastRegister;\n  systemJSPrototype.register = function (deps, declare) {\n    lastRegister = [deps, declare];\n  };\n\n  /*\n   * getRegister provides the last anonymous System.register call\n   */\n  systemJSPrototype.getRegister = function () {\n    var _lastRegister = lastRegister;\n    lastRegister = undefined;\n    return _lastRegister;\n  };\n\n  function getOrCreateLoad (loader, id, firstParentUrl) {\n    var load = loader[REGISTRY][id];\n    if (load)\n      return load;\n\n    var importerSetters = [];\n    var ns = Object.create(null);\n    if (toStringTag)\n      Object.defineProperty(ns, toStringTag, { value: 'Module' });\n\n    var instantiatePromise = Promise.resolve()\n    .then(function () {\n      return loader.instantiate(id, firstParentUrl);\n    })\n    .then(function (registration) {\n      if (!registration)\n        throw Error(errMsg(2,  id ));\n      function _export (name, value) {\n        // note if we have hoisted exports (including reexports)\n        load.h = true;\n        var changed = false;\n        if (typeof name !== 'object') {\n          if (!(name in ns) || ns[name] !== value) {\n            ns[name] = value;\n            changed = true;\n          }\n        }\n        else {\n          for (var p in name) {\n            var value = name[p];\n            if (!(p in ns) || ns[p] !== value) {\n              ns[p] = value;\n              changed = true;\n            }\n          }\n\n          if (name.__esModule) {\n            ns.__esModule = name.__esModule;\n          }\n        }\n        if (changed)\n          for (var i = 0; i < importerSetters.length; i++) {\n            var setter = importerSetters[i];\n            if (setter) setter(ns);\n          }\n        return value;\n      }\n      var declared = registration[1](_export, registration[1].length === 2 ? {\n        import: function (importId) {\n          return loader.import(importId, id);\n        },\n        meta: loader.createContext(id)\n      } : undefined);\n      load.e = declared.execute || function () {};\n      return [registration[0], declared.setters || []];\n    });\n\n    var linkPromise = instantiatePromise\n    .then(function (instantiation) {\n      return Promise.all(instantiation[0].map(function (dep, i) {\n        var setter = instantiation[1][i];\n        return Promise.resolve(loader.resolve(dep, id))\n        .then(function (depId) {\n          var depLoad = getOrCreateLoad(loader, depId, id);\n          // depLoad.I may be undefined for already-evaluated\n          return Promise.resolve(depLoad.I)\n          .then(function () {\n            if (setter) {\n              depLoad.i.push(setter);\n              // only run early setters when there are hoisted exports of that module\n              // the timing works here as pending hoisted export calls will trigger through importerSetters\n              if (depLoad.h || !depLoad.I)\n                setter(depLoad.n);\n            }\n            return depLoad;\n          });\n        })\n      }))\n      .then(\n        function (depLoads) {\n          load.d = depLoads;\n        },\n        !true\n      )\n    });\n\n    linkPromise.catch(function (err) {\n      load.e = null;\n      load.er = err;\n    });\n\n    // Capital letter = a promise function\n    return load = loader[REGISTRY][id] = {\n      id: id,\n      // importerSetters, the setters functions registered to this dependency\n      // we retain this to add more later\n      i: importerSetters,\n      // module namespace object\n      n: ns,\n\n      // instantiate\n      I: instantiatePromise,\n      // link\n      L: linkPromise,\n      // whether it has hoisted exports\n      h: false,\n\n      // On instantiate completion we have populated:\n      // dependency load records\n      d: undefined,\n      // execution function\n      // set to NULL immediately after execution (or on any failure) to indicate execution has happened\n      // in such a case, C should be used, and E, I, L will be emptied\n      e: undefined,\n\n      // On execution we have populated:\n      // the execution error if any\n      er: undefined,\n      // in the case of TLA, the execution promise\n      E: undefined,\n\n      // On execution, L, I, E cleared\n\n      // Promise for top-level completion\n      C: undefined\n    };\n  }\n\n  function instantiateAll (loader, load, loaded) {\n    if (!loaded[load.id]) {\n      loaded[load.id] = true;\n      // load.L may be undefined for already-instantiated\n      return Promise.resolve(load.L)\n      .then(function () {\n        return Promise.all(load.d.map(function (dep) {\n          return instantiateAll(loader, dep, loaded);\n        }));\n      })\n    }\n  }\n\n  function topLevelLoad (loader, load) {\n    return load.C = instantiateAll(loader, load, {})\n    .then(function () {\n      return postOrderExec(loader, load, {});\n    })\n    .then(function () {\n      return load.n;\n    });\n  }\n\n  // the closest we can get to call(undefined)\n  var nullContext = Object.freeze(Object.create(null));\n\n  // returns a promise if and only if a top-level await subgraph\n  // throws on sync errors\n  function postOrderExec (loader, load, seen) {\n    if (seen[load.id])\n      return;\n    seen[load.id] = true;\n\n    if (!load.e) {\n      if (load.er)\n        throw load.er;\n      if (load.E)\n        return load.E;\n      return;\n    }\n\n    // deps execute first, unless circular\n    var depLoadPromises;\n    load.d.forEach(function (depLoad) {\n        try {\n          var depLoadPromise = postOrderExec(loader, depLoad, seen);\n          if (depLoadPromise)\n            (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n        }\n        catch (err) {\n          load.e = null;\n          load.er = err;\n          throw err;\n        }\n    });\n    if (depLoadPromises)\n      return Promise.all(depLoadPromises).then(doExec, function (err) {\n        load.e = null;\n        load.er = err;\n        throw err;\n      });\n\n    return doExec();\n\n    function doExec () {\n      try {\n        var execPromise = load.e.call(nullContext);\n        if (execPromise) {\n            execPromise = execPromise.then(function () {\n              load.C = load.n;\n              load.E = null; // indicates completion\n              if (!true) triggerOnload(loader, load, null, true);\n            }, function (err) {\n              load.er = err;\n              load.E = null;\n              if (!true) triggerOnload(loader, load, err, true);\n              else throw err;\n            });\n          return load.E = load.E || execPromise;\n        }\n        // (should be a promise, but a minify optimization to leave out Promise.resolve)\n        load.C = load.n;\n        if (!true) triggerOnload(loader, load, null, true);\n      }\n      catch (err) {\n        load.er = err;\n        throw err;\n      }\n      finally {\n        load.L = load.I = undefined;\n        load.e = null;\n      }\n    }\n  }\n\n  envGlobal.System = new SystemJS();\n\n  /*\n   * SystemJS browser attachments for script and import map processing\n   */\n\n  var importMapPromise = Promise.resolve();\n  var importMap = { imports: {}, scopes: {}, depcache: {}, integrity: {} };\n\n  // Scripts are processed immediately, on the first System.import, and on DOMReady.\n  // Import map scripts are processed only once (by being marked) and in order for each phase.\n  // This is to avoid using DOM mutation observers in core, although that would be an alternative.\n  var processFirst = hasDocument;\n  systemJSPrototype.prepareImport = function (doProcessScripts) {\n    if (processFirst || doProcessScripts) {\n      processScripts();\n      processFirst = false;\n    }\n    return importMapPromise;\n  };\n  if (hasDocument) {\n    processScripts();\n    window.addEventListener('DOMContentLoaded', processScripts);\n  }\n\n  function processScripts () {\n    [].forEach.call(document.querySelectorAll('script'), function (script) {\n      if (script.sp) // sp marker = systemjs processed\n        return;\n      // TODO: deprecate systemjs-module in next major now that we have auto import\n      if (script.type === 'systemjs-module') {\n        script.sp = true;\n        if (!script.src)\n          return;\n        System.import(script.src.slice(0, 7) === 'import:' ? script.src.slice(7) : resolveUrl(script.src, baseUrl));\n      }\n      else if (script.type === 'systemjs-importmap') {\n        script.sp = true;\n        var fetchPromise = script.src ? fetch(script.src).then(function (res) {\n          return res.text();\n        }) : script.innerHTML;\n        importMapPromise = importMapPromise.then(function () {\n          return fetchPromise;\n        }).then(function (text) {\n          extendImportMap(importMap, text, script.src || baseUrl);\n        });\n      }\n    });\n  }\n\n  function extendImportMap (importMap, newMapText, newMapUrl) {\n    try {\n      var newMap = JSON.parse(newMapText);\n    } catch (err) {\n      throw Error( errMsg(1) );\n    }\n    resolveAndComposeImportMap(newMap, newMapUrl, importMap);\n  }\n\n  /*\n   * Script instantiation loading\n   */\n\n  if (hasDocument) {\n    window.addEventListener('error', function (evt) {\n      lastWindowErrorUrl = evt.filename;\n      lastWindowError = evt.error;\n    });\n    var baseOrigin = location.origin;\n  }\n\n  systemJSPrototype.createScript = function (url) {\n    var script = document.createElement('script');\n    script.async = true;\n    // Only add cross origin for actual cross origin\n    // this is because Safari triggers for all\n    // - https://bugs.webkit.org/show_bug.cgi?id=171566\n    if (url.indexOf(baseOrigin + '/'))\n      script.crossOrigin = 'anonymous';\n    var integrity = importMap.integrity[url];\n    if (integrity)\n      script.integrity = integrity;\n    script.src = url;\n    return script;\n  };\n\n  // Auto imports -> script tags can be inlined directly for load phase\n  var lastAutoImportDeps, lastAutoImportTimeout;\n  var autoImportCandidates = {};\n  var systemRegister = systemJSPrototype.register;\n  systemJSPrototype.register = function (deps, declare) {\n    if (hasDocument && document.readyState === 'loading' && typeof deps !== 'string') {\n      var scripts = document.getElementsByTagName('script');\n      var lastScript = scripts[scripts.length - 1];\n      var url = lastScript && lastScript.src;\n      if (url) {\n        lastAutoImportDeps = deps;\n        // if this is already a System load, then the instantiate has already begun\n        // so this re-import has no consequence\n        var loader = this;\n        lastAutoImportTimeout = setTimeout(function () {\n          autoImportCandidates[url] = [deps, declare];\n          loader.import(url);\n        });\n      }\n    }\n    else {\n      lastAutoImportDeps = undefined;\n    }\n    return systemRegister.call(this, deps, declare);\n  };\n\n  var lastWindowErrorUrl, lastWindowError;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var autoImportRegistration = autoImportCandidates[url];\n    if (autoImportRegistration) {\n      delete autoImportCandidates[url];\n      return autoImportRegistration;\n    }\n    var loader = this;\n    return new Promise(function (resolve, reject) {\n      var script = systemJSPrototype.createScript(url);\n      script.addEventListener('error', function () {\n        reject(Error(errMsg(3,  [url, firstParentUrl].join(', ') )));\n      });\n      script.addEventListener('load', function () {\n        document.head.removeChild(script);\n        // Note that if an error occurs that isn't caught by this if statement,\n        // that getRegister will return null and a \"did not instantiate\" error will be thrown.\n        if (lastWindowErrorUrl === url) {\n          reject(lastWindowError);\n        }\n        else {\n          var register = loader.getRegister();\n          // Clear any auto import registration for dynamic import scripts during load\n          if (register && register[0] === lastAutoImportDeps)\n            clearTimeout(lastAutoImportTimeout);\n          resolve(register);\n        }\n      });\n      document.head.appendChild(script);\n    });\n  };\n\n  systemJSPrototype.resolve = function (id, parentUrl) {\n    parentUrl = parentUrl || !true  || baseUrl;\n    return resolveImportMap(( importMap), resolveIfNotPlainOrUrl(id, parentUrl) || id, parentUrl) || throwUnresolved(id, parentUrl);\n  };\n\n  function throwUnresolved (id, parentUrl) {\n    throw Error(errMsg(8,  [id, parentUrl].join(', ') ));\n  }\n\n  var systemInstantiate = systemJSPrototype.instantiate;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    var preloads = ( importMap).depcache[url];\n    if (preloads) {\n      for (var i = 0; i < preloads.length; i++)\n        getOrCreateLoad(this, this.resolve(preloads[i], url), url);\n    }\n    return systemInstantiate.call(this, url, firstParentUrl);\n  };\n\n  /*\n   * Supports loading System.register in workers\n   */\n\n  if (hasSelf && typeof importScripts === 'function')\n    systemJSPrototype.instantiate = function (url) {\n      var loader = this;\n      return Promise.resolve().then(function () {\n        importScripts(url);\n        return loader.getRegister();\n      });\n    };\n\n}());",
    "export const fromFunctionReturningNamespace = (fn, data) => {\n  return fromFunctionReturningRegisteredModule(() => {\n    // should we compute the namespace here\n    // or as it is done below, defer to execute ?\n    // I think defer to execute is better\n    return [\n      [],\n      (_export) => {\n        return {\n          execute: () => {\n            const namespace = fn()\n            _export(namespace)\n          },\n        }\n      },\n    ]\n  }, data)\n}\n\nconst fromFunctionReturningRegisteredModule = (fn, data) => {\n  try {\n    return fn()\n  } catch (error) {\n    throw new Error(`Module instantiation error.\n--- instantiation error stack ---\n${error.stack}${getModuleDetails(data)}`)\n  }\n}\n\nexport const fromUrl = async ({\n  url,\n  importerUrl,\n  fetchSource,\n  instantiateJavaScript,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n}) => {\n  const moduleResponse = await fetchSource(url, {\n    importerUrl,\n  })\n\n  if (moduleResponse.status === 404) {\n    throw new Error(\n      `Module file cannot be found.\n${getModuleDetails({\n  url,\n  importerUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  notFound: true,\n})}`,\n    )\n  }\n\n  const contentType = moduleResponse.headers[\"content-type\"] || \"\"\n\n  if (moduleResponse.status === 500 && contentType === \"application/json\") {\n    const bodyAsJson = await moduleResponse.json()\n    if (bodyAsJson.message && bodyAsJson.filename && \"columnNumber\" in bodyAsJson) {\n      const error = new Error(`Module file cannot be parsed.\n--- parsing error message ---\n${bodyAsJson.message}\n${getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl })}`)\n      error.parsingError = bodyAsJson\n      throw error\n    }\n  }\n\n  if (moduleResponse.status < 200 || moduleResponse.status >= 300) {\n    throw new Error(`Module file response status is unexpected.\n--- status ---\n${moduleResponse.status}\n--- allowed status\n200 to 299\n--- statusText ---\n${moduleResponse.statusText}\n${getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl })}`)\n  }\n\n  // don't forget to keep it close to https://github.com/systemjs/systemjs/blob/9a15cfd3b7a9fab261e1848b1b2fa343d73afedb/src/extras/module-types.js#L21\n  // and in sync with loadModule in createJsenvRollupPlugin.js\n  if (contentType === \"application/javascript\" || contentType === \"text/javascript\") {\n    const bodyAsText = await moduleResponse.text()\n    return fromFunctionReturningRegisteredModule(\n      () => instantiateJavaScript(bodyAsText, moduleResponse.url),\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentType === \"application/json\" || contentType === \"application/importmap+json\") {\n    const bodyAsJson = await moduleResponse.json()\n    return fromFunctionReturningNamespace(\n      () => {\n        return {\n          default: bodyAsJson,\n        }\n      },\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentTypeShouldBeReadAsText(contentType)) {\n    return fromFunctionReturningNamespace(\n      () => {\n        return {\n          default: moduleResponse.url,\n        }\n      },\n      {\n        url: moduleResponse.url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      },\n    )\n  }\n\n  if (contentType) {\n    // for now content type different of javascript are not unusual anymore\n    // ideally we would not use static import to tell rollup we have a dependency to an url\n    // insetad we would write something that would be compatible with web strandard such as\n    // new URL('./whatever', import.meta.url)\n    // or import.meta.resolve('./whatever')\n    //     console.warn(`Module content-type is unusual.\n    // --- content-type ---\n    // ${contentType}\n    // --- allowed content-type ---\n    // application/javascript\n    // application/json\n    // text/*\n    // ${getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl })}`)\n  } else {\n    console.warn(`Module content-type is missing.\n--- allowed content-type ---\napplication/javascript\napplication/json\ntext/*\n${getModuleDetails({ url, importerUrl, compileServerOrigin, outDirectoryRelativeUrl })}`)\n  }\n\n  return fromFunctionReturningNamespace(\n    () => {\n      return {\n        default: moduleResponse.url,\n      }\n    },\n    {\n      url: moduleResponse.url,\n      importerUrl,\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n    },\n  )\n}\n\nconst contentTypeShouldBeReadAsText = (contentType) => {\n  if (contentType.startsWith(\"text/\")) {\n    return true\n  }\n  if (contentType === \"image/svg+xml\") {\n    return true\n  }\n  return false\n}\n\n// const textToBase64 =\n//   typeof window === \"object\"\n//     ? (text) => window.btoa(window.unescape(window.encodeURIComponent(text)))\n//     : (text) => Buffer.from(text, \"utf8\").toString(\"base64\")\n\nconst getModuleDetails = ({\n  url,\n  importerUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  notFound = false,\n}) => {\n  const relativeUrl = tryToFindProjectRelativeUrl(url, {\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const importerRelativeUrl = tryToFindProjectRelativeUrl(importerUrl, {\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const details = notFound\n    ? {\n        ...(importerUrl ? { [\"import declared in\"]: importerRelativeUrl || importerUrl } : {}),\n        ...(relativeUrl ? { file: relativeUrl } : {}),\n        [\"file url\"]: url,\n      }\n    : {\n        ...(relativeUrl ? { file: relativeUrl } : {}),\n        [\"file url\"]: url,\n        ...(importerUrl ? { [\"imported by\"]: importerRelativeUrl || importerUrl } : {}),\n      }\n\n  return Object.keys(details).map((key) => {\n    return `--- ${key} ---\n${details[key]}`\n  }).join(`\n`)\n}\n\nconst tryToFindProjectRelativeUrl = (url, { compileServerOrigin, outDirectoryRelativeUrl }) => {\n  if (!url) {\n    return null\n  }\n\n  if (!url.startsWith(`${compileServerOrigin}/`)) {\n    return null\n  }\n\n  if (url === compileServerOrigin) {\n    return null\n  }\n\n  const afterOrigin = url.slice(`${compileServerOrigin}/`.length)\n  if (!afterOrigin.startsWith(outDirectoryRelativeUrl)) {\n    return null\n  }\n\n  const afterCompileDirectory = afterOrigin.slice(outDirectoryRelativeUrl.length)\n  const nextSlashIndex = afterCompileDirectory.indexOf(\"/\")\n  if (nextSlashIndex === -1) {\n    return null\n  }\n\n  const afterCompileId = afterCompileDirectory.slice(nextSlashIndex + 1)\n  return afterCompileId\n}\n",
    "export const valueInstall = (object, name, value) => {\n  const has = name in object\n  const previous = object[name]\n\n  object[name] = value\n\n  return () => {\n    if (has) {\n      object[name] = previous\n    } else {\n      delete object[name]\n    }\n  }\n}\n",
    "const NATIVE_NODE_MODULE_SPECIFIER_ARRAY = [\n  \"assert\",\n  \"async_hooks\",\n  \"buffer_ieee754\",\n  \"buffer\",\n  \"child_process\",\n  \"cluster\",\n  \"console\",\n  \"constants\",\n  \"crypto\",\n  \"_debugger\",\n  \"dgram\",\n  \"dns\",\n  \"domain\",\n  \"events\",\n  \"freelist\",\n  \"fs\",\n  \"fs/promises\",\n  \"_http_agent\",\n  \"_http_client\",\n  \"_http_common\",\n  \"_http_incoming\",\n  \"_http_outgoing\",\n  \"_http_server\",\n  \"http\",\n  \"http2\",\n  \"https\",\n  \"inspector\",\n  \"_linklist\",\n  \"module\",\n  \"net\",\n  \"node-inspect/lib/_inspect\",\n  \"node-inspect/lib/internal/inspect_client\",\n  \"node-inspect/lib/internal/inspect_repl\",\n  \"os\",\n  \"path\",\n  \"perf_hooks\",\n  \"process\",\n  \"punycode\",\n  \"querystring\",\n  \"readline\",\n  \"repl\",\n  \"smalloc\",\n  \"_stream_duplex\",\n  \"_stream_transform\",\n  \"_stream_wrap\",\n  \"_stream_passthrough\",\n  \"_stream_readable\",\n  \"_stream_writable\",\n  \"stream\",\n  \"string_decoder\",\n  \"sys\",\n  \"timers\",\n  \"_tls_common\",\n  \"_tls_legacy\",\n  \"_tls_wrap\",\n  \"tls\",\n  \"trace_events\",\n  \"tty\",\n  \"url\",\n  \"util\",\n  \"v8/tools/arguments\",\n  \"v8/tools/codemap\",\n  \"v8/tools/consarray\",\n  \"v8/tools/csvparser\",\n  \"v8/tools/logreader\",\n  \"v8/tools/profile_view\",\n  \"v8/tools/splaytree\",\n  \"v8\",\n  \"vm\",\n  \"worker_threads\",\n  \"zlib\",\n  // global is special\n  \"global\",\n]\n\nexport const isNativeNodeModuleBareSpecifier = (specifier) =>\n  NATIVE_NODE_MODULE_SPECIFIER_ARRAY.includes(specifier)\n",
    "import { Script } from \"vm\"\n\nexport const evalSource = (code, filePath) => {\n  const script = new Script(code, { filename: filePath })\n  return script.runInThisContext()\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport { urlToFileSystemPath, resolveUrl } from \"@jsenv/util\"\nimport { resolveImport } from \"@jsenv/import-map\"\nimport { require } from \"../../require.js\"\nimport \"../s.js\"\nimport { fromFunctionReturningNamespace, fromUrl } from \"../module-registration.js\"\nimport { valueInstall } from \"../valueInstall.js\"\nimport { isNativeNodeModuleBareSpecifier } from \"./isNativeNodeModuleBareSpecifier.js\"\nimport { evalSource } from \"./evalSource.js\"\n\nconst GLOBAL_SPECIFIER = \"global\"\n\nexport const createNodeSystem = ({\n  projectDirectoryUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n  importMap,\n  importDefaultExtension,\n  fetchSource,\n} = {}) => {\n  if (typeof global.System === \"undefined\") {\n    throw new Error(`global.System is undefined`)\n  }\n\n  const nodeSystem = new global.System.constructor()\n\n  const resolve = (specifier, importer) => {\n    if (specifier === GLOBAL_SPECIFIER) return specifier\n\n    if (isNativeNodeModuleBareSpecifier(specifier)) return specifier\n\n    return resolveImport({\n      specifier,\n      importer,\n      importMap,\n      defaultExtension: importDefaultExtension,\n    })\n  }\n\n  nodeSystem.resolve = resolve\n\n  nodeSystem.instantiate = async (url, importerUrl) => {\n    if (url === GLOBAL_SPECIFIER) {\n      return fromFunctionReturningNamespace(() => global, {\n        url,\n        importerUrl,\n        compileServerOrigin,\n        outDirectoryRelativeUrl,\n      })\n    }\n\n    if (isNativeNodeModuleBareSpecifier(url)) {\n      return fromFunctionReturningNamespace(\n        () => {\n          // eslint-disable-next-line import/no-dynamic-require\n          const moduleExportsForNativeNodeModule = require(url)\n          return moduleExportsToModuleNamespace(moduleExportsForNativeNodeModule)\n        },\n        {\n          url,\n          importerUrl,\n          compileServerOrigin,\n          outDirectoryRelativeUrl,\n        },\n      )\n    }\n\n    return fromUrl({\n      url,\n      importerUrl,\n      fetchSource,\n      instantiateJavaScript: (responseBody, responseUrl) => {\n        const uninstallSystemGlobal = valueInstall(global, \"System\", nodeSystem)\n        try {\n          evalSource(\n            responseBody,\n            responseUrlToSourceUrl(responseUrl, {\n              projectDirectoryUrl,\n              compileServerOrigin,\n            }),\n          )\n        } finally {\n          uninstallSystemGlobal()\n        }\n\n        return nodeSystem.getRegister()\n      },\n      outDirectoryRelativeUrl,\n      compileServerOrigin,\n    })\n  }\n\n  // https://github.com/systemjs/systemjs/blob/master/docs/hooks.md#createcontexturl---object\n  nodeSystem.createContext = (url) => {\n    const originalUrl = urlToOriginalUrl(url, {\n      projectDirectoryUrl,\n      outDirectoryRelativeUrl,\n      compileServerOrigin,\n    })\n\n    return {\n      url: originalUrl,\n      resolve: (specifier) => {\n        const urlResolved = resolve(specifier, url)\n        return urlToOriginalUrl(urlResolved, {\n          projectDirectoryUrl,\n          outDirectoryRelativeUrl,\n          compileServerOrigin,\n        })\n      },\n    }\n  }\n\n  return nodeSystem\n}\n\nconst responseUrlToSourceUrl = (responseUrl, { compileServerOrigin, projectDirectoryUrl }) => {\n  if (responseUrl.startsWith(\"file://\")) {\n    return urlToFileSystemPath(responseUrl)\n  }\n  // compileServerOrigin is optionnal\n  // because we can also create a node system and use it to import a bundle\n  // from filesystem. In that case there is no compileServerOrigin\n  if (compileServerOrigin && responseUrl.startsWith(`${compileServerOrigin}/`)) {\n    const afterOrigin = responseUrl.slice(`${compileServerOrigin}/`.length)\n    const fileUrl = resolveUrl(afterOrigin, projectDirectoryUrl)\n    return urlToFileSystemPath(fileUrl)\n  }\n  return responseUrl\n}\n\nconst urlToOriginalUrl = (\n  url,\n  { projectDirectoryUrl, outDirectoryRelativeUrl, compileServerOrigin },\n) => {\n  if (!url.startsWith(`${compileServerOrigin}/`)) {\n    return url\n  }\n\n  if (url === compileServerOrigin) {\n    return url\n  }\n\n  const afterOrigin = url.slice(`${compileServerOrigin}/`.length)\n  if (!afterOrigin.startsWith(outDirectoryRelativeUrl)) {\n    return url\n  }\n\n  const afterCompileDirectory = afterOrigin.slice(outDirectoryRelativeUrl.length)\n  const nextSlashIndex = afterCompileDirectory.indexOf(\"/\")\n  if (nextSlashIndex === -1) {\n    return url\n  }\n\n  const afterCompileId = afterCompileDirectory.slice(nextSlashIndex + 1)\n  return resolveUrl(afterCompileId, projectDirectoryUrl)\n}\n\nconst moduleExportsToModuleNamespace = (moduleExports) => {\n  // keep in mind moduleExports can be a function (like require('stream'))\n  if (typeof moduleExports === \"object\" && \"default\" in moduleExports) {\n    return moduleExports\n  }\n\n  return {\n    ...moduleExports,\n    default: moduleExports,\n  }\n}\n",
    "import { normalizeImportMap } from \"@jsenv/import-map\"\nimport { uneval } from \"@jsenv/uneval\"\n// do not use memoize from @jsenv/util to avoid pulling @jsenv/util code into the node bundle\nimport { memoize } from \"../../memoize.js\"\nimport { fetchUrl } from \"../../fetchUrl.js\"\nimport { fetchSource } from \"./fetchSource.js\"\nimport { computeCompileIdFromGroupId } from \"../computeCompileIdFromGroupId.js\"\nimport { resolveNodeGroup } from \"../resolveNodeGroup.js\"\nimport { createNodeSystem } from \"./createNodeSystem.js\"\n\nconst memoizedCreateNodeSystem = memoize(createNodeSystem)\n\nexport const createNodeRuntime = async ({\n  projectDirectoryUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n}) => {\n  const outDirectoryUrl = `${projectDirectoryUrl}${outDirectoryRelativeUrl}`\n  const groupMapUrl = String(new URL(\"groupMap.json\", outDirectoryUrl))\n  const envUrl = String(new URL(\"env.json\", outDirectoryUrl))\n  const [groupMap, { importMapFileRelativeUrl, importDefaultExtension }] = await Promise.all([\n    importJson(groupMapUrl),\n    importJson(envUrl),\n  ])\n  const compileId = computeCompileIdFromGroupId({\n    groupId: resolveNodeGroup(groupMap),\n    groupMap,\n  })\n  const compileDirectoryRelativeUrl = `${outDirectoryRelativeUrl}${compileId}/`\n\n  let importMap\n  if (importMapFileRelativeUrl) {\n    const importmapFileUrl = `${compileServerOrigin}/${compileDirectoryRelativeUrl}${importMapFileRelativeUrl}`\n    const importmapFileResponse = await fetchUrl(importmapFileUrl)\n    const importmap = importmapFileResponse.status === 404 ? {} : await importmapFileResponse.json()\n    const importmapNormalized = normalizeImportMap(importmap, importmapFileUrl)\n    importMap = importmapNormalized\n  }\n\n  const importFile = async (specifier) => {\n    const nodeSystem = await memoizedCreateNodeSystem({\n      projectDirectoryUrl,\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n      importMap,\n      importDefaultExtension,\n      fetchSource,\n    })\n    return makePromiseKeepNodeProcessAlive(nodeSystem.import(specifier))\n  }\n\n  const executeFile = async (\n    specifier,\n    { errorExposureInConsole = true, errorTransform = (error) => error } = {},\n  ) => {\n    const nodeSystem = await memoizedCreateNodeSystem({\n      projectDirectoryUrl,\n      compileServerOrigin,\n      outDirectoryRelativeUrl,\n      importMap,\n      importDefaultExtension,\n      fetchSource,\n    })\n    try {\n      const namespace = await makePromiseKeepNodeProcessAlive(nodeSystem.import(specifier))\n      return {\n        status: \"completed\",\n        namespace,\n        coverageMap: readCoverage(),\n      }\n    } catch (error) {\n      let transformedError\n      try {\n        transformedError = await errorTransform(error)\n      } catch (e) {\n        transformedError = error\n      }\n\n      if (errorExposureInConsole) console.error(transformedError)\n\n      return {\n        status: \"errored\",\n        exceptionSource: unevalException(transformedError),\n        coverageMap: readCoverage(),\n      }\n    }\n  }\n\n  return {\n    compileDirectoryRelativeUrl,\n    importFile,\n    executeFile,\n  }\n}\n\nconst importJson = async (url) => {\n  const response = await fetchSource(url)\n  const object = await response.json()\n  return object\n}\n\nconst unevalException = (value) => {\n  return uneval(value)\n}\n\nconst readCoverage = () => global.__coverage__\n\nconst makePromiseKeepNodeProcessAlive = async (promise) => {\n  const timerId = setInterval(() => {}, 10000)\n\n  try {\n    const value = await promise\n    return value\n  } finally {\n    clearInterval(timerId)\n  }\n}\n",
    "import { createNodeRuntime } from \"./internal/runtime/createNodeRuntime/createNodeRuntime.js\"\n\nexport const nodeRuntime = {\n  create: createNodeRuntime,\n}\n",
    "import { resolveUrl } from \"@jsenv/util\"\nimport { installNodeErrorStackRemapping } from \"../error-stack-remapping/installNodeErrorStackRemapping.js\"\nimport { nodeRuntime } from \"../../nodeRuntime.js\"\n\nexport const execute = async ({\n  projectDirectoryUrl,\n  fileRelativeUrl,\n  compileServerOrigin,\n  outDirectoryRelativeUrl,\n\n  executionId,\n  // do not log in the console\n  // because error handling becomes responsability\n  // of node code launching node process\n  // it avoids seeing error in runtime logs during testing\n  errorExposureInConsole = false,\n}) => {\n  const { compileDirectoryRelativeUrl, executeFile } = await nodeRuntime.create({\n    projectDirectoryUrl,\n    compileServerOrigin,\n    outDirectoryRelativeUrl,\n  })\n\n  const { getErrorOriginalStackString } = installNodeErrorStackRemapping({\n    projectDirectoryUrl,\n  })\n\n  const compiledFileRemoteUrl = resolveUrl(\n    fileRelativeUrl,\n    `${compileServerOrigin}/${compileDirectoryRelativeUrl}`,\n  )\n  return executeFile(compiledFileRemoteUrl, {\n    executionId,\n    errorTransform: async (error) => {\n      // code can throw something else than an error\n      // in that case return it unchanged\n      if (!error || !(error instanceof Error)) return error\n\n      const originalStack = await getErrorOriginalStackString(error)\n      error.stack = originalStack\n      return error\n    },\n    errorExposureInConsole,\n  })\n}\n"
  ],
  "names": [
    "obj",
    "key",
    "value",
    "Object",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "target",
    "i",
    "arguments",
    "length",
    "source",
    "ownKeys",
    "forEach",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "getOwnPropertyDescriptor",
    "object",
    "enumerableOnly",
    "keys",
    "getOwnPropertySymbols",
    "symbols",
    "filter",
    "sym",
    "push",
    "apply",
    "excluded",
    "sourceKeys",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "sourceSymbolKeys",
    "prototype",
    "propertyIsEnumerable",
    "call",
    "nativeTypeOf",
    "customTypeOf",
    "Symbol",
    "constructor",
    "iterator",
    "ensureUrlTrailingSlash",
    "url",
    "endsWith",
    "isFileSystemPath",
    "TypeError",
    "startsWithWindowsDriveLetter",
    "string",
    "firstChar",
    "test",
    "secondChar",
    "fileSystemPathToUrl",
    "Error",
    "String",
    "pathToFileURL",
    "assertAndNormalizeDirectoryUrl",
    "urlString",
    "URL",
    "href",
    "e",
    "startsWith",
    "assertAndNormalizeFileUrl",
    "baseUrl",
    "urlToFileSystemPath",
    "fileUrl",
    "slice",
    "fileSystemPath",
    "fileURLToPath",
    "isWindows",
    "process",
    "platform",
    "ETAG_FOR_EMPTY_CONTENT",
    "bufferToEtag",
    "buffer",
    "Buffer",
    "isBuffer",
    "hash",
    "createHash",
    "update",
    "hashBase64String",
    "digest",
    "hashBase64StringSubset",
    "toString",
    "createCancellationToken",
    "register",
    "callback",
    "unregister",
    "throwIfRequested",
    "undefined",
    "cancellationRequested",
    "createOperation",
    "cancellationToken",
    "start",
    "rest",
    "unknownArgumentNames",
    "promise",
    "Promise",
    "resolve",
    "cancelPromise",
    "reject",
    "cancelRegistration",
    "cancelError",
    "then",
    "operationPromise",
    "race",
    "arrayLikeToArray",
    "arr",
    "len",
    "arr2",
    "Array",
    "isArray",
    "iter",
    "from",
    "unsupportedIterableToArray",
    "o",
    "minLen",
    "n",
    "name",
    "arrayWithoutHoles",
    "iterableToArray",
    "nonIterableSpread",
    "f",
    "args",
    "readDirectory",
    "emfileMaxWait",
    "directoryUrl",
    "directoryPath",
    "startMs",
    "Date",
    "now",
    "attemptCount",
    "attempt",
    "readdirNaive",
    "handleTooManyFilesOpenedError",
    "error",
    "nowMs",
    "timeSpentWaiting",
    "setTimeout",
    "readdir",
    "names",
    "code",
    "mkdir",
    "promises",
    "resolveUrl",
    "specifier",
    "baseUrlFallback",
    "cwd",
    "ensureWindowsDriveLetter",
    "afterProtocol",
    "extractDriveLetter",
    "baseUrlOrFallback",
    "driveLetter",
    "ressource",
    "symlink",
    "stat",
    "readFilePromisified",
    "promisify",
    "readFileNode",
    "isLinux",
    "access",
    "R_OK",
    "constants",
    "W_OK",
    "X_OK",
    "writeFileNode",
    "writeFile",
    "assertImportMap",
    "type",
    "hasScheme",
    "urlToScheme",
    "colonIndex",
    "urlToPathname",
    "ressourceToPathname",
    "urlToRessource",
    "scheme",
    "pathnameSlashIndex",
    "searchSeparatorIndex",
    "urlToOrigin",
    "secondProtocolSlashIndex",
    "pathnameToParentPathname",
    "pathname",
    "slashLastIndex",
    "lastIndexOf",
    "writeBaseUrlMustBeAString",
    "writeBaseUrlMustBeAbsolute",
    "writeBaseUrlRequired",
    "baseOrigin",
    "basePathname",
    "baseDirectoryPathname",
    "unresolvedPathname",
    "importerFolders",
    "split",
    "pop",
    "resolvedPathname",
    "join",
    "tryUrlResolution",
    "result",
    "resolveSpecifier",
    "importer",
    "sortImports",
    "imports",
    "importsSorted",
    "sort",
    "compareLengthOrLocaleCompare",
    "sortScopes",
    "scopes",
    "scopesSorted",
    "scopeName",
    "a",
    "b",
    "localeCompare",
    "normalizeImportMap",
    "importMap",
    "formulateBaseUrlMustBeAString",
    "normalizeImports",
    "normalizeScopes",
    "importsNormalized",
    "address",
    "console",
    "warn",
    "formulateAddressMustBeAString",
    "specifierResolved",
    "addressUrl",
    "formulateAdressResolutionFailed",
    "formulateAddressUrlRequiresTrailingSlash",
    "scopesNormalized",
    "scope",
    "scopeValue",
    "scopeUrl",
    "formulateScopeResolutionFailed",
    "scopeValueNormalized",
    "addressURL",
    "pathnameToExtension",
    "dotLastIndex",
    "applyImportMap",
    "writeSpecifierMustBeAString",
    "writeImporterMustBeAString",
    "writeImporterMustBeAbsolute",
    "specifierUrl",
    "specifierNormalized",
    "scopeKeyMatching",
    "find",
    "scopeKey",
    "specifierIsPrefixOf",
    "remappingFromScopeImports",
    "applyImports",
    "remappingFromImports",
    "writeBareSpecifierMustBeRemapped",
    "importKeyArray",
    "importKey",
    "importValue",
    "afterImportKey",
    "specifierHref",
    "resolveImport",
    "defaultExtension",
    "applyDefaultExtension",
    "extension",
    "importerPathname",
    "importerExtension",
    "nodeRequire",
    "require",
    "filenameContainsBackSlashes",
    "__filename",
    "replace",
    "createRequire",
    "compositionMappingToComposeStrict",
    "compositionMapping",
    "createInitial",
    "reducer",
    "compositionMappingToStrictReducer",
    "objects",
    "reduce",
    "propertyComposeStrict",
    "previous",
    "current",
    "propertyExistInCurrent",
    "propertyExistInPrevious",
    "composeProperty",
    "composed",
    "compositionMappingToCompose",
    "compositionMappingToReducer",
    "propertyHasComposer",
    "composerForProperty",
    "composeHeaderValues",
    "nextValue",
    "headerValues",
    "includes",
    "headerCompositionMapping",
    "composeResponseHeaders",
    "responseCompositionMapping",
    "status",
    "prevStatus",
    "statusText",
    "prevStatusText",
    "headers",
    "body",
    "prevBody",
    "bodyEncoding",
    "prevEncoding",
    "encoding",
    "timing",
    "prevTiming",
    "composeResponse",
    "convertFileSystemErrorToResponseProperties",
    "isErrorWithCode",
    "path",
    "observable",
    "for",
    "_arr",
    "_n",
    "_d",
    "_e",
    "_i",
    "_s",
    "next",
    "done",
    "err",
    "return",
    "arrayWithHoles",
    "iterableToArrayLimit",
    "nonIterableRest",
    "timeStart",
    "startTimestamp",
    "performance",
    "timeEnd",
    "endTimestamp",
    "timeFunction",
    "fn",
    "returnValue",
    "jsenvContentTypeMap",
    "extensions",
    "urlToContentType",
    "contentTypeMap",
    "contentTypeDefault",
    "extensionWithDot",
    "extname",
    "availableContentTypes",
    "contentTypeForExtension",
    "contentTypeName",
    "contentType",
    "_await",
    "direct",
    "readFile",
    "recover",
    "serveFile",
    "method",
    "etagEnabled",
    "mtimeEnabled",
    "cacheControl",
    "canReadDirectory",
    "readableStreamLifetimeInSeconds",
    "sourceUrl",
    "statSync",
    "readStatTiming",
    "sourceStat",
    "getClientCacheResponse",
    "clientCacheResponse",
    "getRawResponse",
    "rawResponse",
    "destroy",
    "Infinity",
    "timeout",
    "onceReadableStreamUsedOrClosed",
    "clearTimeout",
    "getEtagResponse",
    "getMtimeResponse",
    "readFileTiming",
    "fileContentAsBuffer",
    "computeEtagTiming",
    "fileContentEtag",
    "etag",
    "cachedModificationDate",
    "actualModificationDate",
    "dateToSecondsPrecision",
    "mtime",
    "Number",
    "dateToUTCString",
    "isDirectory",
    "readDirectoryTiming",
    "directoryContentArray",
    "directoryContentJson",
    "JSON",
    "stringify",
    "isFile",
    "size",
    "createReadStream",
    "emitClose",
    "readableStream",
    "dataOrCloseCallback",
    "removeListener",
    "on",
    "date",
    "toUTCString",
    "dateWithSecondsPrecision",
    "setMilliseconds",
    "_catch",
    "nodeFetch",
    "_continue",
    "AbortController",
    "_invoke",
    "Response",
    "fetchUrl",
    "simplified",
    "ignoreHttpsError",
    "cacheStrategy",
    "options",
    "response",
    "standardResponseToSimplifiedResponse",
    "abortController",
    "reason",
    "abort",
    "signal",
    "agent",
    "Agent",
    "rejectUnauthorized",
    "message",
    "text",
    "responseToHeaders",
    "killPort",
    "globalAgent",
    "serverFetchUrl",
    "bind",
    "json",
    "blob",
    "arrayBuffer",
    "stackToString",
    "stack",
    "indent",
    "stackString",
    "map",
    "callSite",
    "parseDataUrl",
    "dataUrl",
    "afterDataProtocol",
    "commaIndex",
    "beforeComma",
    "mediaType",
    "base64Flag",
    "afterComma",
    "data",
    "dataUrlToRawData",
    "base64ToString",
    "dataToBase64",
    "window",
    "atob",
    "btoa",
    "base64String",
    "getJavaScriptSourceMappingUrl",
    "javaScriptSource",
    "sourceMappingUrl",
    "replaceSourceMappingUrl",
    "javascriptSourceMappingUrlCommentRegexp",
    "regexp",
    "lastSourceMappingUrl",
    "matchSourceMappingUrl",
    "exec",
    "index",
    "before",
    "after",
    "mappedAfter",
    "match",
    "firstGroup",
    "windowsFilePathToUrl",
    "windowsFilePath",
    "replaceBackSlashesWithSlashes",
    "remapCallSite",
    "urlToSourcemapConsumer",
    "resolveFile",
    "readErrorStack",
    "onFailure",
    "isNative",
    "getFileName",
    "getScriptNameOrSourceURL",
    "line",
    "getLineNumber",
    "column",
    "getColumnNumber",
    "remapSourcePosition",
    "originalPosition",
    "callSiteClone",
    "cloneCallSite",
    "getFunctionName",
    "isEval",
    "origin",
    "getEvalOrigin",
    "remapEvalOrigin",
    "originalEvalOrigin",
    "methods",
    "callSiteToFunctionCall",
    "fileLocation",
    "callSiteToFileLocation",
    "isConstructor",
    "isMethodCall",
    "isToplevel",
    "callSiteToMethodCall",
    "functionName",
    "typeName",
    "callSiteToType",
    "methodName",
    "getMethodName",
    "as",
    "generateAs",
    "getTypeName",
    "sourceFile",
    "callSiteToSourceFile",
    "lineNumber",
    "columnNumber",
    "fileName",
    "topLevelEvalMatch",
    "nestedEvalMatch",
    "position",
    "sourceToUrl",
    "sourceMapConsumer",
    "originalPositionFor",
    "originalSource",
    "startsWithScheme",
    "generateOriginalStackString",
    "fetchFile",
    "SourceMapConsumer",
    "memoizeByFirstArgStringValue",
    "stackTraceFileUrl",
    "fileResponse",
    "jsSourcemapUrl",
    "sourcemapUrl",
    "sourcemapString",
    "sourcemapResponse",
    "sourceMap",
    "parse",
    "sourcesContent",
    "firstSourceMapSourceFailure",
    "all",
    "sources",
    "sourcemapSourceUrl",
    "sourceResponse",
    "sourceString",
    "originalStack",
    "unmappedStack",
    "stringValueCache",
    "firstArgValue",
    "installErrorStackRemapping",
    "errorOriginalStackStringCache",
    "WeakMap",
    "errorRemapFailureCallbackMap",
    "installed",
    "previousPrepareStackTrace",
    "prepareStackTrace",
    "install",
    "uninstall",
    "failureData",
    "failureCallbackArray",
    "get",
    "originalStackStringPromise",
    "memoizeFetch",
    "set",
    "getErrorOriginalStackString",
    "remapFailureCallbackArray",
    "urlCache",
    "responsePromise",
    "installNodeErrorStackRemapping",
    "projectDirectoryUrl",
    "isComposite",
    "compositeWellKnownMap",
    "primitiveWellKnownMap",
    "Map",
    "getCompositeGlobalPath",
    "getPrimitiveGlobalPath",
    "visitGlobalObject",
    "visitValue",
    "has",
    "visitProperty",
    "property",
    "descriptor",
    "propertyValue",
    "getOwnPropertyNames",
    "symbol",
    "global",
    "decompose",
    "mainValue",
    "functionAllowed",
    "prototypeStrict",
    "valueMap",
    "recipeArray",
    "valueToIdentifier",
    "existingIdentifier",
    "identifierForPrimitive",
    "identifier",
    "identifierForNewValue",
    "primitiveToRecipe",
    "createPromiseAreNotSupportedMessage",
    "WeakSet",
    "createWeakSetAreNotSupportedMessage",
    "createWeakMapAreNotSupportedMessage",
    "createForbiddenFunctionMessage",
    "identifierForComposite",
    "compositeGlobalPath",
    "createGlobalReferenceRecipe",
    "propertyDescriptionArray",
    "propertyName",
    "propertyDescriptor",
    "propertyNameIdentifier",
    "propertyDescription",
    "computePropertyDescription",
    "symbolDescriptionArray",
    "symbolIdentifier",
    "methodDescriptionArray",
    "computeMethodDescriptionArray",
    "extensible",
    "isExtensible",
    "createCompositeRecipe",
    "propertyNameOrSymbol",
    "createForbiddenPropertySetterMessage",
    "createForbiddenPropertyGetterMessage",
    "getIdentifier",
    "setIdentifier",
    "valueIdentifier",
    "Set",
    "callArray",
    "entryValue",
    "entryValueIdentifier",
    "methodNameIdentifier",
    "entryKey",
    "entryKeyIdentifier",
    "existingValue",
    "is",
    "nextIdentifier",
    "currentIdentifier",
    "parseInt",
    "mainIdentifier",
    "prototypeValueToIdentifier",
    "prototypeValue",
    "prototypeExistingIdentifier",
    "prototypeIdentifier",
    "prototypeGlobalPath",
    "createUnknownPrototypeMessage",
    "getPrototypeOf",
    "identifierForValueOf",
    "valueOf",
    "valueOfReturnValue",
    "createUnexpectedValueOfReturnValueMessage",
    "recipe",
    "valueOfIdentifier",
    "RegExp",
    "symbolToRecipe",
    "createPimitiveRecipe",
    "globalSymbolKey",
    "keyFor",
    "createGlobalSymbolRecipe",
    "symbolGlobalPath",
    "createUnknownSymbolMessage",
    "sortRecipe",
    "findInRecipePrototypeChain",
    "currentRecipe",
    "recipeArrayOrdered",
    "leftRecipe",
    "rightRecipe",
    "leftType",
    "rightType",
    "rightRecipeIsInLeftRecipePrototypeChain",
    "recipeCandidate",
    "leftRecipeIsInRightRecipePrototypeChain",
    "leftIndex",
    "rightIndex",
    "escapeString",
    "j",
    "escapedString",
    "char",
    "escapedChar",
    "uneval",
    "recipeArraySorted",
    "variableNameMap",
    "indexSorted",
    "identifierToVariableName",
    "recipeToSetupSource",
    "primitiveRecipeToSetupSource",
    "globalSymbolRecipeToSetupSource",
    "globalReferenceRecipeToSetupSource",
    "compositeRecipeToSetupSource",
    "pathSource",
    "part",
    "prototypeConstructor",
    "recipeVariableName",
    "recipeToMutateSource",
    "compositeRecipeToMutateSource",
    "mutateSource",
    "generateDefinePropertySource",
    "generateMethodCallSource",
    "generatePreventExtensionSource",
    "propertyNameOrSymbolIdentifier",
    "propertyOrSymbolVariableName",
    "propertyDescriptorSource",
    "generatePropertyDescriptorSource",
    "methodCallSource",
    "methodVariableName",
    "argumentIdentifiers",
    "argumentVariableNames",
    "argumentIdentifier",
    "memoize",
    "compute",
    "memoized",
    "memoizedValue",
    "fnWithMemoization",
    "forget",
    "fetchSource",
    "executionId",
    "COMPILE_ID_OTHERWISE",
    "computeCompileIdFromGroupId",
    "groupId",
    "groupMap",
    "createUnexpectedGroupIdMessage",
    "compileId",
    "detectNode",
    "version",
    "valueToVersion",
    "numberToVersion",
    "stringToVersion",
    "createValueErrorMessage",
    "number",
    "major",
    "minor",
    "patch",
    "parts",
    "isNaN",
    "versionCompare",
    "versionA",
    "versionB",
    "semanticVersionA",
    "semanticVersionB",
    "majorDiff",
    "minorDiff",
    "patchDiff",
    "versionIsBelow",
    "versionSupposedBelow",
    "versionSupposedAbove",
    "findHighestVersion",
    "values",
    "highestVersion",
    "resolveGroup",
    "compileIdCandidate",
    "runtimeCompatMap",
    "versionForGroup",
    "resolveNodeGroup",
    "errMsg",
    "errCode",
    "msg",
    "hasSymbol",
    "hasSelf",
    "self",
    "hasDocument",
    "document",
    "envGlobal",
    "baseEl",
    "querySelector",
    "location",
    "lastSepIndex",
    "backslashRegEx",
    "resolveIfNotPlainOrUrl",
    "relUrl",
    "parentUrl",
    "parentProtocol",
    "segmented",
    "output",
    "segmentIndex",
    "resolveAndComposePackages",
    "packages",
    "outPackages",
    "parentMap",
    "p",
    "resolvedLhs",
    "rhs",
    "mapped",
    "resolveImportMap",
    "targetWarning",
    "resolveAndComposeImportMap",
    "outMap",
    "u",
    "resolvedScope",
    "depcache",
    "integrity",
    "getMatch",
    "matchObj",
    "sepIndex",
    "segment",
    "applyPackages",
    "id",
    "pkgName",
    "pkg",
    "resolvedOrPlain",
    "packageResolution",
    "toStringTag",
    "REGISTRY",
    "SystemJS",
    "systemJSPrototype",
    "import",
    "loader",
    "prepareImport",
    "load",
    "getOrCreateLoad",
    "C",
    "topLevelLoad",
    "createContext",
    "parentId",
    "loadToId",
    "triggerOnload",
    "isErrSource",
    "onload",
    "d",
    "lastRegister",
    "deps",
    "declare",
    "getRegister",
    "_lastRegister",
    "firstParentUrl",
    "importerSetters",
    "ns",
    "create",
    "instantiatePromise",
    "instantiate",
    "registration",
    "_export",
    "h",
    "changed",
    "__esModule",
    "setter",
    "declared",
    "importId",
    "meta",
    "execute",
    "setters",
    "linkPromise",
    "instantiation",
    "dep",
    "depId",
    "depLoad",
    "I",
    "depLoads",
    "catch",
    "er",
    "L",
    "E",
    "instantiateAll",
    "loaded",
    "postOrderExec",
    "nullContext",
    "freeze",
    "seen",
    "depLoadPromises",
    "depLoadPromise",
    "doExec",
    "execPromise",
    "System",
    "importMapPromise",
    "processFirst",
    "doProcessScripts",
    "processScripts",
    "addEventListener",
    "querySelectorAll",
    "script",
    "sp",
    "src",
    "fetchPromise",
    "fetch",
    "res",
    "innerHTML",
    "extendImportMap",
    "newMapText",
    "newMapUrl",
    "newMap",
    "evt",
    "lastWindowErrorUrl",
    "filename",
    "lastWindowError",
    "createScript",
    "createElement",
    "async",
    "crossOrigin",
    "lastAutoImportDeps",
    "lastAutoImportTimeout",
    "autoImportCandidates",
    "systemRegister",
    "readyState",
    "scripts",
    "getElementsByTagName",
    "lastScript",
    "autoImportRegistration",
    "head",
    "removeChild",
    "appendChild",
    "throwUnresolved",
    "systemInstantiate",
    "preloads",
    "importScripts",
    "fromFunctionReturningNamespace",
    "fromFunctionReturningRegisteredModule",
    "namespace",
    "getModuleDetails",
    "fromUrl",
    "importerUrl",
    "instantiateJavaScript",
    "compileServerOrigin",
    "outDirectoryRelativeUrl",
    "moduleResponse",
    "notFound",
    "bodyAsJson",
    "parsingError",
    "bodyAsText",
    "default",
    "contentTypeShouldBeReadAsText",
    "relativeUrl",
    "tryToFindProjectRelativeUrl",
    "importerRelativeUrl",
    "details",
    "file",
    "afterOrigin",
    "afterCompileDirectory",
    "nextSlashIndex",
    "afterCompileId",
    "valueInstall",
    "NATIVE_NODE_MODULE_SPECIFIER_ARRAY",
    "isNativeNodeModuleBareSpecifier",
    "evalSource",
    "filePath",
    "Script",
    "runInThisContext",
    "_async",
    "GLOBAL_SPECIFIER",
    "createNodeSystem",
    "importDefaultExtension",
    "nodeSystem",
    "moduleExportsForNativeNodeModule",
    "moduleExportsToModuleNamespace",
    "responseBody",
    "responseUrl",
    "uninstallSystemGlobal",
    "responseUrlToSourceUrl",
    "originalUrl",
    "urlToOriginalUrl",
    "urlResolved",
    "moduleExports",
    "memoizedCreateNodeSystem",
    "thrown",
    "finalizer",
    "createNodeRuntime",
    "outDirectoryUrl",
    "groupMapUrl",
    "envUrl",
    "importJson",
    "importMapFileRelativeUrl",
    "compileDirectoryRelativeUrl",
    "importmapFileUrl",
    "importmapFileResponse",
    "importmap",
    "importmapNormalized",
    "importFile",
    "makePromiseKeepNodeProcessAlive",
    "executeFile",
    "errorExposureInConsole",
    "errorTransform",
    "coverageMap",
    "readCoverage",
    "transformedError",
    "exceptionSource",
    "unevalException",
    "__coverage__",
    "timerId",
    "setInterval",
    "clearInterval",
    "nodeRuntime",
    "fileRelativeUrl",
    "compiledFileRemoteUrl"
  ],
  "mappings": "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"
}