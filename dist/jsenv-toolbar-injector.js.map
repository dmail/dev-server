{
  "version": 3,
  "file": "jsenv-toolbar-injector.js",
  "sources": [
    "../helpers/babel/typeof/typeof.js",
    "../helpers/babel/defineProperty/defineProperty.js",
    "../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../node_modules/@jsenv/cancellation/src/createCancellationToken.js",
    "../node_modules/@jsenv/cancellation/src/cancelError.js",
    "../helpers/babel/objectSpread2/objectSpread2.js",
    "../src/internal/fetchUsingXHR.js",
    "../src/internal/fetch-browser.js",
    "../src/internal/exploring/fetchExploringJson.js",
    "../src/internal/toolbar/util/dom.js",
    "../src/internal/toolbar/toolbar.injector.js"
  ],
  "sourcesContent": [
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export const createCancellationToken = () => {\n  const register = (callback) => {\n    if (typeof callback !== \"function\") {\n      throw new Error(`callback must be a function, got ${callback}`)\n    }\n\n    return {\n      callback,\n      unregister: () => {},\n    }\n  }\n\n  const throwIfRequested = () => undefined\n\n  return {\n    register,\n    cancellationRequested: false,\n    throwIfRequested,\n  }\n}\n",
    "export const createCancelError = (reason) => {\n  const cancelError = new Error(`canceled because ${reason}`)\n  cancelError.name = \"CANCEL_ERROR\"\n  cancelError.reason = reason\n  return cancelError\n}\n\nexport const isCancelError = (value) => {\n  return value && typeof value === \"object\" && value.name === \"CANCEL_ERROR\"\n}\n\nexport const errorToCancelReason = (error) => {\n  if (!isCancelError(error)) return \"\"\n  return error.reason\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nexport default function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    // eslint-disable-next-line prefer-rest-params\n    var source = arguments[i] === null ? {} : arguments[i]\n    if (i % 2) {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      // eslint-disable-next-line no-loop-func\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n\n// This function is different to \"Reflect.ownKeys\". The enumerableOnly\n// filters on symbol properties only. Returned string properties are always\n// enumerable. It is good to use in objectSpread.\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly)\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    // eslint-disable-next-line prefer-spread\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { createDetailedMessage } from \"@jsenv/logger\"\n// ideally we should do some window.fetch detection (ensuring it has cancellation) and accordingly\n// fallback to this polyfill (or even use an existing polyfill would be better)\n// https://github.com/github/fetch/blob/master/fetch.js\n\nexport const fetchUsingXHR = async (\n  url,\n  {\n    cancellationToken = createCancellationToken(),\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  cancellationToken.register((cancelError) => {\n    xhr.abort()\n    failure(cancelError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl = \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    createDetailedMessage(`error during xhr request on ${url}.`, {\n      [\"error stack\"]: error.stack,\n    }),\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return value && viewClasses.includes(Object.prototype.toString.call(value))\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { fetchUsingXHR } from \"./fetchUsingXHR.js\"\n\nconst fetchNative = async (\n  url,\n  { cancellationToken = createCancellationToken(), mode = \"cors\", ...options } = {},\n) => {\n  const abortController = new AbortController()\n\n  let cancelError\n  cancellationToken.register((reason) => {\n    cancelError = reason\n    abortController.abort(reason)\n  })\n\n  let response\n  try {\n    response = await window.fetch(url, {\n      signal: abortController.signal,\n      mode,\n      ...options,\n    })\n  } catch (e) {\n    if (cancelError && e.name === \"AbortError\") {\n      throw cancelError\n    }\n    throw e\n  }\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" && typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { isCancelError } from \"@jsenv/cancellation/main.browser.js\"\nimport { fetchUrl } from \"../fetch-browser.js\"\n\nexport const fetchExploringJson = async ({ cancellationToken } = {}) => {\n  try {\n    const exploringJsonResponse = await fetchUrl(\"/.jsenv/exploring.json\", {\n      headers: { \"x-jsenv\": \"1\" },\n      cancellationToken,\n    })\n    const exploringConfig = await exploringJsonResponse.json()\n    return exploringConfig\n  } catch (e) {\n    if (isCancelError(e)) {\n      throw e\n    }\n    throw new Error(\n      createDetailedMessage(`Cannot communicate with exploring server due to a network error`, {\n        [\"error stack\"]: e.stack,\n      }),\n    )\n  }\n}\n",
    "export const updateIframeOverflowOnParentWindow = () => {\n  const aTooltipIsOpened =\n    document.querySelector(\"[data-tooltip-visible]\") ||\n    document.querySelector(\"[data-tooltip-auto-visible]\")\n  const settingsAreOpened = document.querySelector(\"#settings[data-active]\")\n\n  if (aTooltipIsOpened || settingsAreOpened) {\n    enableIframeOverflowOnParentWindow()\n  } else {\n    disableIframeOverflowOnParentWindow()\n  }\n}\n\nlet iframeOverflowEnabled = false\nconst enableIframeOverflowOnParentWindow = () => {\n  if (iframeOverflowEnabled) return\n  iframeOverflowEnabled = true\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"100%\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nconst disableIframeOverflowOnParentWindow = () => {\n  if (!iframeOverflowEnabled) return\n  iframeOverflowEnabled = false\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"40px\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nexport const getToolbarIframe = () => {\n  const iframes = Array.from(window.parent.document.querySelectorAll(\"iframe\"))\n  return iframes.find((iframe) => iframe.contentWindow === window)\n}\n\nexport const forceHideElement = (element) => {\n  element.setAttribute(\"data-force-hide\", \"\")\n}\n\nexport const removeForceHideElement = (element) => {\n  element.removeAttribute(\"data-force-hide\")\n}\n\nexport const setStyles = (element, styles) => {\n  const elementStyle = element.style\n  const restoreStyles = Object.keys(styles).map((styleName) => {\n    let restore\n    if (styleName in elementStyle) {\n      const currentStyle = elementStyle[styleName]\n      restore = () => {\n        elementStyle[styleName] = currentStyle\n      }\n    } else {\n      restore = () => {\n        delete elementStyle[styleName]\n      }\n    }\n\n    elementStyle[styleName] = styles[styleName]\n\n    return restore\n  })\n  return () => {\n    restoreStyles.forEach((restore) => restore())\n  }\n}\n\nexport const setAttributes = (element, attributes) => {\n  Object.keys(attributes).forEach((name) => {\n    element.setAttribute(name, attributes[name])\n  })\n}\n\nexport const getDocumentScroll = () => {\n  return {\n    x: document.documentElement.scrollLeft,\n    y: document.documentElement.scrollTop,\n  }\n}\n\nexport const toolbarSectionIsActive = (element) => {\n  return element.hasAttribute(\"data-active\")\n}\n\nexport const activateToolbarSection = (element) => {\n  element.setAttribute(\"data-active\", \"\")\n}\n\nexport const deactivateToolbarSection = (element) => {\n  element.removeAttribute(\"data-active\")\n}\n",
    "import { fetchExploringJson } from \"@jsenv/core/src/internal/exploring/fetchExploringJson.js\"\nimport { setAttributes, setStyles } from \"./util/dom.js\"\n\n/*\nWe must connect to livereload server asap so that if a file is modified\nwhile page is loading we are notified of it.\n\nOtherwise it's possible that a file is loaded and used by browser then its modified before\nlivereload connection is established.\n\nWhen toolbar is loaded it will open an other connection to server sent events and close this one.\n*/\nconst connectLivereload = () => {\n  const { EventSource } = window\n  if (typeof EventSource !== \"function\") {\n    return () => {}\n  }\n\n  const getLivereloadPreference = () => {\n    return localStorage.hasOwnProperty(\"livereload\")\n      ? JSON.parse(localStorage.getItem(\"livereload\"))\n      : true\n  }\n\n  const url = document.location.href\n  let isOpen = false\n  let lastEventId\n  const latestChangeMap = {}\n\n  const events = {\n    \"file-modified\": ({ data }) => {\n      latestChangeMap[data] = \"modified\"\n      if (getLivereloadPreference()) {\n        window.location.reload(true)\n      }\n    },\n    \"file-removed\": ({ data }) => {\n      latestChangeMap[data] = \"removed\"\n      if (getLivereloadPreference()) {\n        window.location.reload(true)\n      }\n    },\n    \"file-added\": ({ data }) => {\n      latestChangeMap[data] = \"added\"\n      if (getLivereloadPreference()) {\n        window.location.reload(true)\n      }\n    },\n  }\n\n  const eventSourceOrigin = new URL(url).origin\n  const eventSource = new EventSource(url, {\n    withCredentials: true,\n  })\n\n  const disconnect = () => {\n    eventSource.close()\n  }\n\n  eventSource.onopen = () => {\n    isOpen = true\n  }\n\n  eventSource.onerror = (errorEvent) => {\n    if (errorEvent.target.readyState === EventSource.CLOSED) {\n      isOpen = false\n    }\n  }\n\n  Object.keys(events).forEach((eventName) => {\n    eventSource.addEventListener(eventName, (e) => {\n      if (e.origin === eventSourceOrigin) {\n        if (e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n        events[eventName](e)\n      }\n    })\n  })\n\n  return () => {\n    return {\n      isOpen,\n      latestChangeMap,\n      lastEventId,\n      disconnect,\n    }\n  }\n}\n// eslint-disable-next-line camelcase\nwindow.__jsenv_eventsource__ = connectLivereload()\n\nconst injectToolbar = async () => {\n  const { jsenvDirectoryRelativeUrl } = await fetchExploringJson()\n  const jsenvDirectoryServerUrl = resolveUrl(jsenvDirectoryRelativeUrl, document.location.origin)\n\n  const placeholder = getToolbarPlaceholder()\n\n  const iframe = document.createElement(\"iframe\")\n  setAttributes(iframe, {\n    tabindex: -1,\n    // sandbox: \"allow-forms allow-modals allow-pointer-lock allow-popups allow-presentation allow-same-origin allow-scripts allow-top-navigation-by-user-activation\",\n    // allow: \"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; microphone; midi; payment; vr\",\n    allowtransparency: true,\n  })\n  setStyles(iframe, {\n    \"position\": \"fixed\",\n    \"zIndex\": 1000,\n    \"bottom\": 0,\n    \"left\": 0,\n    \"width\": \"100%\",\n    \"height\": 0,\n    /* ensure toolbar children are not focusable when hidden */\n    \"visibility\": \"hidden\",\n    \"transition-duration\": \"300ms\",\n    \"transition-property\": \"height, visibility\",\n    \"border\": \"none\",\n  })\n  const iframeLoadedPromise = iframeToLoadedPromise(iframe)\n  const jsenvToolbarHtmlServerUrl = resolveUrl(\n    \"./src/internal/toolbar/toolbar.html\",\n    jsenvDirectoryServerUrl,\n  )\n  // set iframe src BEFORE putting it into the DOM (prevent firefox adding an history entry)\n  iframe.setAttribute(\"src\", jsenvToolbarHtmlServerUrl)\n  placeholder.parentNode.replaceChild(iframe, placeholder)\n\n  await iframeLoadedPromise\n  iframe.removeAttribute(\"tabindex\")\n\n  const listenToolbarIframeEvent = (event, fn) => {\n    window.addEventListener(\n      \"message\",\n      (messageEvent) => {\n        const { data } = messageEvent\n        if (typeof data !== \"object\") return\n        const { jsenv } = data\n        if (!jsenv) return\n        const { type } = data\n        if (type !== event) return\n        fn(data.value)\n      },\n      false,\n    )\n  }\n\n  listenToolbarIframeEvent(\"toolbar-visibility-change\", (visible) => {\n    if (visible) {\n      hideToolbarTrigger()\n    } else {\n      showToolbarTrigger()\n    }\n  })\n\n  const div = document.createElement(\"div\")\n  const jsenvLogoUrl = resolveUrl(\"./src/internal/toolbar/jsenv-logo.svg\", jsenvDirectoryServerUrl)\n  const jsenvLogoSvgSrc = jsenvLogoUrl\n  div.innerHTML = `\n<div id=\"jsenv-toolbar-trigger\">\n  <svg id=\"jsenv-toolbar-trigger-icon\">\n    <use xlink:href=\"${jsenvLogoSvgSrc}#jsenv-logo\"></use>\n  </svg>\n  <style>\n    #jsenv-toolbar-trigger {\n      display: block;\n      overflow: hidden;\n      position: fixed;\n      z-index: 1000;\n      bottom: -32px;\n      right: 20px;\n      height: 40px;\n      width: 40px;\n      padding: 0;\n      border-radius: 5px 5px 0 0;\n      border: 1px solid rgba(0, 0, 0, 0.33);\n      border-bottom: none;\n      box-shadow: 0px 0px 6px 2px rgba(0, 0, 0, 0.46);\n      background: transparent;\n      text-align: center;\n      transition: 600ms;\n    }\n\n    #jsenv-toolbar-trigger:hover {\n      cursor: pointer;\n    }\n\n    #jsenv-toolbar-trigger[data-expanded] {\n      bottom: 0;\n    }\n\n    #jsenv-toolbar-trigger-icon {\n      width: 35px;\n      height: 35px;\n      opacity: 0;\n      transition: 600ms;\n    }\n\n    #jsenv-toolbar-trigger[data-expanded] #jsenv-toolbar-trigger-icon {\n      opacity: 1;\n    }\n  </style>\n</div>`\n  const toolbarTrigger = div.firstElementChild\n  iframe.parentNode.appendChild(toolbarTrigger)\n\n  let timer\n  toolbarTrigger.onmouseenter = () => {\n    toolbarTrigger.setAttribute(\"data-animate\", \"\")\n    timer = setTimeout(expandToolbarTrigger, 500)\n  }\n  toolbarTrigger.onmouseleave = () => {\n    clearTimeout(timer)\n    collapseToolbarTrigger()\n  }\n  toolbarTrigger.onfocus = () => {\n    toolbarTrigger.removeAttribute(\"data-animate\")\n    expandToolbarTrigger()\n  }\n  toolbarTrigger.onblur = () => {\n    toolbarTrigger.removeAttribute(\"data-animate\")\n    clearTimeout(timer)\n    collapseToolbarTrigger()\n  }\n  toolbarTrigger.onclick = () => {\n    window.__jsenv__.toolbar.show()\n  }\n\n  const showToolbarTrigger = () => {\n    toolbarTrigger.style.display = \"block\"\n  }\n\n  const hideToolbarTrigger = () => {\n    toolbarTrigger.style.display = \"none\"\n  }\n\n  const expandToolbarTrigger = () => {\n    toolbarTrigger.setAttribute(\"data-expanded\", \"\")\n  }\n\n  const collapseToolbarTrigger = () => {\n    toolbarTrigger.removeAttribute(\"data-expanded\", \"\")\n  }\n  hideToolbarTrigger()\n\n  iframe.contentWindow.renderToolbar()\n\n  return iframe\n}\n\nconst getToolbarPlaceholder = () => {\n  const placeholder = queryPlaceholder()\n  if (placeholder) {\n    if (document.body.contains(placeholder)) {\n      return placeholder\n    }\n    // otherwise iframe would not be visible because in <head>\n    console.warn(\"element with [data-jsenv-toolbar-placeholder] must be inside document.body\")\n    return createTooolbarPlaceholder()\n  }\n  return createTooolbarPlaceholder()\n}\n\nconst queryPlaceholder = () => document.querySelector(\"[data-jsenv-toolbar-placeholder]\")\n\nconst createTooolbarPlaceholder = () => {\n  const placeholder = document.createElement(\"span\")\n  document.body.appendChild(placeholder)\n  return placeholder\n}\n\nconst iframeToLoadedPromise = (iframe) => {\n  return new Promise((resolve) => {\n    const onload = () => {\n      iframe.removeEventListener(\"load\", onload, true)\n      resolve()\n    }\n    iframe.addEventListener(\"load\", onload, true)\n  })\n}\n\nconst resolveUrl = (url, baseUrl) => String(new URL(url, baseUrl))\n\nif (document.readyState === \"complete\") {\n  injectToolbar()\n} else {\n  window.addEventListener(\"load\", injectToolbar)\n}\n"
  ],
  "names": [
    "nativeTypeOf",
    "obj",
    "customTypeOf",
    "Symbol",
    "constructor",
    "prototype",
    "iterator",
    "key",
    "value",
    "Object",
    "defineProperty",
    "enumerable",
    "configurable",
    "writable",
    "createDetailedMessage",
    "message",
    "details",
    "string",
    "keys",
    "forEach",
    "Array",
    "isArray",
    "join",
    "source",
    "excluded",
    "target",
    "sourceKeys",
    "i",
    "length",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "getOwnPropertySymbols",
    "sourceSymbolKeys",
    "propertyIsEnumerable",
    "call",
    "createCancellationToken",
    "register",
    "callback",
    "Error",
    "unregister",
    "throwIfRequested",
    "undefined",
    "cancellationRequested",
    "isCancelError",
    "name",
    "arguments",
    "ownKeys",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "getOwnPropertyDescriptor",
    "object",
    "enumerableOnly",
    "symbols",
    "filter",
    "sym",
    "push",
    "apply",
    "then",
    "direct",
    "Promise",
    "resolve",
    "f",
    "args",
    "e",
    "reject",
    "body",
    "result",
    "fetchUsingXHR",
    "url",
    "cancellationToken",
    "method",
    "credentials",
    "headers",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "error",
    "settled",
    "cleanup",
    "ontimeout",
    "onerror",
    "onload",
    "onreadystatechange",
    "createRequestError",
    "cancelError",
    "abort",
    "readyState",
    "open",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseUrl",
    "responseURL",
    "responseStatus",
    "status",
    "responseStatusText",
    "statusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "String",
    "json",
    "JSON",
    "parse",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "window",
    "FileReader",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "stack",
    "promise",
    "res",
    "rej",
    "originSameAsGlobalOrigin",
    "location",
    "globalOrigin",
    "origin",
    "hrefToOrigin",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "line",
    "parts",
    "shift",
    "toLowerCase",
    "href",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "slice",
    "colonIndex",
    "DataView",
    "isView",
    "viewClasses",
    "includes",
    "toString",
    "form",
    "bytes",
    "replace",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "fromCharCode",
    "byteLength",
    "set",
    "_await",
    "fetchNative",
    "mode",
    "options",
    "abortController",
    "AbortController",
    "reason",
    "fetch",
    "signal",
    "responseToHeaders",
    "_catch",
    "recover",
    "fetchUrl",
    "fetchExploringJson",
    "exploringJsonResponse",
    "setStyles",
    "element",
    "styles",
    "elementStyle",
    "style",
    "restoreStyles",
    "map",
    "styleName",
    "restore",
    "currentStyle",
    "setAttributes",
    "attributes",
    "setAttribute",
    "connectLivereload",
    "EventSource",
    "getLivereloadPreference",
    "localStorage",
    "hasOwnProperty",
    "getItem",
    "document",
    "isOpen",
    "lastEventId",
    "latestChangeMap",
    "events",
    "data",
    "reload",
    "eventSourceOrigin",
    "URL",
    "eventSource",
    "disconnect",
    "close",
    "onopen",
    "errorEvent",
    "CLOSED",
    "eventName",
    "addEventListener",
    "__jsenv_eventsource__",
    "injectToolbar",
    "jsenvDirectoryRelativeUrl",
    "jsenvDirectoryServerUrl",
    "resolveUrl",
    "placeholder",
    "getToolbarPlaceholder",
    "iframe",
    "createElement",
    "tabindex",
    "allowtransparency",
    "iframeLoadedPromise",
    "iframeToLoadedPromise",
    "jsenvToolbarHtmlServerUrl",
    "parentNode",
    "replaceChild",
    "removeAttribute",
    "listenToolbarIframeEvent",
    "event",
    "fn",
    "messageEvent",
    "jsenv",
    "type",
    "visible",
    "hideToolbarTrigger",
    "showToolbarTrigger",
    "div",
    "jsenvLogoUrl",
    "jsenvLogoSvgSrc",
    "innerHTML",
    "toolbarTrigger",
    "firstElementChild",
    "appendChild",
    "timer",
    "onmouseenter",
    "setTimeout",
    "expandToolbarTrigger",
    "onmouseleave",
    "clearTimeout",
    "collapseToolbarTrigger",
    "onfocus",
    "onblur",
    "onclick",
    "__jsenv__",
    "toolbar",
    "show",
    "display",
    "contentWindow",
    "renderToolbar",
    "queryPlaceholder",
    "contains",
    "console",
    "warn",
    "createTooolbarPlaceholder",
    "querySelector",
    "removeEventListener",
    "baseUrl"
  ],
  "mappings": "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"
}