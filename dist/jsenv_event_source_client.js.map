{
  "version": 3,
  "file": "jsenv_event_source_client.js",
  "sources": [
    "../src/internal/dev_server/event_source_client/event_source_connection.js",
    "../src/internal/dev_server/event_source_client/livereload_preference.js",
    "../src/internal/dev_server/event_source_client/file_changes.js",
    "../src/internal/dev_server/event_source_client/event_source_client.js"
  ],
  "sourcesContent": [
    "/* eslint-env browser */\n\nexport const createEventSourceConnection = (\n  eventSourceUrl,\n  events = {},\n  { retryMaxAttempt = Infinity, retryAllocatedMs = Infinity, lastEventId } = {},\n) => {\n  const { EventSource } = window\n  if (typeof EventSource !== \"function\") {\n    return () => {}\n  }\n\n  const eventSourceOrigin = new URL(eventSourceUrl).origin\n\n  let connectionStatus = \"default\"\n  let connectionStatusChangeCallback = () => {}\n  let disconnect = () => {}\n\n  const goToStatus = (newStatus) => {\n    connectionStatus = newStatus\n    connectionStatusChangeCallback()\n  }\n\n  const attemptConnection = (url) => {\n    const eventSource = new EventSource(url, {\n      withCredentials: true,\n    })\n    disconnect = () => {\n      if (\n        connectionStatus !== \"connecting\" &&\n        connectionStatus !== \"connected\"\n      ) {\n        console.warn(\n          `disconnect() ignored because connection is ${connectionStatus}`,\n        )\n        return\n      }\n      eventSource.onerror = undefined\n      eventSource.close()\n      goToStatus(\"disconnected\")\n    }\n    let retryCount = 0\n    let firstRetryMs = Date.now()\n    eventSource.onerror = (errorEvent) => {\n      if (errorEvent.target.readyState === EventSource.CONNECTING) {\n        if (retryCount > retryMaxAttempt) {\n          console.info(`could not connect after ${retryMaxAttempt} attempt`)\n          disconnect()\n          return\n        }\n\n        if (retryCount === 0) {\n          firstRetryMs = Date.now()\n        } else {\n          const allRetryDuration = Date.now() - firstRetryMs\n          if (retryAllocatedMs && allRetryDuration > retryAllocatedMs) {\n            console.info(\n              `could not connect in less than ${retryAllocatedMs} ms`,\n            )\n            disconnect()\n            return\n          }\n        }\n\n        retryCount++\n        goToStatus(\"connecting\")\n        return\n      }\n\n      if (errorEvent.target.readyState === EventSource.CLOSED) {\n        disconnect()\n        return\n      }\n    }\n    eventSource.onopen = () => {\n      goToStatus(\"connected\")\n    }\n    Object.keys(events).forEach((eventName) => {\n      eventSource.addEventListener(eventName, (e) => {\n        if (e.origin === eventSourceOrigin) {\n          if (e.lastEventId) {\n            lastEventId = e.lastEventId\n          }\n          events[eventName](e)\n        }\n      })\n    })\n    if (!events.hasOwnProperty(\"welcome\")) {\n      eventSource.addEventListener(\"welcome\", (e) => {\n        if (e.origin === eventSourceOrigin && e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n      })\n    }\n    goToStatus(\"connecting\")\n  }\n\n  let connect = () => {\n    attemptConnection(eventSourceUrl)\n    connect = () => {\n      attemptConnection(\n        lastEventId\n          ? addLastEventIdIntoUrlSearchParams(eventSourceUrl, lastEventId)\n          : eventSourceUrl,\n      )\n    }\n  }\n\n  const removePageUnloadListener = listenPageUnload(() => {\n    disconnect()\n  })\n\n  const destroy = () => {\n    removePageUnloadListener()\n    disconnect()\n  }\n\n  return {\n    getConnectionStatus: () => connectionStatus,\n    setConnectionStatusCallback: (callback) => {\n      connectionStatusChangeCallback = callback\n    },\n    connect,\n    disconnect,\n    destroy,\n  }\n}\n\nconst addLastEventIdIntoUrlSearchParams = (url, lastEventId) => {\n  if (url.indexOf(\"?\") === -1) {\n    url += \"?\"\n  } else {\n    url += \"&\"\n  }\n  return `${url}last-event-id=${encodeURIComponent(lastEventId)}`\n}\n\n// const listenPageMightFreeze = (callback) => {\n//   const removePageHideListener = listenEvent(window, \"pagehide\", (pageHideEvent) => {\n//     if (pageHideEvent.persisted === true) {\n//       callback(pageHideEvent)\n//     }\n//   })\n//   return removePageHideListener\n// }\n\n// const listenPageFreeze = (callback) => {\n//   const removeFreezeListener = listenEvent(document, \"freeze\", (freezeEvent) => {\n//     callback(freezeEvent)\n//   })\n//   return removeFreezeListener\n// }\n\n// const listenPageIsRestored = (callback) => {\n//   const removeResumeListener = listenEvent(document, \"resume\", (resumeEvent) => {\n//     removePageshowListener()\n//     callback(resumeEvent)\n//   })\n//   const removePageshowListener = listenEvent(window, \"pageshow\", (pageshowEvent) => {\n//     if (pageshowEvent.persisted === true) {\n//       removePageshowListener()\n//       removeResumeListener()\n//       callback(pageshowEvent)\n//     }\n//   })\n//   return () => {\n//     removeResumeListener()\n//     removePageshowListener()\n//   }\n// }\n\nconst listenPageUnload = (callback) => {\n  const removePageHideListener = listenEvent(\n    window,\n    \"pagehide\",\n    (pageHideEvent) => {\n      if (pageHideEvent.persisted !== true) {\n        callback(pageHideEvent)\n      }\n    },\n  )\n  return removePageHideListener\n}\n\nconst listenEvent = (emitter, event, callback) => {\n  emitter.addEventListener(event, callback)\n  return () => {\n    emitter.removeEventListener(event, callback)\n  }\n}\n",
    "/* eslint-env browser */\n\nexport const isLivereloadEnabled = () =>\n  window.localStorage.hasOwnProperty(\"livereload\")\n\nexport const setLivereloadPreference = (value) => {\n  window.localStorage.setItem(\"livereload\", JSON.stringify(value))\n}\n",
    "/* eslint-env browser */\n\nimport { isLivereloadEnabled } from \"./livereload_preference.js\"\n\nlet fileChanges = {}\nlet filechangeCallback = () => {}\n\nexport const getFileChanges = () => fileChanges\n\nexport const addFileChange = ({ file, eventType }) => {\n  fileChanges[file] = eventType\n  if (isLivereloadEnabled()) {\n    reloadIfNeeded()\n  } else {\n    filechangeCallback()\n  }\n}\n\nexport const setFileChangeCallback = (callback) => {\n  filechangeCallback = callback\n}\n\nexport const reloadIfNeeded = () => {\n  const customReloads = []\n  const cssReloads = []\n  const fullReloads = []\n\n  Object.keys(fileChanges).forEach((key) => {\n    const livereloadCallback = window.__jsenv__.livereloadingCallbacks[key]\n    if (livereloadCallback) {\n      customReloads.push(() => {\n        delete fileChanges[key]\n        livereloadCallback({\n          reloadPage,\n        })\n      })\n    } else if (\n      key.endsWith(\".css\") ||\n      key.endsWith(\".scss\") ||\n      key.endsWith(\".sass\")\n    ) {\n      cssReloads.push(() => {\n        delete fileChanges[key]\n      })\n    } else {\n      fullReloads.push(key)\n    }\n  })\n\n  if (fullReloads.length > 0) {\n    reloadPage()\n    return\n  }\n\n  customReloads.forEach((customReload) => {\n    customReload()\n  })\n\n  if (cssReloads.length) {\n    reloadAllCss()\n    cssReloads.forEach((cssReload) => {\n      cssReload()\n    })\n  }\n\n  filechangeCallback()\n}\n\nconst reloadAllCss = () => {\n  const links = Array.from(window.parent.document.getElementsByTagName(\"link\"))\n  links.forEach((link) => {\n    if (link.rel === \"stylesheet\") {\n      const url = new URL(link.href)\n      url.searchParams.set(\"t\", Date.now())\n      link.href = String(url)\n    }\n  })\n}\n\nconst reloadPage = () => {\n  window.parent.location.reload(true)\n}\n",
    "/* eslint-env browser */\n\nimport { createEventSourceConnection } from \"./event_source_connection.js\"\nimport {\n  getFileChanges,\n  addFileChange,\n  setFileChangeCallback,\n  reloadIfNeeded,\n} from \"./file_changes.js\"\nimport {\n  isLivereloadEnabled,\n  setLivereloadPreference,\n} from \"./livereload_preference.js\"\n\nconst eventsourceConnection = createEventSourceConnection(\n  document.location.href,\n  {\n    \"file-added\": ({ data }) => {\n      addFileChange({\n        file: data,\n        eventType: \"added\",\n      })\n    },\n    \"file-modified\": ({ data }) => {\n      addFileChange({\n        file: data,\n        eventType: \"modified\",\n      })\n    },\n    \"file-removed\": ({ data }) => {\n      addFileChange({\n        file: data,\n        eventType: \"removed\",\n      })\n    },\n  },\n  {\n    retryMaxAttempt: Infinity,\n    retryAllocatedMs: 20 * 1000,\n  },\n)\n\nconst {\n  connect,\n  disconnect,\n  setConnectionStatusChangeCallback,\n  getConnectionStatus,\n} = eventsourceConnection\n\nconnect()\n\nwindow.__jsenv_event_source_client__ = {\n  connect,\n  disconnect,\n  getConnectionStatus,\n  setConnectionStatusChangeCallback,\n  getFileChanges,\n  addFileChange,\n  setFileChangeCallback,\n  reloadIfNeeded,\n  isLivereloadEnabled,\n  setLivereloadPreference,\n}\n"
  ],
  "names": [
    "createEventSourceConnection",
    "eventSourceUrl",
    "events",
    "retryMaxAttempt",
    "Infinity",
    "retryAllocatedMs",
    "lastEventId",
    "window",
    "EventSource",
    "eventSourceOrigin",
    "URL",
    "origin",
    "connectionStatus",
    "connectionStatusChangeCallback",
    "disconnect",
    "goToStatus",
    "newStatus",
    "attemptConnection",
    "url",
    "eventSource",
    "withCredentials",
    "console",
    "warn",
    "onerror",
    "undefined",
    "close",
    "retryCount",
    "firstRetryMs",
    "Date",
    "now",
    "errorEvent",
    "target",
    "readyState",
    "CONNECTING",
    "info",
    "allRetryDuration",
    "CLOSED",
    "onopen",
    "Object",
    "keys",
    "forEach",
    "eventName",
    "addEventListener",
    "e",
    "hasOwnProperty",
    "connect",
    "addLastEventIdIntoUrlSearchParams",
    "removePageUnloadListener",
    "listenPageUnload",
    "destroy",
    "getConnectionStatus",
    "setConnectionStatusCallback",
    "callback",
    "indexOf",
    "encodeURIComponent",
    "removePageHideListener",
    "listenEvent",
    "pageHideEvent",
    "persisted",
    "emitter",
    "event",
    "removeEventListener",
    "isLivereloadEnabled",
    "localStorage",
    "setLivereloadPreference",
    "value",
    "setItem",
    "JSON",
    "stringify",
    "fileChanges",
    "filechangeCallback",
    "getFileChanges",
    "addFileChange",
    "file",
    "eventType",
    "reloadIfNeeded",
    "setFileChangeCallback",
    "customReloads",
    "cssReloads",
    "fullReloads",
    "key",
    "livereloadCallback",
    "__jsenv__",
    "livereloadingCallbacks",
    "push",
    "reloadPage",
    "endsWith",
    "length",
    "customReload",
    "reloadAllCss",
    "cssReload",
    "links",
    "Array",
    "from",
    "parent",
    "document",
    "getElementsByTagName",
    "link",
    "rel",
    "href",
    "searchParams",
    "set",
    "String",
    "location",
    "reload",
    "eventsourceConnection",
    "data",
    "setConnectionStatusChangeCallback",
    "__jsenv_event_source_client__"
  ],
  "mappings": "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"
}