{
  "version": 3,
  "sources": [
    "../helpers/babel/defineProperty/defineProperty.js",
    "../helpers/babel/objectSpread2/objectSpread2.js",
    "../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../node_modules/@jsenv/cancellation/src/createCancellationToken.js",
    "../helpers/babel/typeof/typeof.js",
    "../node_modules/@jsenv/cancellation/src/cancelError.js",
    "../src/internal/memoize.js",
    "../src/internal/toolbar/util/fetching.js",
    "../src/internal/toolbar/util/preferences.js",
    "../src/internal/toolbar/util/animation.js",
    "../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../src/internal/browser-utils/fetchUsingXHR.js",
    "../src/internal/browser-utils/fetch-browser.js",
    "../src/internal/browser-utils/fetchJson.js",
    "../src/internal/exploring/fetchExploringJson.js",
    "../src/internal/exploring/exploring.js"
  ],
  "names": [
    "key",
    "Object",
    "value",
    "enumerable",
    "configurable",
    "writable",
    "obj",
    "keys",
    "symbols",
    "i",
    "arguments",
    "source",
    "ownKeys",
    "defineProperty",
    "target",
    "sourceKeys",
    "excluded",
    "objectWithoutPropertiesLoose",
    "sourceSymbolKeys",
    "createCancellationToken",
    "register",
    "callback",
    "unregister",
    "throwIfRequested",
    "cancellationRequested",
    "nativeTypeOf",
    "customTypeOf",
    "Symbol",
    "isCancelError",
    "memoize",
    "memoized",
    "fnWithMemoization",
    "memoizedValue",
    "compute",
    "fetchNative",
    "cancellationToken",
    "options",
    "abortController",
    "cancelError",
    "response",
    "signal",
    "e",
    "fetchPolyfill",
    "args",
    "fetchUsingXHR",
    "loadPolyfill",
    "fetchUrl",
    "window",
    "Promise",
    "f",
    "then",
    "body",
    "result",
    "recover",
    "createPreference",
    "has",
    "localStorage",
    "get",
    "JSON",
    "set",
    "startJavaScriptAnimation",
    "duration",
    "timingFunction",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "parseInt",
    "startMs",
    "performance",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "currentRequestAnimationFrameId",
    "nowMs",
    "Math",
    "stop",
    "createDetailedMessage",
    "details",
    "string",
    "Array",
    "method",
    "credentials",
    "headers",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "failure",
    "cleanup",
    "createRequestError",
    "url",
    "readyState",
    "forEach",
    "withCredentials",
    "computeWithCredentials",
    "responseUrl",
    "responseStatus",
    "responseStatusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "status",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "String",
    "json",
    "blob",
    "cloneBuffer",
    "arrayBuffer",
    "formData",
    "statusText",
    "canUseBlob",
    "hasBlob",
    "hasFormData",
    "hasArrayBuffer",
    "hasSearchParams",
    "error",
    "promise",
    "resolve",
    "res",
    "reject",
    "rej",
    "originSameAsGlobalOrigin",
    "globalOrigin",
    "hrefToOrigin",
    "Blob",
    "FormData",
    "isDataView",
    "ArrayBuffer",
    "isArrayBufferView",
    "URLSearchParams",
    "headerMap",
    "headersString",
    "lines",
    "parts",
    "line",
    "name",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "href",
    "colonIndex",
    "DataView",
    "viewClasses",
    "textToFormData",
    "form",
    "split",
    "bytes",
    "decodeURIComponent",
    "blobToArrayBuffer",
    "reader",
    "fileReaderReady",
    "view",
    "chars",
    "buffer",
    "mode",
    "responseToHeaders",
    "fetchJson",
    "fetchExploringJson",
    "fetchJSON",
    "groupPreference",
    "run",
    "projectDirectoryUrl",
    "explorableConfig",
    "outDirectoryRelativeUrl",
    "compileServerOrigin",
    "document",
    "outDirectoryUrl",
    "documentUrl",
    "outDirectoryIndex",
    "afterOutDirectory",
    "compileId",
    "renderHtml",
    "fileListElement",
    "directoryName",
    "directoryUrlToDirectoryName",
    "span",
    "h4",
    "ul",
    "file",
    "urlToVisitFromRelativeUrl",
    "groupFieldset",
    "groupNames",
    "currentGroup",
    "inputRadio",
    "enableGroup",
    "arrayOfElementToShow",
    "files",
    "fileLink",
    "fileLi",
    "arrayOfElementToHide",
    "element",
    "makeMenuScrollable",
    "getMenuWrapperSize",
    "menuWrapperSize",
    "getMenuSize",
    "menuSize",
    "menuVisibleSize",
    "menuInvisibleSize",
    "getMenuPosition",
    "scrollDuration",
    "leftPaddle",
    "rightPaddle",
    "handleMenuScroll",
    "menuPosition",
    "menuEndOffset",
    "scrollStart",
    "scrollEnd",
    "slashLastIndex",
    "directoryUrl"
  ],
  "mappings": "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",
  "sourcesContent": [
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    }\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {}\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export const createCancellationToken = () => {\n  const register = (callback) => {\n    if (typeof callback !== \"function\") {\n      throw new Error(`callback must be a function, got ${callback}`)\n    }\n\n    return {\n      callback,\n      unregister: () => {},\n    }\n  }\n\n  const throwIfRequested = () => undefined\n\n  return {\n    register,\n    cancellationRequested: false,\n    throwIfRequested,\n  }\n}\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const createCancelError = (reason) => {\n  const cancelError = new Error(`canceled because ${reason}`)\n  cancelError.name = \"CANCEL_ERROR\"\n  cancelError.reason = reason\n  return cancelError\n}\n\nexport const isCancelError = (value) => {\n  return value && typeof value === \"object\" && value.name === \"CANCEL_ERROR\"\n}\n\nexport const errorToCancelReason = (error) => {\n  if (!isCancelError(error)) return \"\"\n  return error.reason\n}\n",
    "export const memoize = (compute) => {\n  let memoized = false\n  let memoizedValue\n\n  const fnWithMemoization = (...args) => {\n    if (memoized) {\n      return memoizedValue\n    }\n    // if compute is recursive wait for it to be fully done before storing the lockValue\n    // so set locked later\n    memoizedValue = compute(...args)\n    memoized = true\n    return memoizedValue\n  }\n\n  fnWithMemoization.forget = () => {\n    const value = memoizedValue\n    memoized = false\n    memoizedValue = undefined\n    return value\n  }\n\n  return fnWithMemoization\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { memoize } from \"../../memoize.js\"\n\nconst fetchNative = async (\n  url,\n  { cancellationToken = createCancellationToken(), ...options } = {},\n) => {\n  const abortController = new AbortController()\n\n  let cancelError\n  cancellationToken.register((reason) => {\n    cancelError = reason\n    abortController.abort(reason)\n  })\n\n  let response\n  try {\n    response = await window.fetch(url, {\n      signal: abortController.signal,\n      ...options,\n    })\n  } catch (e) {\n    if (cancelError && e.name === \"AbortError\") {\n      throw cancelError\n    }\n    throw e\n  }\n\n  return response\n}\n\nconst fetchPolyfill = async (...args) => {\n  const { fetchUsingXHR } = await loadPolyfill()\n  return fetchUsingXHR(...args)\n}\n\nconst loadPolyfill = memoize(() => import(\"../../browser-utils/fetchUsingXHR.js\"))\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" && typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchPolyfill\n",
    "export const createPreference = (name) => {\n  return {\n    has: () => localStorage.hasOwnProperty(name),\n    get: () =>\n      localStorage.hasOwnProperty(name) ? JSON.parse(localStorage.getItem(name)) : undefined,\n    set: (value) => localStorage.setItem(name, JSON.stringify(value)),\n  }\n}\n",
    "import { setStyles } from \"./dom.js\"\n\nconst animateFallback = () => {\n  return Promise.resolve()\n}\n\nconst animateNative = (node, keyframes, { cancellationToken, ...options } = {}) => {\n  const animation = node.animate(keyframes, options)\n  if (cancellationToken) {\n    cancellationToken.register(() => {\n      animation.cancel()\n    })\n  }\n  return new Promise((resolve) => {\n    animation.onfinish = resolve\n  })\n}\n\nexport const canUseAnimation = () => typeof HTMLElement.prototype.animate === \"function\"\n\nexport const animateElement = canUseAnimation() ? animateNative : animateFallback\n\nexport const fadeIn = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 0,\n      },\n      {\n        opacity: 1,\n      },\n    ],\n    options,\n  )\n\nexport const fadeOut = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 1,\n      },\n      {\n        opacity: 0,\n      },\n    ],\n    options,\n  )\n\nexport const move = (fromNode, toNode, options) => {\n  const fromComputedStyle = window.getComputedStyle(fromNode)\n  const toComputedStyle = window.getComputedStyle(toNode)\n  // get positions of input in toolbar and aElement\n  const fromPosition = fromNode.getBoundingClientRect()\n  const toPosition = toNode.getBoundingClientRect()\n\n  // we'll do the animation in a div preventing overflow and pointer events\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.left = 0\n  div.style.top = 0\n  div.style.width = `${document.documentElement.scrollWidth}px`\n  div.style.height = `${document.documentElement.scrollHeight}px`\n  div.style.overflow = \"hidden\"\n  div.style.pointerEvents = \"none\"\n\n  const documentScroll = {\n    left: window.pageXOffset || document.documentElement.scrollLeft,\n    top: window.pageYOffset || document.documentElement.scrollTop,\n  }\n\n  // clone node and style it\n  const copy = fromNode.cloneNode(true)\n  copy.style.position = \"absolute\"\n  copy.style.left = `${documentScroll.left + fromPosition.left}px`\n  copy.style.top = `${documentScroll.top + fromPosition.top}px`\n  copy.style.maxWidth = `${fromPosition.right - fromPosition.left}px`\n  copy.style.overflow = toComputedStyle.overflow\n  copy.style.textOverflow = toComputedStyle.textOverflow\n  div.appendChild(copy)\n  document.body.appendChild(div)\n\n  const left = toPosition.left - fromPosition.left - (parseInt(fromComputedStyle.paddingLeft) || 0)\n  const top = toPosition.top - fromPosition.top - (parseInt(fromComputedStyle.paddingTop) || 0)\n  // define final position of new element and the duration\n  const translate = `translate(${left}px, ${top}px)`\n\n  // animate new element\n  return animateElement(\n    copy,\n    [\n      {\n        transform: \"translate(0px, 0px)\",\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n        fontSize: fromComputedStyle.fontSize,\n        height: `${fromPosition.bottom - fromPosition.top}px`,\n        width: \"100%\",\n      },\n      {\n        offset: 0.9,\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n      },\n      {\n        transform: translate,\n        backgroundColor: toComputedStyle.backgroundColor,\n        color: toComputedStyle.color,\n        fontSize: toComputedStyle.fontSize,\n        height: `${toPosition.bottom - toPosition.top}px`,\n        width: toComputedStyle.width,\n      },\n    ],\n    options,\n  ).then(() => {\n    div.parentNode.removeChild(div)\n  })\n}\n\n// the whole point of this toolbar animation wass to flight a visual imperfection when it's done by css transition.\n// This imperfection is a white line sometimes flickering at the bottom of the page.\n// It got fixed by removing the usage of calc(100vh - 40px)\n// It was hapenning in chrome, safari but not inside Firefox\n// I assume it's because Firefox does not read parent element min-height while\n// chrome use it to compute min-height: 100%\nexport const createToolbarAnimation = () => {\n  const collapsedState = {\n    \"#page\": { paddingBottom: 0 },\n    \"footer\": { height: 0 },\n    \"#toolbar\": { visibility: \"hidden\" },\n  }\n  const expandedState = {\n    \"#page\": { paddingBottom: \"40px\" },\n    \"footer\": { height: \"40px\" },\n    \"#toolbar\": { visibility: \"visible\" },\n  }\n  const expandTransition = transit(collapsedState, expandedState, { duration: 300 })\n\n  const expand = () => {\n    expandTransition.play()\n  }\n\n  const collapse = () => {\n    expandTransition.reverse()\n  }\n\n  return { expand, collapse }\n}\n\nexport const transit = (\n  fromState,\n  toState,\n  { commitStyles = true, fill = \"both\", duration = 300 } = {},\n) => {\n  const steps = []\n  Object.keys(fromState).forEach((selector) => {\n    const fromStyles = {}\n    const toStyles = {}\n    const element = document.querySelector(selector)\n\n    const keyframes = []\n    const fromProperties = fromState[selector]\n    const toProperties = toState[selector]\n    Object.keys(fromProperties).forEach((propertyName) => {\n      const from = fromProperties[propertyName]\n      const to = toProperties[propertyName]\n      fromStyles[propertyName] = from\n      toStyles[propertyName] = to\n    })\n    keyframes.push(fromStyles, toStyles)\n\n    let animation\n    if (canUseAnimation()) {\n      const effect = new KeyframeEffect(element, keyframes, { fill, duration })\n      animation = new Animation(effect)\n    } else {\n      animation = {\n        playbackRate: 1,\n        play: () => {\n          animation.onfinish()\n        },\n        reverse: () => {\n          animation.playbackRate = -1\n          animation.onfinish()\n        },\n        finish: () => {},\n        onfinish: () => {},\n      }\n    }\n\n    steps.push({\n      element,\n      animation,\n      fromStyles,\n      toStyles,\n    })\n  })\n\n  const play = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, toStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, toStyles)\n            }\n            resolve()\n          }\n          if (animation.playbackRate === -1) {\n            animation.reverse()\n          } else {\n            animation.play()\n          }\n        })\n      }),\n    )\n  }\n\n  const reverse = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, fromStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, fromStyles)\n            }\n            resolve()\n          }\n          animation.reverse()\n        })\n      }),\n    )\n  }\n\n  const finish = async () => {\n    steps.forEach(({ animation }) => {\n      animation.finish()\n    })\n  }\n\n  return { play, reverse, finish }\n}\n\nexport const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t,\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    // console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { createDetailedMessage } from \"@jsenv/logger\"\n// ideally we should do some window.fetch detection (ensuring it has cancellation) and accordingly\n// fallback to this polyfill (or even use an existing polyfill would be better)\n// https://github.com/github/fetch/blob/master/fetch.js\n\nexport const fetchUsingXHR = async (\n  url,\n  {\n    cancellationToken = createCancellationToken(),\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  cancellationToken.register((cancelError) => {\n    xhr.abort()\n    failure(cancelError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl = \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    createDetailedMessage(`error during xhr request on ${url}.`, {\n      [\"error stack\"]: error.stack,\n    }),\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return value && viewClasses.includes(Object.prototype.toString.call(value))\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { fetchUsingXHR } from \"./fetchUsingXHR.js\"\n\nconst fetchNative = async (\n  url,\n  { cancellationToken = createCancellationToken(), mode = \"cors\", ...options } = {},\n) => {\n  const abortController = new AbortController()\n\n  let cancelError\n  cancellationToken.register((reason) => {\n    cancelError = reason\n    abortController.abort(reason)\n  })\n\n  let response\n  try {\n    response = await window.fetch(url, {\n      signal: abortController.signal,\n      mode,\n      ...options,\n    })\n  } catch (e) {\n    if (cancelError && e.name === \"AbortError\") {\n      throw cancelError\n    }\n    throw e\n  }\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" && typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch-browser.js\"\n\nexport const fetchJson = async (url, options = {}) => {\n  const response = await fetchUrl(url, options)\n  const object = await response.json()\n  return object\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { isCancelError } from \"@jsenv/cancellation/main.browser.js\"\n\nimport { fetchJson } from \"../browser-utils/fetchJson.js\"\n\nexport const fetchExploringJson = async ({ cancellationToken } = {}) => {\n  try {\n    const exploringInfo = await fetchJson(\"/.jsenv/exploring.json\", {\n      cancellationToken,\n    })\n    return exploringInfo\n  } catch (e) {\n    if (isCancelError(e)) {\n      throw e\n    }\n    throw new Error(\n      createDetailedMessage(`Cannot communicate with exploring server due to a network error`, {\n        [\"error stack\"]: e.stack,\n      }),\n    )\n  }\n}\n",
    "import { fetchUrl } from \"../toolbar/util/fetching.js\"\nimport { createPreference } from \"../toolbar/util/preferences.js\"\nimport { startJavaScriptAnimation } from \"../toolbar/util/animation.js\"\nimport { fetchExploringJson } from \"./fetchExploringJson.js\"\n\nconst fetchJSON = async (url, options) => {\n  const response = await fetchUrl(url, options)\n  const json = await response.json()\n  return json\n}\n\nconst groupPreference = createPreference(\"group\")\n\nconst run = async () => {\n  const { projectDirectoryUrl, explorableConfig, outDirectoryRelativeUrl } =\n    await fetchExploringJson()\n\n  const files = await fetchJSON(`/.jsenv/explorables.json`, {\n    method: \"GET\",\n  })\n\n  const compileServerOrigin = document.location.origin\n  const outDirectoryUrl = String(new URL(outDirectoryRelativeUrl, compileServerOrigin))\n  const documentUrl = document.location.href\n  let compileId\n\n  const outDirectoryIndex = documentUrl.indexOf(outDirectoryUrl)\n  if (outDirectoryIndex === 0) {\n    const afterOutDirectory = documentUrl.slice(outDirectoryUrl.length)\n    compileId = afterOutDirectory.split(\"/\")[0]\n  } else {\n    compileId = null\n  }\n\n  const renderHtml = () => {\n    // const mainHtmlFileRelativeUrl = \"index.html\"\n    // const mainFileLink = document.querySelector(\"#main_file_link\")\n    // const mainFileUrl = urlToVisitFromRelativeUrl(mainHtmlFileRelativeUrl)\n    // mainFileLink.href = mainFileUrl\n    // mainFileLink.textContent = `${mainHtmlFileRelativeUrl}`\n    // const mainFileIframe = document.querySelector(`#main_file_iframe`)\n    // mainFileIframe.src = mainFileUrl\n\n    const fileListElement = document.querySelector(`[data-page=\"file-list\"]`).cloneNode(true)\n    const directoryName = directoryUrlToDirectoryName(projectDirectoryUrl)\n    const span = fileListElement.querySelector(\"#directory_relative_url\")\n    span.title = projectDirectoryUrl\n    span.textContent = directoryName\n\n    const h4 = fileListElement.querySelector(\"h4\")\n\n    const ul = fileListElement.querySelector(\"ul\")\n    ul.innerHTML = files\n      .map(\n        (file) =>\n          `<li>\n          <a\n            class=\"execution-link\"\n            data-relative-url=${file.relativeUrl}\n            href=${urlToVisitFromRelativeUrl(file.relativeUrl)}\n          >\n            ${file.relativeUrl}\n          </a>\n        </li>`,\n      )\n      .join(\"\")\n\n    const groupFieldset = fileListElement.querySelector(\"#filter-group-set\")\n    const groupNames = Object.keys(explorableConfig)\n    groupFieldset.innerHTML = groupNames\n      .map(\n        (key) => `<label data-contains-hidden-input class=\"item\">\n  <input type=\"radio\" name=\"filter-group\" value=\"${key}\"/>\n  <span>${key}</span>\n</label>`,\n      )\n      .join(\"\")\n\n    const currentGroup = groupPreference.has() ? groupPreference.get() : groupNames[0]\n    Array.from(groupFieldset.querySelectorAll(\"input\")).forEach((inputRadio) => {\n      inputRadio.checked = inputRadio.value === currentGroup\n      inputRadio.onchange = () => {\n        if (inputRadio.checked) {\n          groupPreference.set(inputRadio.value)\n          enableGroup(inputRadio.value)\n        }\n      }\n    })\n\n    const enableGroup = (groupName) => {\n      const arrayOfElementToShow = []\n      const arrayOfElementToHide = []\n      files.forEach((file) => {\n        const fileLink = fileListElement.querySelector(`a[data-relative-url=\"${file.relativeUrl}\"]`)\n        const fileLi = fileLink.parentNode\n        if (file.meta[groupName]) {\n          arrayOfElementToShow.push(fileLi)\n        } else {\n          arrayOfElementToHide.push(fileLi)\n        }\n      })\n      arrayOfElementToShow.forEach((element) => {\n        element.removeAttribute(\"data-force-hide\")\n      })\n      arrayOfElementToHide.forEach((element) => {\n        element.setAttribute(\"data-force-hide\", \"\")\n      })\n\n      h4.innerHTML =\n        arrayOfElementToShow.length === 0\n          ? `No file found.\n              Config for this section: <pre>${JSON.stringify(\n                explorableConfig[groupName],\n                null,\n                \"  \",\n              )}</pre>`\n          : `${arrayOfElementToShow.length} files found. Click on the one you want to execute`\n    }\n    enableGroup(currentGroup)\n\n    document.querySelector(\"main\").appendChild(fileListElement)\n    makeMenuScrollable()\n  }\n\n  const urlToVisitFromRelativeUrl = (relativeUrl) => {\n    if (compileId) {\n      return `${compileServerOrigin}/${outDirectoryRelativeUrl}${compileId}/${relativeUrl}`\n    }\n    return `${compileServerOrigin}/${relativeUrl}`\n  }\n\n  const makeMenuScrollable = () => {\n    const getMenuWrapperSize = () => {\n      return document.querySelector(\".menu-wrapper\").getBoundingClientRect().width\n    }\n    let menuWrapperSize = getMenuWrapperSize()\n\n    const getMenuSize = () => {\n      return document.querySelector(\".menu\").getBoundingClientRect().width\n    }\n    let menuSize = getMenuSize()\n\n    const menuVisibleSize = menuWrapperSize\n    let menuInvisibleSize = menuSize - menuVisibleSize\n\n    const getMenuPosition = () => {\n      return document.querySelector(\".menu-wrapper\").scrollLeft\n    }\n\n    const scrollDuration = 300\n    const leftPaddle = document.querySelector(\".left-paddle\")\n    const rightPaddle = document.querySelector(\".right-paddle\")\n\n    const handleMenuScroll = () => {\n      menuInvisibleSize = menuSize - menuWrapperSize\n      const menuPosition = getMenuPosition()\n      const menuEndOffset = menuInvisibleSize\n\n      // show & hide the paddles, depending on scroll position\n      if (menuPosition <= 0 && menuEndOffset <= 0) {\n        // hide both paddles if the window is large enough to display all tabs\n        leftPaddle.classList.add(\"hidden\")\n        rightPaddle.classList.add(\"hidden\")\n      } else if (menuPosition <= 0) {\n        leftPaddle.classList.add(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition < Math.floor(menuEndOffset)) {\n        // show both paddles in the middle\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition >= Math.floor(menuEndOffset)) {\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.add(\"hidden\")\n      }\n    }\n    handleMenuScroll()\n\n    window.onresize = () => {\n      menuWrapperSize = getMenuWrapperSize()\n      menuSize = getMenuSize()\n      handleMenuScroll()\n    }\n\n    // finally, what happens when we are actually scrolling the menu\n    document.querySelector(\".menu-wrapper\").onscroll = () => {\n      handleMenuScroll()\n    }\n\n    // scroll to left\n    rightPaddle.onclick = () => {\n      const scrollStart = document.querySelector(\".menu-wrapper\").scrollLeft\n      const scrollEnd = scrollStart + menuWrapperSize\n      startJavaScriptAnimation({\n        duration: scrollDuration,\n        onProgress: ({ progress }) => {\n          document.querySelector(\".menu-wrapper\").scrollLeft =\n            scrollStart + (scrollEnd - scrollStart) * progress\n        },\n      })\n    }\n\n    // scroll to right\n    leftPaddle.onclick = () => {\n      const scrollStart = document.querySelector(\".menu-wrapper\").scrollLeft\n      const scrollEnd = scrollStart - menuWrapperSize\n      startJavaScriptAnimation({\n        duration: scrollDuration,\n        onProgress: ({ progress }) => {\n          document.querySelector(\".menu-wrapper\").scrollLeft =\n            scrollStart + (scrollEnd - scrollStart) * progress\n        },\n      })\n    }\n  }\n\n  const directoryUrlToDirectoryName = (directoryUrl) => {\n    const slashLastIndex = directoryUrl.lastIndexOf(\n      \"/\",\n      // ignore last slash\n      directoryUrl.length - 2,\n    )\n    if (slashLastIndex === -1) return \"\"\n\n    return directoryUrl.slice(slashLastIndex + 1)\n  }\n\n  renderHtml()\n}\n\nrun()\n"
  ]
}