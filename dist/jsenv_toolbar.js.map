{
  "version": 3,
  "sources": [
    "../node_modules/@jsenv/util/src/urlIsInsideOf.js",
    "../node_modules/@jsenv/util/src/internal/getCommonPathname.js",
    "../node_modules/@jsenv/util/src/internal/pathnameToParentPathname.js",
    "../node_modules/@jsenv/util/src/urlToRelativeUrl.js",
    "../helpers/babel/defineProperty/defineProperty.js",
    "../node_modules/@jsenv/logger/src/createDetailedMessage.js",
    "../helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../node_modules/@jsenv/cancellation/src/createCancellationToken.js",
    "../helpers/babel/typeof/typeof.js",
    "../node_modules/@jsenv/cancellation/src/cancelError.js",
    "../helpers/babel/arrayLikeToArray/arrayLikeToArray.js",
    "../helpers/babel/unsupportedIterableToArray/unsupportedIterableToArray.js",
    "../helpers/babel/objectSpread2/objectSpread2.js",
    "../src/internal/browser-utils/fetchUsingXHR.js",
    "../src/internal/browser-utils/fetch-browser.js",
    "../src/internal/browser-utils/fetchJson.js",
    "../src/internal/exploring/fetchExploringJson.js",
    "../src/internal/toolbar/util/dom.js",
    "../src/internal/toolbar/util/animation.js",
    "../src/internal/toolbar/focus/toolbar.focus.js",
    "../src/internal/toolbar/backtolist/toolbar.backtolist.js",
    "../src/internal/toolbar/util/preferences.js",
    "../src/internal/toolbar/tooltip/tooltip.js",
    "../src/internal/toolbar/settings/toolbar.settings.js",
    "../src/internal/toolbar/notification/toolbar.notification.js",
    "../src/internal/toolbar/theme/toolbar.theme.js",
    "../src/internal/toolbar/animation/toolbar.animation.js",
    "../src/internal/toolbar/variant/variant.js",
    "../src/internal/toolbar/util/responsive.js",
    "../src/internal/toolbar/execution/toolbar.execution.js",
    "../helpers/babel/arrayWithHoles/arrayWithHoles.js",
    "../helpers/babel/iterableToArrayLimit/iterableToArrayLimit.js",
    "../helpers/babel/nonIterableRest/nonIterableRest.js",
    "../helpers/babel/slicedToArray/slicedToArray.js",
    "../src/internal/CONSTANTS.js",
    "../src/internal/runtime/computeCompileIdFromGroupId.js",
    "../src/internal/runtime/detectBrowser/util.js",
    "../src/internal/runtime/detectBrowser/detectAndroid.js",
    "../src/internal/runtime/detectBrowser/detectInternetExplorer.js",
    "../src/internal/runtime/detectBrowser/detectOpera.js",
    "../src/internal/runtime/detectBrowser/detectEdge.js",
    "../src/internal/runtime/detectBrowser/detectFirefox.js",
    "../src/internal/runtime/detectBrowser/detectChrome.js",
    "../src/internal/runtime/detectBrowser/detectSafari.js",
    "../src/internal/runtime/detectBrowser/detectElectron.js",
    "../src/internal/runtime/detectBrowser/detectIOS.js",
    "../src/internal/runtime/detectBrowser/detectBrowser.js",
    "../src/internal/semantic-versioning/valueToVersion.js",
    "../src/internal/semantic-versioning/versionCompare.js",
    "../src/internal/semantic-versioning/versionIsBelow.js",
    "../src/internal/semantic-versioning/findHighestVersion.js",
    "../src/internal/runtime/resolveGroup.js",
    "../src/internal/runtime/resolveBrowserGroup.js",
    "../src/internal/runtime/createBrowserRuntime/scanBrowserRuntimeFeatures.js",
    "../src/internal/toolbar/compilation/toolbar.compilation.js",
    "../src/internal/toolbar/util/util.js",
    "../src/internal/toolbar/eventsource/connectEventSource.js",
    "../src/internal/toolbar/eventsource/connectCompileServerEventSource.js",
    "../src/internal/toolbar/eventsource/toolbar.eventsource.js",
    "../src/internal/toolbar/responsive/toolbar.responsive.js",
    "../src/internal/toolbar/toolbar.main.js"
  ],
  "names": [
    "urlIsInsideOf",
    "url",
    "otherUrl",
    "urlPathname",
    "otherUrlPathname",
    "getCommonPathname",
    "firstDifferentCharacterIndex",
    "findFirstDifferentCharacterIndex",
    "commonString",
    "pathname",
    "otherPathname",
    "firstDifferentSlashIndex",
    "maxCommonLength",
    "Math",
    "string",
    "otherString",
    "i",
    "char",
    "otherChar",
    "pathnameToParentPathname",
    "slashLastIndex",
    "urlToRelativeUrl",
    "baseUrl",
    "urlArg",
    "hash",
    "search",
    "basePathname",
    "commonPathname",
    "specificPathname",
    "baseSpecificPathname",
    "baseSpecificParentPathname",
    "relativeDirectoriesNotation",
    "key",
    "Object",
    "value",
    "enumerable",
    "configurable",
    "writable",
    "obj",
    "createDetailedMessage",
    "details",
    "Array",
    "source",
    "target",
    "sourceKeys",
    "excluded",
    "objectWithoutPropertiesLoose",
    "sourceSymbolKeys",
    "createCancellationToken",
    "register",
    "callback",
    "unregister",
    "throwIfRequested",
    "cancellationRequested",
    "nativeTypeOf",
    "customTypeOf",
    "Symbol",
    "isCancelError",
    "len",
    "arr",
    "arr2",
    "arrayLikeToArray",
    "n",
    "o",
    "keys",
    "symbols",
    "arguments",
    "ownKeys",
    "defineProperty",
    "fetchUsingXHR",
    "cancellationToken",
    "method",
    "credentials",
    "headers",
    "body",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "failure",
    "cleanup",
    "createRequestError",
    "readyState",
    "args",
    "forEach",
    "withCredentials",
    "computeWithCredentials",
    "Promise",
    "f",
    "responseUrl",
    "responseStatus",
    "responseStatusText",
    "then",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "status",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "String",
    "json",
    "JSON",
    "blob",
    "cloneBuffer",
    "arrayBuffer",
    "formData",
    "statusText",
    "canUseBlob",
    "window",
    "hasBlob",
    "hasFormData",
    "hasArrayBuffer",
    "hasSearchParams",
    "error",
    "promise",
    "resolve",
    "res",
    "reject",
    "rej",
    "originSameAsGlobalOrigin",
    "globalOrigin",
    "hrefToOrigin",
    "Blob",
    "FormData",
    "isDataView",
    "ArrayBuffer",
    "isArrayBufferView",
    "URLSearchParams",
    "headerMap",
    "headersString",
    "lines",
    "parts",
    "line",
    "name",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "href",
    "colonIndex",
    "DataView",
    "viewClasses",
    "textToFormData",
    "form",
    "split",
    "bytes",
    "decodeURIComponent",
    "blobToArrayBuffer",
    "reader",
    "fileReaderReady",
    "view",
    "chars",
    "buffer",
    "result",
    "fetchNative",
    "mode",
    "options",
    "abortController",
    "cancelError",
    "response",
    "signal",
    "e",
    "responseToHeaders",
    "fetchUrl",
    "recover",
    "fetchJson",
    "fetchExploringJson",
    "updateIframeOverflowOnParentWindow",
    "aTooltipIsOpened",
    "document",
    "settingsAreOpened",
    "enableIframeOverflowOnParentWindow",
    "disableIframeOverflowOnParentWindow",
    "iframeOverflowEnabled",
    "iframe",
    "getToolbarIframe",
    "transitionDuration",
    "setStyles",
    "setTimeout",
    "iframes",
    "forceHideElement",
    "element",
    "removeForceHideElement",
    "elementStyle",
    "restoreStyles",
    "styleName",
    "currentStyle",
    "restore",
    "styles",
    "toolbarSectionIsActive",
    "activateToolbarSection",
    "deactivateToolbarSection",
    "startJavaScriptAnimation",
    "duration",
    "timingFunction",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "parseInt",
    "startMs",
    "performance",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "currentRequestAnimationFrameId",
    "nowMs",
    "stop",
    "mousedownEvent",
    "touchstartEvent",
    "keydownEvent",
    "renderBackToListInToolbar",
    "outDirectoryRelativeUrl",
    "exploringHtmlFileRelativeUrl",
    "exploringHtmlFileUrl",
    "clickEvent",
    "isClickToOpenTab",
    "createPreference",
    "has",
    "localStorage",
    "get",
    "set",
    "toggleTooltip",
    "hideTooltip",
    "showTooltip",
    "autoShowTooltip",
    "removeAutoShowTooltip",
    "hideAllTooltip",
    "elementsWithTooltip",
    "renderToolbarSettings",
    "toggleSettings",
    "settingsAreVisible",
    "hideSettings",
    "showSettings",
    "notificationPreference",
    "arrayOfOpenedNotifications",
    "renderToolbarNotification",
    "notifCheckbox",
    "getNotificationPreference",
    "setNotificationPreference",
    "requestPermission",
    "notification",
    "notifyExecutionResult",
    "notificationEnabled",
    "notificationOptions",
    "lang",
    "icon",
    "getFaviconHref",
    "clickToFocus",
    "clickToClose",
    "execution",
    "previousExecution",
    "notify",
    "notificationAvailable",
    "link",
    "permission",
    "index",
    "permissionPromise",
    "Notification",
    "DARK_THEME",
    "LIGHT_THEME",
    "themePreference",
    "renderToolbarTheme",
    "theme",
    "getThemePreference",
    "checkbox",
    "setTheme",
    "setThemePreference",
    "animationPreference",
    "renderToolbarAnimation",
    "animCheckbox",
    "getAnimationPreference",
    "setAnimationPreference",
    "onPreferenceChange",
    "enableAnimation",
    "disableAnimation",
    "enableVariant",
    "nodesNotMatching",
    "rootNode",
    "conditionAttributeValue",
    "nodeNotMatching",
    "matches",
    "testCondition",
    "renameAttribute",
    "nodesMatching",
    "nodeMatching",
    "condition",
    "parseCondition",
    "variables",
    "undefined",
    "attributeIndicatingACondition",
    "attributeIndicatingAMatch",
    "node",
    "createHorizontalBreakpoint",
    "createBreakpoint",
    "createMeasure",
    "compute",
    "currentValue",
    "changed",
    "createSignal",
    "previousValue",
    "callbackArray",
    "listen",
    "windowWidthMeasure",
    "getBreakpointState",
    "measure",
    "currentBreakpointState",
    "isAbove",
    "isBelow",
    "breakpointChanged",
    "breakpointState",
    "breakpointStatePrevious",
    "WINDOW_MEDIUM_WIDTH",
    "renderExecutionInToolbar",
    "executedFileRelativeUrl",
    "applyExecutionIndicator",
    "input",
    "fileWidthBreakpoint",
    "handleFileWidthBreakpoint",
    "resizeInput",
    "startTime",
    "endTime",
    "executionStorageKey",
    "sessionStorage",
    "executionIndicator",
    "variantNode",
    "computeText",
    "size",
    "_i",
    "_arr",
    "_n",
    "_d",
    "_s",
    "_e",
    "arrayWithHoles",
    "iterableToArrayLimit",
    "unsupportedIterableToArray",
    "nonIterableRest",
    "COMPILE_ID_OTHERWISE",
    "computeCompileIdFromGroupId",
    "groupId",
    "groupMap",
    "createUnexpectedGroupIdMessage",
    "compileId",
    "firstMatch",
    "match",
    "secondMatch",
    "userAgentToVersion",
    "detectAndroid",
    "navigatorToBrowser",
    "userAgent",
    "appVersion",
    "version",
    "detectInternetExplorer",
    "userAgentToBrowser",
    "detectOpera",
    "detectEdge",
    "detectFirefox",
    "detectChrome",
    "detectSafari",
    "detectElectron",
    "detectIOS",
    "detectorCompose",
    "detectors",
    "detector",
    "detectBrowser",
    "normalizeName",
    "normalizeVersion",
    "valueToVersion",
    "numberToVersion",
    "stringToVersion",
    "createValueErrorMessage",
    "major",
    "minor",
    "patch",
    "Number",
    "versionCompare",
    "semanticVersionA",
    "semanticVersionB",
    "majorDiff",
    "minorDiff",
    "patchDiff",
    "versionIsBelow",
    "findHighestVersion",
    "values",
    "resolveGroup",
    "runtimeCompatMap",
    "versionForGroup",
    "highestVersion",
    "resolveBrowserGroup",
    "scanBrowserRuntimeFeatures",
    "coverageInstrumentationRequired",
    "groupMapUrl",
    "envFileUrl",
    "envJson",
    "groupInfo",
    "inlineImportMapIntoHTML",
    "customCompilerNames",
    "convertPatterns",
    "featuresReport",
    "babelPluginRequiredNames",
    "babelPluginRequiredNamesFromGroupInfo",
    "getFeaturesReport",
    "canAvoidCompilation",
    "jsenvPluginRequiredNames",
    "supportsImportmap",
    "remote",
    "importmapSupported",
    "dynamicImportSupported",
    "topLevelAwaitSupported",
    "babelPluginRequiredNameArray",
    "transformInstrumentIndex",
    "specifier",
    "jsToTextUrl",
    "importMap",
    "imports",
    "importmapScript",
    "importmapString",
    "scriptModule",
    "supported",
    "supportsDynamicImport",
    "moduleSource",
    "namespace",
    "supportsTopLevelAwait",
    "renderCompilationInToolbar",
    "compileGroup",
    "browserSupportRootNode",
    "filesCompilationRootNode",
    "browserSupport",
    "getBrowserSupportMessage",
    "missingOnly",
    "filesCompilation",
    "compiled",
    "babelPluginRequiredCount",
    "convertPatternCount",
    "customCompilerCount",
    "jsenvPluginRequiredCount",
    "connectEventSource",
    "events",
    "connecting",
    "connected",
    "cancelled",
    "failed",
    "retryMaxAttempt",
    "Infinity",
    "retryAllocatedMs",
    "lastEventId",
    "EventSource",
    "eventSourceOrigin",
    "cancelCurrentConnection",
    "reconnect",
    "attemptConnection",
    "addLastEventIdIntoUrlSearchParams",
    "eventSource",
    "connectionStatus",
    "abort",
    "console",
    "connect",
    "cancel",
    "disconnect",
    "retryCount",
    "firstRetryMs",
    "Date",
    "considerFailed",
    "errorEvent",
    "allRetryDuration",
    "removePageUnloadListener",
    "listenPageUnload",
    "encodeURIComponent",
    "removePageHideListener",
    "listenEvent",
    "pageHideEvent",
    "emitter",
    "connectCompileServerEventSource",
    "onFileModified",
    "onFileRemoved",
    "onConnecting",
    "onConnectionCancelled",
    "onConnectionFailed",
    "onConnected",
    "eventSourceUrl",
    "data",
    "livereloadingPreference",
    "eventSourceState",
    "livereloadingAvailableOnServer",
    "initToolbarEventSource",
    "livereloading",
    "disableLivereloadSetting",
    "livereloadCheckbox",
    "shouldLivereload",
    "updateEventSourceIndicator",
    "getLivereloadingPreference",
    "parentEventSource",
    "latestChangeMap",
    "eventSourceHooks",
    "handleFileChange",
    "file",
    "reloadAllCss",
    "reloadPage",
    "links",
    "reloadChanges",
    "fullReloadRequired",
    "cssReloadRequired",
    "connectionReadyPromise",
    "eventSourceConnection",
    "onFileAdded",
    "eventSourceIndicator",
    "changeCount",
    "eventsource",
    "livereload",
    "changes",
    "changeLink",
    "WINDOW_SMALL_WIDTH",
    "makeToolbarResponsive",
    "overflowMenuBreakpoint",
    "handleOverflowMenuBreakpoint",
    "responsiveToolbar",
    "toggleOverflowMenu",
    "enableOverflow",
    "disableOverflow",
    "moves",
    "responsiveToolbarElements",
    "overflowMenu",
    "placeholder",
    "hideOverflowMenu",
    "overflowMenuIsVisible",
    "showOverflowMenu",
    "toolbar",
    "toolbarVisibilityPreference",
    "renderToolbar",
    "executedFileCompiledUrl",
    "compileServerOrigin",
    "exploringConfig",
    "getCompileGroup",
    "toolbarOverlay",
    "toolbarElement",
    "exposeOnParentWindow",
    "show",
    "hide",
    "hideToolbar",
    "toggle",
    "toogleToolbar",
    "toolbarVisible",
    "showToolbar",
    "animate",
    "__jsenv__",
    "toolbarIsVisible",
    "sendEventToParent",
    "toolbarIframe",
    "toolbarIframeParent",
    "parentWindow",
    "parentDocumentElement",
    "scrollYMax",
    "scrollY",
    "scrollYRemaining",
    "restoreToolbarIframeParentStyles",
    "restoreToolbarIframeStyles",
    "height",
    "visibility",
    "scrollEnd",
    "outDirectoryRemoteUrl",
    "afterCompileDirectory",
    "slashIndex",
    "fileRelativeUrl",
    "jsenv",
    "type"
  ],
  "mappings": ";;;;;AAAO,MAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAAA,QAAA,EAAA,aAAA,EAA6B;AACxD,QAAMC,GAAG,GAAG,IAAA,GAAA,CAAZ,QAAY,CAAZ;AACA,QAAMC,QAAQ,GAAG,IAAA,GAAA,CAAjB,aAAiB,CAAjB;;AAEA,QAAID,GAAG,CAAHA,MAAAA,KAAeC,QAAQ,CAA3B,MAAA,EAAoC;AAClC,aAAA,KAAA;AACD;;AAED,QAAMC,WAAW,GAAGF,GAAG,CAAvB,QAAA;AACA,QAAMG,gBAAgB,GAAGF,QAAQ,CAAjC,QAAA;;AACA,QAAIC,WAAW,KAAf,gBAAA,EAAsC;AACpC,aAAA,KAAA;AACD;;AAED,WAAOA,WAAW,CAAXA,UAAAA,CAAP,gBAAOA,CAAP;AAdK,GAAA;;ACAA,MAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,QAAA,EAAA,aAAA,EAA6B;AAC5D,QAAMC,4BAA4B,GAAGC,gCAAgC,CAAA,QAAA,EADT,aACS,CAArE,CAD4D,CAAA;;AAI5D,QAAID,4BAA4B,KAAK,CAArC,CAAA,EAAyC;AACvC,aAAA,QAAA;AACD;;AAED,QAAME,YAAY,GAAGC,QAAQ,CAARA,KAAAA,CAAAA,CAAAA,EAAkBH,4BAA4B,GARP,CAQvCG,CAArB,CAR4D,CAAA;;AAW5D,QAAIA,QAAQ,CAARA,MAAAA,CAAAA,4BAAAA,MAAJ,GAAA,EAA2D;AACzD,aAAA,YAAA;AACD;;AAED,QAAIC,aAAa,CAAbA,MAAAA,CAAAA,4BAAAA,MAAJ,GAAA,EAAgE;AAC9D,aAAA,YAAA;AACD;;AAED,QAAMC,wBAAwB,GAAGH,YAAY,CAAZA,WAAAA,CAAjC,GAAiCA,CAAjC;AACA,WAAOC,QAAQ,CAARA,KAAAA,CAAAA,CAAAA,EAAkBE,wBAAwB,GAAjD,CAAOF,CAAP;AApBK,GAAA;;AAuBP,MAAMF,gCAAgC,GAAG,SAAnCA,gCAAmC,CAAA,MAAA,EAAA,WAAA,EAAyB;AAChE,QAAMK,eAAe,GAAGC,IAAI,CAAJA,GAAAA,CAASC,MAAM,CAAfD,MAAAA,EAAwBE,WAAW,CAA3D,MAAwBF,CAAxB;AACA,QAAIG,CAAC,GAAL,CAAA;;AACA,WAAOA,CAAC,GAAR,eAAA,EAA4B;AAC1B,UAAMC,IAAI,GAAGH,MAAM,CAANA,MAAAA,CAAb,CAAaA,CAAb;AACA,UAAMI,SAAS,GAAGH,WAAW,CAAXA,MAAAA,CAAlB,CAAkBA,CAAlB;;AACA,UAAIE,IAAI,KAAR,SAAA,EAAwB;AACtB,eAAA,CAAA;AACD;;AACDD,MAAAA,CAAC;AACF;;AACD,QAAIF,MAAM,CAANA,MAAAA,KAAkBC,WAAW,CAAjC,MAAA,EAA0C;AACxC,aAAO,CAAP,CAAA;AAZ8D,KAAA,CAAA;;;AAehE,WAAA,eAAA;AAfF,GAAA;;ACvBO,MAAMI,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA,QAAA,EAAc;AACpD,QAAMC,cAAc,GAAGX,QAAQ,CAARA,WAAAA,CAAvB,GAAuBA,CAAvB;;AACA,QAAIW,cAAc,KAAK,CAAvB,CAAA,EAA2B;AACzB,aAAA,GAAA;AACD;;AAED,WAAOX,QAAQ,CAARA,KAAAA,CAAAA,CAAAA,EAAkBW,cAAc,GAAvC,CAAOX,CAAP;AANK,GAAA;;ACGA,MAAMY,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,MAAA,EAAA,UAAA,EAAwB;AACtD,QAAMpB,GAAG,GAAG,IAAA,GAAA,CAAZ,MAAY,CAAZ;AACA,QAAMqB,OAAO,GAAG,IAAA,GAAA,CAAhB,UAAgB,CAAhB;;AAEA,QAAIrB,GAAG,CAAHA,QAAAA,KAAiBqB,OAAO,CAA5B,QAAA,EAAuC;AACrC,aAAA,MAAA;AACD;;AAED,QAAIrB,GAAG,CAAHA,QAAAA,KAAiBqB,OAAO,CAAxBrB,QAAAA,IAAqCA,GAAG,CAAHA,QAAAA,KAAiBqB,OAAO,CAAjE,QAAA,EAA4E;AAC1E,aAAOC,MAAM,CAANA,KAAAA,CAAatB,GAAG,CAAHA,QAAAA,CAApB,MAAOsB,CAAP;AACD;;AAED,QAAItB,GAAG,CAAHA,IAAAA,KAAaqB,OAAO,CAAxB,IAAA,EAA+B;AAC7B,aAAOC,MAAM,CAANA,KAAAA,CAAatB,GAAG,CAAHA,QAAAA,CAApB,MAAOsB,CAAP;AACD;;AAED,QAAQd,QAAR,GAAmCR,GAAnC,CAAA,QAAA;AAAA,QAAkBuB,IAAlB,GAAmCvB,GAAnC,CAAA,IAAA;AAAA,QAAwBwB,MAAxB,GAAmCxB,GAAnC,CAAA,MAAA;;AACA,QAAIQ,QAAQ,KAAZ,GAAA,EAAsB;AACpB,aAAOa,OAAO,CAAPA,QAAAA,CAAAA,KAAAA,CAAP,CAAOA,CAAP;AACD;;AAED,QAAkBI,YAAlB,GAAmCJ,OAAnC,CAAA,QAAA;AAEA,QAAMK,cAAc,GAAGtB,iBAAiB,CAAA,QAAA,EAAxC,YAAwC,CAAxC;;AACA,QAAI,CAAJ,cAAA,EAAqB;AACnB,aAAA,MAAA;AACD;;AAED,QAAMuB,gBAAgB,GAAGnB,QAAQ,CAARA,KAAAA,CAAekB,cAAc,CAAtD,MAAyBlB,CAAzB;AACA,QAAMoB,oBAAoB,GAAGH,YAAY,CAAZA,KAAAA,CAAmBC,cAAc,CAA9D,MAA6BD,CAA7B;;AACA,QAAIG,oBAAoB,CAApBA,QAAAA,CAAJ,GAAIA,CAAJ,EAAwC;AACtC,UAAMC,0BAA0B,GAAGX,wBAAwB,CAA3D,oBAA2D,CAA3D;AACA,UAAMY,2BAA2B,GAAGD,0BAA0B,CAA1BA,OAAAA,CAAAA,QAAAA,EAApC,KAAoCA,CAApC;AACA,aAAA,GAAA,MAAA,CAAA,2BAAA,EAAA,MAAA,CAAA,gBAAA,EAAA,MAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA,CAAA;AACD;;AACD,WAAA,GAAA,MAAA,CAAA,gBAAA,EAAA,MAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA,CAAA;AAnCK,GAAA;;ACHP,MAAA,eAAA,GAAe,SAAf,eAAe,CAAA,GAAA,EAAA,GAAA,EAAA,KAAA,EAAqB;AAClC;AACA;AACA;AACA;AACA;AACA,QAAIE,GAAG,IAAP,GAAA,EAAgB;AACdC,MAAAA,MAAM,CAANA,cAAAA,CAAAA,GAAAA,EAAAA,GAAAA,EAAgC;AAC9BC,QAAAA,KAAK,EADyB,KAAA;AAE9BC,QAAAA,UAAU,EAFoB,IAAA;AAG9BC,QAAAA,YAAY,EAHkB,IAAA;AAI9BC,QAAAA,QAAQ,EAAE;AAJoB,OAAhCJ;AADF,KAAA,MAOO;AACLK,MAAAA,GAAG,CAAHA,GAAG,CAAHA,GAAAA,KAAAA;AACD;;AACD,WAAA,GAAA;AAhBF,GAAA;;ACAO,MAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA,OAAA,EAA2B;AAAA,QAAjBC,OAAiB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;AAC9D,QAAI1B,MAAM,GAAA,GAAA,MAAA,CAAV,OAAU,CAAV;AAEAmB,IAAAA,MAAM,CAANA,IAAAA,CAAAA,OAAAA,EAAAA,OAAAA,CAA6B,UAAA,GAAA,EAAS;AACpC,UAAMC,KAAK,GAAGM,OAAO,CAArB,GAAqB,CAArB;AACA1B,MAAAA,MAAM,IAAA,SAAA,MAAA,CAAA,GAAA,EAAA,QAAA,EAAA,MAAA,CAGR2B,KAAK,CAALA,OAAAA,CAAAA,KAAAA,IACIP,KAAK,CAALA,IAAAA,CADJO,IACIP,CADJO,GAHE3B,KAAM,CAANA;AAFFmB,KAAAA;AAYA,WAAA,MAAA;AAfK,GAAA;;ACAP,MAAA,4BAAA,GAAe,SAAf,4BAAe,CAAA,MAAA,EAAA,QAAA,EAAsB;AACnC,QAAIS,MAAM,KAAV,IAAA,EAAqB,OAAA,EAAA;AACrB,QAAIC,MAAM,GAAV,EAAA;AACA,QAAIC,UAAU,GAAGX,MAAM,CAANA,IAAAA,CAAjB,MAAiBA,CAAjB;AACA,QAAA,GAAA;AACA,QAAA,CAAA;;AACA,SAAKjB,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAG4B,UAAU,CAA1B,MAAA,EAAmC5B,CAAnC,EAAA,EAAwC;AACtCgB,MAAAA,GAAG,GAAGY,UAAU,CAAhBZ,CAAgB,CAAhBA;AACA,UAAIa,QAAQ,CAARA,OAAAA,CAAAA,GAAAA,KAAJ,CAAA,EAAgC;AAChCF,MAAAA,MAAM,CAANA,GAAM,CAANA,GAAcD,MAAM,CAApBC,GAAoB,CAApBA;AACD;;AACD,WAAA,MAAA;AAXF,GAAA;;ACEA,MAAA,wBAAA,GAAe,SAAf,wBAAe,CAAA,MAAA,EAAA,QAAA,EAAsB;AACnC,QAAID,MAAM,KAAV,IAAA,EAAqB,OAAA,EAAA;AAErB,QAAIC,MAAM,GAAGG,4BAA4B,CAAA,MAAA,EAAzC,QAAyC,CAAzC;AACA,QAAA,GAAA;AACA,QAAA,CAAA;;AACA,QAAIb,MAAM,CAAV,qBAAA,EAAkC;AAChC,UAAIc,gBAAgB,GAAGd,MAAM,CAANA,qBAAAA,CAAvB,MAAuBA,CAAvB;;AACA,WAAKjB,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAG+B,gBAAgB,CAAhC,MAAA,EAAyC/B,CAAzC,EAAA,EAA8C;AAC5CgB,QAAAA,GAAG,GAAGe,gBAAgB,CAAtBf,CAAsB,CAAtBA;AACA,YAAIa,QAAQ,CAARA,OAAAA,CAAAA,GAAAA,KAAJ,CAAA,EAAgC;AAChC,YAAI,CAACZ,MAAM,CAANA,SAAAA,CAAAA,oBAAAA,CAAAA,IAAAA,CAAAA,MAAAA,EAAL,GAAKA,CAAL,EAA8D;AAC9DU,QAAAA,MAAM,CAANA,GAAM,CAANA,GAAcD,MAAM,CAApBC,GAAoB,CAApBA;AACD;AACF;;AACD,WAAA,MAAA;AAfF,GAAA;;ACFO,MAAMK,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AAC3C,QAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAA,QAAA,EAAc;AAC7B,UAAI,OAAA,QAAA,KAAJ,UAAA,EAAoC;AAClC,cAAM,IAAA,KAAA,CAAA,oCAAA,MAAA,CAAN,QAAM,CAAA,CAAN;AACD;;AAED,aAAO;AACLC,QAAAA,QAAQ,EADH,QAAA;AAELC,QAAAA,UAAU,EAAE,SAAA,UAAA,GAAM,CAAA;AAFb,OAAP;AALF,KAAA;;AAWA,QAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAA;AAAA,aAAA,SAAA;AAAzB,KAAA;;AAEA,WAAO;AACLH,MAAAA,QAAQ,EADH,QAAA;AAELI,MAAAA,qBAAqB,EAFhB,KAAA;AAGLD,MAAAA,gBAAgB,EAAhBA;AAHK,KAAP;AAdK,GAAA;;ACAP,MAAME,YAAY,GAAG,SAAfA,YAAe,CAAA,GAAA,EAAA;AAAA,oBAAA,GAAA;AAArB,GAAA;;AAEA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAAA,GAAA,EAAS;AAC5B,WAAOjB,GAAG,IACR,OAAA,MAAA,KADKA,UAAAA,IAELA,GAAG,CAAHA,WAAAA,KAFKA,MAAAA,IAGLA,GAAG,KAAKkB,MAAM,CAHTlB,SAAAA,GAAAA,QAAAA,YAAP,GAAOA,CAAP;AADF,GAAA;;AASA,MAAA,OAAA,GAAe,OAAA,MAAA,KAAA,UAAA,IAAgC,SAAOkB,MAAM,CAAb,QAAA,MAAhC,QAAA,GAAA,YAAA,GAAf,YAAA;;ACJO,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAA,KAAA,EAAW;AACtC,WAAOvB,KAAK,IAAI,OAAA,CAAA,KAAA,CAAA,KAATA,QAAAA,IAAsCA,KAAK,CAALA,IAAAA,KAA7C,cAAA;AADK,GAAA;ACPP;;;AACe,WAAA,gBAAA,CAAA,GAAA,EAAA,GAAA,EAAoC;AACjD,QAAIwB,GAAG,IAAHA,IAAAA,IAAeA,GAAG,GAAGC,GAAG,CAA5B,MAAA,EAAqCD,GAAG,GAAGC,GAAG,CAATD,MAAAA;AACrC,QAAIE,IAAI,GAAG,IAAA,KAAA,CAAX,GAAW,CAAX;;AACA,SAAK,IAAI5C,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAjB,GAAA,EAAyBA,CAAzB,EAAA,EAAA;AAA8B4C,MAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUD,GAAG,CAAbC,CAAa,CAAbA;AAA9B;;AACA,WAAA,IAAA;AACD;ACND;;;AAGe,WAAA,0BAAA,CAAA,CAAA,EAAA,MAAA,EAA+C;AAC5D,QAAI,CAAJ,CAAA,EAAQ;AACR,QAAI,OAAA,CAAA,KAAJ,QAAA,EAA2B,OAAOC,gBAAgB,CAAA,CAAA,EAAvB,MAAuB,CAAvB;AAC3B,QAAIC,CAAC,GAAG7B,MAAM,CAANA,SAAAA,CAAAA,QAAAA,CAAAA,IAAAA,CAAAA,CAAAA,EAAAA,KAAAA,CAAAA,CAAAA,EAA2C,CAAnD,CAAQA,CAAR;AACA,QAAI6B,CAAC,KAADA,QAAAA,IAAkBC,CAAC,CAAvB,WAAA,EAAqCD,CAAC,GAAGC,CAAC,CAADA,WAAAA,CAAJD,IAAAA;AACrC,QAAIA,CAAC,KAADA,KAAAA,IAAeA,CAAC,KAApB,KAAA,EAAgC,OAAOrB,KAAK,CAALA,IAAAA,CAAP,CAAOA,CAAP;AAChC,QAAIqB,CAAC,KAADA,WAAAA,IAAqB,2CAAA,IAAA,CAAzB,CAAyB,CAAzB,EACE,OAAOD,gBAAgB,CAAA,CAAA,EAAvB,MAAuB,CAAvB;AACH;;ACTD,WAAA,OAAA,CAAA,MAAA,EAAA,cAAA,EAAyC;AACvC,QAAIG,IAAI,GAAG/B,MAAM,CAANA,IAAAA,CAAX,MAAWA,CAAX;;AACA,QAAIA,MAAM,CAAV,qBAAA,EAAkC;AAChC,UAAIgC,OAAO,GAAGhC,MAAM,CAANA,qBAAAA,CAAd,MAAcA,CAAd;;AACA,UAAA,cAAA,EAAoB;AAClBgC,QAAAA,OAAO,GAAG,OAAO,CAAP,MAAA,CAAe,UAAA,GAAA,EAAe;AACtC,iBAAOhC,MAAM,CAANA,wBAAAA,CAAAA,MAAAA,EAAAA,GAAAA,EAAP,UAAA;AADFgC,SAAU,CAAVA;AAGD;;AACDD,MAAAA,IAAI,CAAJA,IAAAA,CAAAA,KAAAA,CAAAA,IAAAA,EAAAA,OAAAA;AACD;;AACD,WAAA,IAAA;AACD;;AAEc,WAAA,cAAA,CAAA,MAAA,EAAgC;AAC7C,SAAK,IAAIhD,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGkD,SAAS,CAA7B,MAAA,EAAsClD,CAAtC,EAAA,EAA2C;AACzC,UAAI0B,MAAM,GAAGwB,SAAS,CAATA,CAAS,CAATA,IAAAA,IAAAA,GAAuBA,SAAS,CAAhCA,CAAgC,CAAhCA,GAAb,EAAA;;AACA,UAAIlD,CAAC,GAAL,CAAA,EAAW;AACTmD,QAAAA,OAAO,CAAClC,MAAM,CAAP,MAAO,CAAP,EAAPkC,IAAO,CAAPA,CAAAA,OAAAA,CAAsC,UAAA,GAAA,EAAe;AACnDC,UAAAA,eAAc,CAAA,MAAA,EAAA,GAAA,EAAc1B,MAAM,CAAlC0B,GAAkC,CAApB,CAAdA;AADFD,SAAAA;AADF,OAAA,MAIO,IAAIlC,MAAM,CAAV,yBAAA,EAAsC;AAC3CA,QAAAA,MAAM,CAANA,gBAAAA,CAAAA,MAAAA,EAAgCA,MAAM,CAANA,yBAAAA,CAAhCA,MAAgCA,CAAhCA;AADK,OAAA,MAEA;AACLkC,QAAAA,OAAO,CAAClC,MAAM,CAAdkC,MAAc,CAAP,CAAPA,CAAAA,OAAAA,CAAgC,UAAA,GAAA,EAAe;AAC7ClC,UAAAA,MAAM,CAANA,cAAAA,CAAAA,MAAAA,EAAAA,GAAAA,EAAmCA,MAAM,CAANA,wBAAAA,CAAAA,MAAAA,EAAnCA,GAAmCA,CAAnCA;AADFkC,SAAAA;AAGD;AACF;;AACD,WAAA,MAAA;AACD,G,CC7BD;AACA;;;AAgFO,WAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,QAAA,MAAA,EAAY;AACX,aAAOyB,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,QAAI,CAAA,KAAA,IAAU,CAAC1D,KAAK,CAApB,IAAA,EAA2B;AAC1BA,MAAAA,KAAK,GAAGqD,OAAO,CAAPA,OAAAA,CAARrD,KAAQqD,CAARrD;AACA;;AACD,WAAO0D,IAAI,GAAG1D,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAtBM,WAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,WAAO,YAAWjC;AACjB,WAAK,IAAIkF,IAAI,GAAR,EAAA,EAAenE,CAACoE,GAArB,CAAA,EAA2BpE,CAAC,GAAGkD,SAAS,CAAxC,MAAA,EAAiDlD,CAAjD,EAAA,EAAsD;AACrDmE,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUjB,SAAS,CAAnBiB,CAAmB,CAAnBA;AACA;;AACD,UAAIE;AACH,eAAOE,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,OAAA,CAEET,OAAAA,CAAAA,EAAS;AACV,eAAOS,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,KAAA;AAUA;;AA8bM,WAAA,OAAA,CAAA,IAAA,EAAA,IAAA,EAAA,MAAA,EAAmC;AACzC,QAAA,MAAA,EAAY;AACX,aAAOK,IAAI,GAAGA,IAAI,CAAClB,IAAR,EAAO,CAAP,GAAkBA,IAA7B,EAAA;AACA;;AACD,QAAI;AACH,UAAImF,MAAM,GAAGtE,OAAO,CAAPA,OAAAA,CAAgBb,IAA7B,EAAaa,CAAb;AACA,aAAOK,IAAI,GAAGiE,MAAM,CAANA,IAAAA,CAAH,IAAGA,CAAH,GAAX,MAAA;AAFD,KAAA,CAGE,OAAA,CAAA,EAAU;AACX,aAAOtE,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AACD;;AAnhBM,MAAMlB,aAAa,GAAA,QAAA,CAAA,UAAA,GAAA,EASrB;AAAA,QAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GADC,EACD;AAAA,QAAA,qBAAA,GAAA,IAAA,CANDC,iBAMC;AAAA,QANDA,iBAMC,GAAA,qBAAA,KAAA,KAAA,CAAA,GANmBtB,uBAAuB,EAM1C,GAAA,qBAAA;AAAA,QAAA,WAAA,GAAA,IAAA,CALDuB,MAKC;AAAA,QALDA,MAKC,GAAA,WAAA,KAAA,KAAA,CAAA,GALQ,KAKR,GAAA,WAAA;AAAA,QAAA,gBAAA,GAAA,IAAA,CAJDC,WAIC;AAAA,QAJDA,WAIC,GAAA,gBAAA,KAAA,KAAA,CAAA,GAJa,aAIb,GAAA,gBAAA;AAAA,QAAA,YAAA,GAAA,IAAA,CAHDC,OAGC;AAAA,QAHDA,OAGC,GAAA,YAAA,KAAA,KAAA,CAAA,GAHS,EAGT,GAAA,YAAA;AAAA,QAAA,SAAA,GAAA,IAAA,CAFDC,IAEC;AAAA,QAFDA,IAEC,GAAA,SAAA,KAAA,KAAA,CAAA,GAFM,IAEN,GAAA,SAAA;;AACH,QAAMC,cAAc,GAAGC,uBAAvB,EAAA;AACA,QAAMC,WAAW,GAAGD,uBAApB,EAAA;AAEA,QAAME,GAAG,GAAG,IAAZ,cAAY,EAAZ;;AAEA,QAAMC,OAAO,GAAG,SAAVA,OAAU,CAAA,KAAA,EAAW;AACzB;AACA,UAAIJ,cAAc,CAAlB,OAAA,EAA4B;AAC1BE,QAAAA,WAAW,CAAXA,MAAAA,CAAAA,KAAAA;AADF,OAAA,MAEO;AACLF,QAAAA,cAAc,CAAdA,MAAAA,CAAAA,KAAAA;AACD;AANH,KAAA;;AASA,QAAMK,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpBF,MAAAA,GAAG,CAAHA,SAAAA,GAAAA,IAAAA;AACAA,MAAAA,GAAG,CAAHA,OAAAA,GAAAA,IAAAA;AACAA,MAAAA,GAAG,CAAHA,MAAAA,GAAAA,IAAAA;AACAA,MAAAA,GAAG,CAAHA,kBAAAA,GAAAA,IAAAA;AAJF,KAAA;;AAOAA,IAAAA,GAAG,CAAHA,SAAAA,GAAgB,YAAM;AACpBE,MAAAA,OAAO;AACPD,MAAAA,OAAO,CAAC,IAAA,KAAA,CAAA,0BAAA,MAAA,CAAA,GAAA,EAARA,GAAQ,CAAA,CAAD,CAAPA;AAFFD,KAAAA;;AAKAA,IAAAA,GAAG,CAAHA,OAAAA,GAAc,UAAA,KAAA,EAAW;AACvBE,MAAAA,OADuB,GAAA,CAAA;AAGvB;;AACAD,MAAAA,OAAO,CAACE,kBAAkB,CAAA,KAAA,EAAQ;AAAEhF,QAAAA,GAAG,EAAHA;AAAF,OAAR,CAAnB,CAAP8E;AAJFD,KAAAA;;AAOAA,IAAAA,GAAG,CAAHA,MAAAA,GAAa,YAAM;AACjBE,MAAAA,OAAO;AACPH,MAAAA,WAAW,CAAXA,OAAAA;AAFFC,KAAAA;;AAKAR,IAAAA,iBAAiB,CAAjBA,QAAAA,CAA2B,UAAA,WAAA,EAAiB;AAC1CQ,MAAAA,GAAG,CAAHA,KAAAA;AACAC,MAAAA,OAAO,CAAPA,WAAO,CAAPA;AAFFT,KAAAA;;AAKAQ,IAAAA,GAAG,CAAHA,kBAAAA,GAAyB,YAAM;AAC7B;AACA,UAAQI,UAAR,GAAuBJ,GAAvB,CAAA,UAAA;;AAEA,UAAII,UAAU,KAAd,CAAA,EAAsB;AACpBP,QAAAA,cAAc,CAAdA,OAAAA;AADF,OAAA,MAEO,IAAIO,UAAU,KAAd,CAAA,EAAsB;AAC3BF,QAAAA,OAAO;AACPH,QAAAA,WAAW,CAAXA,OAAAA;AACD;AATHC,KAAAA;;AAYAA,IAAAA,GAAG,CAAHA,IAAAA,CAAAA,MAAAA,EAAAA,GAAAA,EAAAA,IAAAA;AACA,IAAA,MAAM,CAAN,IAAA,CAAA,OAAA,EAAA,OAAA,CAA6B,UAAA,GAAA,EAAS;AACpCA,MAAAA,GAAG,CAAHA,gBAAAA,CAAAA,GAAAA,EAA0BL,OAAO,CAAjCK,GAAiC,CAAjCA;AADF,KAAA;AAGA,IAAA,GAAG,CAAH,eAAA,GAAsBQ,sBAAsB,CAAC;AAAEd,MAAAA,WAAW,EAAb,WAAA;AAAevE,MAAAA,GAAG,EAAHA;AAAf,KAAD,CAA5C;;AACA,QAAI,kBAAA,GAAA,IAAJ,OAAA,EAAsC;AACpC6E,MAAAA,GAAG,CAAHA,YAAAA,GAAAA,MAAAA;AACD;;AACDA,IAAAA,GAAG,CAAHA,IAAAA,CAAAA,IAAAA;AAhEG,WAAA,QAAA,CAAA,cAAA,EAAA,YAAA;AAoEH;AACA,UAAMW,WAAW,GAAG,iBAAA,GAAA,GAAuBX,GAAG,CAA1B,WAAA,GAAyCL,OAAO,CAApE,eAAoE,CAApE;AACA,UAAIiB,cAAc,GAAGZ,GAAG,CAAxB,MAAA;AACA,UAAMa,kBAAkB,GAAGb,GAAG,CAA9B,UAAA;AACA,UAAMe,eAAe,GAAGC,iBAAiB,CAAzC,GAAyC,CAAzC;;AAEA5D,UAAM6D,QAAQ,GAAA,SAARA,QAAQ,GAAe;AAAA,eAAA,QAAA,CAAA,WAAA,EAAA,YAAA;AAG3B,cAAQC,MAAR,GAAmBlB,GAAnB,CAH2B,MAG3B,CAH2B,CAAA;;AAK3B,cAAIkB,MAAM,KAAV,CAAA,EAAkB;AAChBN,YAAAA,cAAc,GAAdA,GAAAA;AACD;;AAED,cAAMhB,IAAI,GAAG,cAAA,GAAA,GAAoBI,GAAG,CAAvB,QAAA,GAAmCA,GAAG,CAAnD,YAAA;AAEA,iBAAO;AACLmB,YAAAA,YAAY,EADP,IAAA;AAELC,YAAAA,gBAAgB,EAAEC,cAAc,CAAA,IAAA;AAF3B,WAAP;AAX2B,SAAA,CAAA;AAA7BjE,OAAAA;;AAiBA,UAAMkE,IAAI,GAAA,SAAJA,IAAI,GAAe;AAAA,eAAA,OAAA,CAAA,QAAA,EAAA,UAAA,KAAA,EAAA;AAAA,cACfH,YADe,GAAA,KAAA,CAAA,YAAA;AAAA,cACDC,gBADC,GAAA,KAAA,CAAA,gBAAA;;AAGvB,cAAIA,gBAAgB,KAApB,MAAA,EAAiC;AAC/B,mBAAOG,UAAU,CAAjB,YAAiB,CAAjB;AACD;;AACD,cAAIH,gBAAgB,KAApB,UAAA,EAAqC;AACnC,kBAAM,IAAA,KAAA,CAAN,sCAAM,CAAN;AACD;;AARsB,iBASnBA,gBAAgB,KATG,UASnBA,GACKI,iBAAiB,CAACL,YAAY,CAVhB,MAUG,CADtBC,GAGAA,gBAAgB,KAZG,aAYnBA,GACKI,iBAAiB,CAbH,YAaG,CADtBJ,GAMGK,MAAM,CAlBU,YAkBV,CAlBU;AAAA,SAAA,CAAA;AAAzB,OAAA;;AAqBA,UAAMC,IAAI,GAAA,SAAJA,IAAI,GAAe;AAAA,eAAA,OAAA,CAAA,IAAA,EAEhBC,IAAI,CAFY,KAAA,CAAA;AAAzB,OAAA;;AAKA,UAAMC,IAAI,GAAA,QAAA,CAAA,YAAe;AACvB,YAAI,CAAJ,OAAA,EAAc;AACZ,gBAAM,IAAA,KAAA,CAAN,oBAAM,CAAN;AACD;;AAHsB,eAAA,OAAA,CAAA,QAAA,EAAA,UAAA,KAAA,EAAA;AAAA,cAKfT,YALe,GAAA,KAAA,CAAA,YAAA;AAAA,cAKDC,gBALC,GAAA,KAAA,CAAA,gBAAA;;AAOvB,cAAIA,gBAAgB,KAApB,MAAA,EAAiC;AAC/B,mBAAA,YAAA;AACD;;AACD,cAAIA,gBAAgB,KAApB,UAAA,EAAqC;AACnC,mBAAO,IAAA,IAAA,CAAS,CAACS,WAAW,CAACV,YAAY,CAAzC,MAA4B,CAAZ,CAAT,CAAP;AACD;;AACD,cAAIC,gBAAgB,KAApB,aAAA,EAAwC;AACtC,mBAAO,IAAA,IAAA,CAAS,CAACS,WAAW,CAA5B,YAA4B,CAAZ,CAAT,CAAP;AACD;;AACD,cAAIT,gBAAgB,KAApB,UAAA,EAAqC;AACnC,kBAAM,IAAA,KAAA,CAAN,sCAAM,CAAN;AACD;;AACD,iBAAO,IAAA,IAAA,CAAS,CAACK,MAAM,CAAvB,YAAuB,CAAP,CAAT,CAAP;AAnBuB,SAAA,CAAA;AAAzB,OAAU,CAAV;;AAsBA,UAAMK,WAAW,GAAA,SAAXA,WAAW,GAAe;AAAA,eAAA,OAAA,CAAA,QAAA,EAAA,UAAA,KAAA,EAAA;AAAA,cACtBX,YADsB,GAAA,KAAA,CAAA,YAAA;AAAA,cACRC,gBADQ,GAAA,KAAA,CAAA,gBAAA;AAAA,iBAG1BA,gBAAgB,KAHU,aAG1BA,GACKS,WAAW,CAJU,YAIV,CADhBT,GAH0B,OAAA,CAAA,IAAA,EAAA,iBAAA,CAAA;AAAA,SAAA,CAAA;AAAhC,OAAA;;AAUA,UAAMW,QAAQ,GAAA,QAAA,CAAA,YAAe;AAC3B,YAAI,CAAJ,WAAA,EAAkB;AAChB,gBAAM,IAAA,KAAA,CAAN,wBAAM,CAAN;AACD;;AAH0B,eAAA,OAAA,CAAA,IAAA,EAAA,cAAA,CAAA;AAA7B,OAAc,CAAd;;AAQA,aAAO;AACL5G,QAAAA,GAAG,EADE,WAAA;AAEL+F,QAAAA,MAAM,EAFD,cAAA;AAGLc,QAAAA,UAAU,EAHL,kBAAA;AAILrC,QAAAA,OAAO,EAJF,eAAA;AAKL2B,QAAAA,IAAI,EALC,IAAA;AAMLI,QAAAA,IAAI,EANC,IAAA;AAOLE,QAAAA,IAAI,EAPC,IAAA;AAQLE,QAAAA,WAAW,EARN,WAAA;AASLC,QAAAA,QAAQ,EAARA;AATK,OAAP;AA7JG,KAAA,CAAA;AATE,GAAmB,CAAnB;;AAmLP,MAAME,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,QAAI,OAAOC,MAAM,CAAb,UAAA,KAAJ,UAAA,EAA6C,OAAA,KAAA;AAE7C,QAAI,OAAOA,MAAM,CAAb,IAAA,KAAJ,UAAA,EAAuC,OAAA,KAAA;;AAEvC,QAAI;AACF;AACA,UAAA,IAAA;AACA,aAAA,IAAA;AAHF,KAAA,CAIE,OAAA,CAAA,EAAU;AACV,aAAA,KAAA;AACD;AAXH,GAAA;;AAcA,MAAMC,OAAO,GAAGF,UAAhB,EAAA;AAEA,MAAMG,WAAW,GAAG,OAAOF,MAAM,CAAb,QAAA,KAApB,UAAA;AAEA,MAAMG,cAAc,GAAG,OAAOH,MAAM,CAAb,WAAA,KAAvB,UAAA;AAEA,MAAMI,eAAe,GAAG,OAAOJ,MAAM,CAAb,eAAA,KAAxB,UAAA;;AAEA,MAAM/B,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,KAAA,EAAA,KAAA,EAAoB;AAAA,QAAVhF,GAAU,GAAA,KAAA,CAAVA,GAAU;AAC7C,WAAO,IAAA,KAAA,CACLsC,qBAAqB,CAAA,+BAAA,MAAA,CAAA,GAAA,EAAA,GAAA,CAAA,EAAA,eAAA,CAAA,EAAA,EAAA,aAAA,EACF8E,KAAK,CAF1B,KACuB,CAAA,CADhB,CAAP;AADF,GAAA;;AAQA,MAAMzC,uBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClC,QAAA,OAAA;AACA,QAAA,MAAA;AACA,QAAM0C,OAAO,GAAG,IAAA,OAAA,CAAY,UAAA,GAAA,EAAA,GAAA,EAAc;AACxCC,MAAAA,OAAO,GAAG,SAAA,OAAA,CAAA,KAAA,EAAW;AACnBD,QAAAA,OAAO,CAAPA,OAAAA,GAAAA,IAAAA;AACAE,QAAAA,GAAG,CAAHA,KAAG,CAAHA;AAFFD,OAAAA;;AAIAE,MAAAA,MAAM,GAAG,SAAA,MAAA,CAAA,KAAA,EAAW;AAClBH,QAAAA,OAAO,CAAPA,OAAAA,GAAAA,IAAAA;AACAI,QAAAA,GAAG,CAAHA,KAAG,CAAHA;AAFFD,OAAAA;AALF,KAAgB,CAAhB;AAUAH,IAAAA,OAAO,CAAPA,OAAAA,GAAAA,OAAAA;AACAA,IAAAA,OAAO,CAAPA,MAAAA,GAAAA,MAAAA;AACA,WAAA,OAAA;AAfF,GAAA,C,CAAA;;;AAmBA,MAAMhC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAA,KAAA,EAA0B;AAAA,QAAvBd,WAAuB,GAAA,KAAA,CAAvBA,WAAuB;AAAA,QAAVvE,GAAU,GAAA,KAAA,CAAVA,GAAU;;AACvD,QAAIuE,WAAW,KAAf,aAAA,EAAmC;AACjC,aAAOmD,wBAAwB,CAA/B,GAA+B,CAA/B;AACD;;AACD,WAAOnD,WAAW,KAAlB,SAAA;AAJF,GAAA;;AAOA,MAAMmD,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA,GAAA,EAAS;AACxC;AACA,QAAI,CAAA,OAAA,MAAA,KAAA,WAAA,GAAA,WAAA,GAAA,OAAA,CAAA,MAAA,CAAA,MAAJ,QAAA,EAAgC,OAAA,IAAA;AAChC,QAAI,OAAA,CAAOX,MAAM,CAAb,QAAA,CAAA,KAAJ,QAAA,EAAyC,OAAA,IAAA;AACzC,QAAMY,YAAY,GAAGZ,MAAM,CAANA,QAAAA,CAArB,MAAA;AACA,QAAIY,YAAY,KAAhB,MAAA,EAA6B,OAAA,IAAA;AAC7B,WAAOC,YAAY,CAAZA,GAAY,CAAZA,KAAP,YAAA;AANF,GAAA;;AASA,MAAM1B,cAAc,GAAG,SAAjBA,cAAiB,CAAA,IAAA,EAAU;AAC/B,QAAI,CAAJ,IAAA,EAAW;AACT,aAAA,EAAA;AACD;;AACD,QAAI,OAAA,IAAA,KAAJ,QAAA,EAA8B;AAC5B,aAAA,MAAA;AACD;;AACD,QAAIc,OAAO,IAAIa,IAAI,CAAJA,SAAAA,CAAAA,aAAAA,CAAf,IAAeA,CAAf,EAAmD;AACjD,aAAA,MAAA;AACD;;AACD,QAAIZ,WAAW,IAAIa,QAAQ,CAARA,SAAAA,CAAAA,aAAAA,CAAnB,IAAmBA,CAAnB,EAA2D;AACzD,aAAA,UAAA;AACD;;AACD,QAAA,cAAA,EAAoB;AAClB,UAAId,OAAO,IAAIe,UAAU,CAAzB,IAAyB,CAAzB,EAAiC;AAC/B,eAAA,UAAA;AACD;;AACD,UAAIC,WAAW,CAAXA,SAAAA,CAAAA,aAAAA,CAAAA,IAAAA,KAA6CC,iBAAiB,CAAlE,IAAkE,CAAlE,EAA0E;AACxE,eAAA,aAAA;AACD;AACF;;AACD,QAAId,eAAe,IAAIe,eAAe,CAAfA,SAAAA,CAAAA,aAAAA,CAAvB,IAAuBA,CAAvB,EAAsE;AACpE,aAAA,cAAA;AACD;;AACD,WAAA,EAAA;AAxBF,GAAA,C,CAAA;;;AA4BA,MAAMrC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,GAAA,EAAS;AACjC,QAAMsC,SAAS,GAAf,EAAA;AAEA,QAAMC,aAAa,GAAGvD,GAAG,CAAzB,qBAAsBA,EAAtB;AACA,QAAIuD,aAAa,KAAjB,EAAA,EAA0B,OAAA,SAAA;AAE1B,QAAMC,KAAK,GAAGD,aAAa,CAAbA,IAAAA,GAAAA,KAAAA,CAAd,SAAcA,CAAd;AACAC,IAAAA,KAAK,CAALA,OAAAA,CAAc,UAAA,IAAA,EAAU;AACtB,UAAMC,KAAK,GAAGC,IAAI,CAAJA,KAAAA,CAAd,IAAcA,CAAd;AACA,UAAMC,IAAI,GAAGF,KAAK,CAAlB,KAAaA,EAAb;AACA,UAAMrG,KAAK,GAAGqG,KAAK,CAALA,IAAAA,CAAd,IAAcA,CAAd;AACAH,MAAAA,SAAS,CAACK,IAAI,CAAdL,WAAUK,EAAD,CAATL,GAAAA,KAAAA;AAJFE,KAAAA;AAOA,WAAA,SAAA;AAdF,GAAA;;AAiBA,MAAMT,YAAY,GAAG,SAAfA,YAAe,CAAA,IAAA,EAAU;AAC7B,QAAMa,MAAM,GAAGC,YAAY,CAA3B,IAA2B,CAA3B;;AAEA,QAAID,MAAM,KAAV,MAAA,EAAuB;AACrB,aAAA,SAAA;AACD;;AAED,QAAIA,MAAM,KAANA,MAAAA,IAAqBA,MAAM,KAA/B,OAAA,EAA6C;AAC3C,UAAME,wBAAwB,GAAGF,MAAM,CAANA,MAAAA,GAAgB,MAAjD,MAAA;AACA,UAAMG,kBAAkB,GAAGC,IAAI,CAAJA,OAAAA,CAAAA,GAAAA,EAA3B,wBAA2BA,CAA3B;AAEA,UAAID,kBAAkB,KAAK,CAA3B,CAAA,EAA+B,OAAA,IAAA;AAC/B,aAAOC,IAAI,CAAJA,KAAAA,CAAAA,CAAAA,EAAP,kBAAOA,CAAP;AACD;;AAED,WAAOA,IAAI,CAAJA,KAAAA,CAAAA,CAAAA,EAAcJ,MAAM,CAANA,MAAAA,GAArB,CAAOI,CAAP;AAfF,GAAA;;AAkBA,MAAMH,YAAY,GAAG,SAAfA,YAAe,CAAA,IAAA,EAAU;AAC7B,QAAMI,UAAU,GAAGD,IAAI,CAAJA,OAAAA,CAAnB,GAAmBA,CAAnB;AACA,QAAIC,UAAU,KAAK,CAAnB,CAAA,EAAuB,OAAA,EAAA;AACvB,WAAOD,IAAI,CAAJA,KAAAA,CAAAA,CAAAA,EAAP,UAAOA,CAAP;AAHF,GAAA;;AAMA,MAAMd,UAAU,GAAG,SAAbA,UAAa,CAAA,GAAA,EAAS;AAC1B,WAAO1F,GAAG,IAAI0G,QAAQ,CAARA,SAAAA,CAAAA,aAAAA,CAAd,GAAcA,CAAd;AADF,GAAA;;AAIA,MAAMd,iBAAiB,GACrBD,WAAW,CAAXA,MAAAA,IACC,YAAM;AACL,QAAMgB,WAAW,GAAG,CAAA,oBAAA,EAAA,qBAAA,EAAA,4BAAA,EAAA,qBAAA,EAAA,sBAAA,EAAA,qBAAA,EAAA,sBAAA,EAAA,uBAAA,EAApB,uBAAoB,CAApB;AAYA,WAAO,UAAA,KAAA,EAAW;AAChB,aAAO/G,KAAK,IAAI+G,WAAW,CAAXA,QAAAA,CAAqBhH,MAAM,CAANA,SAAAA,CAAAA,QAAAA,CAAAA,IAAAA,CAArC,KAAqCA,CAArBgH,CAAhB;AADF,KAAA;AAfJ,GAEG,EAFH;;AAoBA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAA,IAAA,EAAU;AAC/B,QAAMC,IAAI,GAAG,IAAb,QAAa,EAAb;AACA/C,IAAAA,IAAI,CAAJA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,EAAAA,OAAAA,CAGW,UAAA,KAAA,EAAiB;AACxB,UAAA,KAAA,EAAW;AACT,YAAMgD,KAAK,GAAGC,KAAK,CAALA,KAAAA,CAAd,GAAcA,CAAd;AACA,YAAMZ,IAAI,GAAGW,KAAK,CAALA,KAAAA,GAAAA,OAAAA,CAAAA,KAAAA,EAAb,GAAaA,CAAb;AACA,YAAMlH,KAAK,GAAGkH,KAAK,CAALA,IAAAA,CAAAA,GAAAA,EAAAA,OAAAA,CAAAA,KAAAA,EAAd,GAAcA,CAAd;AACAD,QAAAA,IAAI,CAAJA,MAAAA,CAAYG,kBAAkB,CAA9BH,IAA8B,CAA9BA,EAAsCG,kBAAkB,CAAxDH,KAAwD,CAAxDA;AACD;AATL/C,KAAAA;AAWA,WAAA,IAAA;AAbF,GAAA;;AAgBA,MAAMmD,iBAAiB,GAAA,QAAA,CAAA,UAAA,IAAA,EAAmB;AACxC,QAAMC,MAAM,GAAG,IAAf,UAAe,EAAf;AACA,QAAMlC,OAAO,GAAGmC,eAAe,CAA/B,MAA+B,CAA/B;AACAD,IAAAA,MAAM,CAANA,iBAAAA,CAAAA,IAAAA;AACA,WAAA,OAAA;AAJF,GAAuB,CAAvB;;AAOA,MAAMnD,UAAU,GAAG,SAAbA,UAAa,CAAA,IAAA,EAAU;AAC3B,QAAMmD,MAAM,GAAG,IAAf,UAAe,EAAf;AACA,QAAMlC,OAAO,GAAGmC,eAAe,CAA/B,MAA+B,CAA/B;AACAD,IAAAA,MAAM,CAANA,UAAAA,CAAAA,IAAAA;AACA,WAAA,OAAA;AAJF,GAAA;;AAOA,MAAMlD,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,WAAA,EAAiB;AACzC,QAAMoD,IAAI,GAAG,IAAA,UAAA,CAAb,WAAa,CAAb;AACA,QAAMC,KAAK,GAAG,IAAA,KAAA,CAAUD,IAAI,CAA5B,MAAc,CAAd;AACA,QAAI1I,CAAC,GAAL,CAAA;;AACA,WAAOA,CAAC,GAAG0I,IAAI,CAAf,MAAA,EAAwB;AACtBC,MAAAA,KAAK,CAALA,CAAK,CAALA,GAAWpD,MAAM,CAANA,YAAAA,CAAoBmD,IAAI,CAAnCC,CAAmC,CAAxBpD,CAAXoD;AAEA3I,MAAAA,CAAC;AACF;;AACD,WAAO2I,KAAK,CAALA,IAAAA,CAAP,EAAOA,CAAP;AATF,GAAA;;AAYA,MAAMF,eAAe,GAAG,SAAlBA,eAAkB,CAAA,MAAA,EAAY;AAClC,WAAO,IAAA,OAAA,CAAY,UAAA,OAAA,EAAA,MAAA,EAA2B;AAC5CD,MAAAA,MAAM,CAANA,MAAAA,GAAgB,YAAY;AAC1BjC,QAAAA,OAAO,CAACiC,MAAM,CAAdjC,MAAO,CAAPA;AADFiC,OAAAA;;AAGAA,MAAAA,MAAM,CAANA,OAAAA,GAAiB,YAAY;AAC3B/B,QAAAA,MAAM,CAAC+B,MAAM,CAAb/B,KAAM,CAANA;AADF+B,OAAAA;AAJF,KAAO,CAAP;AADF,GAAA;;AAWA,MAAM7C,WAAW,GAAG,SAAdA,WAAc,CAAA,MAAA,EAAY;AAC9B,QAAIiD,MAAM,CAAV,KAAA,EAAkB;AAChB,aAAOA,MAAM,CAANA,KAAAA,CAAP,CAAOA,CAAP;AACD;;AACD,QAAMF,IAAI,GAAG,IAAA,UAAA,CAAeE,MAAM,CAAlC,UAAa,CAAb;AACAF,IAAAA,IAAI,CAAJA,GAAAA,CAAS,IAAA,UAAA,CAATA,MAAS,CAATA;AACA,WAAOA,IAAI,CAAX,MAAA;AANF,GAAA;;;;ACxTO,WAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,QAAA,MAAA,EAAY;AACX,aAAO9D,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,QAAI,CAAA,KAAA,IAAU,CAAC1D,KAAK,CAApB,IAAA,EAA2B;AAC1BA,MAAAA,KAAK,GAAGqD,OAAO,CAAPA,OAAAA,CAARrD,KAAQqD,CAARrD;AACA;;AACD,WAAO0D,IAAI,GAAG1D,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAzFD,MAAM4H,WAAW,GAAA,QAAA,CAAA,UAAA,GAAA,EAGZ;AAAA,QAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAD4E,EAC5E;;AAAA,QAAA,qBAAA,GAAA,IAAA,CADDxF,iBACC;AAAA,QADDA,iBACC,GAAA,qBAAA,KAAA,KAAA,CAAA,GADmBtB,uBAAuB,EAC1C,GAAA,qBAAA;AAAA,QAAA,SAAA,GAAA,IAAA,CAD8C+G,IAC9C;AAAA,QAD8CA,IAC9C,GAAA,SAAA,KAAA,KAAA,CAAA,GADqD,MACrD,GAAA,SAAA;AAAA,QADgEC,OAChE,GAAA,wBAAA,CAAA,IAAA,EAAA,WAAA,CAAA;;AACH,QAAMC,eAAe,GAAG,IAAxB,eAAwB,EAAxB;AAEA,QAAA,WAAA;AACA3F,IAAAA,iBAAiB,CAAjBA,QAAAA,CAA2B,UAAA,MAAA,EAAY;AACrC4F,MAAAA,WAAW,GAAXA,MAAAA;AACAD,MAAAA,eAAe,CAAfA,KAAAA,CAAAA,MAAAA;AAFF3F,KAAAA;AAKA,QAAA,QAAA;AATG,WAAA,SAAA,CAAA,QAAA,CAAA,YAUC;AAAA,aAAA,QAAA,CACe,MAAM,CAAN,KAAA,CAAA,GAAA,EAAA,cAAA,CAAA;AACf8F,QAAAA,MAAM,EAAEH,eAAe,CADR,MAAA;AAEfF,QAAAA,IAAI,EAAJA;AAFe,OAAA,EADf,OACe,CAAA,CADf,EAAA,UAAA,aAAA,EAAA;AACFI,QAAAA,QAAQ,GAARA,aAAAA;AADE,OAAA,CAAA;AAVD,KAAA,EAAA,UAAA,CAAA,EAgBS;AACV,UAAID,WAAW,IAAIG,CAAC,CAADA,IAAAA,KAAnB,YAAA,EAA4C;AAC1C,cAAA,WAAA;AACD;;AACD,YAAA,CAAA;AApBC,KAAA,CAAA,EAAA,UAAA,OAAA,EAAA;AAAA,aAuBI;AACLpK,QAAAA,GAAG,EAAEkK,QAAQ,CADR,GAAA;AAELnE,QAAAA,MAAM,EAAEmE,QAAQ,CAFX,MAAA;AAGLrD,QAAAA,UAAU,EAHL,EAAA;AAILrC,QAAAA,OAAO,EAAE6F,iBAAiB,CAJrB,QAIqB,CAJrB;AAKLlE,QAAAA,IAAI,EAAE,SAAA,IAAA,GAAA;AAAA,iBAAM+D,QAAQ,CAAd,IAAMA,EAAN;AALD,SAAA;AAML3D,QAAAA,IAAI,EAAE,SAAA,IAAA,GAAA;AAAA,iBAAM2D,QAAQ,CAAd,IAAMA,EAAN;AAND,SAAA;AAOLzD,QAAAA,IAAI,EAAE,SAAA,IAAA,GAAA;AAAA,iBAAMyD,QAAQ,CAAd,IAAMA,EAAN;AAPD,SAAA;AAQLvD,QAAAA,WAAW,EAAE,SAAA,WAAA,GAAA;AAAA,iBAAMuD,QAAQ,CAAd,WAAMA,EAAN;AARR,SAAA;AASLtD,QAAAA,QAAQ,EAAE,SAAA,QAAA,GAAA;AAAA,iBAAMsD,QAAQ,CAAd,QAAMA,EAAN;AAAA;AATL,OAvBJ;AAAA,KAAA,CAAA;AAHL,GAAiB,CAAjB;;AA+iBO,WAAA,QAAA,CAAA,IAAA,EAAA,OAAA,EAA+B;AACrC,QAAI;AACH,UAAIN,MAAM,GAAGnF,IAAb,EAAA;AADD,KAAA,CAEE,OAAA,CAAA,EAAS;AACV,aAAO8F,OAAO,CAAd,CAAc,CAAd;AACA;;AACD,QAAIX,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,aAAOA,MAAM,CAANA,IAAAA,CAAY,KAAZA,CAAAA,EAAP,OAAOA,CAAP;AACA;;AACD,WAAA,MAAA;AACA;;AAlhBD,MAAMS,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,QAAA,EAAc;AACtC,QAAM7F,OAAO,GAAb,EAAA;AACA0F,IAAAA,QAAQ,CAARA,OAAAA,CAAAA,OAAAA,CAAyB,UAAA,KAAA,EAAA,IAAA,EAAiB;AACxC1F,MAAAA,OAAO,CAAPA,IAAO,CAAPA,GAAAA,KAAAA;AADF0F,KAAAA;AAGA,WAAA,OAAA;AALF,GAAA;;AA4DO,WAAA,SAAA,CAAA,KAAA,EAAA,IAAA,EAAgC;AACtC,WAAOjI,KAAK,IAAIA,KAAK,CAAdA,IAAAA,GAAsBA,KAAK,CAALA,IAAAA,CAAtBA,IAAsBA,CAAtBA,GAAyC0D,IAAI,CAApD,KAAoD,CAApD;AACA;;AAlCM,WAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,WAAO,YAAW;AACjB,WAAK,IAAIT,IAAI,GAAR,EAAA,EAAenE,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGkD,SAAS,CAAxC,MAAA,EAAiDlD,CAAjD,EAAA,EAAsD;AACrDmE,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUjB,SAAS,CAAnBiB,CAAmB,CAAnBA;AACA;;AACD,UAAI;AACH,eAAOI,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,OAAA,CAEE,OAAA,CAAA,EAAS;AACV,eAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,KAAA;AAUA;;AA/BM,MAAMgF,QAAQ,GACnB,OAAOvD,MAAM,CAAb,KAAA,KAAA,UAAA,IAAsC,OAAOA,MAAM,CAAb,eAAA,KAAtC,UAAA,GAAA,WAAA,GADK,aAAA;;ACkCA,WAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,QAAA,MAAA,EAAY;AACX,aAAOpB,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,QAAI,CAAA,KAAA,IAAU,CAAC1D,KAAK,CAApB,IAAA,EAA2B;AAC1BA,MAAAA,KAAK,GAAGqD,OAAO,CAAPA,OAAAA,CAARrD,KAAQqD,CAARrD;AACA;;AACD,WAAO0D,IAAI,GAAG1D,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAtBM,WAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,WAAO,YAAW;AACjB,WAAK,IAAIiD,IAAI,GAAR,EAAA,EAAenE,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGkD,SAAS,CAAxC,MAAA,EAAiDlD,CAAjD,EAAA,EAAsD;AACrDmE,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUjB,SAAS,CAAnBiB,CAAmB,CAAnBA;AACA;;AACD,UAAI;AACH,eAAOI,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,OAAA,CAEE,OAAA,CAAA,EAAS;AACV,eAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,KAAA;AAUA;;AA/EM,MAAMkF,SAAS,GAAA,QAAA,CAAA,UAAA,GAAA,EAAgC;AAAA,QAAjBT,OAAiB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;AAAA,WAAA,QAAA,CAC7BO,QAAQ,CAAA,GAAA,EADqB,OACrB,CADqB,EAAA,UAAA,QAAA,EAAA;AAAA,aAAA,QAAA,CAE/BJ,QAAQ,CAFuB,IAE/BA,EAF+B,CAAA;AAAA,KAAA,CAAA;AAA/C,GAAe,CAAf;;ACkFA,WAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,QAAA,MAAA,EAAY;AACX,aAAOvE,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,QAAI,CAAA,KAAA,IAAU,CAAC1D,KAAK,CAApB,IAAA,EAA2B;AAC1BA,MAAAA,KAAK,GAAGqD,OAAO,CAAPA,OAAAA,CAARrD,KAAQqD,CAARrD;AACA;;AACD,WAAO0D,IAAI,GAAG1D,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAsdM,WAAA,QAAA,CAAA,IAAA,EAAA,OAAA,EAA+B;AACrC,QAAI;AACH,UAAI2H,MAAM,GAAGnF,IAAb,EAAA;AADD,KAAA,CAEE,OAAA,CAAA,EAAS;AACV,aAAO8F,OAAO,CAAd,CAAc,CAAd;AACA;;AACD,QAAIX,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,aAAOA,MAAM,CAANA,IAAAA,CAAY,KAAZA,CAAAA,EAAP,OAAOA,CAAP;AACA;;AACD,WAAA,MAAA;AACA;;AAtfM,WAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,WAAO,YAAW;AACjB,WAAK,IAAI1E,IAAI,GAAR,EAAA,EAAenE,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGkD,SAAS,CAAxC,MAAA,EAAiDlD,CAAjD,EAAA,EAAsD;AACrDmE,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUjB,SAAS,CAAnBiB,CAAmB,CAAnBA;AACA;;AACD,UAAI;AACH,eAAOI,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,OAAA,CAEE,OAAA,CAAA,EAAS;AACV,eAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,KAAA;AAUA;;AA5EM,MAAMmF,kBAAkB,GAAA,QAAA,CAAA,YAAyC;AAAA,QAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;AAAA,QAA7BpG,iBAA6B,GAAA,IAAA,CAA7BA,iBAA6B;;AAAA,WAAA,QAAA,CAAA,YAClE;AAAA,aAAA,QAAA,CAC0BmG,SAAS,CAAA,wBAAA,EAA2B;AAC9DnG,QAAAA,iBAAiB,EAAjBA;AAD8D,OAA3B,CADnC,CAAA;AADkE,KAAA,EAAA,UAAA,CAAA,EAM1D;AACV,UAAIb,aAAa,CAAjB,CAAiB,CAAjB,EAAsB;AACpB,cAAA,CAAA;AACD;;AACD,YAAM,IAAA,KAAA,CACJlB,qBAAqB,CAAA,iEAAA,EAAA,eAAA,CAAA,EAAA,EAAA,aAAA,EACF8H,CAAC,CAFtB,KACuB,CAAA,CADjB,CAAN;AAVoE,KAAA,CAAA;AAAjE,GAAwB,CAAxB;;ACLA,MAAMM,kCAAkC,GAAG,SAArCA,kCAAqC,GAAM;AACtD,QAAMC,gBAAgB,GACpBC,QAAQ,CAARA,aAAAA,CAAAA,wBAAAA,KACAA,QAAQ,CAARA,aAAAA,CAFF,6BAEEA,CAFF;AAGA,QAAMC,iBAAiB,GAAGD,QAAQ,CAARA,aAAAA,CAA1B,wBAA0BA,CAA1B;;AAEA,QAAID,gBAAgB,IAApB,iBAAA,EAA2C;AACzCG,MAAAA,kCAAkC;AADpC,KAAA,MAEO;AACLC,MAAAA,mCAAmC;AACpC;AAVI,GAAA;;AAaP,MAAIC,qBAAqB,GAAzB,KAAA;;AACA,MAAMF,kCAAkC,GAAG,SAArCA,kCAAqC,GAAM;AAC/C,QAAA,qBAAA,EAA2B;AAC3BE,IAAAA,qBAAqB,GAArBA,IAAAA;AAEA,QAAMC,MAAM,GAAGC,gBAAf,EAAA;AACA,QAAMC,kBAAkB,GAAGF,MAAM,CAANA,KAAAA,CAA3B,kBAAA;AACAG,IAAAA,SAAS,CAAA,MAAA,EAAS;AAAE,gBAAF,MAAA;AAAoB,6BAAuB;AAA3C,KAAT,CAATA;;AACA,QAAA,kBAAA,EAAwB;AACtBC,MAAAA,UAAU,CAAC,YAAM;AACfD,QAAAA,SAAS,CAAA,MAAA,EAAS;AAAE,iCAAuBD;AAAzB,SAAT,CAATC;AADFC,OAAU,CAAVA;AAGD;AAXH,GAAA;;AAcA,MAAMN,mCAAmC,GAAG,SAAtCA,mCAAsC,GAAM;AAChD,QAAI,CAAJ,qBAAA,EAA4B;AAC5BC,IAAAA,qBAAqB,GAArBA,KAAAA;AAEA,QAAMC,MAAM,GAAGC,gBAAf,EAAA;AACA,QAAMC,kBAAkB,GAAGF,MAAM,CAANA,KAAAA,CAA3B,kBAAA;AACAG,IAAAA,SAAS,CAAA,MAAA,EAAS;AAAE,gBAAF,MAAA;AAAoB,6BAAuB;AAA3C,KAAT,CAATA;;AACA,QAAA,kBAAA,EAAwB;AACtBC,MAAAA,UAAU,CAAC,YAAM;AACfD,QAAAA,SAAS,CAAA,MAAA,EAAS;AAAE,iCAAuBD;AAAzB,SAAT,CAATC;AADFC,OAAU,CAAVA;AAGD;AAXH,GAAA;;AAcO,MAAMH,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AACpC,QAAMI,OAAO,GAAG9I,KAAK,CAALA,IAAAA,CAAWuE,MAAM,CAANA,MAAAA,CAAAA,QAAAA,CAAAA,gBAAAA,CAA3B,QAA2BA,CAAXvE,CAAhB;AACA,WAAO,OAAO,CAAP,IAAA,CAAa,UAAA,MAAA,EAAA;AAAA,aAAYyI,MAAM,CAANA,aAAAA,KAAZ,MAAA;AAApB,KAAO,CAAP;AAFK,GAAA;;AAKA,MAAMM,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,OAAA,EAAa;AAC3CC,IAAAA,OAAO,CAAPA,YAAAA,CAAAA,iBAAAA,EAAAA,EAAAA;AADK,GAAA;;AAIA,MAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAA,OAAA,EAAa;AACjDD,IAAAA,OAAO,CAAPA,eAAAA,CAAAA,iBAAAA;AADK,GAAA;;AAIA,MAAMJ,SAAS,GAAG,SAAZA,SAAY,CAAA,OAAA,EAAA,MAAA,EAAqB;AAC5C,QAAMM,YAAY,GAAGF,OAAO,CAA5B,KAAA;AACA,QAAMG,aAAa,GAAG,MAAM,CAAN,IAAA,CAAA,MAAA,EAAA,GAAA,CAAwB,UAAA,SAAA,EAAe;AAC3D,UAAA,OAAA;;AACA,UAAIC,SAAS,IAAb,YAAA,EAA+B;AAC7B,YAAMC,YAAY,GAAGH,YAAY,CAAjC,SAAiC,CAAjC;;AACAI,QAAAA,OAAO,GAAG,SAAA,OAAA,GAAM;AACdJ,UAAAA,YAAY,CAAZA,SAAY,CAAZA,GAAAA,YAAAA;AADFI,SAAAA;AAFF,OAAA,MAKO;AACLA,QAAAA,OAAO,GAAG,SAAA,OAAA,GAAM;AACd,iBAAOJ,YAAY,CAAnB,SAAmB,CAAnB;AADFI,SAAAA;AAGD;;AAEDJ,MAAAA,YAAY,CAAZA,SAAY,CAAZA,GAA0BK,MAAM,CAAhCL,SAAgC,CAAhCA;AAEA,aAAA,OAAA;AAfF,KAAsB,CAAtB;AAiBA,WAAO,YAAM;AACXC,MAAAA,aAAa,CAAbA,OAAAA,CAAsB,UAAA,OAAA,EAAA;AAAA,eAAaG,OAAb,EAAA;AAAtBH,OAAAA;AADF,KAAA;AAnBK,GAAA;;AAqCA,MAAMK,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAA,OAAA,EAAa;AACjD,WAAOR,OAAO,CAAPA,YAAAA,CAAP,aAAOA,CAAP;AADK,GAAA;;AAIA,MAAMS,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAA,OAAA,EAAa;AACjDT,IAAAA,OAAO,CAAPA,YAAAA,CAAAA,aAAAA,EAAAA,EAAAA;AADK,GAAA;;AAIA,MAAMU,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA,OAAA,EAAa;AACnDV,IAAAA,OAAO,CAAPA,eAAAA,CAAAA,aAAAA;AADK,GAAA;;ACgJA,MAAMW,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA,KAAA,EAMlC;AAAA,QAAA,cAAA,GAAA,KAAA,CALJC,QAKI;AAAA,QALJA,QAKI,GAAA,cAAA,KAAA,KAAA,CAAA,GALO,GAKP,GAAA,cAAA;AAAA,QAAA,oBAAA,GAAA,KAAA,CAJJC,cAII;AAAA,QAJJA,cAII,GAAA,oBAAA,KAAA,KAAA,CAAA,GAJa,UAAA,CAAA,EAAA;AAAA,aAAA,CAAA;AAIb,KAAA,GAAA,oBAAA;AAAA,QAAA,gBAAA,GAAA,KAAA,CAHJC,UAGI;AAAA,QAHJA,UAGI,GAAA,gBAAA,KAAA,KAAA,CAAA,GAHS,YAAM,CAGf,CAAA,GAAA,gBAAA;AAAA,QAAA,cAAA,GAAA,KAAA,CAFJC,QAEI;AAAA,QAFJA,QAEI,GAAA,cAAA,KAAA,KAAA,CAAA,GAFO,YAAM,CAEb,CAAA,GAAA,cAAA;AAAA,QAAA,gBAAA,GAAA,KAAA,CADJC,UACI;AAAA,QADJA,UACI,GAAA,gBAAA,KAAA,KAAA,CAAA,GADS,YAAM,CACf,CAAA,GAAA,gBAAA;;AACJ,QAAIC,KAAK,CAAT,QAAS,CAAT,EAAqB;AACnB;AACA,aAAO,YAAM,CAAb,CAAA;AACD;;AACDL,IAAAA,QAAQ,GAAGM,QAAQ,CAAA,QAAA,EAAnBN,EAAmB,CAAnBA;AACA,QAAMO,OAAO,GAAGC,WAAW,CAA3B,GAAgBA,EAAhB;AACA,QAAA,8BAAA;AACA,QAAIC,IAAI,GAAR,KAAA;AACA,QAAIC,WAAW,GAAf,CAAA;AACA,QAAIC,QAAQ,GAAZ,CAAA;;AACA,QAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpBC,MAAAA,8BAA8B,GAA9BA,IAAAA;AACA,UAAMC,KAAK,GAAGN,WAAW,CAAzB,GAAcA,EAAd;AACAE,MAAAA,WAAW,GAAGlM,IAAI,CAAJA,GAAAA,CAAS,CAACsM,KAAK,GAAN,OAAA,IAATtM,QAAAA,EAAdkM,CAAclM,CAAdkM;AACAC,MAAAA,QAAQ,GAAGV,cAAc,CAAzBU,WAAyB,CAAzBA;AACAF,MAAAA,IAAI,GAAGC,WAAW,KAAlBD,CAAAA;AACAP,MAAAA,UAAU,CAAC;AACTO,QAAAA,IAAI,EADK,IAAA;AAETC,QAAAA,WAAW,EAFF,WAAA;AAGTC,QAAAA,QAAQ,EAARA;AAHS,OAAD,CAAVT;;AAKA,UAAA,IAAA,EAAU;AACRE,QAAAA,UAAU;AADZ,OAAA,MAEO;AACLS,QAAAA,8BAA8B,GAAGlG,MAAM,CAANA,qBAAAA,CAAjCkG,OAAiClG,CAAjCkG;AACD;AAfH,KAAA;;AAiBAD,IAAAA,OAAO;;AACP,QAAMG,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjB,UAAA,8BAAA,EAAoC;AAClCpG,QAAAA,MAAM,CAANA,oBAAAA,CAAAA,8BAAAA;AACAkG,QAAAA,8BAA8B,GAA9BA,IAAAA;AACD;;AACD,UAAI,CAAJ,IAAA,EAAW;AACTJ,QAAAA,IAAI,GAAJA,IAAAA;AACAN,QAAAA,QAAQ,CAAC;AACPO,UAAAA,WAAW,EADJ,WAAA;AAEPC,UAAAA,QAAQ,EAARA;AAFO,SAAD,CAARR;AAID;AAXH,KAAA;;AAaA,WAAA,IAAA;AAhDK,GAAA,C,CCpPP;;;AACAxF,EAAAA,MAAM,CAANA,gBAAAA,CAAAA,WAAAA,EAAqC,UAAA,cAAA,EAAoB;AACvD,QAAIqG,cAAc,CAAlB,gBAAA,EAAqC;AACnC;AACD;;AACDxC,IAAAA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAAA,uBAAAA,EAAAA,OAAAA;AAJF7D,GAAAA;AAMAA,EAAAA,MAAM,CAANA,gBAAAA,CAAAA,YAAAA,EAAsC,UAAA,eAAA,EAAqB;AACzD,QAAIsG,eAAe,CAAnB,gBAAA,EAAsC;AACpC;AACD;;AACDzC,IAAAA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAAA,uBAAAA,EAAAA,OAAAA;AAJF7D,GAAAA;AAMAA,EAAAA,MAAM,CAANA,gBAAAA,CAAAA,SAAAA,EAAmC,UAAA,YAAA,EAAkB;AACnD,QAAIuG,YAAY,CAAhB,gBAAA,EAAmC;AACjC;AACD;;AACD1C,IAAAA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAAA,uBAAAA,EAAAA,UAAAA;AAJF7D,GAAAA;;ACbO,MAAMwG,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAA,IAAA,EAGnC;AAAA,QAFJC,uBAEI,GAAA,IAAA,CAFJA,uBAEI;AAAA,QADJC,4BACI,GAAA,IAAA,CADJA,4BACI;AACJ,QAAMC,oBAAoB,GAAA,IAAA,MAAA,CAAA,uBAAA,EAAA,YAAA,EAAA,MAAA,CAA1B,4BAA0B,CAA1B;AAEA9C,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,mBAAAA,EAAAA,IAAAA,GAAAA,oBAAAA;;AACAA,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,mBAAAA,EAAAA,OAAAA,GAAsD,UAAA,UAAA,EAAgB;AACpE,UAAI+C,UAAU,CAAd,gBAAA,EAAiC;AAC/B;AACD;;AAED,UAAIC,gBAAgB,CAApB,UAAoB,CAApB,EAAkC;AAChC;AACD;;AAED7G,MAAAA,MAAM,CAANA,MAAAA,CAAAA,QAAAA,CAAAA,IAAAA,GAAAA,oBAAAA;AATF6D,KAAAA;AAPK,GAAA;;AAoBP,MAAMgD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,UAAA,EAAgB;AACvC,QAAID,UAAU,CAAVA,MAAAA,KAAJ,CAAA,EAA6B;AAC3B;AACA,aAAA,IAAA;AACD;;AACD,QAAIA,UAAU,CAAd,OAAA,EAAwB;AACtB,aAAA,IAAA;AACD;;AACD,QAAIA,UAAU,CAAd,OAAA,EAAwB;AACtB,aAAA,IAAA;AACD;;AACD,WAAA,KAAA;AAXF,GAAA;;ACpBO,MAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,IAAA,EAAU;AACxC,WAAO;AACLC,MAAAA,GAAG,EAAE,SAAA,GAAA,GAAA;AAAA,eAAMC,YAAY,CAAZA,cAAAA,CAAN,IAAMA,CAAN;AADA,OAAA;AAELC,MAAAA,GAAG,EAAE,SAAA,GAAA,GAAA;AAAA,eACHD,YAAY,CAAZA,cAAAA,CAAAA,IAAAA,IAAoCvH,IAAI,CAAJA,KAAAA,CAAWuH,YAAY,CAAZA,OAAAA,CAA/CA,IAA+CA,CAAXvH,CAApCuH,GADG,SAAA;AAFA,OAAA;AAILE,MAAAA,GAAG,EAAE,SAAA,GAAA,CAAA,KAAA,EAAA;AAAA,eAAWF,YAAY,CAAZA,OAAAA,CAAAA,IAAAA,EAA2BvH,IAAI,CAAJA,SAAAA,CAAtC,KAAsCA,CAA3BuH,CAAX;AAAA;AAJA,KAAP;AADK,GAAA;;ACEA,MAAMG,aAAa,GAAG,SAAhBA,aAAgB,CAAA,OAAA,EAAa;AACxC,QAAI1C,OAAO,CAAPA,YAAAA,CAAJ,sBAAIA,CAAJ,EAAkD;AAChD2C,MAAAA,WAAW,CAAXA,OAAW,CAAXA;AADF,KAAA,MAEO;AACLC,MAAAA,WAAW,CAAXA,OAAW,CAAXA;AACD;AALI,GAAA;;AAQA,MAAMD,WAAW,GAAG,SAAdA,WAAc,CAAA,OAAA,EAAa;AACtC3C,IAAAA,OAAO,CAAPA,eAAAA,CAAAA,sBAAAA;AACAA,IAAAA,OAAO,CAAPA,eAAAA,CAAAA,2BAAAA;AACAd,IAAAA,kCAAkC;AAH7B,GAAA;;AAMA,MAAM0D,WAAW,GAAG,SAAdA,WAAc,CAAA,OAAA,EAAa;AACtC5C,IAAAA,OAAO,CAAPA,YAAAA,CAAAA,sBAAAA,EAAAA,EAAAA;AACAd,IAAAA,kCAAkC;AAF7B,GAAA;;AAKA,MAAM2D,eAAe,GAAG,SAAlBA,eAAkB,CAAA,OAAA,EAAa;AAC1C7C,IAAAA,OAAO,CAAPA,YAAAA,CAAAA,2BAAAA,EAAAA,EAAAA;AACAd,IAAAA,kCAAkC;AAF7B,GAAA;;AAKA,MAAM4D,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA,OAAA,EAAa;AAChD9C,IAAAA,OAAO,CAAPA,eAAAA,CAAAA,2BAAAA;AACAd,IAAAA,kCAAkC;AAF7B,GAAA;;AAKA,MAAM6D,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAClC,QAAMC,mBAAmB,GAAGhM,KAAK,CAALA,IAAAA,CAAWoI,QAAQ,CAARA,gBAAAA,CAAvC,wBAAuCA,CAAXpI,CAA5B;AACAgM,IAAAA,mBAAmB,CAAnBA,OAAAA,CAA4B,UAAA,kBAAA,EAAwB;AAClDL,MAAAA,WAAW,CAAXA,kBAAW,CAAXA;AADFK,KAAAA;AAFK,GAAA;;ACxBA,MAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AACzC7D,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,kBAAAA,EAAAA,OAAAA,GAAAA,cAAAA;AACAA,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,wBAAAA,EAAAA,OAAAA,GAAAA,cAAAA;AAFK,GAAA;;AAKP,MAAM8D,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,QAAIC,kBAAJ,EAAA,EAA0B;AACxBC,MAAAA,YAAY;AADd,KAAA,MAEO;AACLC,MAAAA,YAAY;AACb;AALH,GAAA;;AAQO,MAAMF,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AACtC,WAAO3C,sBAAsB,CAACpB,QAAQ,CAARA,aAAAA,CAA9B,WAA8BA,CAAD,CAA7B;AADK,GAAA;;AAIA,MAAMgE,YAAY,GAAG,SAAfA,YAAe,GAAM;AAChC1C,IAAAA,wBAAwB,CAACtB,QAAQ,CAARA,aAAAA,CAAzBsB,WAAyBtB,CAAD,CAAxBsB;AACAxB,IAAAA,kCAAkC;AAF7B,GAAA;;AAKA,MAAMmE,YAAY,GAAG,SAAfA,YAAe,GAAM;AAChC5C,IAAAA,sBAAsB,CAACrB,QAAQ,CAARA,aAAAA,CAAvBqB,WAAuBrB,CAAD,CAAtBqB;AACAvB,IAAAA,kCAAkC;AAF7B,GAAA;;;;ACuDA,WAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,QAAA,MAAA,EAAY;AACX,aAAO/E,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,QAAI,CAAA,KAAA,IAAU,CAAC1D,KAAK,CAApB,IAAA,EAA2B;AAC1BA,MAAAA,KAAK,GAAG,OAAO,CAAP,OAAA,CAARA,KAAQ,CAARA;AACA;;AACD,WAAO0D,IAAI,GAAG1D,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAmbM,WAAA,OAAA,CAAA,IAAA,EAAA,IAAA,EAAA,MAAA,EAAmC;AACzC,QAAA,MAAA,EAAY;AACX,aAAO0D,IAAI,GAAGA,IAAI,CAAClB,IAAR,EAAO,CAAP,GAAkBA,IAA7B,EAAA;AACA;;AACD,QAAI;AACH,UAAImF,MAAM,GAAGtE,OAAO,CAAPA,OAAAA,CAAgBb,IAA7B,EAAaa,CAAb;AACA,aAAOK,IAAI,GAAGiE,MAAM,CAANA,IAAAA,CAAH,IAAGA,CAAH,GAAX,MAAA;AAFD,KAAA,CAGE,OAAA,CAAA,EAAU;AACX,aAAOtE,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AACD;;AAvhBD,MAAMwJ,sBAAsB,GAAGjB,gBAAgB,CAA/C,cAA+C,CAA/C;;AAoEO,WAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,WAAO,YAAW;AACjB,WAAK,IAAI3I,IAAI,GAAR,EAAA,EAAenE,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGkD,SAAS,CAAxC,MAAA,EAAiDlD,CAAjD,EAAA,EAAsD;AACrDmE,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUjB,SAAS,CAAnBiB,CAAmB,CAAnBA;AACA;;AACD,UAAI;AACH,eAAOI,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,OAAA,CAEE,OAAA,CAAA,EAAS;AACV,eAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,KAAA;AAUA;;AA7ED,MAAMyJ,0BAA0B,GAAhC,EAAA;;AACO,MAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAM;AAC7C,QAAMC,aAAa,GAAGrE,QAAQ,CAARA,aAAAA,CAAtB,gBAAsBA,CAAtB;AACAqE,IAAAA,aAAa,CAAbA,OAAAA,GAAwBC,yBAAxBD,EAAAA;;AACAA,IAAAA,aAAa,CAAbA,QAAAA,GAAyB,YAAM;AAC7BE,MAAAA,yBAAyB,CAACF,aAAa,CAAvCE,OAAyB,CAAzBA;;AACA,UAAIF,aAAa,CAAjB,OAAA,EAA2B;AACzB;AACA;AACA;AACAG,QAAAA,iBAAiB;AAJnB,OAAA,MAKO;AACL;AACAL,QAAAA,0BAA0B,CAA1BA,KAAAA,GAAAA,OAAAA,CAA2C,UAAA,YAAA,EAAkB;AAC3DM,UAAAA,YAAY,CAAZA,KAAAA;AADFN,SAAAA;AAGD;AAZHE,KAAAA;AAHK,GAAA;;AAmBA,MAAMK,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA,uBAAA,EAAA,SAAA,EAAA,iBAAA,EAA2D;AAC9F,QAAMC,mBAAmB,GAAGL,yBAA5B,EAAA;AACA,QAAI,CAAJ,mBAAA,EAA0B;AAE1B,QAAMM,mBAAmB,GAAG;AAC1BC,MAAAA,IAAI,EADsB,IAAA;AAE1BC,MAAAA,IAAI,EAAEC,cAFoB,EAAA;AAG1BC,MAAAA,YAAY,EAHc,IAAA;AAI1BC,MAAAA,YAAY,EAAE;AAJY,KAA5B;;AAOA,QAAIC,SAAS,CAATA,MAAAA,KAAJ,SAAA,EAAoC;AAClC,UAAA,iBAAA,EAAuB;AACrB,YAAIC,iBAAiB,CAAjBA,MAAAA,KAAJ,WAAA,EAA8C;AAC5CC,UAAAA,MAAM,CAAA,QAAA,EAAA,cAAA,CAAA,cAAA,CAAA,EAAA,EAAA,mBAAA,CAAA,EAAA,EAAA,EAAA;AAEJvL,YAAAA,IAAI,EAAA,GAAA,MAAA,CAAA,uBAAA,EAAA,yBAAA;AAFA,WAAA,CAAA,CAANuL;AADF,SAAA,MAKO;AACLA,UAAAA,MAAM,CAAA,eAAA,EAAA,cAAA,CAAA,cAAA,CAAA,EAAA,EAAA,mBAAA,CAAA,EAAA,EAAA,EAAA;AAEJvL,YAAAA,IAAI,EAAA,GAAA,MAAA,CAAA,uBAAA,EAAA,2BAAA;AAFA,WAAA,CAAA,CAANuL;AAID;AAXH,OAAA,MAYO;AACLA,QAAAA,MAAM,CAAA,SAAA,EAAA,cAAA,CAAA,cAAA,CAAA,EAAA,EAAA,mBAAA,CAAA,EAAA,EAAA,EAAA;AAEJvL,UAAAA,IAAI,EAAA,GAAA,MAAA,CAAA,uBAAA,EAAA,oBAAA;AAFA,SAAA,CAAA,CAANuL;AAID;AAlBH,KAAA,MAmBO,IAAID,iBAAiB,IAAIA,iBAAiB,CAAjBA,MAAAA,KAAzB,SAAA,EAAiE;AACtEC,MAAAA,MAAM,CAAA,OAAA,EAAA,cAAA,CAAA,cAAA,CAAA,EAAA,EAAA,mBAAA,CAAA,EAAA,EAAA,EAAA;AAEJvL,QAAAA,IAAI,EAAA,GAAA,MAAA,CAAA,uBAAA,EAAA,mBAAA;AAFA,OAAA,CAAA,CAANuL;AAID;AAnCI,GAAA;;AAsCP,MAAMC,qBAAqB,GAAG,OAAOlJ,MAAM,CAAb,YAAA,KAA9B,UAAA;;AAEA,MAAMmI,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAA;AAAA,WAChCJ,sBAAsB,CAAtBA,GAAAA,KAA+BA,sBAAsB,CAArDA,GAA+BA,EAA/BA,GADgC,IAAA;AAAlC,GAAA;;AAGA,MAAMK,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAA,KAAA,EAAA;AAAA,WAAWL,sBAAsB,CAAtBA,GAAAA,CAAX,KAAWA,CAAX;AAAlC,GAAA;;AAEA,MAAMa,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,QAAMO,IAAI,GAAGtF,QAAQrF,CAARqF,aAAAA,CAAb,kBAAaA,CAAb;AACA,WAAOsF,IAAI,GAAGA,IAAI,CAAP,IAAA,GAAX,SAAA;AAFF,GAAA;;AAKA,MAAMF,MAAM,GAAGC,qBAAqB,GAAA,UAAA,KAAA,EACkD;AAAA,QAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;;AAAA,QAAA,iBAAA,GAAA,IAAA,CAAlEL,YAAkE;AAAA,QAAlEA,YAAkE,GAAA,iBAAA,KAAA,KAAA,CAAA,GAAnD,KAAmD,GAAA,iBAAA;AAAA,QAAA,iBAAA,GAAA,IAAA,CAA5CC,YAA4C;AAAA,QAA5CA,YAA4C,GAAA,iBAAA,KAAA,KAAA,CAAA,GAA7B,KAA6B,GAAA,iBAAA;AAAA,QAAnB9F,OAAmB,GAAA,wBAAA,CAAA,IAAA,EAAA,SAAA,CAAA;;AAAA,WAAA,OAAA,CAAA,iBAAA,EAAA,UAAA,UAAA,EAAA;AAEhF,UAAIoG,UAAU,KAAd,SAAA,EAA8B;AAC5B,YAAMd,YAAY,GAAG,IAAA,YAAA,CAAA,KAAA,EAArB,OAAqB,CAArB;AACAN,QAAAA,0BAA0B,CAA1BA,IAAAA,CAAAA,YAAAA;;AACAM,QAAAA,YAAY,CAAZA,OAAAA,GAAuB,YAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAA,YAAA,EAAkBtI,MAAM,CAANA,KAAAA;AAClB,cAAA,YAAA,EAAkBsI,YAAY,CAAZA,KAAAA;AAVpBA,SAAAA;;AAYAA,QAAAA,YAAY,CAAZA,OAAAA,GAAuB,YAAM;AAC3B,cAAMe,KAAK,GAAGrB,0BAA0B,CAA1BA,OAAAA,CAAd,YAAcA,CAAd;;AACA,cAAIqB,KAAK,GAAG,CAAZ,CAAA,EAAgB;AACdrB,YAAAA,0BAA0B,CAA1BA,MAAAA,CAAAA,KAAAA,EAAAA,CAAAA;AACD;AAJHM,SAAAA;;AAMA,eAAA,YAAA;AACD;;AACD,aAAA,IAAA;AAzBgF,KAAA,CAAA;AADlD,GAAA,GA4BhC,YAAM,CA5BV,CAAA;AA8BA,MAAA,iBAAA;AACA,MAAMD,iBAAiB,GAAGa,qBAAqB,GAAA,QAAA,CAAA,YAC/B;AACV,QAAA,iBAAA,EAAuB,OAAA,iBAAA;AACvBI,IAAAA,iBAAiB,GAAGC,YAAY,CAAhCD,iBAAoBC,EAApBD;AAFU,WAAA,QAAA,CAAA,iBAAA,EAAA,UAAA,UAAA,EAAA;AAIVA,MAAAA,iBAAiB,GAAjBA,SAAAA;AACA,aAAA,UAAA;AALU,KAAA,CAAA;AAD+B,GAAA,CAAA,GAQ3C,YAAA;AAAA,WAAM/K,OAAO,CAAPA,OAAAA,CAAN,QAAMA,CAAN;AARJ,GAAA;ACvGA,MAAMiL,UAAU,GAAhB,MAAA;AACA,MAAMC,WAAW,GAAjB,OAAA;AACA,MAAMC,eAAe,GAAG5C,gBAAgB,CAAxC,OAAwC,CAAxC;;AAEO,MAAM6C,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AACtC,QAAMC,KAAK,GAAGC,kBAAd,EAAA;AACA,QAAMC,QAAQ,GAAGjG,QAAQ,CAARA,aAAAA,CAAjB,sBAAiBA,CAAjB;AACAiG,IAAAA,QAAQ,CAARA,OAAAA,GAAmBF,KAAK,KAAxBE,UAAAA;AACAC,IAAAA,QAAQ,CAARA,KAAQ,CAARA;;AACAD,IAAAA,QAAQ,CAARA,QAAAA,GAAoB,YAAM;AACxB,UAAIA,QAAQ,CAAZ,OAAA,EAAsB;AACpBE,QAAAA,kBAAkB,CAAlBA,UAAkB,CAAlBA;AACAD,QAAAA,QAAQ,CAARA,UAAQ,CAARA;AAFF,OAAA,MAGO;AACLC,QAAAA,kBAAkB,CAAlBA,WAAkB,CAAlBA;AACAD,QAAAA,QAAQ,CAARA,WAAQ,CAARA;AACD;AAPHD,KAAAA;AALK,GAAA;;AAgBP,MAAMD,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B,WAAOH,eAAe,CAAfA,GAAAA,KAAwBA,eAAe,CAAvCA,GAAwBA,EAAxBA,GAAP,UAAA;AADF,GAAA;;AAIA,MAAMM,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,KAAA,EAAW;AACpCN,IAAAA,eAAe,CAAfA,GAAAA,CAAAA,KAAAA;AACAK,IAAAA,QAAQ,CAARA,KAAQ,CAARA;AAFF,GAAA;;AAKA,MAAMA,QAAQ,GAAG,SAAXA,QAAW,CAAA,KAAA,EAAW;AAC1BlG,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,MAAAA,EAAAA,YAAAA,CAAAA,YAAAA,EAAAA,KAAAA;AADF,GAAA;;AC7BA,MAAMoG,mBAAmB,GAAGnD,gBAAgB,CAA5C,WAA4C,CAA5C;;AAEO,MAAMoD,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AAC1C,QAAMC,YAAY,GAAGtG,QAAQ,CAARA,aAAAA,CAArB,eAAqBA,CAArB;AACAsG,IAAAA,YAAY,CAAZA,OAAAA,GAAuBC,sBAAvBD,EAAAA;;AACAA,IAAAA,YAAY,CAAZA,QAAAA,GAAwB,YAAM;AAC5BE,MAAAA,sBAAsB,CAACF,YAAY,CAAnCE,OAAsB,CAAtBA;AACAC,MAAAA,kBAAkB,CAACH,YAAY,CAA/BG,OAAkB,CAAlBA;AAFFH,KAAAA;;AAIAG,IAAAA,kBAP0C,GAAA,CAAA;;AAU1ChG,IAAAA,UAAU,CAAC,YAAM;AACfT,MAAAA,QAAQ,CAARA,aAAAA,CAAAA,UAAAA,EAAAA,YAAAA,CAAAA,cAAAA,EAAAA,EAAAA;AADFS,KAAU,CAAVA;AAVK,GAAA;;AAeP,MAAMgG,kBAAkB,GAAG,SAArBA,kBAAqB,GAAsC;AAAA,QAArCpP,KAAqC,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAA7BkP,sBAAsB,EAAO;;AAC/D,QAAA,KAAA,EAAW;AACTG,MAAAA,eAAe;AADjB,KAAA,MAEO;AACLC,MAAAA,gBAAgB;AACjB;AALH,GAAA;;AAQA,MAAMJ,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAA;AAAA,WAAOH,mBAAmB,CAAnBA,GAAAA,KAA4BA,mBAAmB,CAA/CA,GAA4BA,EAA5BA,GAAP,IAAA;AAA/B,GAAA;;AAEA,MAAMI,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAA,KAAA,EAAA;AAAA,WAAWJ,mBAAmB,CAAnBA,GAAAA,CAAX,KAAWA,CAAX;AAA/B,GAAA;;AAEA,MAAMM,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B1G,IAAAA,QAAQ,CAARA,eAAAA,CAAAA,eAAAA,CAAAA,yBAAAA;AADF,GAAA;;AAIA,MAAM2G,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B3G,IAAAA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAAA,yBAAAA,EAAAA,EAAAA;AADF,GAAA;;ACnCO,MAAM4G,aAAa,GAAG,SAAhBA,aAAgB,CAAA,QAAA,EAAA,SAAA,EAAyB;AACpD,QAAMC,gBAAgB,GAAGjP,KAAK,CAALA,IAAAA,CACvBkP,QAAQ,CAARA,gBAAAA,CAAAA,IAAAA,MAAAA,CAAAA,6BAAAA,EADF,GACEA,CAAAA,CADuBlP,CAAzB;AAGAiP,IAAAA,gBAAgB,CAAhBA,OAAAA,CAAyB,UAAA,eAAA,EAAqB;AAC5C,UAAME,uBAAuB,GAAGC,eAAe,CAAfA,YAAAA,CAAhC,6BAAgCA,CAAhC;AACA,UAAMC,OAAO,GAAGC,aAAa,CAAA,uBAAA,EAA7B,SAA6B,CAA7B;;AACA,UAAA,OAAA,EAAa;AACXC,QAAAA,eAAe,CAAA,eAAA,EAAA,6BAAA,EAAfA,yBAAe,CAAfA;AACD;AALHN,KAAAA;AAQA,QAAMO,aAAa,GAAGxP,KAAK,CAALA,IAAAA,CAAWkP,QAAQ,CAARA,gBAAAA,CAAAA,IAAAA,MAAAA,CAAAA,yBAAAA,EAAjC,GAAiCA,CAAAA,CAAXlP,CAAtB;AACAwP,IAAAA,aAAa,CAAbA,OAAAA,CAAsB,UAAA,YAAA,EAAkB;AACtC,UAAML,uBAAuB,GAAGM,YAAY,CAAZA,YAAAA,CAAhC,yBAAgCA,CAAhC;AACA,UAAMJ,OAAO,GAAGC,aAAa,CAAA,uBAAA,EAA7B,SAA6B,CAA7B;;AACA,UAAI,CAAJ,OAAA,EAAc;AACZC,QAAAA,eAAe,CAAA,YAAA,EAAA,yBAAA,EAAfA,6BAAe,CAAfA;AACD;AALHC,KAAAA;AAbK,GAAA;;AAsBP,MAAMF,aAAa,GAAG,SAAhBA,aAAgB,CAAA,uBAAA,EAAA,SAAA,EAAwC;AAC5D,QAAMI,SAAS,GAAGC,cAAc,CAAhC,uBAAgC,CAAhC;AACA,WAAO,MAAM,CAAN,IAAA,CAAA,SAAA,EAAA,IAAA,CAA4B,UAAA,GAAA,EAAS;AAC1C,UAAID,SAAS,CAATA,GAAAA,KAAJ,GAAA,EAA2B;AACzB,eAAA,KAAA;AAFwC,OAAA,CAAA;;;AAK1C,UAAIA,SAAS,CAATA,KAAAA,KAAJ,SAAA,EAAmC;AACjC,eAAA,IAAA;AACD;;AACD,UAAIA,SAAS,CAATA,KAAAA,KAAoBE,SAAS,CAAjC,GAAiC,CAAjC,EAAwC;AACtC,eAAA,IAAA;AACD;;AACD,aAAA,KAAA;AAXF,KAAO,CAAP;AAFF,GAAA;;AAiBA,MAAMD,cAAc,GAAG,SAAjBA,cAAiB,CAAA,uBAAA,EAA6B;AAClD,QAAMrJ,UAAU,GAAG6I,uBAAuB,CAAvBA,OAAAA,CAAnB,GAAmBA,CAAnB;;AACA,QAAI7I,UAAU,KAAK,CAAnB,CAAA,EAAuB;AACrB,aAAO;AACL/G,QAAAA,GAAG,EADE,uBAAA;AAELE,QAAAA,KAAK,EAAEoQ;AAFF,OAAP;AAID;;AACD,WAAO;AACLtQ,MAAAA,GAAG,EAAE4P,uBAAuB,CAAvBA,KAAAA,CAAAA,CAAAA,EADA,UACAA,CADA;AAEL1P,MAAAA,KAAK,EAAE0P,uBAAuB,CAAvBA,KAAAA,CAA8B7I,UAAU,GAAxC6I,CAAAA;AAFF,KAAP;AARF,GAAA;;AAcA,MAAMW,6BAA6B,GAAnC,WAAA;AACA,MAAMC,yBAAyB,GAA/B,kBAAA;;AAEA,MAAMR,eAAe,GAAG,SAAlBA,eAAkB,CAAA,IAAA,EAAA,IAAA,EAAA,OAAA,EAAyB;AAC/CS,IAAAA,IAAI,CAAJA,YAAAA,CAAAA,OAAAA,EAA2BA,IAAI,CAAJA,YAAAA,CAA3BA,IAA2BA,CAA3BA;AACAA,IAAAA,IAAI,CAAJA,eAAAA,CAAAA,IAAAA;AAFF,GAAA;;ACxDO,MAAMC,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAA,eAAA,EAAqB;AAC7D,WAAOC,gBAAgB,CAAA,kBAAA,EAAvB,eAAuB,CAAvB;AADK,GAAA;;AAIP,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAA,IAAA,EAA2B;AAAA,QAAxBC,OAAwB,GAAA,IAAA,CAAxBA,OAAwB;AAAA,QAAf5P,QAAe,GAAA,IAAA,CAAfA,QAAe;AAC/C,QAAI6P,YAAY,GAAGD,OAAnB,EAAA;;AAEA,QAAM5E,GAAG,GAAG,SAANA,GAAM,GAAA;AAAA,aAAM4E,OAAN,EAAA;AAAZ,KAAA;;AAEA,QAAME,OAAO,GAAGC,YAAhB,EAAA;;AAEA,QAAI7P,UAAU,GAAG,SAAA,UAAA,GAAM,CAAvB,CAAA;;AACA,QAAA,QAAA,EAAc;AACZA,MAAAA,UAAU,GAAGF,QAAQ,CAAC,YAAM;AAC1B,YAAMf,KAAK,GAAG2Q,OAAd,EAAA;;AACA,YAAI3Q,KAAK,KAAT,YAAA,EAA4B;AAC1B,cAAM+Q,aAAa,GAAnB,KAAA;AACAH,UAAAA,YAAY,GAAZA,KAAAA;AACAC,UAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,EAAAA,aAAAA;AACD;AANH5P,OAAqB,CAArBA;AAQD;;AAED,WAAO;AAAE8K,MAAAA,GAAG,EAAL,GAAA;AAAO8E,MAAAA,OAAO,EAAd,OAAA;AAAgB5P,MAAAA,UAAU,EAAVA;AAAhB,KAAP;AAnBF,GAAA;;AAsBA,MAAM6P,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAME,aAAa,GAAnB,EAAA;;AAEA,QAAMC,MAAM,GAAG,SAATA,MAAS,CAAA,QAAA,EAAc;AAC3BD,MAAAA,aAAa,CAAbA,IAAAA,CAAAA,QAAAA;AACA,aAAO,YAAM;AACX,YAAM7C,KAAK,GAAG6C,aAAa,CAAbA,OAAAA,CAAd,QAAcA,CAAd;;AACA,YAAI7C,KAAK,GAAG,CAAZ,CAAA,EAAgB;AACd6C,UAAAA,aAAa,CAAbA,MAAAA,CAAAA,KAAAA,EAAAA,CAAAA;AACD;AAJH,OAAA;AAFF,KAAA;;AAUA,QAAMjD,MAAM,GAAG,SAATA,MAAS,GAAa;AAAA,WAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAT9K,IAAS,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAATA,QAAAA,IAAS,CAAA,IAAA,CAATA,GAAS,SAAA,CAAA,IAAA,CAATA;AAAS;;AAC1B+N,MAAAA,aAAa,CAAbA,KAAAA,GAAAA,OAAAA,CAA8B,UAAA,QAAA,EAAc;AAC1ChQ,QAAAA,QAAQ,CAARA,KAAAA,CAAAA,KAAAA,CAAAA,EAAAA,IAAAA;AADFgQ,OAAAA;AADF,KAAA;;AAMA,WAAO;AAAEC,MAAAA,MAAM,EAAR,MAAA;AAAUlD,MAAAA,MAAM,EAANA;AAAV,KAAP;AAnBF,GAAA;;AAsBA,MAAMmD,kBAAkB,GAAGR,aAAa,CAAC;AACvCnK,IAAAA,IAAI,EADmC,cAAA;AAEvCoK,IAAAA,OAAO,EAAE,SAAA,OAAA,GAAA;AAAA,aAAM7L,MAAM,CAAZ,UAAA;AAF8B,KAAA;AAGvC/D,IAAAA,QAAQ,EAAE,SAAA,QAAA,CAAA,QAAA,EAAc;AACtB+D,MAAAA,MAAM,CAANA,gBAAAA,CAAAA,QAAAA,EAAAA,QAAAA;AACAA,MAAAA,MAAM,CAANA,gBAAAA,CAAAA,mBAAAA,EAAAA,QAAAA;AACA,aAAO,YAAM;AACXA,QAAAA,MAAM,CAANA,mBAAAA,CAAAA,QAAAA,EAAAA,QAAAA;AACAA,QAAAA,MAAM,CAANA,mBAAAA,CAAAA,mBAAAA,EAAAA,QAAAA;AAFF,OAAA;AAID;AAVsC,GAAD,CAAxC;;AAaA,MAAM2L,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,OAAA,EAAA,eAAA,EAA8B;AACrD,QAAMU,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B,UAAMnR,KAAK,GAAGoR,OAAO,CAArB,GAAcA,EAAd;;AAEA,UAAIpR,KAAK,GAAT,eAAA,EAA6B;AAC3B,eAAA,OAAA;AACD;;AACD,UAAIA,KAAK,GAAT,eAAA,EAA6B;AAC3B,eAAA,OAAA;AACD;;AACD,aAAA,QAAA;AATF,KAAA;;AAYA,QAAIqR,sBAAsB,GAAGF,kBAA7B,EAAA;;AAEA,QAAMG,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,aAAOF,OAAO,CAAPA,GAAAA,KAAP,eAAA;AADF,KAAA;;AAIA,QAAMG,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,aAAOH,OAAO,CAAPA,GAAAA,KAAP,eAAA;AADF,KAAA;;AAIA,QAAMI,iBAAiB,GAAGV,YAA1B,EAAA;AAEAM,IAAAA,OAAO,CAAPA,OAAAA,CAAAA,MAAAA,CAAuB,YAAM;AAC3B,UAAMK,eAAe,GAAGN,kBAAxB,EAAA;;AACA,UAAIM,eAAe,KAAnB,sBAAA,EAAgD;AAC9C,YAAMC,uBAAuB,GAA7B,sBAAA;AACAL,QAAAA,sBAAsB,GAAtBA,eAAAA;AACAG,QAAAA,iBAAiB,CAAjBA,MAAAA,CAAAA,eAAAA,EAAAA,uBAAAA;AACD;AANHJ,KAAAA;AASA,WAAO;AACLE,MAAAA,OAAO,EADF,OAAA;AAELC,MAAAA,OAAO,EAFF,OAAA;AAGLV,MAAAA,OAAO,EAAEW;AAHJ,KAAP;AAlCF,GAAA,C,CAAA;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzGA,MAAMG,mBAAmB,GAAzB,GAAA;;AAEO,MAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA,IAAA,EAAiC;AAAA,QAA9BC,uBAA8B,GAAA,IAAA,CAA9BA,uBAA8B,CAAA,CACvE;;AACAC,IAAAA,uBAAuB;AACvBtI,IAAAA,sBAAsB,CAACb,QAAQ,CAARA,aAAAA,CAHgD,sBAGhDA,CAAD,CAAtBa,CAHuE,CAAA;;AAMvE,QAAMuI,KAAK,GAAGpJ,QAAQ,CAARA,aAAAA,CAAd,aAAcA,CAAd;AACA,QAAMqJ,mBAAmB,GAAGxB,0BAA0B,CAAtD,mBAAsD,CAAtD;;AACA,QAAMyB,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAM;AACtCC,MAAAA,WAAW,CAAA,KAAA,EAAXA,mBAAW,CAAXA;AADF,KAAA;;AAGAD,IAAAA,yBAAyB;AACzBD,IAAAA,mBAAmB,CAAnBA,OAAAA,CAAAA,MAAAA,CAAAA,yBAAAA;AACAD,IAAAA,KAAK,CAALA,KAAAA,GAAAA,uBAAAA;AACAG,IAAAA,WAAW,CAAA,KAAA,EAAXA,mBAAW,CAAXA;AAEAlI,IAAAA,sBAAsB,CAACrB,QAAQ,CAARA,aAAAA,CAAvBqB,OAAuBrB,CAAD,CAAtBqB;AACAR,IAAAA,sBAAsB,CAACb,QAAQ,CAARA,aAAAA,CAAvBa,OAAuBb,CAAD,CAAtBa;;AAEA1E,IAAAA,MAAM,CAANA,MAAAA,CAAAA,SAAAA,CAAAA,sBAAAA,CAAAA,IAAAA,CAAoD,UAAA,KAAA,EAAoC;AAAA,UAAjChB,MAAiC,GAAA,KAAA,CAAjCA,MAAiC;AAAA,UAAzBqO,SAAyB,GAAA,KAAA,CAAzBA,SAAyB;AAAA,UAAdC,OAAc,GAAA,KAAA,CAAdA,OAAc;AACtF,UAAMvE,SAAS,GAAG;AAAE/J,QAAAA,MAAM,EAAR,MAAA;AAAUqO,QAAAA,SAAS,EAAnB,SAAA;AAAqBC,QAAAA,OAAO,EAAPA;AAArB,OAAlB;AACAN,MAAAA,uBAAuB,CAAvBA,SAAuB,CAAvBA;AAEA,UAAMO,mBAAmB,GAAzB,uBAAA;AACA,UAAMvE,iBAAiB,GAAGwE,cAAc,CAAdA,cAAAA,CAAAA,mBAAAA,IACtB/N,IAAI,CAAJA,KAAAA,CAAW+N,cAAc,CAAdA,OAAAA,CADWA,mBACXA,CAAX/N,CADsB+N,GAA1B,SAAA;AAGAjF,MAAAA,qBAAqB,CAAA,uBAAA,EAAA,SAAA,EAArBA,iBAAqB,CAArBA;AAEAiF,MAAAA,cAAc,CAAdA,OAAAA,CAAAA,uBAAAA,EAAgD/N,IAAI,CAAJA,SAAAA,CAAhD+N,SAAgD/N,CAAhD+N;AAVFxN,KAAAA;AAnBK,GAAA;;AAiCP,MAAMgN,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAqD;AAAA,QAAA,KAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;AAAA,QAAA,YAAA,GAAA,KAAA,CAAlDhO,MAAkD;AAAA,QAAlDA,MAAkD,GAAA,YAAA,KAAA,KAAA,CAAA,GAAzC,SAAyC,GAAA,YAAA;AAAA,QAA9BqO,SAA8B,GAAA,KAAA,CAA9BA,SAA8B;AAAA,QAAnBC,OAAmB,GAAA,KAAA,CAAnBA,OAAmB;;AACnF,QAAMG,kBAAkB,GAAG5J,QAAQ,CAARA,aAAAA,CAA3B,sBAA2BA,CAA3B;AACA4G,IAAAA,aAAa,CAAA,kBAAA,EAAqB;AAAE1B,MAAAA,SAAS,EAAE/J;AAAb,KAArB,CAAbyL;AACA,QAAMiD,WAAW,GAAGD,kBAAkB,CAAlBA,aAAAA,CAApB,oBAAoBA,CAApB;;AAEAC,IAAAA,WAAW,CAAXA,aAAAA,CAAAA,QAAAA,EAAAA,OAAAA,GAA8C,YAAA;AAAA,aAAMvG,aAAa,CAAnB,kBAAmB,CAAnB;AAA9CuG,KAAAA;;AACAA,IAAAA,WAAW,CAAXA,aAAAA,CAAAA,UAAAA,EAAAA,WAAAA,GAAoDC,WAAW,CAAC;AAC9D3O,MAAAA,MAAM,EADwD,MAAA;AAE9DqO,MAAAA,SAAS,EAFqD,SAAA;AAG9DC,MAAAA,OAAO,EAAPA;AAH8D,KAAD,CAA/DI;AANF,GAAA;;AAaA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAAA,KAAA,EAAoC;AAAA,QAAjC3O,MAAiC,GAAA,KAAA,CAAjCA,MAAiC;AAAA,QAAzBqO,SAAyB,GAAA,KAAA,CAAzBA,SAAyB;AAAA,QAAdC,OAAc,GAAA,KAAA,CAAdA,OAAc;;AACtD,QAAItO,MAAM,KAAV,WAAA,EAA4B;AAC1B,aAAA,0BAAA,MAAA,CAAiCsO,OAAO,GAAxC,SAAA,EAAA,IAAA,CAAA;AACD;;AAED,QAAItO,MAAM,KAAV,SAAA,EAA0B;AACxB,aAAA,uBAAA,MAAA,CAA8BsO,OAAO,GAArC,SAAA,EAAA,IAAA,CAAA;AACD;;AAED,WAAA,EAAA;AATF,GAAA;;AAYA,MAAMF,WAAW,GAAG,SAAdA,WAAc,CAAA,KAAA,EAAA,mBAAA,EAAgC;AAClD,QAAMQ,IAAI,GAAGV,mBAAmB,CAAnBA,OAAAA,KAAAA,EAAAA,GAAb,EAAA;;AACA,QAAID,KAAK,CAALA,KAAAA,CAAAA,MAAAA,GAAJ,IAAA,EAA+B;AAC7BA,MAAAA,KAAK,CAALA,KAAAA,CAAAA,KAAAA,GAAAA,GAAAA,MAAAA,CAAAA,IAAAA,EAAAA,IAAAA,CAAAA;AADF,KAAA,MAEO;AACLA,MAAAA,KAAK,CAALA,KAAAA,CAAAA,KAAAA,GAAAA,GAAAA,MAAAA,CAAuBA,KAAK,CAALA,KAAAA,CAAvBA,MAAAA,EAAAA,IAAAA,CAAAA;AACD;AANH,GAAA,C,CClEA;;;AACA,MAAA,cAAA,GAAe,SAAf,cAAe,CAAA,GAAA,EAAS;AACtB,QAAIxR,KAAK,CAALA,OAAAA,CAAJ,GAAIA,CAAJ,EAAwB,OAAA,GAAA;AAD1B,GAAA;;ACDe,WAAA,qBAAA,CAAA,GAAA,EAAA,CAAA,EAAuC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAIoS,EAAE,GACJlR,GAAG,IAAHA,IAAAA,GAAAA,IAAAA,GAEK,OAAA,MAAA,KAAA,WAAA,IAAiCA,GAAG,CAACH,MAAM,CAA5C,QAAqC,CAApC,IAA0DG,GAAG,CAHpE,YAGoE,CAHpE;;AAIA,QAAIkR,EAAE,IAAN,IAAA,EAAgB;AAChB,QAAIC,IAAI,GAAR,EAAA;AACA,QAAIC,EAAE,GAAN,IAAA;AACA,QAAIC,EAAE,GAAN,KAAA;;AACA,QAAA,EAAA,EAAA,EAAA;;AACA,QAAI;AACF,WAAKH,EAAE,GAAGA,EAAE,CAAFA,IAAAA,CAAV,GAAUA,CAAV,EAAwB,EAAEE,EAAE,GAAG,CAACE,EAAE,GAAGJ,EAAE,CAAR,IAAMA,EAAN,EAA/B,IAAwB,CAAxB,EAAuDE,EAAE,GAAzD,IAAA,EAAkE;AAChED,QAAAA,IAAI,CAAJA,IAAAA,CAAUG,EAAE,CAAZH,KAAAA;;AACA,YAAI9T,CAAC,IAAI8T,IAAI,CAAJA,MAAAA,KAAT,CAAA,EAA4B;AAC7B;AAJH,KAAA,CAKE,OAAA,GAAA,EAAY;AACZE,MAAAA,EAAE,GAAFA,IAAAA;AACAE,MAAAA,EAAE,GAAFA,GAAAA;AAPF,KAAA,SAQU;AACR,UAAI;AACF,YAAI,CAAA,EAAA,IAAOL,EAAE,CAAFA,QAAE,CAAFA,IAAX,IAAA,EAAiCA,EAAE,CAAFA,QAAE,CAAFA;AADnC,OAAA,SAEU;AACR,YAAA,EAAA,EAAQ,MAAA,EAAA;AACT;AACF;;AACD,WAAA,IAAA;AACD;;ACnCD,MAAA,eAAA,GAAe,SAAf,eAAe,GAAM;AACnB,UAAM,IAAA,SAAA,CAAN,4IAAM,CAAN;AADF,GAAA;;ACKA,MAAA,cAAA,GAAe,SAAf,cAAe,CAAA,GAAA,EAAA,CAAA,EAAA;AAAA,WACbM,cAAc,CAAdA,GAAc,CAAdA,IACAC,qBAAoB,CAAA,GAAA,EADpBD,CACoB,CADpBA,IAEAE,0BAA0B,CAAA,GAAA,EAF1BF,CAE0B,CAF1BA,IAGAG,eAJa,EAAA;AAAf,GAAA;;ACHO,MAAMC,oBAAoB,GAA1B,WAAA;;ACCA,MAAMC,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAA,IAAA,EAA2B;AAAA,QAAxBC,OAAwB,GAAA,IAAA,CAAxBA,OAAwB;AAAA,QAAfC,QAAe,GAAA,IAAA,CAAfA,QAAe;;AACpE,QAAI,OAAA,OAAA,KAAJ,WAAA,EAAoC;AAClC,UAAIH,oBAAoB,IAAxB,QAAA,EAAsC;AACpC,eAAA,oBAAA;AACD;;AAED,UAAMvR,IAAI,GAAG/B,MAAM,CAANA,IAAAA,CAAb,QAAaA,CAAb;;AACA,UAAI+B,IAAI,CAAJA,MAAAA,KAAJ,CAAA,EAAuB;AACrB,eAAOA,IAAI,CAAX,CAAW,CAAX;AACD;;AAED,YAAM,IAAA,KAAA,CAAU2R,8BAA8B,CAAC;AAAED,QAAAA,QAAQ,EAARA;AAAF,OAAD,CAAxC,CAAN;AACD;;AAED,QAAID,OAAO,IAAPA,QAAAA,KAAJ,KAAA,EAAmC;AACjC,YAAM,IAAA,KAAA,CAAUE,8BAA8B,CAAC;AAAEF,QAAAA,OAAO,EAAT,OAAA;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAxC,CAAN;AACD;;AAED,WAAA,OAAA;AAlBK,GAAA;;AAqBP,MAAMC,8BAA8B,GAAG,SAAjCA,8BAAiC,CAAA,KAAA,EAAA;AAAA,QAAA,qBAAA;;AAAA,QAAGC,SAAH,GAAA,KAAA,CAAA,SAAA;AAAA,QAAcF,QAAd,GAAA,KAAA,CAAA,QAAA;AAAA,WACrCnT,qBAAqB,CAAA,qBAAA,GAAA,qBAAA,GAAA,EAAA,EAAA,eAAA,CAAA,qBAAA,EAAA,sBAAA,EACON,MAAM,CAANA,IAAAA,CADP,QACOA,CADP,CAAA,EAAA,eAAA,CAAA,qBAAA,EAAA,qBAAA,EAAA,SAAA,CAAA,EADgB,qBAChB,EADgB;AAAvC,GAAA;;ACxBO,MAAM4T,UAAU,GAAG,SAAbA,UAAa,CAAA,MAAA,EAAA,MAAA,EAAoB;AAC5C,QAAMC,KAAK,GAAGhV,MAAM,CAANA,KAAAA,CAAd,MAAcA,CAAd;AACA,WAAOgV,KAAK,IAAIA,KAAK,CAALA,MAAAA,GAATA,CAAAA,GAA4BA,KAAK,CAALA,CAAK,CAALA,IAA5BA,SAAAA,GAAP,SAAA;AAFK,GAAA;;AAKA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAAA,MAAA,EAAA,MAAA,EAAoB;AAC7C,QAAMD,KAAK,GAAGhV,MAAM,CAANA,KAAAA,CAAd,MAAcA,CAAd;AACA,WAAOgV,KAAK,IAAIA,KAAK,CAALA,MAAAA,GAATA,CAAAA,GAA4BA,KAAK,CAALA,CAAK,CAALA,IAA5BA,SAAAA,GAAP,SAAA;AAFK,GAAA;;AAKA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,SAAA,EAAe;AAC/C,WAAOH,UAAU,CAAA,4BAAA,EAAVA,SAAU,CAAVA,IAAP,SAAA;AADK,GAAA;;ACRA,MAAMI,aAAa,GAAG,SAAhBA,aAAgB,GAAA;AAAA,WAAMC,oBAAkB,CAAClP,MAAM,CAA/B,SAAwB,CAAxB;AAAtB,GAAA;;AAEP,MAAMkP,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA,IAAA,EAA+B;AAAA,QAA5BC,SAA4B,GAAA,IAAA,CAA5BA,SAA4B;AAAA,QAAjBC,UAAiB,GAAA,IAAA,CAAjBA,UAAiB;;AACxD,QAAI,aAAA,IAAA,CAAJ,SAAI,CAAJ,EAAkC;AAChC,aAAO;AACL3N,QAAAA,IAAI,EADC,SAAA;AAEL4N,QAAAA,OAAO,EAAER,UAAU,CAAA,2BAAA,EAAA,UAAA;AAFd,OAAP;AAID;;AACD,WAAA,IAAA;AAPF,GAAA;;ACFO,MAAMS,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAA;AAAA,WAAMC,oBAAkB,CAACvP,MAAM,CAANA,SAAAA,CAAzB,SAAwB,CAAxB;AAA/B,GAAA;;AAEP,MAAMuP,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA,SAAA,EAAe;AACxC,QAAI,gBAAA,IAAA,CAAJ,SAAI,CAAJ,EAAqC;AACnC,aAAO;AACL9N,QAAAA,IAAI,EADC,IAAA;AAEL4N,QAAAA,OAAO,EAAER,UAAU,CAAA,gCAAA,EAAA,SAAA;AAFd,OAAP;AAID;;AACD,WAAA,IAAA;AAPF,GAAA;;ACFO,MAAMW,WAAW,GAAG,SAAdA,WAAc,GAAA;AAAA,WAAMD,oBAAkB,CAACvP,MAAM,CAANA,SAAAA,CAAzB,SAAwB,CAAxB;AAApB,GAAA;;AAEP,MAAMuP,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA,SAAA,EAAe;AACxC;AACA,QAAI,SAAA,IAAA,CAAJ,SAAI,CAAJ,EAA8B;AAC5B,aAAO;AACL9N,QAAAA,IAAI,EADC,OAAA;AAEL4N,QAAAA,OAAO,EACLL,kBAAkB,CAAlBA,SAAkB,CAAlBA,IAAiCH,UAAU,CAAA,iCAAA,EAAA,SAAA;AAHxC,OAAP;AAHsC,KAAA,CAAA;;;AAWxC,QAAI,eAAA,IAAA,CAAJ,SAAI,CAAJ,EAAoC;AAClC,aAAO;AACLpN,QAAAA,IAAI,EADC,OAAA;AAEL4N,QAAAA,OAAO,EAAER,UAAU,CAAA,0BAAA,EAAVA,SAAU,CAAVA,IAAqDG,kBAAkB,CAAA,SAAA;AAF3E,OAAP;AAID;;AAED,WAAA,IAAA;AAlBF,GAAA;;ACFO,MAAMS,UAAU,GAAG,SAAbA,UAAa,GAAA;AAAA,WAAMF,oBAAkB,CAACvP,MAAM,CAANA,SAAAA,CAAzB,SAAwB,CAAxB;AAAnB,GAAA;;AAEP,MAAMuP,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA,SAAA,EAAe;AACxC,QAAI,iBAAA,IAAA,CAAJ,SAAI,CAAJ,EAAsC;AACpC,aAAO;AACL9N,QAAAA,IAAI,EADC,MAAA;AAEL4N,QAAAA,OAAO,EAAEN,WAAW,CAAA,kCAAA,EAAA,SAAA;AAFf,OAAP;AAID;;AACD,WAAA,IAAA;AAPF,GAAA;;ACFO,MAAMW,aAAa,GAAG,SAAhBA,aAAgB,GAAA;AAAA,WAAMH,oBAAkB,CAACvP,MAAM,CAANA,SAAAA,CAAzB,SAAwB,CAAxB;AAAtB,GAAA;;AAEP,MAAMuP,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA,SAAA,EAAe;AACxC,QAAI,2BAAA,IAAA,CAAJ,SAAI,CAAJ,EAAgD;AAC9C,aAAO;AACL9N,QAAAA,IAAI,EADC,SAAA;AAEL4N,QAAAA,OAAO,EAAER,UAAU,CAAA,mDAAA,EAAA,SAAA;AAFd,OAAP;AAID;;AACD,WAAA,IAAA;AAPF,GAAA;;ACFO,MAAMc,YAAY,GAAG,SAAfA,YAAe,GAAA;AAAA,WAAMJ,oBAAkB,CAACvP,MAAM,CAANA,SAAAA,CAAzB,SAAwB,CAAxB;AAArB,GAAA;;AAEP,MAAMuP,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA,SAAA,EAAe;AACxC,QAAI,YAAA,IAAA,CAAJ,SAAI,CAAJ,EAAiC;AAC/B,aAAO;AACL9N,QAAAA,IAAI,EADC,QAAA;AAEL4N,QAAAA,OAAO,EACLR,UAAU,CAAA,oCAAA,EAAVA,SAAU,CAAVA,IACAG,kBAAkB,CAAA,SAAA;AAJf,OAAP;AAMD;;AAED,QAAI,qBAAA,IAAA,CAAJ,SAAI,CAAJ,EAA0C;AACxC,aAAO;AACLvN,QAAAA,IAAI,EADC,QAAA;AAEL4N,QAAAA,OAAO,EAAER,UAAU,CAAA,0CAAA,EAAA,SAAA;AAFd,OAAP;AAID;;AAED,WAAA,IAAA;AAjBF,GAAA;;ACFO,MAAMe,YAAY,GAAG,SAAfA,YAAe,GAAA;AAAA,WAAML,kBAAkB,CAACvP,MAAM,CAANA,SAAAA,CAAzB,SAAwB,CAAxB;AAArB,GAAA;;AAEP,MAAMuP,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,SAAA,EAAe;AACxC,QAAI,sBAAA,IAAA,CAAJ,SAAI,CAAJ,EAA2C;AACzC,aAAO;AACL9N,QAAAA,IAAI,EADC,QAAA;AAEL4N,QAAAA,OAAO,EAAEL,kBAAkB,CAAA,SAAA;AAFtB,OAAP;AAID;;AACD,WAAA,IAAA;AAPF,GAAA;;ACJO,MAAMa,cAAc,GAAG,SAAjBA,cAAiB,GAAA;AAAA,WAAA,IAAA;AAAvB,GAAA,C,CAAA;;;ACEA,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAA;AAAA,WAAMZ,kBAAkB,CAAClP,MAAM,CAA/B,SAAwB,CAAxB;AAAlB,GAAA;;AAEP,MAAMkP,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,IAAA,EAA+B;AAAA,QAA5BC,SAA4B,GAAA,IAAA,CAA5BA,SAA4B;AAAA,QAAjBC,UAAiB,GAAA,IAAA,CAAjBA,UAAiB;;AACxD,QAAI,UAAA,IAAA,CAAJ,SAAI,CAAJ,EAA+B;AAC7B,aAAO;AACL3N,QAAAA,IAAI,EADC,KAAA;AAEL4N,QAAAA,OAAO,EAAER,UAAU,CAAA,sBAAA,EAAA,UAAA;AAFd,OAAP;AAID;;AACD,QAAI,QAAA,IAAA,CAAJ,SAAI,CAAJ,EAA6B;AAC3B,aAAO;AACLpN,QAAAA,IAAI,EADC,KAAA;AAEL4N,QAAAA,OAAO,EAAER,UAAU,CAAA,sBAAA,EAAA,UAAA;AAFd,OAAP;AAID;;AACD,WAAA,IAAA;AAbF,GAAA,C,CCJA;;;AAaA,MAAMkB,eAAe,GAAG,SAAlBA,eAAkB,CAAA,SAAA,EAAA;AAAA,WAAe,YAAM;AAC3C,UAAI/V,CAAC,GAAL,CAAA;;AACA,aAAOA,CAAC,GAAGgW,SAAS,CAApB,MAAA,EAA6B;AAC3B,YAAMC,SAAQ,GAAGD,SAAS,CAA1B,CAA0B,CAA1B;AACAhW,QAAAA,CAAC;;AACD,YAAM6I,MAAM,GAAGoN,SAAf,EAAA;;AACA,YAAA,MAAA,EAAY;AACV,iBAAA,MAAA;AACD;AACF;;AACD,aAAA,IAAA;AAVsB,KAAA;AAAxB,GAAA;;AAaA,MAAMA,QAAQ,GAAGF,eAAe,CAAC,CAAA,WAAA,EAAA,sBAAA,EAAA,UAAA,EAAA,aAAA,EAAA,YAAA,EAAA,YAAA,EAAA,cAAA,EAAA,SAAA,EAAjC,aAAiC,CAAD,CAAhC;;AAYO,MAAMG,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACjC,QAAA,IAAA,GAAgDD,QAAQ,MAAxD,EAAA;AAAA,QAAA,SAAA,GAAA,IAAA,CAAA,IAAA;AAAA,QAAQxO,IAAR,GAAA,SAAA,KAAA,KAAA,CAAA,GAAA,OAAA,GAAA,SAAA;AAAA,QAAA,YAAA,GAAA,IAAA,CAAA,OAAA;AAAA,QAAwB4N,OAAxB,GAAA,YAAA,KAAA,KAAA,CAAA,GAAA,SAAA,GAAA,YAAA;;AAEA,WAAO;AACL5N,MAAAA,IAAI,EAAE0O,aAAa,CADd,IACc,CADd;AAELd,MAAAA,OAAO,EAAEe,gBAAgB,CAAA,OAAA;AAFpB,KAAP;AAHK,GAAA;;AASP,MAAMD,aAAa,GAAG,SAAhBA,aAAgB,CAAA,IAAA,EAAU;AAC9B,WAAO1O,IAAI,CAAX,WAAOA,EAAP;AADF,GAAA;;AAIA,MAAM2O,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,OAAA,EAAa;AACpC,QAAIf,OAAO,CAAPA,OAAAA,CAAAA,GAAAA,IAAuB,CAA3B,CAAA,EAA+B;AAC7B,UAAM9N,KAAK,GAAG8N,OAAO,CAAPA,KAAAA,CADe,GACfA,CAAd,CAD6B,CAAA;;AAG7B,aAAO9N,KAAK,CAALA,KAAAA,CAAAA,CAAAA,EAAAA,CAAAA,EAAAA,IAAAA,CAAP,GAAOA,CAAP;AACD;;AAED,QAAI8N,OAAO,CAAPA,OAAAA,CAAAA,GAAAA,IAAuB,CAA3B,CAAA,EAA+B;AAC7B,UAAM9N,MAAK,GAAG8N,OAAO,CAAPA,KAAAA,CADe,GACfA,CAAd,CAD6B,CAAA;;;AAG7B,aAAO9N,MAAK,CAALA,KAAAA,CAAAA,CAAAA,EAAAA,CAAAA,EAAAA,IAAAA,CAAP,GAAOA,CAAP;AACD;;AAED,WAAA,OAAA;AAbF,GAAA;;ACnDO,MAAM8O,cAAc,GAAG,SAAjBA,cAAiB,CAAA,KAAA,EAAW;AACvC,QAAI,OAAA,KAAA,KAAJ,QAAA,EAA+B;AAC7B,aAAOC,eAAe,CAAtB,KAAsB,CAAtB;AACD;;AAED,QAAI,OAAA,KAAA,KAAJ,QAAA,EAA+B;AAC7B,aAAOC,eAAe,CAAtB,KAAsB,CAAtB;AACD;;AAED,UAAM,IAAA,SAAA,CAAcC,uBAAuB,CAAC;AAAEnB,MAAAA,OAAO,EAAEnU;AAAX,KAAD,CAArC,CAAN;AATK,GAAA;;AAYP,MAAMoV,eAAe,GAAG,SAAlBA,eAAkB,CAAA,MAAA,EAAY;AAClC,WAAO;AACLG,MAAAA,KAAK,EADA,MAAA;AAELC,MAAAA,KAAK,EAFA,CAAA;AAGLC,MAAAA,KAAK,EAAE;AAHF,KAAP;AADF,GAAA;;AAQA,MAAMJ,eAAe,GAAG,SAAlBA,eAAkB,CAAA,MAAA,EAAY;AAClC,QAAIzW,MAAM,CAANA,OAAAA,CAAAA,GAAAA,IAAsB,CAA1B,CAAA,EAA8B;AAC5B,UAAMyH,KAAK,GAAGzH,MAAM,CAANA,KAAAA,CAAd,GAAcA,CAAd;AACA,aAAO;AACL2W,QAAAA,KAAK,EAAEG,MAAM,CAACrP,KAAK,CADd,CACc,CAAN,CADR;AAELmP,QAAAA,KAAK,EAAEnP,KAAK,CAALA,CAAK,CAALA,GAAWqP,MAAM,CAACrP,KAAK,CAAvBA,CAAuB,CAAN,CAAjBA,GAFF,CAAA;AAGLoP,QAAAA,KAAK,EAAEpP,KAAK,CAALA,CAAK,CAALA,GAAWqP,MAAM,CAACrP,KAAK,CAAvBA,CAAuB,CAAN,CAAjBA,GAA8B;AAHhC,OAAP;AAKD;;AAED,QAAImE,KAAK,CAAT,MAAS,CAAT,EAAmB;AACjB,aAAO;AACL+K,QAAAA,KAAK,EADA,CAAA;AAELC,QAAAA,KAAK,EAFA,CAAA;AAGLC,QAAAA,KAAK,EAAE;AAHF,OAAP;AAKD;;AAED,WAAO;AACLF,MAAAA,KAAK,EAAEG,MAAM,CADR,MACQ,CADR;AAELF,MAAAA,KAAK,EAFA,CAAA;AAGLC,MAAAA,KAAK,EAAE;AAHF,KAAP;AAlBF,GAAA;;AAyBA,MAAMH,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAA,IAAA,EAAA;AAAA,QAAGtV,KAAH,GAAA,IAAA,CAAA,KAAA;AAAA,WAAA,+CAAA,MAAA,CAAA,KAAA,CAAA;AAAhC,GAAA;;AC3CO,MAAM2V,cAAc,GAAG,SAAjBA,cAAiB,CAAA,QAAA,EAAA,QAAA,EAAwB;AACpD,QAAMC,gBAAgB,GAAGT,cAAc,CAAvC,QAAuC,CAAvC;AACA,QAAMU,gBAAgB,GAAGV,cAAc,CAAvC,QAAuC,CAAvC;AAEA,QAAMW,SAAS,GAAGF,gBAAgB,CAAhBA,KAAAA,GAAyBC,gBAAgB,CAA3D,KAAA;;AACA,QAAIC,SAAS,GAAb,CAAA,EAAmB;AACjB,aAAA,SAAA;AACD;;AACD,QAAIA,SAAS,GAAb,CAAA,EAAmB;AACjB,aAAA,SAAA;AACD;;AAED,QAAMC,SAAS,GAAGH,gBAAgB,CAAhBA,KAAAA,GAAyBC,gBAAgB,CAA3D,KAAA;;AACA,QAAIE,SAAS,GAAb,CAAA,EAAmB;AACjB,aAAA,SAAA;AACD;;AACD,QAAIA,SAAS,GAAb,CAAA,EAAmB;AACjB,aAAA,SAAA;AACD;;AAED,QAAMC,SAAS,GAAGJ,gBAAgB,CAAhBA,KAAAA,GAAyBC,gBAAgB,CAA3D,KAAA;;AACA,QAAIG,SAAS,GAAb,CAAA,EAAmB;AACjB,aAAA,SAAA;AACD;;AACD,QAAIA,SAAS,GAAb,CAAA,EAAmB;AACjB,aAAA,SAAA;AACD;;AAED,WAAA,CAAA;AA5BK,GAAA;;ACAA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAA,oBAAA,EAAA,oBAAA,EAAgD;AAC5E,WAAON,cAAc,CAAA,oBAAA,EAAdA,oBAAc,CAAdA,GAAP,CAAA;AADK,GAAA;;ACAA,MAAMO,kBAAkB,GAAG,SAArBA,kBAAqB,GAAe;AAAA,SAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAXC,MAAW,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAAXA,MAAAA,MAAW,CAAA,IAAA,CAAXA,GAAW,SAAA,CAAA,IAAA,CAAXA;AAAW;;AAC/C,QAAIA,MAAM,CAANA,MAAAA,KAAJ,CAAA,EAAyB,MAAM,IAAA,KAAA,CAAN,kBAAM,CAAN;AAEzB,WAAO,MAAM,CAAN,MAAA,CAAc,UAAA,cAAA,EAAA,KAAA,EAA2B;AAC9C,UAAIF,cAAc,CAAA,cAAA,EAAlB,KAAkB,CAAlB,EAA2C;AACzC,eAAA,KAAA;AACD;;AACD,aAAA,cAAA;AAJF,KAAO,CAAP;AAHK,GAAA;;ACAA,MAAMG,YAAY,GAAG,SAAfA,YAAe,CAAA,IAAA,EAAA,QAAA,EAAiC;AAAA,QAA9B7P,IAA8B,GAAA,IAAA,CAA9BA,IAA8B;AAAA,QAAxB4N,OAAwB,GAAA,IAAA,CAAxBA,OAAwB;AAC3D,WAAO,MAAM,CAAN,IAAA,CAAA,QAAA,EAAA,IAAA,CAA2B,UAAA,kBAAA,EAAwB;AACxD,UAAQkC,gBAAR,GAA6B7C,QAAQ,CAArC,kBAAqC,CAARA,CAA7B,gBAAA;;AACA,UAAIjN,IAAI,IAAJA,gBAAAA,KAAJ,KAAA,EAAwC;AACtC,eAAA,KAAA;AACD;;AACD,UAAM+P,eAAe,GAAGD,gBAAgB,CAAxC,IAAwC,CAAxC;AAEA,UAAME,cAAc,GAAGL,kBAAkB,CAAA,OAAA,EAAzC,eAAyC,CAAzC;AACA,aAAOK,cAAc,KAArB,OAAA;AARF,KAAO,CAAP;AADK,GAAA;;ACCA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAA,QAAA,EAAA;AAAA,WAAcJ,YAAY,CAACpB,aAAD,EAAA,EAA1B,QAA0B,CAA1B;AAA5B,GAAA;;ACiFA,WAAA,MAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,QAAA,MAAA,EAAY;AACX,aAAOtR,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,QAAI,CAAA,KAAA,IAAU,CAAC1D,KAAK,CAApB,IAAA,EAA2B;AAC1BA,MAAAA,KAAK,GAAGqD,OAAO,CAAPA,OAAAA,CAARrD,KAAQqD,CAARrD;AACA;;AACD,WAAO0D,IAAI,GAAG1D,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAtBM,WAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,WAAO,YAAW;AACjB,WAAK,IAAIiD,IAAI,GAAR,EAAA,EAAenE,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGkD,SAAS,CAAxC,MAAA,EAAiDlD,CAAjD,EAAA,EAAsD;AACrDmE,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUjB,SAAS,CAAnBiB,CAAmB,CAAnBA;AACA;;AACD,UAAI;AACH,eAAOI,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,OAAA,CAEEuU,OAAAA,CAAAA,EAAS;AACV,eAAOvU,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,KAAA;AAUA;;AA8bM,WAAA,OAAA,CAAA,IAAA,EAAA,IAAA,EAAA,MAAA,EAAmC;AACzC,QAAA,MAAA,EAAY;AACX,aAAOK,IAAI,GAAGA,IAAI,CAAClB,IAAR,EAAO,CAAP,GAAkBA,IAA7B,EAAA;AACA;;AACD,QAAI;AACH,UAAImF,MAAM,GAAGtE,OAAO,CAAPA,OAAAA,CAAgBb,IAA7B,EAAaa,CAAb;AACA,aAAOK,IAAI,GAAGiE,MAAM,CAANA,IAAAA,CAAH,IAAGA,CAAH,GAAX,MAAA;AAFD,KAAA,CAGE,OAAA,CAAA,EAAU;AACX,aAAOtE,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AACD;;AAyBM,WAAA,MAAA,CAAA,IAAA,EAAA,OAAA,EAA+B;AACrC,QAAI;AACH,UAAIsE,MAAM,GAAGnF,IAAb,EAAA;AADD,KAAA,CAEE,OAAA,CAAA,EAAS;AACV,aAAO8F,OAAO,CAAd,CAAc,CAAd;AACA;;AACD,QAAIX,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,aAAOA,MAAM,CAANA,IAAAA,CAAY,KAAZA,CAAAA,EAAP,OAAOA,CAAP;AACA;;AACD,WAAA,MAAA;AACA;;AAxjBM,MAAM8O,0BAA0B,GAAA,QAAA,CAAA,YAE5B;AAAA,QAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;AAAA,QAAA,qBAAA,GAAA,IAAA,CADTC,+BACS;AAAA,QADTA,+BACS,GAAA,qBAAA,KAAA,KAAA,CAAA,GADyB,IACzB,GAAA,qBAAA;;AAAA,WAAA,MAAA,CACiCnO,SAAS,CAD1C,2BAC0C,CAD1C,EAAA,UAAA,KAAA,EAAA;AAAA,UACDgD,uBADC,GAAA,KAAA,CAAA,uBAAA;AAET,UAAMoL,WAAW,GAAA,IAAA,MAAA,CAAA,uBAAA,EAAjB,eAAiB,CAAjB;AACA,UAAMC,UAAU,GAAA,IAAA,MAAA,CAAA,uBAAA,EAAhB,UAAgB,CAAhB;AAHS,aAAA,MAAA,CAIyBvT,OAAO,CAAPA,GAAAA,CAAY,CAACkF,SAAS,CAAV,WAAU,CAAV,EAAyBA,SAAS,CAJvE,UAIuE,CAAlC,CAAZlF,CAJzB,EAAA,UAAA,KAAA,EAAA;AAAA,YAAA,KAAA,GAAA,cAAA,CAAA,KAAA,EAAA,CAAA,CAAA;AAAA,YAIFmQ,QAJE,GAAA,KAAA,CAAA,CAAA,CAAA;AAAA,YAIQqD,OAJR,GAAA,KAAA,CAAA,CAAA,CAAA;;AAMT,YAAMnD,SAAS,GAAGJ,2BAA2B,CAAC;AAC5CC,UAAAA,OAAO,EAAEiD,mBAAmB,CADgB,QAChB,CADgB;AAE5ChD,UAAAA,QAAQ,EAARA;AAF4C,SAAD,CAA7C;AAIA,YAAMsD,SAAS,GAAGtD,QAAQ,CAA1B,SAA0B,CAA1B;AACA,YAAQuD,uBAAR,GAA0EF,OAA1E,CAAA,uBAAA;AAAA,YAAiCG,mBAAjC,GAA0EH,OAA1E,CAAA,mBAAA;AAAA,YAAsDI,eAAtD,GAA0EJ,OAA1E,CAAA,eAAA;;AAXS,YAAA,qBAAA,GAcmBO,qCAAqC,CAAA,SAAA,EAAY;AACzEV,UAAAA,+BAA+B,EAA/BA;AADyE,SAAZ,CAdxD;;AAAA,eAAA,MAAA,CAiBGW,iBAAiB,CAAC;AAC1BP,UAAAA,SAAS,EADiB,SAAA;AAE1BC,UAAAA,uBAAuB,EAFG,uBAAA;AAG1BC,UAAAA,mBAAmB,EAHO,mBAAA;AAI1BN,UAAAA,+BAA+B,EAA/BA;AAJ0B,SAAD,CAjBpB,EAAA,UAAA,kBAAA,EAAA;AAaT,cAAMQ,cAAc,GAAA,cAAA,CAAA,cAAA,CAAA;AAClBC,YAAAA,wBAAwB,EAAA;AADN,WAAA,EAAA,kBAAA,CAAA,EAAA,EAAA,EAAA;AAUlBH,YAAAA,mBAAmB,EAVD,mBAAA;AAWlBC,YAAAA,eAAe,EAAfA;AAXkB,WAAA,CAApB;;AAcA,cAAMK,mBAAmB,GACvBJ,cAAc,CAAdA,eAAAA,CAAAA,MAAAA,KAAAA,CAAAA,IACAA,cAAc,CAAdA,mBAAAA,CAAAA,MAAAA,KADAA,CAAAA,IAEAA,cAAc,CAAdA,wBAAAA,CAAAA,MAAAA,KAFAA,CAAAA,IAGAA,cAAc,CAAdA,wBAAAA,CAAAA,MAAAA,KAHAA,CAAAA,IAIAA,cAAc,CAJdA,kBAAAA,IAKAA,cAAc,CALdA,sBAAAA,IAMAA,cAAc,CAPhB,sBAAA;AASA,iBAAO;AACLA,YAAAA,cAAc,EADT,cAAA;AAELI,YAAAA,mBAAmB,EAFd,mBAAA;AAGLP,YAAAA,uBAAuB,EAHlB,uBAAA;AAILxL,YAAAA,uBAAuB,EAJlB,uBAAA;AAKLmI,YAAAA,SAAS,EAATA;AALK,WAAP;AApCS,SAAA,CAAA;AAAA,OAAA,CAAA;AAAA,KAAA,CAAA;AAFJ,GAAgC,CAAhC;;AA+CP,MAAM2D,iBAAiB,GAAA,QAAA,CAAA,UAAA,KAAA,EAAqD;AAAA,QAAzCP,SAAyC,GAAA,KAAA,CAAzCA,SAAyC;AAAA,QAA9BC,uBAA8B,GAAA,KAAA,CAA9BA,uBAA8B;AAC1E,QAAMQ,wBAAwB,GAAGT,SAAS,CADgC,4BAC1E,CAD0E,CAAA;AAG1E;AACA;;AAJ0E,WAAA,MAAA,CAKzCU,iBAAiB,CAAC;AACjD;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACAC,MAAAA,MAAM,EAAE,CAACV;AAVwC,KAAD,CALwB,EAAA,UAAA,kBAAA,EAAA;AAAA,aAAA,OAAA,CAAA,qBAAA,EAAA,UAAA,sBAAA,EAAA;AAAA,eAAA,OAAA,CAAA,qBAAA,EAAA,UAAA,sBAAA,EAAA;AAsB1E,iBAAO;AACLQ,YAAAA,wBAAwB,EADnB,wBAAA;AAELG,YAAAA,kBAAkB,EAFb,kBAAA;AAGLC,YAAAA,sBAAsBrU,EAHjB,sBAAA;AAILsU,YAAAA,sBAAsB,EAAtBA;AAJK,WAAP;AAtB0E,SAAA,CAAA;AAAA,OAAA,CAAA;AAAA,KAAA,CAAA;AAA5E,GAAuB,CAAvB;;AA8BA,MAAMR,qCAAqC,GAAG,SAAxCA,qCAAwC,CAAA,SAAA,EAAA,KAAA,EAAoD;AAAA,QAAtCV,+BAAsC,GAAA,KAAA,CAAtCA,+BAAsC;AAChG,QAAQmB,4BAAR,GAAyCf,SAAzC,CAAA,4BAAA;AAEA,QAAMK,wBAAwB,GAAGU,4BAA4B,CAHmC,KAG/DA,EAAjC,CAHgG,CAAA;AAMhG;AACA;;AACA7X,QAAM8X,wBAAwB,GAAGX,wBAAwB,CAAxBA,OAAAA,CAAjCnX,sBAAiCmX,CAAjCnX;;AACA,QAAI8X,wBAAwB,GAAG,CAA3BA,CAAAA,IAAiC,CAArC,+BAAA,EAAuE;AACrEX,MAAAA,wBAAwB,CAAxBA,MAAAA,CAAAA,wBAAAA,EAAAA,CAAAA;AACD;;AAED,WAAA,wBAAA;AAbF,GAAA;;AAgBA,MAAMK,iBAAiB,GAAA,QAAA,CAAA,YAAqC;AAAA,QAAA,KAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;AAAA,QAAA,YAAA,GAAA,KAAA,CAAzBC,MAAyB;AAAA,QAAzBA,MAAyB,GAAA,YAAA,KAAA,KAAA,CAAA,GAAhB,IAAgB,GAAA,YAAA;;AAC1D,QAAMM,SAAS,GAAGC,WAAW,CAA7B,sBAA6B,CAA7B;AAEA,QAAMC,SAAS,GAAG;AAChBC,MAAAA,OAAO,EAAA,eAAA,CAAA,EAAA,EAAA,SAAA,EACQF,WAAW,CADnB,qBACmB,CADnB;AADS,KAAlB;AAMA,QAAMG,eAAe,GAAGxP,QAAQ,CAARA,aAAAA,CAAxB,QAAwBA,CAAxB;AACA,QAAMyP,eAAe,GAAG7T,IAAI,CAAJA,SAAAA,CAAAA,SAAAA,EAAAA,IAAAA,EAAxB,IAAwBA,CAAxB;AACA4T,IAAAA,eAAe,CAAfA,IAAAA,GAAAA,WAAAA;;AACA,QAAA,MAAA,EAAY;AACVA,MAAAA,eAAe,CAAfA,GAAAA,GAAAA,gCAAAA,MAAAA,CAAsDrT,MAAM,CAANA,IAAAA,CAAtDqT,eAAsDrT,CAAtDqT,CAAAA;AADF,KAAA,MAEO;AACLA,MAAAA,eAAe,CAAfA,WAAAA,GAAAA,eAAAA;AACD;;AAEDxP,IAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,eAAAA;AAEA,QAAM0P,YAAY,GAAG1P,QAAQ,CAARA,aAAAA,CAArB,QAAqBA,CAArB;AACA0P,IAAAA,YAAY,CAAZA,IAAAA,GAAAA,QAAAA;AACAA,IAAAA,YAAY,CAAZA,GAAAA,GAAmBL,WAAW,CAAA,2BAAA,MAAA,CAAA,SAAA,EAA9BK,8CAA8B,CAAA,CAA9BA;AAIA,WAAO,IAAA,OAAA,CAAY,UAAA,OAAA,EAAA,MAAA,EAAqB;AACtCA,MAAAA,YAAY,CAAZA,MAAAA,GAAsB,YAAM;AAC1B,YAAMC,SAAS,GAAGxT,MAAM,CAAxB,qBAAA;AACA,eAAOA,MAAM,CAAb,qBAAA;AACA6D,QAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,YAAAA;AACAA,QAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,eAAAA;AACAtD,QAAAA,OAAO,CAAPA,SAAO,CAAPA;AALFgT,OAAAA;;AAOAA,MAAAA,YAAY,CAAZA,OAAAA,GAAuB,YAAM;AAC3B1P,QAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,YAAAA;AACAA,QAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,eAAAA;AACApD,QAAAA,MAAM;AAHR8S,OAAAA;;AAKA1P,MAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,YAAAA;AAbF,KAAO,CAAP;AA1BF,GAAuB,CAAvB;;AA2CA,MAAMqP,WAAW,GAAG,SAAdA,WAAc,CAAA,EAAA,EAAQ;AAC1B,WAAA,+BAAA,MAAA,CAAsClT,MAAM,CAANA,IAAAA,CAAtC,EAAsCA,CAAtC,CAAA;AADF,GAAA;;AAIA,MAAMyT,qBAAqB,GAAA,QAAA,CAAA,YAAe;AACxC,QAAMC,YAAY,GAAGR,WAAW,CAAhC,mBAAgC,CAAhC;AADwC,WAAA,MAAA,CAAA,YAEpC;AAAA,aAAA,MAAA,CACsB,OADtB,YACsB,CADtB,EAAA,UAAA,SAAA,EAAA;AAEF,eAAOS,SAAS,CAATA,OAAAA,KAAP,EAAA;AAFE,OAAA,CAAA;AAFoC,KAAA,EAAA,YAK5B;AACV,aAAA,KAAA;AANsC,KAAA,CAAA;AAA1C,GAA2B,CAA3B;;AAUA,MAAMC,qBAAqB,GAAA,QAAA,CAAA,YAAe;AACxC,QAAMF,YAAY,GAAGR,WAAW,CAAhC,0CAAgC,CAAhC;AADwC,WAAA,MAAA,CAAA,YAEpC;AAAA,aAAA,MAAA,CACsB,OADtB,YACsB,CADtB,EAAA,UAAA,SAAA,EAAA;AAEF,eAAOS,SAAS,CAATA,OAAAA,KAAP,EAAA;AAFE,OAAA,CAAA;AAFoC,KAAA,EAAA,YAK5B;AACV,aAAA,KAAA;AANsC,KAAA,CAAA;AAA1C,GAA2B,CAA3B;;ACtJO,MAAME,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAA,IAAA,EAAsB;AAAA,QAAnBC,YAAmB,GAAA,IAAA,CAAnBA,YAAmB;AAC9D,QAAMC,sBAAsB,GAAGlQ,QAAQ,CAARA,aAAAA,CAA/B,kBAA+BA,CAA/B;AACA,QAAMmQ,wBAAwB,GAAGnQ,QAAQ,CAARA,aAAAA,CAAjC,oBAAiCA,CAAjC;AAEAa,IAAAA,sBAAsB,CAAtBA,sBAAsB,CAAtBA;AACAA,IAAAA,sBAAsB,CAAtBA,wBAAsB,CAAtBA;AAEAiN,IAAAA,0BAA0B,GAA1BA,IAAAA,CACE,UAAA,KAAA,EAMM;AAAA,UALJS,cAKI,GAAA,KAAA,CALJA,cAKI;AAAA,UAJJI,mBAII,GAAA,KAAA,CAJJA,mBAII;AAAA,UAHJP,uBAGI,GAAA,KAAA,CAHJA,uBAGI;AAAA,UAFJxL,uBAEI,GAAA,KAAA,CAFJA,uBAEI;AAAA,UADJmI,SACI,GAAA,KAAA,CADJA,SACI;AACJ,UAAMqF,cAAc,GAAGzB,mBAAmB,GACtCP,uBAAuB,GAAA,SAAA,GADe,MAAA,GAA1C,IAAA;AAKAxH,MAAAA,aAAa,CAAA,sBAAA,EAAyB;AACpCwJ,QAAAA,cAAc,EAAdA;AADoC,OAAzB,CAAbxJ;;AAGA,UAAIwJ,cAAc,KAAlB,IAAA,EAA6B;AAC3BF,QAAAA,sBAAsB,CAAtBA,aAAAA,CAAAA,6BAAAA,EAAAA,OAAAA,GAA8E,YAAM;AAClF;AACA/T,UAAAA,MAAM,CAANA,KAAAA,CAAAA,+EAAAA,MAAAA,CACiFkU,wBAAwB,CACrG;AACEC,YAAAA,WAAW,EADb,IAAA;AAEE/B,YAAAA,cAAc,EAFhB,cAAA;AAGEH,YAAAA,uBAAuB,EAAvBA;AAHF,WADqG,CADzGjS,CAAAA;AAFF+T,SAAAA;AADF,OAAA,MAaO,IAAIE,cAAc,KAAlB,SAAA,EAAkC;AACvCF,QAAAA,sBAAsB,CAAtBA,aAAAA,CAAAA,kCAAAA,EAAAA,OAAAA,GAAmF,YAAM;AACvF;AACA/T,UAAAA,MAAM,CAANA,KAAAA,CAAAA,gFAAAA,MAAAA,CACkFkU,wBAAwB,CACtG;AACE9B,YAAAA,cAAc,EADhB,cAAA;AAEEH,YAAAA,uBAAuB,EAAvBA;AAFF,WADsG,CAD1GjS,CAAAA;AAFF+T,SAAAA;AADK,OAAA,MAYA,IAAIE,cAAc,KAAlB,MAAA,EAA+B;AACpCF,QAAAA,sBAAsB,CAAtBA,aAAAA,CAAAA,+BAAAA,EAAAA,OAAAA,GAAgF,YAAM;AACpF;AACA/T,UAAAA,MAAM,CAANA,KAAAA,CAAAA,kEAAAA,MAAAA,CACoEkU,wBAAwB,CACxF;AACE9B,YAAAA,cAAc,EADhB,cAAA;AAEEH,YAAAA,uBAAuB,EAAvBA;AAFF,WADwF,CAD5FjS,CAAAA;AAFF+T,SAAAA;AAWD;;AAED,UAAMK,gBAAgB,GAAGN,YAAY,CAAZA,SAAAA,GAAAA,KAAAA,GAErB7B,uBAAuB,GAAA,WAAA,GAF3B,IAAA;AAKAxH,MAAAA,aAAa,CAAA,wBAAA,EAA2B;AACtC2J,QAAAA,gBAAgB,EADsB,gBAAA;AAEtCC,QAAAA,QAAQ,EAAEP,YAAY,CAAZA,SAAAA,GAAAA,KAAAA,GAAiC;AAFL,OAA3B,CAAbrJ;;AAIAuJ,MAAAA,wBAAwB,CAAxBA,aAAAA,CAAAA,qBAAAA,EAAAA,OAAAA,GAAwE,YAAM;AAC5EhU,QAAAA,MAAM,CAANA,MAAAA,CAAAA,QAAAA,GAAAA,IAAAA,MAAAA,CAA6B8T,YAAY,CAAzC9T,eAAAA,CAAAA;AADFgU,OAAAA;;AAGAA,MAAAA,wBAAwB,CAAxBA,aAAAA,CAAAA,uBAAAA,EAAAA,OAAAA,GAA0E,YAAM;AAC9EhU,QAAAA,MAAM,CAANA,MAAAA,CAAAA,QAAAA,GAAAA,IAAAA,MAAAA,CAAAA,uBAAAA,EAAAA,MAAAA,CAAAA,SAAAA,EAAAA,GAAAA,EAAAA,MAAAA,CAAoE8T,YAAY,CAAhF9T,eAAAA,CAAAA;AADFgU,OAAAA;AAnEJrC,KAAAA;AAPK,GAAA;;AAiFP,MAAMuC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA,KAAA,EAA8D;AAAA,QAA3DC,WAA2D,GAAA,KAAA,CAA3DA,WAA2D;AAAA,QAA9C/B,cAA8C,GAAA,KAAA,CAA9CA,cAA8C;AAAA,QAA9BH,uBAA8B,GAAA,KAAA,CAA9BA,uBAA8B;AAC7F,QAAM1Q,KAAK,GAAX,EAAA;AAEA,QAAQqR,kBAAR,GAA+BR,cAA/B,CAAA,kBAAA;;AACA,QAAA,kBAAA,EAAwB;AACtB,UAAI,CAAJ,WAAA,EAAkB;AAChB,YAAA,uBAAA,EAA6B;AAC3B7Q,UAAAA,KAAK,CAALA,IAAAA,CAAAA,4DAAAA;AADF,SAAA,MAEO;AACLA,UAAAA,KAAK,CAALA,IAAAA,CAAAA,0BAAAA;AACD;AACF;AAPH,KAAA,MAQO;AACLA,MAAAA,KAAK,CAALA,IAAAA,CAAAA,8BAAAA;AACD;;AAED,QAAQsR,sBAAR,GAAmCT,cAAnC,CAAA,sBAAA;;AACA,QAAA,sBAAA,EAA4B;AAC1B,UAAI,CAAJ,WAAA,EAAkB;AAChB7Q,QAAAA,KAAK,CAALA,IAAAA,CAAAA,+BAAAA;AACD;AAHH,KAAA,MAIO;AACLA,MAAAA,KAAK,CAALA,IAAAA,CAAAA,mCAAAA;AACD;;AAED,QAAQuR,sBAAR,GAAmCV,cAAnC,CAAA,sBAAA;;AACA,QAAA,sBAAA,EAA4B;AAC1B,UAAI,CAAJ,WAAA,EAAkB;AAChB7Q,QAAAA,KAAK,CAALA,IAAAA,CAAAA,8BAAAA;AACD;AAHH,KAAA,MAIO;AACLA,MAAAA,KAAK,CAALA,IAAAA,CAAAA,kCAAAA;AACD;;AAED,QAAQ8Q,wBAAR,GAAqCD,cAArC,CAAA,wBAAA;AACA,QAAMkC,wBAAwB,GAAGjC,wBAAwB,CAAzD,MAAA;;AACA,QAAIiC,wBAAwB,KAA5B,CAAA,EAAoC;AAClC,UAAI,CAAJ,WAAA,EAAkB;AAChB/S,QAAAA,KAAK,CAALA,IAAAA,CAAAA,0CAAAA;AACD;AAHH,KAAA,MAIO;AACLA,MAAAA,KAAK,CAALA,IAAAA,CAAAA,GAAAA,MAAAA,CAAAA,wBAAAA,EAAAA,gCAAAA,EAAAA,MAAAA,CAAAA,wBAAAA,CAAAA;AAGD;;AAED,QAAQ4Q,eAAR,GAA4BC,cAA5B,CAAA,eAAA;AACA,QAAMmC,mBAAmB,GAAGpC,eAAe,CAA3C,MAAA;AACA,QAAIoC,mBAAmB,KAAvB,CAAA,EAAA,CAAA,KAEO;AACLhT,MAAAA,KAAK,CAALA,IAAAA,CAAAA,+CAAAA,MAAAA,CAAAA,eAAAA,CAAAA;AACD;AAED,QAAQ2Q,mBAAR,GAAgCE,cAAhC,CAAA,mBAAA;AACA,QAAMoC,mBAAmB,GAAGtC,mBAAmB,CAA/C,MAAA;AACA,QAAIsC,mBAAmB,KAAvB,CAAA,EAAA,CAAA,KAEO;AACLjT,MAAAA,KAAK,CAALA,IAAAA,CAAAA,GAAAA,MAAAA,CAAAA,mBAAAA,EAAAA,6BAAAA,EAAAA,MAAAA,CAAAA,mBAAAA,CAAAA;AACD;AAED,QAAQkR,wBAAR,GAAqCL,cAArC,CAAA,wBAAA;AACA,QAAMqC,wBAAwB,GAAGhC,wBAAwB,CAAzD,MAAA;AACA,QAAIgC,wBAAwB,KAA5B,CAAA,EAAA,CAAA,KAEO;AACLlT,MAAAA,KAAK,CAALA,IAAAA,CAAAA,GAAAA,MAAAA,CAAAA,wBAAAA,EAAAA,gCAAAA,EAAAA,MAAAA,CAAAA,wBAAAA,CAAAA;AAGD;AAED,WAAA,OAAA,MAAA,CACEA,KAAK,CAALA,IAAAA,CADF,MACEA,CADF,CAAA;AAxEF,GAAA;;ACrFO,MAAM3D,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AACzC,QAAA,OAAA;AACA,QAAA,MAAA;AACA,QAAM0C,OAAO,GAAG,IAAA,OAAA,CAAY,UAAA,GAAA,EAAA,GAAA,EAAc;AACxCC,MAAAA,OAAO,GAAPA,GAAAA;AACAE,MAAAA,MAAM,GAANA,GAAAA;AAFF,KAAgB,CAAhB;AAIAH,IAAAA,OAAO,CAAPA,OAAAA,GAAAA,OAAAA;AACAA,IAAAA,OAAO,CAAPA,MAAAA,GAAAA,MAAAA;AACA,WAAA,OAAA;AATK,GAAA;;ACAA,MAAMoU,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA,cAAA,EAY7B;AAAA,QAVHC,MAUG,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAVM,EAUN;;AAAA,QAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GADC,EACD;AAAA,QAAA,eAAA,GAAA,IAAA,CARDC,UAQC;AAAA,QARDA,UAQC,GAAA,eAAA,KAAA,KAAA,CAAA,GARY,YAAM,CAQlB,CAAA,GAAA,eAAA;AAAA,QAAA,cAAA,GAAA,IAAA,CAPDC,SAOC;AAAA,QAPDA,SAOC,GAAA,cAAA,KAAA,KAAA,CAAA,GAPW,YAAM,CAOjB,CAAA,GAAA,cAAA;AAAA,QAAA,cAAA,GAAA,IAAA,CANDC,SAMC;AAAA,QANDA,SAMC,GAAA,cAAA,KAAA,KAAA,CAAA,GANW,YAAM,CAMjB,CAAA,GAAA,cAAA;AAAA,QAAA,WAAA,GAAA,IAAA,CALDC,MAKC;AAAA,QALDA,MAKC,GAAA,WAAA,KAAA,KAAA,CAAA,GALQ,YAAM,CAKd,CAAA,GAAA,WAAA;AAAA,QAAA,oBAAA,GAAA,IAAA,CAJDC,eAIC;AAAA,QAJDA,eAIC,GAAA,oBAAA,KAAA,KAAA,CAAA,GAJiBC,QAIjB,GAAA,oBAAA;AAAA,QAAA,qBAAA,GAAA,IAAA,CAHDC,gBAGC;AAAA,QAHDA,gBAGC,GAAA,qBAAA,KAAA,KAAA,CAAA,GAHkBD,QAGlB,GAAA,qBAAA;AAAA,QAFDE,WAEC,GAAA,IAAA,CAFDA,WAEC;;AACH,QAAA,OAAA,GAAA,MAAA;AAAA,QAAQC,WAAR,GAAA,OAAA,CAAA,WAAA;;AACA,QAAI,OAAA,WAAA,KAAJ,UAAA,EAAuC;AACrC,aAAO,YAAM,CAAb,CAAA;AACD;;AAED,QAAMC,iBAAiB,GAAG,IAAA,GAAA,CAAA,cAAA,EANvB,MAMH,CANG,CAAA;AASH;;AACA,QAAIC,uBAAuB,GAAG,SAAA,uBAAA,GAAM,CAApC,CAAA;;AAEA,QAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBC,MAAAA,iBAAiB,CACfL,WAAW,GAAGM,iCAAiC,CAAA,cAAA,EAApC,WAAoC,CAApC,GADbD,cAAiB,CAAjBA;AADF,KAAA;;AAMA,QAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,GAAA,EAAS;AACjC,UAAME,WAAW,GAAG,IAAA,WAAA,CAAA,GAAA,EAAqB;AACvCrX,QAAAA,eAAe,EAAE;AADsB,OAArB,CAApB;AAIA,UAAIsX,gBAAgB,GAApB,YAAA;;AACA,UAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClB,YAAID,gBAAgB,KAApB,YAAA,EAAuC;AACrCE,UAAAA,OAAO,CAAPA,IAAAA,CAAAA,uCAAAA,MAAAA,CAAAA,gBAAAA,CAAAA;AACA;AACD;;AACDF,QAAAA,gBAAgB,GAAhBA,SAAAA;AACAD,QAAAA,WAAW,CAAXA,OAAAA,GAAAA,SAAAA;AACAA,QAAAA,WAAW,CAAXA,KAAAA;AACAZ,QAAAA,SAAS,CAAC;AAAEgB,UAAAA,OAAO,EAAEP;AAAX,SAAD,CAATT;AARF,OAAA;;AAUAQ,MAAAA,uBAAuB,GAAvBA,KAAAA;AACAV,MAAAA,UAAU,CAAC;AAAEmB,QAAAA,MAAM,EAAEH;AAAV,OAAD,CAAVhB;;AAEAc,MAAAA,WAAW,CAAXA,MAAAA,GAAqB,YAAM;AACzBC,QAAAA,gBAAgB,GAAhBA,WAAAA;;AACA,YAAMK,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,cAAIL,gBAAgB,KAApB,WAAA,EAAsC;AACpCE,YAAAA,OAAO,CAAPA,IAAAA,CAAAA,4CAAAA,MAAAA,CAAAA,gBAAAA,CAAAA;AACA;AACD;;AACDF,UAAAA,gBAAgB,GAAhBA,cAAAA;AACAD,UAAAA,WAAW,CAAXA,OAAAA,GAAAA,SAAAA;AACAA,UAAAA,WAAW,CAAXA,KAAAA;AACAZ,UAAAA,SAAS,CAAC;AAAEgB,YAAAA,OAAO,EAAEP;AAAX,WAAD,CAATT;AARF,SAAA;;AAUAQ,QAAAA,uBAAuB,GAAvBA,UAAAA;AACAT,QAAAA,SAAS,CAAC;AAAEkB,UAAAA,MAAM,EAAEC;AAAV,SAAD,CAATnB;AAbFa,OAAAA;;AAgBA,UAAIO,UAAU,GAAd,CAAA;AACA,UAAIC,YAAY,GAAGC,IAAI,CAAvB,GAAmBA,EAAnB;;AAEAT,MAAAA,WAAW,CAAXA,OAAAA,GAAsB,UAAA,UAAA,EAAgB;AACpC,YAAMU,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BT,UAAAA,gBAAgB,GAAhBA,cAAAA;AACAZ,UAAAA,MAAM,CAAC;AACLgB,YAAAA,MAAM,EAAE,SAAA,MAAA,GAAM;AACZ,kBAAIJ,gBAAgB,KAApB,QAAA,EAAmC;AACjCE,gBAAAA,OAAO,CAAPA,IAAAA,CAAAA,yCAAAA,MAAAA,CAAAA,gBAAAA,CAAAA;AACA;AACD;;AACDF,cAAAA,gBAAgB,GAAhBA,UAAAA;AACAb,cAAAA,SAAS,CAAC;AAAEgB,gBAAAA,OAAO,EAAEP;AAAX,eAAD,CAATT;AAPG,aAAA;AASLgB,YAAAA,OAAO,EAAEP;AATJ,WAAD,CAANR;AAFF,SAAA;;AAeA,YAAIsB,UAAU,CAAVA,MAAAA,CAAAA,UAAAA,KAAiCjB,WAAW,CAAhD,UAAA,EAA6D;AAC3D,cAAIa,UAAU,GAAd,eAAA,EAAkC;AAChCJ,YAAAA,OAAO,CAAPA,IAAAA,CAAAA,2BAAAA,MAAAA,CAAAA,eAAAA,EAAAA,UAAAA,CAAAA;AACAH,YAAAA,WAAW,CAAXA,OAAAA,GAAAA,SAAAA;AACAA,YAAAA,WAAW,CAAXA,KAAAA;AACAU,YAAAA,cAAc;AACd;AACD;;AAED,cAAIH,UAAU,KAAd,CAAA,EAAsB;AACpBC,YAAAA,YAAY,GAAGC,IAAI,CAAnBD,GAAeC,EAAfD;AADF,WAAA,MAEO;AACL,gBAAMI,gBAAgB,GAAGH,IAAI,CAAJA,GAAAA,KAAzB,YAAA;;AACA,gBAAIjB,gBAAgB,IAAIoB,gBAAgB,GAAxC,gBAAA,EAA6D;AAC3DT,cAAAA,OAAO,CAAPA,IAAAA,CAAAA,kCAAAA,MAAAA,CAAAA,gBAAAA,EAAAA,KAAAA,CAAAA;AACAH,cAAAA,WAAW,CAAXA,OAAAA,GAAAA,SAAAA;AACAA,cAAAA,WAAW,CAAXA,KAAAA;AACAU,cAAAA,cAAc;AACd;AACD;AACF;;AAEDT,UAAAA,gBAAgB,GAAhBA,YAAAA;AACAM,UAAAA,UAAU;AACVrB,UAAAA,UAAU,CAAC;AAAEmB,YAAAA,MAAM,EAAEH;AAAV,WAAD,CAAVhB;AACA;AACD;;AAED,YAAIyB,UAAU,CAAVA,MAAAA,CAAAA,UAAAA,KAAiCjB,WAAW,CAAhD,MAAA,EAAyD;AACvDgB,UAAAA,cAAc;AACd;AACD;AA/CHV,OAAAA;;AAiDAza,MAAAA,MAAM,CAANA,IAAAA,CAAAA,MAAAA,EAAAA,OAAAA,CAA4B,UAAA,SAAA,EAAe;AACzCya,QAAAA,WAAW,CAAXA,gBAAAA,CAAAA,SAAAA,EAAwC,UAAA,CAAA,EAAO;AAC7C,cAAIrS,CAAC,CAADA,MAAAA,KAAJ,iBAAA,EAAoC;AAClC,gBAAIA,CAAC,CAAL,WAAA,EAAmB;AACjB8R,cAAAA,WAAW,GAAG9R,CAAC,CAAf8R,WAAAA;AACD;;AACDR,YAAAA,MAAM,CAANA,SAAM,CAANA,CAAAA,CAAAA;AACD;AANHe,SAAAA;AADFza,OAAAA;;AAUA,UAAI,CAAC0Z,MAAM,CAANA,cAAAA,CAAL,SAAKA,CAAL,EAAuC;AACrCe,QAAAA,WAAW,CAAXA,gBAAAA,CAAAA,SAAAA,EAAwC,UAAA,CAAA,EAAO;AAC7C,cAAIrS,CAAC,CAADA,MAAAA,KAAAA,iBAAAA,IAAkCA,CAAC,CAAvC,WAAA,EAAqD;AACnD8R,YAAAA,WAAW,GAAG9R,CAAC,CAAf8R,WAAAA;AACD;AAHHO,SAAAA;AAKD;AAvGH,KAAA;;AA0GAF,IAAAA,iBAAiB,CAAjBA,cAAiB,CAAjBA;;AACA,QAAMQ,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBV,MAAAA,uBAAuB;AADzB,KAAA;;AAIA,QAAMiB,wBAAwB,GAAGC,gBAAgB,CAAC,YAAM;AACtDR,MAAAA,UAAU;AADZ,KAAiD,CAAjD;AAIA,WAAO,YAAM;AACXO,MAAAA,wBAAwB;AACxBP,MAAAA,UAAU;AAFZ,KAAA;AAjJK,GAAA;;AAuJP,MAAMP,iCAAiC,GAAG,SAApCA,iCAAoC,CAAA,GAAA,EAAA,WAAA,EAAsB;AAC9D,QAAIxc,GAAG,CAAHA,OAAAA,CAAAA,GAAAA,MAAqB,CAAzB,CAAA,EAA6B;AAC3BA,MAAAA,GAAG,IAAHA,GAAAA;AADF,KAAA,MAEO;AACLA,MAAAA,GAAG,IAAHA,GAAAA;AACD;;AACD,WAAA,GAAA,MAAA,CAAA,GAAA,EAAA,gBAAA,EAAA,MAAA,CAA8Bwd,kBAAkB,CAAhD,WAAgD,CAAhD,CAAA;AANF,GAAA,C,CAAA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,QAAA,EAAc;AACrC,QAAME,sBAAsB,GAAGC,WAAW,CAAA,MAAA,EAAA,UAAA,EAAqB,UAAA,aAAA,EAAmB;AAChF,UAAIC,aAAa,CAAbA,SAAAA,KAAJ,IAAA,EAAsC;AACpC1a,QAAAA,QAAQ,CAARA,aAAQ,CAARA;AACD;AAHH,KAA0C,CAA1C;AAKA,WAAA,sBAAA;AANF,GAAA;;AASA,MAAMya,WAAW,GAAG,SAAdA,WAAc,CAAA,OAAA,EAAA,KAAA,EAAA,QAAA,EAA8B;AAChDE,IAAAA,OAAO,CAAPA,gBAAAA,CAAAA,KAAAA,EAAAA,QAAAA;AACA,WAAO,YAAM;AACXA,MAAAA,OAAO,CAAPA,mBAAAA,CAAAA,KAAAA,EAAAA,QAAAA;AADF,KAAA;AAFF,GAAA;;ACxMO,MAAMC,+BAA+B,GAAG,SAAlCA,+BAAkC,CAAA,eAAA,EAAA,IAAA,EAW1C;AAAA,QARDC,cAQC,GAAA,IAAA,CARDA,cAQC;AAAA,QAPDC,aAOC,GAAA,IAAA,CAPDA,aAOC;AAAA,QANDC,YAMC,GAAA,IAAA,CANDA,YAMC;AAAA,QALDC,qBAKC,GAAA,IAAA,CALDA,qBAKC;AAAA,QAJDC,kBAIC,GAAA,IAAA,CAJDA,kBAIC;AAAA,QAHDC,WAGC,GAAA,IAAA,CAHDA,WAGC;AAAA,QAFDjC,WAEC,GAAA,IAAA,CAFDA,WAEC;AACH,QAAMkC,cAAc,GAAA,GAAA,MAAA,CAAMrX,MAAM,CAAZ,MAAA,EAAA,GAAA,EAAA,MAAA,CAApB,eAAoB,CAApB;;AAEA,QAAI+V,MAAM,GAAG,SAAA,MAAA,GAAM,CAAnB,CAAA;;AAEA,QAAMD,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,aAAO,IAAA,OAAA,CAAY,UAAA,OAAA,EAAa;AAC9BC,QAAAA,MAAM,GAAGrB,oBAAkB,CAAA,cAAA,EAEzB;AACE,2BAAiB,SAAA,YAAA,CAAA,KAAA,EAAc;AAAA,gBAAX4C,IAAW,GAAA,KAAA,CAAXA,IAAW;AAE7BP,YAAAA,cAAc,CAAdA,IAAc,CAAdA;AAHJ,WAAA;AAKE,0BAAgB,SAAA,WAAA,CAAA,KAAA,EAAc;AAAA,gBAAXO,IAAW,GAAA,KAAA,CAAXA,IAAW;AAE5BN,YAAAA,aAAa,CAAbA,IAAa,CAAbA;AACD;AARH,SAFyB,EAYzB;AACEpC,UAAAA,UAAU,EAAE,SAAA,UAAA,CAAA,KAAA,EAAgB;AAAA,gBAAbmB,OAAa,GAAA,KAAA,CAAbA,MAAa;AAE1BkB,YAAAA,YAAY,CAAC;AACXlB,cAAAA,MAAM,EAAE,SAAA,MAAA,GAAM;AACZA,gBAAAA,OAAM;AACP;AAHU,aAAD,CAAZkB;AAHJ,WAAA;AASEpC,UAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,KAAA,EAAgB;AAAA,gBAAbkB,QAAa,GAAA,KAAA,CAAbA,MAAa;AAEzBxV,YAAAA,OAAO,CAAPA,IAAO,CAAPA;AACA6W,YAAAA,WAAW,CAAC;AACVrB,cAAAA,MAAM,EAAE,SAAA,MAAA,GAAM;AACZA,gBAAAA,QAAM;AACP;AAHS,aAAD,CAAXqB;AAZJ,WAAA;AAkBEtC,UAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,KAAA,EAAiB;AAAA,gBAAdgB,OAAc,GAAA,KAAA,CAAdA,OAAc;AAE1BvV,YAAAA,OAAO,CAAPA,KAAO,CAAPA;AACA2W,YAAAA,qBAAqB,CAAC;AAAEpB,cAAAA,OAAO,EAAPA;AAAF,aAAD,CAArBoB;AArBJ,WAAA;AAuBEnC,UAAAA,MAAM,EAAE,SAAA,MAAA,CAAA,KAAA,EAAiB;AAAA,gBAAde,OAAc,GAAA,KAAA,CAAdA,OAAc;AAEvBvV,YAAAA,OAAO,CAAPA,KAAO,CAAPA;AACA4W,YAAAA,kBAAkB,CAAC;AAAErB,cAAAA,OAAO,EAAPA;AAAF,aAAD,CAAlBqB;AA1BJ,WAAA;AA4BEnC,UAAAA,eAAe,EA5BjB,QAAA;AA6BEE,UAAAA,gBAAgB,EAAE,KA7BpB,IAAA;AA8BEC,UAAAA,WAAW,EAAXA;AA9BF,SAZyB,CAA3BY;AADF,OAAO,CAAP;AADF,KAAA;;AAkDA,WAAO;AACLD,MAAAA,OAAO,EADF,OAAA;AAELE,MAAAA,UAAU,EAAE,SAAA,UAAA,GAAA;AAAA,eAAMD,MAAN,EAAA;AAAA;AAFP,KAAP;AAlEK,GAAA;;ACKP,MAAMwB,uBAAuB,GAAGzQ,gBAAgB,CAAhD,eAAgD,CAAhD;AACA,MAAI0Q,gBAAgB,GAApB,SAAA;AACA,MAAIC,8BAA8B,GAAlC,KAAA;;AAEO,MAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAA,IAAA,EAAgD;AAAA,QAA7C3K,uBAA6C,GAAA,IAAA,CAA7CA,uBAA6C;AAAA,QAApB4K,aAAoB,GAAA,IAAA,CAApBA,aAAoB;AACpFjT,IAAAA,sBAAsB,CAACb,QAAQ,CAARA,aAAAA,CAAvBa,wBAAuBb,CAAD,CAAtBa;AACAgQ,IAAAA,kBAAkB,CAAlBA,uBAAkB,CAAlBA;AACA+C,IAAAA,8BAA8B,GAA9BA,aAAAA;;AACA,QAAI,CAAJ,8BAAA,EAAqC;AACnCG,MAAAA,wBAAwB;AACzB;;AAED,QAAMC,kBAAkB,GAAGhU,QAAQ,CAARA,aAAAA,CAA3B,oBAA2BA,CAA3B;AACAgU,IAAAA,kBAAkB,CAAlBA,OAAAA,GAA6BC,gBAA7BD,EAAAA;;AACAA,IAAAA,kBAAkB,CAAlBA,QAAAA,GAA8B,YAAM;AAClCN,MAAAA,uBAAuB,CAAvBA,GAAAA,CAA4BM,kBAAkB,CAA9CN,OAAAA;AACAQ,MAAAA,0BAA0B;AAF5BF,KAAAA;;AAIAE,IAAAA,0BAA0B;AAdrB,GAAA;;AAiBP,MAAMD,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,WAAOL,8BAA8B,IAAIO,0BAAzC,EAAA;AADF,GAAA;;AAIA,MAAMJ,wBAAwB,GAAG,SAA3BA,wBAA2B,GAAM;AACrC/T,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,sBAAAA,EAAAA,YAAAA,CAAAA,eAAAA,EAAAA,MAAAA;AACAA,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,sBAAAA,EAAAA,YAAAA,CAAAA,OAAAA,EAAAA,8CAAAA;AAGAA,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,oBAAAA,EAAAA,QAAAA,GAAAA,IAAAA;AALF,GAAA;;AAQA,MAAMoU,iBAAiB,GAAGjY,MAAM,CAANA,MAAAA,CAA1B,qBAA0BA,EAA1B;;AACA,MAAMkY,eAAe,GAAGD,iBAAiB,CAAzC,eAAA;AACA,MAAIE,gBAAgB,GAApB,EAAA;AACA,MAAA,qBAAA;AACA,MAAA,sBAAA;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,IAAA,EAAA,IAAA,EAAgB;AACvCF,IAAAA,eAAe,CAAfA,IAAe,CAAfA,GAAAA,IAAAA;AACAH,IAAAA,0BAA0B;;AAC1B,QAAID,gBAAJ,EAAA,EAAwB;AACtB,UAAIO,IAAI,CAAJA,QAAAA,CAAAA,MAAAA,KAAyBA,IAAI,CAAJA,QAAAA,CAAzBA,OAAyBA,CAAzBA,IAAmDA,IAAI,CAAJA,QAAAA,CAAvD,OAAuDA,CAAvD,EAA+E;AAC7EC,QAAAA,YAAY;AACZ,eAAOJ,eAAe,CAAtB,IAAsB,CAAtB;AACAH,QAAAA,0BAA0B;AAH5B,OAAA,MAIO;AACLQ,QAAAA,UAAU;AACX;AACF;AAXH,GAAA;;AAcA,MAAMD,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAME,KAAK,GAAG/c,KAAK,CAALA,IAAAA,CAAWuE,MAAM,CAANA,MAAAA,CAAAA,QAAAA,CAAAA,oBAAAA,CAAzB,MAAyBA,CAAXvE,CAAd;AACA+c,IAAAA,KAAK,CAALA,OAAAA,CAAc,UAAA,IAAA,EAAU;AACtB,UAAIrP,IAAI,CAAJA,GAAAA,KAAJ,YAAA,EAA+B;AAC7B,YAAMlQ,GAAG,GAAG,IAAA,GAAA,CAAQkQ,IAAI,CAAxB,IAAY,CAAZ;AACAlQ,QAAAA,GAAG,CAAHA,YAAAA,CAAAA,GAAAA,CAAAA,GAAAA,EAA0Bkd,IAAI,CAA9Bld,GAA0Bkd,EAA1Bld;AACAkQ,QAAAA,IAAI,CAAJA,IAAAA,GAAY5J,MAAM,CAAlB4J,GAAkB,CAAlBA;AACD;AALHqP,KAAAA;AAFF,GAAA;;AAWA,MAAMD,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBvY,IAAAA,MAAM,CAANA,MAAAA,CAAAA,QAAAA,CAAAA,MAAAA,CAAAA,IAAAA;AADF,GAAA;;AAIA,MAAMyY,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,QAAMC,kBAAkB,GAAG,MAAM,CAAN,IAAA,CAAA,eAAA,EAAA,IAAA,CAAkC,UAAA,GAAA,EAAA;AAAA,aAAS,CAAC1d,GAAG,CAAHA,QAAAA,CAAV,MAAUA,CAAV;AAA7D,KAA2B,CAA3B;;AACA,QAAA,kBAAA,EAAwB;AACtBud,MAAAA,UAAU;AACV;AACD;;AACD,QAAMI,iBAAiB,GAAG,MAAM,CAAN,IAAA,CAAA,eAAA,EAAA,IAAA,CAAkC,UAAA,GAAA,EAAA;AAAA,aAAS3d,GAAG,CAAHA,QAAAA,CAAT,MAASA,CAAT;AAA5D,KAA0B,CAA1B;;AACA,QAAA,iBAAA,EAAuB;AACrBsd,MAAAA,YAAY;AACZrd,MAAAA,MAAM,CAANA,IAAAA,CAAAA,eAAAA,EAAAA,OAAAA,CAAqC,UAAA,GAAA,EAAS;AAC5C,YAAID,GAAG,CAAHA,QAAAA,CAAJ,MAAIA,CAAJ,EAA0B;AACxB,iBAAOkd,eAAe,CAAtB,GAAsB,CAAtB;AACD;;AACDH,QAAAA,0BAA0B;AAJ5B9c,OAAAA;AAMD;AAfH,GAAA;;AAkBA,MAAMyZ,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,uBAAA,EAA6B;AACtDqD,IAAAA,0BAA0B;AAC1Ba,IAAAA,sBAAsB,GAAGhb,qBAAzBgb,EAAAA;AAEAC,IAAAA,qBAAqB,GAAG/B,+BAA+B,CAAA,uBAAA,EAA0B;AAC/EC,MAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,IAAA,EAAU;AACxBqB,QAAAA,gBAAgB,CAAA,IAAA,EAAhBA,UAAgB,CAAhBA;AAF6E,OAAA;AAI/EpB,MAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,IAAA,EAAU;AACvBoB,QAAAA,gBAAgB,CAAA,IAAA,EAAhBA,SAAgB,CAAhBA;AAL6E,OAAA;AAO/EU,MAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,IAAA,EAAU;AACrBV,QAAAA,gBAAgB,CAAA,IAAA,EAAhBA,OAAgB,CAAhBA;AAR6E,OAAA;AAU/EnB,MAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,KAAA,EAAgB;AAAA,YAAblB,MAAa,GAAA,KAAA,CAAbA,MAAa;AAC5ByB,QAAAA,gBAAgB,GAAhBA,YAAAA;AACAW,QAAAA,gBAAgB,GAAG;AAAEvC,UAAAA,KAAK,EAAEG;AAAT,SAAnBoC;AACAJ,QAAAA,0BAA0B;AAbmD,OAAA;AAe/Eb,MAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,KAAA,EAAiB;AAAA,YAAdpB,OAAc,GAAA,KAAA,CAAdA,OAAc;AACtC0B,QAAAA,gBAAgB,GAAhBA,UAAAA;AACAW,QAAAA,gBAAgB,GAAG;AAAErC,UAAAA,OAAO,EAAPA;AAAF,SAAnBqC;AACAJ,QAAAA,0BAA0B;AAlBmD,OAAA;AAoB/EZ,MAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,KAAA,EAAiB;AAAA,YAAdrB,OAAc,GAAA,KAAA,CAAdA,OAAc;AACnC0B,QAAAA,gBAAgB,GAAhBA,QAAAA;AACAW,QAAAA,gBAAgB,GAAG;AAAE5C,UAAAA,SAAS,EAAEO;AAAb,SAAnBqC;AACAJ,QAAAA,0BAA0B;AAvBmD,OAAA;AAyB/EX,MAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,KAAA,EAAgB;AAAA,YAAbrB,MAAa,GAAA,KAAA,CAAbA,MAAa;AAC3ByB,QAAAA,gBAAgB,GAAhBA,WAAAA;AACAW,QAAAA,gBAAgB,GAAG;AAAEnC,UAAAA,UAAU,EAAED;AAAd,SAAnBoC;AACAJ,QAAAA,0BAA0B;AAC1Ba,QAAAA,sBAAsB,CAAtBA,OAAAA;AACAX,QAAAA,iBAAiB,CAAjBA,UAAAA;AA9B6E,OAAA;AAgC/E9C,MAAAA,WAAW,EAAE8C,iBAAiB,CAAC9C;AAhCgD,KAA1B,CAAvD0D;AAmCAA,IAAAA,qBAAqB,CAArBA,OAAAA;AAvCF,GAAA;;AA0CA,MAAMb,0BAA0B,GAAG,SAA7BA,0BAA6B,GAAM;AACvC,WAAOT,uBAAuB,CAAvBA,GAAAA,KAAgCA,uBAAuB,CAAvDA,GAAgCA,EAAhCA,GAAP,IAAA;AADF,GAAA;;AAaA,MAAMQ,0BAA0B,GAAG,SAA7BA,0BAA6B,GAAM;AACvC,QAAA,iBAAA,GAAA,gBAAA;AAAA,QAAQjC,OAAR,GAAA,iBAAA,CAAA,OAAA;AAAA,QAAiBF,KAAjB,GAAA,iBAAA,CAAA,KAAA;AAAA,QAAwBL,SAAxB,GAAA,iBAAA,CAAA,SAAA;AAEA,QAAMwD,oBAAoB,GAAGlV,QAAQ,CAARA,aAAAA,CAA7B,wBAA6BA,CAA7B;AACA,QAAMmV,WAAW,GAAG/d,MAAM,CAANA,IAAAA,CAAAA,eAAAA,EAApB,MAAA;AACAwP,IAAAA,aAAa,CAAA,oBAAA,EAAuB;AAClCwO,MAAAA,WAAW,EADuB,gBAAA;AAElCC,MAAAA,UAAU,EAAEpB,gBAAgB,KAAA,IAAA,GAFM,KAAA;AAGlCqB,MAAAA,OAAO,EAAEH,WAAW,GAAXA,CAAAA,GAAAA,KAAAA,GAA0B;AAHD,KAAvB,CAAbvO;AAMA,QAAMiD,WAAW,GAAG7J,QAAQ,CAARA,aAAAA,CAApB,6CAAoBA,CAApB;;AACA6J,IAAAA,WAAW,CAAXA,aAAAA,CAAAA,QAAAA,EAAAA,OAAAA,GAA8C,YAAM;AAClDvG,MAAAA,aAAa,CAAbA,oBAAa,CAAbA;AADFuG,KAAAA;;AAIA,QAAI8J,gBAAgB,KAApB,UAAA,EAAqC;AACnC9J,MAAAA,WAAW,CAAXA,aAAAA,CAAAA,GAAAA,EAAAA,OAAAA,GAAAA,OAAAA;AADF,KAAA,MAEO,IAAI8J,gBAAgB,KAApB,YAAA,EAAuC;AAC5C9J,MAAAA,WAAW,CAAXA,aAAAA,CAAAA,GAAAA,EAAAA,OAAAA,GAAAA,KAAAA;AADK,KAAA,MAEA,IAAI8J,gBAAgB,KAApB,WAAA,EAAsC;AAC3CjQ,MAAAA,qBAAqB,CAArBA,oBAAqB,CAArBA;;AACA,UAAA,WAAA,EAAiB;AACf,YAAM6R,UAAU,GAAG1L,WAAW,CAAXA,aAAAA,CAAnB,2BAAmBA,CAAnB;AACA0L,QAAAA,UAAU,CAAVA,SAAAA,GAAAA,WAAAA;;AACAA,QAAAA,UAAU,CAAVA,OAAAA,GAAqB,YAAM;AACzBvD,UAAAA,OAAO,CAAPA,GAAAA,CAAYpW,IAAI,CAAJA,SAAAA,CAAAA,eAAAA,EAAAA,IAAAA,EAAZoW,IAAYpW,CAAZoW,EADyB,eACzBA,EADyB,CAAA;;AAGzB7V,UAAAA,MAAM,CAANA,MAAAA,CAAAA,KAAAA,CAAoBP,IAAI,CAAJA,SAAAA,CAAAA,eAAAA,EAAAA,IAAAA,EAApBO,IAAoBP,CAApBO;AAHFoZ,SAAAA;;AAKA1L,QAAAA,WAAW,CAAXA,aAAAA,CAAAA,0BAAAA,EAAAA,OAAAA,GAAAA,aAAAA;AACD;AAXI,KAAA,MAYA,IAAI8J,gBAAgB,KAApB,QAAA,EAAmC;AACxClQ,MAAAA,eAAe,CAAfA,oBAAe,CAAfA;AACAoG,MAAAA,WAAW,CAAXA,aAAAA,CAAAA,GAAAA,EAAAA,OAAAA,GAAAA,SAAAA;AACD;AAnCH,GAAA;;ACjJA,MAAM2L,kBAAkB,GAAxB,GAAA;;AAEO,MAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AACzC;AACA;AACA,QAAMC,sBAAsB,GAAG7N,0BAA0B,CAAzD,kBAAyD,CAAzD;;AACA,QAAM8N,4BAA4B,GAAG,SAA/BA,4BAA+B,GAAM;AACzCC,MAAAA,iBAAiB,CAAjBA,sBAAiB,CAAjBA;AADF,KAAA;;AAGAD,IAAAA,4BAA4B;AAC5BD,IAAAA,sBAAsB,CAAtBA,OAAAA,CAAAA,MAAAA,CARyC,4BAQzCA,EARyC,CAAA;;AAWzC1V,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,uBAAAA,EAAAA,OAAAA,GAA0D,YAAA;AAAA,aAAM6V,kBAAN,EAAA;AAA1D7V,KAAAA;AAXK,GAAA;;AAcP,MAAM4V,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,sBAAA,EAA4B;AACpD;AACArS,IAAAA,WAAW,CAACvD,QAAQ,CAARA,aAAAA,CAAZuD,wBAAYvD,CAAD,CAAXuD;AACAA,IAAAA,WAAW,CAACvD,QAAQ,CAARA,aAAAA,CAHwC,sBAGxCA,CAAD,CAAXuD,CAHoD,CAAA;;AAKpDjC,IAAAA,wBAAwB,CAACtB,QAAQ,CAARA,aAAAA,CAAzBsB,WAAyBtB,CAAD,CAAxBsB;;AAEA,QAAIoU,sBAAsB,CAA1B,OAAIA,EAAJ,EAAsC;AACpCI,MAAAA,cAAc;AADhB,KAAA,MAEO;AACLC,MAAAA,eAAe;AAChB;AAXH,GAAA;;AAcA,MAAIC,KAAK,GAAT,EAAA;;AAEA,MAAMF,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B;AACA,QAAMG,yBAAyB,GAAGjW,QAAQ,CAARA,gBAAAA,CAAlC,mCAAkCA,CAAlC;AACA,QAAMkW,YAAY,GAAGlW,QAAQ,CAARA,aAAAA,CAHM,gBAGNA,CAArB,CAH2B,CAAA;;AAM3BgW,IAAAA,KAAK,GAAG,KAAK,CAAL,IAAA,CAAA,yBAAA,EAAA,GAAA,CAA0C,UAAA,OAAA,EAAa;AAC7D,UAAMG,WAAW,GAAGnW,QAAQ,CAARA,aAAAA,CAApB,KAAoBA,CAApB;AACAmW,MAAAA,WAAW,CAAXA,KAAAA,CAAAA,OAAAA,GAAAA,MAAAA;AACAA,MAAAA,WAAW,CAAXA,YAAAA,CAAAA,kBAAAA,EAAAA,EAAAA;AACAvV,MAAAA,OAAO,CAAPA,UAAAA,CAAAA,YAAAA,CAAAA,WAAAA,EAAAA,OAAAA;AACAsV,MAAAA,YAAY,CAAZA,WAAAA,CAAAA,OAAAA;AACA,aAAO;AAAEtV,QAAAA,OAAO,EAAT,OAAA;AAAWuV,QAAAA,WAAW,EAAXA;AAAX,OAAP;AANFH,KAAQ,CAARA;AASAhW,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,UAAAA,EAAAA,YAAAA,CAAAA,4BAAAA,EAAAA,EAAAA;AACAa,IAAAA,sBAAsB,CAACb,QAAQ,CAARA,aAAAA,CAAvBa,uBAAuBb,CAAD,CAAtBa;AAhBF,GAAA;;AAmBA,MAAMkV,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B;AACAK,IAAAA,gBAAgB;AAChB9U,IAAAA,wBAAwB,CAACtB,QAAQ,CAARA,aAAAA,CAAzBsB,gBAAyBtB,CAAD,CAAxBsB;AACA0U,IAAAA,KAAK,CAALA,OAAAA,CAAc,UAAA,IAAA,EAA8B;AAAA,UAA3BpV,OAA2B,GAAA,IAAA,CAA3BA,OAA2B;AAAA,UAAlBuV,WAAkB,GAAA,IAAA,CAAlBA,WAAkB;AAC1CA,MAAAA,WAAW,CAAXA,UAAAA,CAAAA,YAAAA,CAAAA,OAAAA,EAAAA,WAAAA;AADFH,KAAAA;AAGAA,IAAAA,KAAK,GAALA,EAAAA;AAEAhW,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,UAAAA,EAAAA,eAAAA,CAAAA,4BAAAA;AACAW,IAAAA,gBAAgB,CAACX,QAAQ,CAARA,aAAAA,CAAjBW,uBAAiBX,CAAD,CAAhBW;AAVF,GAAA;;AAaA,MAAMkV,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B,QAAIQ,qBAAJ,EAAA,EAA6B;AAC3BD,MAAAA,gBAAgB;AADlB,KAAA,MAEO;AACLE,MAAAA,gBAAgB;AACjB;AALH,GAAA;;AAQA,MAAMD,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClC,QAAME,OAAO,GAAGvW,QAAQ,CAARA,aAAAA,CAAhB,UAAgBA,CAAhB;AACA,WAAOuW,OAAO,CAAPA,YAAAA,CAAP,4BAAOA,CAAP;AAFF,GAAA;;AAKA,MAAMD,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,QAAMC,OAAO,GAAGvW,QAAQ,CAARA,aAAAA,CAAhB,UAAgBA,CAAhB;AACAA,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,gBAAAA,EAAAA,YAAAA,CAAAA,cAAAA,EAAAA,EAAAA;AACAuW,IAAAA,OAAO,CAAPA,YAAAA,CAAAA,4BAAAA,EAAAA,EAAAA;AAHF,GAAA;;AAMA,MAAMH,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,QAAMG,OAAO,GAAGvW,QAAQ,CAARA,aAAAA,CAAhB,UAAgBA,CAAhB;AACAuW,IAAAA,OAAO,CAAPA,eAAAA,CAAAA,4BAAAA;AACAvW,IAAAA,QAAQ,CAARA,aAAAA,CAAAA,gBAAAA,EAAAA,eAAAA,CAAAA,cAAAA;AAHF,GAAA;ACvFA;;;AA+gBO,WAAA,KAAA,CAAA,IAAA,EAAA,IAAA,EAAA,MAAA,EAAmC;AACzC,QAAA,MAAA,EAAY;AACX,aAAOjF,IAAI,GAAGA,IAAI,CAAClB,IAAR,EAAO,CAAP,GAAkBA,IAA7B,EAAA;AACA;;AACD,QAAI;AACH,UAAImF,MAAM,GAAGtE,OAAO,CAAPA,OAAAA,CAAgBb,IAA7B,EAAaa,CAAb;AACA,aAAOK,IAAI,GAAGiE,MAAM,CAANA,IAAAA,CAAH,IAAGA,CAAH,GAAX,MAAA;AAFD,KAAA,CAGE,OAAA,CAAA,EAAU;AACX,aAAOtE,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AACD;;AArgBD,MAAM8b,2BAA2B,GAAGvT,gBAAgB,CAApD,SAAoD,CAApD;;AAkDO,WAAA,MAAA,CAAA,CAAA,EAAmB;AACzB,WAAO,YAAW;AACjB,WAAK,IAAI3I,IAAI,GAAR,EAAA,EAAenE,CAAC,GAArB,CAAA,EAA2B,CAAC,GAAGkD,SAAS,CAAxC,MAAA,EAAiDlD,CAAjD,EAAA,EAAsD;AACrDmE,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAUjB,SAAS,CAAnBiB,CAAmB,CAAnBA;AACA;;AACD,UAAI;AACH,eAAOI,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,OAAA,CAEE,OAAA,CAAA,EAAS;AACV,eAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,KAAA;AAUA;;AA3DD,MAAM+b,aAAa,GAAA,MAAA,CAAA,YAAe;AAChC,QAAMC,uBAAuB,GAAGva,MAAM,CAANA,MAAAA,CAAAA,QAAAA,CAAhC,IAAA;AACA,QAAMwa,mBAAmB,GAAGxa,MAAM,CAANA,MAAAA,CAAAA,QAAAA,CAFI,MAEhC,CAFgC,CAAA;;AAAA,WAAA,KAAA,CAAA,kBAAA,EAAA,UAAA,eAAA,EAAA;AAKhC,UAAQyG,uBAAR,GAAmDgU,eAAnD,CAAA,uBAAA;AAAA,UAAiC9C,aAAjC,GAAmD8C,eAAnD,CAAA,aAAA;AACA,UAAM3G,YAAY,GAAG4G,eAAe,CAAC;AACnCH,QAAAA,uBAAuB,EADY,uBAAA;AAEnC9T,QAAAA,uBAAuB,EAFY,uBAAA;AAGnC+T,QAAAA,mBAAmB,EAAnBA;AAHmC,OAAD,CAApC;AAKA,UAAMzN,uBAAuB,GAAG+G,YAAY,CAA5C,eAAA;AAEA,UAAM6G,cAAc,GAAG9W,QAAQ,CAARA,aAAAA,CAAvB,kBAAuBA,CAAvB;;AACA8W,MAAAA,cAAc,CAAdA,OAAAA,GAAyB,YAAM;AAC7BnT,QAAAA,cAAc;AACdK,QAAAA,YAAY;AAFd8S,OAAAA;;AAKA,UAAMC,cAAc,GAAG/W,QAAQ,CAARA,aAAAA,CAAvB,UAAuBA,CAAvB;AACAgX,MAAAA,oBAAoB,CAAC;AACnBT,QAAAA,OAAO,EAAE;AACP3V,UAAAA,OAAO,EADA,cAAA;AAEPqW,UAAAA,IAAI,EAFG,WAAA;AAGPC,UAAAA,IAAI,EAAE,SAAA,IAAA,GAAA;AAAA,mBAAMC,WAAN,EAAA;AAHC,WAAA;AAIPC,UAAAA,MAAM,EAAEC;AAJD;AADU,OAAD,CAApBL;AASA,UAAMM,cAAc,GAAGd,2BAA2B,CAA3BA,GAAAA,KACnBA,2BAA2B,CADRA,GACnBA,EADmBA,GAAvB,IAAA;;AAIA,UAAA,cAAA,EAAoB;AAClBe,QAAAA,WAAW,CAAC;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAAD,CAAXD;AADF,OAAA,MAEO;AACLJ,QAAAA,WAAW,CAAC;AAAEK,UAAAA,OAAO,EAAE;AAAX,SAAD,CAAXL;AACD;;AAEDxU,MAAAA,yBAAyB,CAAC;AACxBC,QAAAA,uBAAuB,EADC,uBAAA;AAExBC,QAAAA,4BAA4B,EAAE+T,eAAe,CAAC/T;AAFtB,OAAD,CAAzBF;AAKAyB,MAAAA,yBAAyB;AACzBqR,MAAAA,qBAAqB;AACrB5R,MAAAA,qBAAqB;AACrBwC,MAAAA,sBAAsB;AACtBP,MAAAA,kBAAkB;AAClBmD,MAAAA,wBAAwB,CAAC;AAAEC,QAAAA,uBAAuB,EAAvBA;AAAF,OAAD,CAAxBD;AACA,MAAA,0BAA0B,CAAC;AAAEgH,QAAAA,YAAY,EAAZA;AAAF,OAAD,CAA1B,CAlDgC,CAAA;;AAoDhC3O,MAAAA,wBAAwB,CAACtB,QAAQ,CAARA,aAAAA,CAAzBsB,iBAAyBtB,CAAD,CAAxBsB;AACA,MAAA,sBAAsB,CAAC;AAAE4H,QAAAA,uBAAuB,EAAzB,uBAAA;AAA2B4K,QAAAA,aAAa,EAAbA;AAA3B,OAAD,CAAtB,CArDgC,CAAA;AAwDhC;AACA;;AACA,MAAA,QAAQ,CAAR,aAAA,CAAA,uBAAA,EAAA,OAAA,GAA0D,YAAA;AAAA,eAAMuD,aAAN,EAAA;AAA1D,OAAA;AA1DgC,KAAA,CAAA;AAAlC,GAAmB,CAAnB;;AA6DA,MAAML,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAA,MAAA,EAAY;AACvC,QAAMS,SAAN,GAAoBtb,MAAM,CAA1B,MAAoBA,CAApB,SAAA;;AACA,QAAI,CAAJ,SAAA,EAAgB;AACdsb,MAAAA,SAAS,GAATA,EAAAA;AACAtb,MAAAA,MAAM,CAANA,MAAAA,CAAAA,SAAAA,GAAAA,EAAAA;AACD;;AAED/E,IAAAA,MAAM,CAANA,MAAAA,CAAAA,SAAAA,EAAAA,MAAAA;AAPF,GAAA;;AAUA,MAAMigB,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,QAAIK,gBAAJ,EAAA,EAAwB;AACtBP,MAAAA,WAAW;AADb,KAAA,MAEO;AACLI,MAAAA,WAAW;AACZ;AALH,GAAA;;AAQA,MAAMG,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAA;AAAA,WAAM1X,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAN,sBAAMA,CAAN;AAAzB,GAAA;;AAEA,MAAImX,WAAW,GAAG,SAAA,WAAA,GAAM;AACtB;AACAQ,IAAAA,iBAAiB,CAAA,2BAAA,EAAjBA,KAAiB,CAAjBA;AAFF,GAAA,C,CAAA;AAMA;;;AACA,MAAMJ,WAAW,GAAG,SAAdA,WAAc,GAA6B;AAAA,QAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;AAAA,QAAA,YAAA,GAAA,IAAA,CAA1BC,OAA0B;AAAA,QAA1BA,OAA0B,GAAA,YAAA,KAAA,KAAA,CAAA,GAAhB,IAAgB,GAAA,YAAA;;AAC/ChB,IAAAA,2BAA2B,CAA3BA,GAAAA,CAAAA,IAAAA;;AACA,QAAA,OAAA,EAAa;AACXxW,MAAAA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAAA,wBAAAA,EAAAA,EAAAA;AADF,KAAA,MAEO;AACLA,MAAAA,QAAQ,CAARA,eAAAA,CAAAA,eAAAA,CAAAA,wBAAAA;AACD;;AACDA,IAAAA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAAA,sBAAAA,EAAAA,EAAAA;AAEA2X,IAAAA,iBAAiB,CAAA,2BAAA,EAAjBA,IAAiB,CAAjBA;AAEA,QAAMC,aAAa,GAAGtX,gBAAtB,EAAA;AACA,QAAMuX,mBAAmB,GAAGD,aAAa,CAAzC,UAAA;AACA,QAAME,YAAY,GAAG3b,MAAM,CAA3B,MAAA;AACA,QAAM4b,qBAAqB,GACzBD,YAAY,CAAZA,QAAAA,CAAAA,UAAAA,KAAAA,YAAAA,GACIA,YAAY,CAAZA,QAAAA,CADJA,eAAAA,GAEIA,YAAY,CAAZA,QAAAA,CAHN,IAAA;AAKA,QAAME,UAAU,GAAGD,qBAAqB,CAArBA,YAAAA,GAAqCD,YAAY,CAApE,WAAA;AACA,QAAMG,OAAO,GAAGF,qBAAqB,CAArC,SAAA;AACA,QAAMG,gBAAgB,GAAGF,UAAU,GAAnC,OAAA;AAEAxX,IAAAA,SAAS,CAAA,mBAAA,EAAsB;AAC7B,6BAD6B,gBAAA;AAE7B,6BAAuB;AAFM,KAAtB,CAATA,CAvB+C,CAAA;;AA4B/C,QAAM2X,gCAAgC,GAAG3X,SAAS,CAAA,mBAAA,EAAsB;AACtE,+BADsE,MAAA;AACrC;AACjC,wBAFsE,MAAA,CAAA;;AAAA,KAAtB,CAAlD;AAIA,QAAM4X,0BAA0B,GAAG5X,SAAS,CAAA,aAAA,EAAgB;AAC1D6X,MAAAA,MAAM,EADoD,MAAA;AAE1DC,MAAAA,UAAU,EAAE;AAF8C,KAAhB,CAA5C;;AAKA,QAAIJ,gBAAgB,GAAhBA,EAAAA,IAAyBF,UAAU,GAAvC,CAAA,EAA6C;AAC3C,UAAMO,SAAS,GAAGN,OAAO,GAAzB,EAAA;AACA1W,MAAAA,wBAAwB,CAAC;AACvBC,QAAAA,QAAQ,EADe,GAAA;AAEvBE,QAAAA,UAAU,EAAE,SAAA,UAAA,CAAA,KAAA,EAAkB;AAAA,cAAfS,QAAe,GAAA,KAAA,CAAfA,QAAe;AAC5B,cAAM9K,KAAK,GAAG4gB,OAAO,GAAG,CAACM,SAAS,GAAV,OAAA,IAAxB,QAAA;AACAR,UAAAA,qBAAqB,CAArBA,SAAAA,GAAAA,KAAAA;AACD;AALsB,OAAD,CAAxBxW;AAOD;;AAED4V,IAAAA,WAAW,GAAG,SAAA,WAAA,GAAM;AAClBgB,MAAAA,gCAAgC;AAChCC,MAAAA,0BAA0B;AAE1B7U,MAAAA,WAAW,CAACvD,QAAQ,CAARA,aAAAA,CAAZuD,wBAAYvD,CAAD,CAAXuD;AACAA,MAAAA,WAAW,CAACvD,QAAQ,CAARA,aAAAA,CAAZuD,sBAAYvD,CAAD,CAAXuD;AACAiT,MAAAA,2BAA2B,CAA3BA,GAAAA,CAAAA,KAAAA;;AACA,UAAA,OAAA,EAAa;AACXxW,QAAAA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,CAAAA,wBAAAA,EAAAA,EAAAA;AADF,OAAA,MAEO;AACLA,QAAAA,QAAQ,CAARA,eAAAA,CAAAA,eAAAA,CAAAA,wBAAAA;AACD;;AACDA,MAAAA,QAAQ,CAARA,eAAAA,CAAAA,eAAAA,CAAAA,sBAAAA;AACA2X,MAAAA,iBAAiB,CAAA,2BAAA,EAAjBA,KAAiB,CAAjBA;AAbFR,KAAAA;AAhDF,GAAA;;AAiEA,MAAMN,eAAe,GAAG,SAAlBA,eAAkB,CAAA,KAAA,EAIlB;AAAA,QAHJH,uBAGI,GAAA,KAAA,CAHJA,uBAGI;AAAA,QAFJ9T,uBAEI,GAAA,KAAA,CAFJA,uBAEI;AAAA,QADJ+T,mBACI,GAAA,KAAA,CADJA,mBACI;AACJ,QAAM6B,qBAAqB,GAAG9c,MAAM,CAAC,IAAA,GAAA,CAAA,uBAAA,EAArC,mBAAqC,CAAD,CAApC;;AACA,QAAIvG,aAAa,CAAA,uBAAA,EAAjB,qBAAiB,CAAjB,EAAmE;AACjE,UAAMsjB,qBAAqB,GAAGjiB,gBAAgB,CAAA,uBAAA,EAA9C,qBAA8C,CAA9C;AACA,UAAMkiB,UAAU,GAAGD,qBAAqB,CAArBA,OAAAA,CAAnB,GAAmBA,CAAnB;AACA,UAAME,eAAe,GAAGF,qBAAqB,CAArBA,KAAAA,CAA4BC,UAAU,GAA9D,CAAwBD,CAAxB;AACA,aAAO;AACLE,QAAAA,eAAe,EADV,eAAA;AAEL/V,QAAAA,uBAAuB,EAFlB,uBAAA;AAGLmI,QAAAA,SAAS,EAAE0N,qBAAqB,CAArBA,KAAAA,CAAAA,CAAAA,EAAAA,UAAAA;AAHN,OAAP;AAKD;;AACD,WAAO;AACLE,MAAAA,eAAe,EAAE,IAAA,GAAA,CAAA,uBAAA,EAAA,QAAA,CAAA,KAAA,CADZ,CACY,CADZ;AAEL/V,MAAAA,uBAAuB,EAFlB,uBAAA;AAGLmI,MAAAA,SAAS,EAAE;AAHN,KAAP;AAhBF,GAAA;;AAuBA,MAAM4M,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,IAAA,EAAA,KAAA,EAAiB;AACzCxb,IAAAA,MAAM,CAANA,MAAAA,CAAAA,WAAAA,CACE;AACEyc,MAAAA,KAAK,EADP,IAAA;AAEEC,MAAAA,IAAI,EAFN,IAAA;AAGExhB,MAAAA,KAAK,EAALA;AAHF,KADF8E,EAAAA,GAAAA;AADF,GAAA;;AAWAA,EAAAA,MAAM,CAANA,aAAAA,GAAAA,aAAAA",
  "sourcesContent": [
    "export const urlIsInsideOf = (urlValue, otherUrlValue) => {\n  const url = new URL(urlValue)\n  const otherUrl = new URL(otherUrlValue)\n\n  if (url.origin !== otherUrl.origin) {\n    return false\n  }\n\n  const urlPathname = url.pathname\n  const otherUrlPathname = otherUrl.pathname\n  if (urlPathname === otherUrlPathname) {\n    return false\n  }\n\n  return urlPathname.startsWith(otherUrlPathname)\n}\n",
    "export const getCommonPathname = (pathname, otherPathname) => {\n  const firstDifferentCharacterIndex = findFirstDifferentCharacterIndex(pathname, otherPathname)\n\n  // pathname and otherpathname are exactly the same\n  if (firstDifferentCharacterIndex === -1) {\n    return pathname\n  }\n\n  const commonString = pathname.slice(0, firstDifferentCharacterIndex + 1)\n\n  // the first different char is at firstDifferentCharacterIndex\n  if (pathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  if (otherPathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  const firstDifferentSlashIndex = commonString.lastIndexOf(\"/\")\n  return pathname.slice(0, firstDifferentSlashIndex + 1)\n}\n\nconst findFirstDifferentCharacterIndex = (string, otherString) => {\n  const maxCommonLength = Math.min(string.length, otherString.length)\n  let i = 0\n  while (i < maxCommonLength) {\n    const char = string.charAt(i)\n    const otherChar = otherString.charAt(i)\n    if (char !== otherChar) {\n      return i\n    }\n    i++\n  }\n  if (string.length === otherString.length) {\n    return -1\n  }\n  // they differ at maxCommonLength\n  return maxCommonLength\n}\n",
    "export const pathnameToParentPathname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return \"/\"\n  }\n\n  return pathname.slice(0, slashLastIndex + 1)\n}\n",
    "import { getCommonPathname } from \"./internal/getCommonPathname.js\"\nimport { pathnameToParentPathname } from \"./internal/pathnameToParentPathname.js\"\n\nexport const urlToRelativeUrl = (urlArg, baseUrlArg) => {\n  const url = new URL(urlArg)\n  const baseUrl = new URL(baseUrlArg)\n\n  if (url.protocol !== baseUrl.protocol) {\n    return urlArg\n  }\n\n  if (url.username !== baseUrl.username || url.password !== baseUrl.password) {\n    return urlArg.slice(url.protocol.length)\n  }\n\n  if (url.host !== baseUrl.host) {\n    return urlArg.slice(url.protocol.length)\n  }\n\n  const { pathname, hash, search } = url\n  if (pathname === \"/\") {\n    return baseUrl.pathname.slice(1)\n  }\n\n  const { pathname: basePathname } = baseUrl\n\n  const commonPathname = getCommonPathname(pathname, basePathname)\n  if (!commonPathname) {\n    return urlArg\n  }\n\n  const specificPathname = pathname.slice(commonPathname.length)\n  const baseSpecificPathname = basePathname.slice(commonPathname.length)\n  if (baseSpecificPathname.includes(\"/\")) {\n    const baseSpecificParentPathname = pathnameToParentPathname(baseSpecificPathname)\n    const relativeDirectoriesNotation = baseSpecificParentPathname.replace(/.*?\\//g, \"../\")\n    return `${relativeDirectoriesNotation}${specificPathname}${search}${hash}`\n  }\n  return `${specificPathname}${search}${hash}`\n}\n",
    "export default (obj, key, value) => {\n  // Shortcircuit the slow defineProperty path when possible.\n  // We are trying to avoid issues where setters defined on the\n  // prototype cause side effects under the fast path of simple\n  // assignment. By checking for existence of the property with\n  // the in operator, we can optimize most of this overhead away.\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    })\n  } else {\n    obj[key] = value\n  }\n  return obj\n}\n",
    "export const createDetailedMessage = (message, details = {}) => {\n  let string = `${message}`\n\n  Object.keys(details).forEach((key) => {\n    const value = details[key]\n    string += `\n--- ${key} ---\n${\n  Array.isArray(value)\n    ? value.join(`\n`)\n    : value\n}`\n  })\n\n  return string\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export const createCancellationToken = () => {\n  const register = (callback) => {\n    if (typeof callback !== \"function\") {\n      throw new Error(`callback must be a function, got ${callback}`)\n    }\n\n    return {\n      callback,\n      unregister: () => {},\n    }\n  }\n\n  const throwIfRequested = () => undefined\n\n  return {\n    register,\n    cancellationRequested: false,\n    throwIfRequested,\n  }\n}\n",
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const createCancelError = (reason) => {\n  const cancelError = new Error(`canceled because ${reason}`)\n  cancelError.name = \"CANCEL_ERROR\"\n  cancelError.reason = reason\n  return cancelError\n}\n\nexport const isCancelError = (value) => {\n  return value && typeof value === \"object\" && value.name === \"CANCEL_ERROR\"\n}\n\nexport const errorToCancelReason = (error) => {\n  if (!isCancelError(error)) return \"\"\n  return error.reason\n}\n",
    "/* eslint-disable no-eq-null, eqeqeq */\nexport default function arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length\n  var arr2 = new Array(len)\n  for (var i = 0; i < len; i++) arr2[i] = arr[i]\n  return arr2\n}\n",
    "/* eslint-disable consistent-return */\nimport arrayLikeToArray from \"../arrayLikeToArray/arrayLikeToArray.js\"\n\nexport default function unsupportedIterableToArray(o, minLen) {\n  if (!o) return\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen)\n  var n = Object.prototype.toString.call(o).slice(8, -1)\n  if (n === \"Object\" && o.constructor) n = o.constructor.name\n  if (n === \"Map\" || n === \"Set\") return Array.from(o)\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return arrayLikeToArray(o, minLen)\n}\n",
    "import defineProperty from \"../defineProperty/defineProperty.js\"\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object)\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object)\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable\n      })\n    }\n    keys.push.apply(keys, symbols)\n  }\n  return keys\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {}\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key])\n      })\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\n      })\n    }\n  }\n  return target\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { createDetailedMessage } from \"@jsenv/logger\"\n// ideally we should do some window.fetch detection (ensuring it has cancellation) and accordingly\n// fallback to this polyfill (or even use an existing polyfill would be better)\n// https://github.com/github/fetch/blob/master/fetch.js\n\nexport const fetchUsingXHR = async (\n  url,\n  {\n    cancellationToken = createCancellationToken(),\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  cancellationToken.register((cancelError) => {\n    xhr.abort()\n    failure(cancelError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl = \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    createDetailedMessage(`error during xhr request on ${url}.`, {\n      [\"error stack\"]: error.stack,\n    }),\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return value && viewClasses.includes(Object.prototype.toString.call(value))\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { createCancellationToken } from \"@jsenv/cancellation/main.browser.js\"\nimport { fetchUsingXHR } from \"./fetchUsingXHR.js\"\n\nconst fetchNative = async (\n  url,\n  { cancellationToken = createCancellationToken(), mode = \"cors\", ...options } = {},\n) => {\n  const abortController = new AbortController()\n\n  let cancelError\n  cancellationToken.register((reason) => {\n    cancelError = reason\n    abortController.abort(reason)\n  })\n\n  let response\n  try {\n    response = await window.fetch(url, {\n      signal: abortController.signal,\n      mode,\n      ...options,\n    })\n  } catch (e) {\n    if (cancelError && e.name === \"AbortError\") {\n      throw cancelError\n    }\n    throw e\n  }\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" && typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch-browser.js\"\n\nexport const fetchJson = async (url, options = {}) => {\n  const response = await fetchUrl(url, options)\n  const object = await response.json()\n  return object\n}\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { isCancelError } from \"@jsenv/cancellation/main.browser.js\"\n\nimport { fetchJson } from \"../browser-utils/fetchJson.js\"\n\nexport const fetchExploringJson = async ({ cancellationToken } = {}) => {\n  try {\n    const exploringInfo = await fetchJson(\"/.jsenv/exploring.json\", {\n      cancellationToken,\n    })\n    return exploringInfo\n  } catch (e) {\n    if (isCancelError(e)) {\n      throw e\n    }\n    throw new Error(\n      createDetailedMessage(`Cannot communicate with exploring server due to a network error`, {\n        [\"error stack\"]: e.stack,\n      }),\n    )\n  }\n}\n",
    "export const updateIframeOverflowOnParentWindow = () => {\n  const aTooltipIsOpened =\n    document.querySelector(\"[data-tooltip-visible]\") ||\n    document.querySelector(\"[data-tooltip-auto-visible]\")\n  const settingsAreOpened = document.querySelector(\"#settings[data-active]\")\n\n  if (aTooltipIsOpened || settingsAreOpened) {\n    enableIframeOverflowOnParentWindow()\n  } else {\n    disableIframeOverflowOnParentWindow()\n  }\n}\n\nlet iframeOverflowEnabled = false\nconst enableIframeOverflowOnParentWindow = () => {\n  if (iframeOverflowEnabled) return\n  iframeOverflowEnabled = true\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"100%\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nconst disableIframeOverflowOnParentWindow = () => {\n  if (!iframeOverflowEnabled) return\n  iframeOverflowEnabled = false\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"40px\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nexport const getToolbarIframe = () => {\n  const iframes = Array.from(window.parent.document.querySelectorAll(\"iframe\"))\n  return iframes.find((iframe) => iframe.contentWindow === window)\n}\n\nexport const forceHideElement = (element) => {\n  element.setAttribute(\"data-force-hide\", \"\")\n}\n\nexport const removeForceHideElement = (element) => {\n  element.removeAttribute(\"data-force-hide\")\n}\n\nexport const setStyles = (element, styles) => {\n  const elementStyle = element.style\n  const restoreStyles = Object.keys(styles).map((styleName) => {\n    let restore\n    if (styleName in elementStyle) {\n      const currentStyle = elementStyle[styleName]\n      restore = () => {\n        elementStyle[styleName] = currentStyle\n      }\n    } else {\n      restore = () => {\n        delete elementStyle[styleName]\n      }\n    }\n\n    elementStyle[styleName] = styles[styleName]\n\n    return restore\n  })\n  return () => {\n    restoreStyles.forEach((restore) => restore())\n  }\n}\n\nexport const setAttributes = (element, attributes) => {\n  Object.keys(attributes).forEach((name) => {\n    element.setAttribute(name, attributes[name])\n  })\n}\n\nexport const getDocumentScroll = () => {\n  return {\n    x: document.documentElement.scrollLeft,\n    y: document.documentElement.scrollTop,\n  }\n}\n\nexport const toolbarSectionIsActive = (element) => {\n  return element.hasAttribute(\"data-active\")\n}\n\nexport const activateToolbarSection = (element) => {\n  element.setAttribute(\"data-active\", \"\")\n}\n\nexport const deactivateToolbarSection = (element) => {\n  element.removeAttribute(\"data-active\")\n}\n",
    "import { setStyles } from \"./dom.js\"\n\nconst animateFallback = () => {\n  return Promise.resolve()\n}\n\nconst animateNative = (node, keyframes, { cancellationToken, ...options } = {}) => {\n  const animation = node.animate(keyframes, options)\n  if (cancellationToken) {\n    cancellationToken.register(() => {\n      animation.cancel()\n    })\n  }\n  return new Promise((resolve) => {\n    animation.onfinish = resolve\n  })\n}\n\nexport const canUseAnimation = () => typeof HTMLElement.prototype.animate === \"function\"\n\nexport const animateElement = canUseAnimation() ? animateNative : animateFallback\n\nexport const fadeIn = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 0,\n      },\n      {\n        opacity: 1,\n      },\n    ],\n    options,\n  )\n\nexport const fadeOut = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 1,\n      },\n      {\n        opacity: 0,\n      },\n    ],\n    options,\n  )\n\nexport const move = (fromNode, toNode, options) => {\n  const fromComputedStyle = window.getComputedStyle(fromNode)\n  const toComputedStyle = window.getComputedStyle(toNode)\n  // get positions of input in toolbar and aElement\n  const fromPosition = fromNode.getBoundingClientRect()\n  const toPosition = toNode.getBoundingClientRect()\n\n  // we'll do the animation in a div preventing overflow and pointer events\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.left = 0\n  div.style.top = 0\n  div.style.width = `${document.documentElement.scrollWidth}px`\n  div.style.height = `${document.documentElement.scrollHeight}px`\n  div.style.overflow = \"hidden\"\n  div.style.pointerEvents = \"none\"\n\n  const documentScroll = {\n    left: window.pageXOffset || document.documentElement.scrollLeft,\n    top: window.pageYOffset || document.documentElement.scrollTop,\n  }\n\n  // clone node and style it\n  const copy = fromNode.cloneNode(true)\n  copy.style.position = \"absolute\"\n  copy.style.left = `${documentScroll.left + fromPosition.left}px`\n  copy.style.top = `${documentScroll.top + fromPosition.top}px`\n  copy.style.maxWidth = `${fromPosition.right - fromPosition.left}px`\n  copy.style.overflow = toComputedStyle.overflow\n  copy.style.textOverflow = toComputedStyle.textOverflow\n  div.appendChild(copy)\n  document.body.appendChild(div)\n\n  const left = toPosition.left - fromPosition.left - (parseInt(fromComputedStyle.paddingLeft) || 0)\n  const top = toPosition.top - fromPosition.top - (parseInt(fromComputedStyle.paddingTop) || 0)\n  // define final position of new element and the duration\n  const translate = `translate(${left}px, ${top}px)`\n\n  // animate new element\n  return animateElement(\n    copy,\n    [\n      {\n        transform: \"translate(0px, 0px)\",\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n        fontSize: fromComputedStyle.fontSize,\n        height: `${fromPosition.bottom - fromPosition.top}px`,\n        width: \"100%\",\n      },\n      {\n        offset: 0.9,\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n      },\n      {\n        transform: translate,\n        backgroundColor: toComputedStyle.backgroundColor,\n        color: toComputedStyle.color,\n        fontSize: toComputedStyle.fontSize,\n        height: `${toPosition.bottom - toPosition.top}px`,\n        width: toComputedStyle.width,\n      },\n    ],\n    options,\n  ).then(() => {\n    div.parentNode.removeChild(div)\n  })\n}\n\n// the whole point of this toolbar animation wass to flight a visual imperfection when it's done by css transition.\n// This imperfection is a white line sometimes flickering at the bottom of the page.\n// It got fixed by removing the usage of calc(100vh - 40px)\n// It was hapenning in chrome, safari but not inside Firefox\n// I assume it's because Firefox does not read parent element min-height while\n// chrome use it to compute min-height: 100%\nexport const createToolbarAnimation = () => {\n  const collapsedState = {\n    \"#page\": { paddingBottom: 0 },\n    \"footer\": { height: 0 },\n    \"#toolbar\": { visibility: \"hidden\" },\n  }\n  const expandedState = {\n    \"#page\": { paddingBottom: \"40px\" },\n    \"footer\": { height: \"40px\" },\n    \"#toolbar\": { visibility: \"visible\" },\n  }\n  const expandTransition = transit(collapsedState, expandedState, { duration: 300 })\n\n  const expand = () => {\n    expandTransition.play()\n  }\n\n  const collapse = () => {\n    expandTransition.reverse()\n  }\n\n  return { expand, collapse }\n}\n\nexport const transit = (\n  fromState,\n  toState,\n  { commitStyles = true, fill = \"both\", duration = 300 } = {},\n) => {\n  const steps = []\n  Object.keys(fromState).forEach((selector) => {\n    const fromStyles = {}\n    const toStyles = {}\n    const element = document.querySelector(selector)\n\n    const keyframes = []\n    const fromProperties = fromState[selector]\n    const toProperties = toState[selector]\n    Object.keys(fromProperties).forEach((propertyName) => {\n      const from = fromProperties[propertyName]\n      const to = toProperties[propertyName]\n      fromStyles[propertyName] = from\n      toStyles[propertyName] = to\n    })\n    keyframes.push(fromStyles, toStyles)\n\n    let animation\n    if (canUseAnimation()) {\n      const effect = new KeyframeEffect(element, keyframes, { fill, duration })\n      animation = new Animation(effect)\n    } else {\n      animation = {\n        playbackRate: 1,\n        play: () => {\n          animation.onfinish()\n        },\n        reverse: () => {\n          animation.playbackRate = -1\n          animation.onfinish()\n        },\n        finish: () => {},\n        onfinish: () => {},\n      }\n    }\n\n    steps.push({\n      element,\n      animation,\n      fromStyles,\n      toStyles,\n    })\n  })\n\n  const play = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, toStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, toStyles)\n            }\n            resolve()\n          }\n          if (animation.playbackRate === -1) {\n            animation.reverse()\n          } else {\n            animation.play()\n          }\n        })\n      }),\n    )\n  }\n\n  const reverse = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, fromStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, fromStyles)\n            }\n            resolve()\n          }\n          animation.reverse()\n        })\n      }),\n    )\n  }\n\n  const finish = async () => {\n    steps.forEach(({ animation }) => {\n      animation.finish()\n    })\n  }\n\n  return { play, reverse, finish }\n}\n\nexport const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t,\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    // console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "// handle data-last-interaction attr on html (focusring)\nwindow.addEventListener(\"mousedown\", (mousedownEvent) => {\n  if (mousedownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"touchstart\", (touchstartEvent) => {\n  if (touchstartEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"keydown\", (keydownEvent) => {\n  if (keydownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"keyboard\")\n})\n",
    "export const renderBackToListInToolbar = ({\n  outDirectoryRelativeUrl,\n  exploringHtmlFileRelativeUrl,\n}) => {\n  const exploringHtmlFileUrl = `/${outDirectoryRelativeUrl}otherwise/${exploringHtmlFileRelativeUrl}`\n\n  document.querySelector(\"#file-list-link a\").href = exploringHtmlFileUrl\n  document.querySelector(\"#file-list-link a\").onclick = (clickEvent) => {\n    if (clickEvent.defaultPrevented) {\n      return\n    }\n\n    if (isClickToOpenTab(clickEvent)) {\n      return\n    }\n\n    window.parent.location.href = exploringHtmlFileUrl\n  }\n}\n\nconst isClickToOpenTab = (clickEvent) => {\n  if (clickEvent.button !== 0) {\n    // Chrome < 55 fires a click event when the middle mouse button is pressed\n    return true\n  }\n  if (clickEvent.metaKey) {\n    return true\n  }\n  if (clickEvent.ctrlKey) {\n    return true\n  }\n  return false\n}\n",
    "export const createPreference = (name) => {\n  return {\n    has: () => localStorage.hasOwnProperty(name),\n    get: () =>\n      localStorage.hasOwnProperty(name) ? JSON.parse(localStorage.getItem(name)) : undefined,\n    set: (value) => localStorage.setItem(name, JSON.stringify(value)),\n  }\n}\n",
    "import { updateIframeOverflowOnParentWindow } from \"../util/dom.js\"\n\nexport const toggleTooltip = (element) => {\n  if (element.hasAttribute(\"data-tooltip-visible\")) {\n    hideTooltip(element)\n  } else {\n    showTooltip(element)\n  }\n}\n\nexport const hideTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-visible\")\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const autoShowTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-auto-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const removeAutoShowTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const hideAllTooltip = () => {\n  const elementsWithTooltip = Array.from(document.querySelectorAll(\"[data-tooltip-visible]\"))\n  elementsWithTooltip.forEach((elementWithTooltip) => {\n    hideTooltip(elementWithTooltip)\n  })\n}\n",
    "import {\n  toolbarSectionIsActive,\n  deactivateToolbarSection,\n  activateToolbarSection,\n  updateIframeOverflowOnParentWindow,\n} from \"../util/dom.js\"\n\nexport const renderToolbarSettings = () => {\n  document.querySelector(\"#settings-button\").onclick = toggleSettings\n  document.querySelector(\"#button-close-settings\").onclick = toggleSettings\n}\n\nconst toggleSettings = () => {\n  if (settingsAreVisible()) {\n    hideSettings()\n  } else {\n    showSettings()\n  }\n}\n\nexport const settingsAreVisible = () => {\n  return toolbarSectionIsActive(document.querySelector(`#settings`))\n}\n\nexport const hideSettings = () => {\n  deactivateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showSettings = () => {\n  activateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst notificationPreference = createPreference(\"notification\")\n\nconst arrayOfOpenedNotifications = []\nexport const renderToolbarNotification = () => {\n  const notifCheckbox = document.querySelector(\"#toggle-notifs\")\n  notifCheckbox.checked = getNotificationPreference()\n  notifCheckbox.onchange = () => {\n    setNotificationPreference(notifCheckbox.checked)\n    if (notifCheckbox.checked) {\n      // request permission early\n      // especially useful on firefox where you can request permission\n      // only inside a user generated event such as this onchange handler\n      requestPermission()\n    } else {\n      // slice because arrayOfOpenedNotifications can be mutated while looping\n      arrayOfOpenedNotifications.slice().forEach((notification) => {\n        notification.close()\n      })\n    }\n  }\n}\n\nexport const notifyExecutionResult = (executedFileRelativeUrl, execution, previousExecution) => {\n  const notificationEnabled = getNotificationPreference()\n  if (!notificationEnabled) return\n\n  const notificationOptions = {\n    lang: \"en\",\n    icon: getFaviconHref(),\n    clickToFocus: true,\n    clickToClose: true,\n  }\n\n  if (execution.status === \"errored\") {\n    if (previousExecution) {\n      if (previousExecution.status === \"completed\") {\n        notify(\"Broken\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution now failing.`,\n        })\n      } else {\n        notify(\"Still failing\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution still failing.`,\n        })\n      }\n    } else {\n      notify(\"Failing\", {\n        ...notificationOptions,\n        body: `${executedFileRelativeUrl} execution failed.`,\n      })\n    }\n  } else if (previousExecution && previousExecution.status === \"errored\") {\n    notify(\"Fixed\", {\n      ...notificationOptions,\n      body: `${executedFileRelativeUrl} execution fixed.`,\n    })\n  }\n}\n\nconst notificationAvailable = typeof window.Notification === \"function\"\n\nconst getNotificationPreference = () =>\n  notificationPreference.has() ? notificationPreference.get() : true\n\nconst setNotificationPreference = (value) => notificationPreference.set(value)\n\nconst getFaviconHref = () => {\n  const link = document.querySelector('link[rel=\"icon\"]')\n  return link ? link.href : undefined\n}\n\nconst notify = notificationAvailable\n  ? async (title, { clickToFocus = false, clickToClose = false, ...options } = {}) => {\n      const permission = await requestPermission()\n      if (permission === \"granted\") {\n        const notification = new Notification(title, options)\n        arrayOfOpenedNotifications.push(notification)\n        notification.onclick = () => {\n          // but if the user navigated inbetween\n          // focusing window will show something else\n          // in that case it could be great to do something\n          // maybe like showing a message saying this execution\n          // is no longer visible\n          // we could also navigauate to this file execution but\n          // there is no guarantee re-executing the file would give same output\n          // and it would also trigger an other notification\n          if (clickToFocus) window.focus()\n          if (clickToClose) notification.close()\n        }\n        notification.onclose = () => {\n          const index = arrayOfOpenedNotifications.indexOf(notification)\n          if (index > -1) {\n            arrayOfOpenedNotifications.splice(index, 1)\n          }\n        }\n        return notification\n      }\n      return null\n    }\n  : () => {}\n\nlet permissionPromise\nconst requestPermission = notificationAvailable\n  ? async () => {\n      if (permissionPromise) return permissionPromise\n      permissionPromise = Notification.requestPermission()\n      const permission = await permissionPromise\n      permissionPromise = undefined\n      return permission\n    }\n  : () => Promise.resolve(\"denied\")\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst DARK_THEME = \"dark\"\nconst LIGHT_THEME = \"light\"\nconst themePreference = createPreference(\"theme\")\n\nexport const renderToolbarTheme = () => {\n  const theme = getThemePreference()\n  const checkbox = document.querySelector(\"#checkbox-dark-theme\")\n  checkbox.checked = theme === DARK_THEME\n  setTheme(theme)\n  checkbox.onchange = () => {\n    if (checkbox.checked) {\n      setThemePreference(DARK_THEME)\n      setTheme(DARK_THEME)\n    } else {\n      setThemePreference(LIGHT_THEME)\n      setTheme(LIGHT_THEME)\n    }\n  }\n}\n\nconst getThemePreference = () => {\n  return themePreference.has() ? themePreference.get() : DARK_THEME\n}\n\nconst setThemePreference = (value) => {\n  themePreference.set(value)\n  setTheme(value)\n}\n\nconst setTheme = (theme) => {\n  document.querySelector(\"html\").setAttribute(\"data-theme\", theme)\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst animationPreference = createPreference(\"animation\")\n\nexport const renderToolbarAnimation = () => {\n  const animCheckbox = document.querySelector(\"#toggle-anims\")\n  animCheckbox.checked = getAnimationPreference()\n  animCheckbox.onchange = () => {\n    setAnimationPreference(animCheckbox.checked)\n    onPreferenceChange(animCheckbox.checked)\n  }\n  onPreferenceChange()\n\n  // enable toolbar transition only after first render\n  setTimeout(() => {\n    document.querySelector(\"#toolbar\").setAttribute(\"data-animate\", \"\")\n  })\n}\n\nconst onPreferenceChange = (value = getAnimationPreference()) => {\n  if (value) {\n    enableAnimation()\n  } else {\n    disableAnimation()\n  }\n}\n\nconst getAnimationPreference = () => (animationPreference.has() ? animationPreference.get() : true)\n\nconst setAnimationPreference = (value) => animationPreference.set(value)\n\nconst enableAnimation = () => {\n  document.documentElement.removeAttribute(\"data-animation-disabled\")\n}\n\nconst disableAnimation = () => {\n  document.documentElement.setAttribute(\"data-animation-disabled\", \"\")\n}\n",
    "export const enableVariant = (rootNode, variables) => {\n  const nodesNotMatching = Array.from(\n    rootNode.querySelectorAll(`[${attributeIndicatingACondition}]`),\n  )\n  nodesNotMatching.forEach((nodeNotMatching) => {\n    const conditionAttributeValue = nodeNotMatching.getAttribute(attributeIndicatingACondition)\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (matches) {\n      renameAttribute(nodeNotMatching, attributeIndicatingACondition, attributeIndicatingAMatch)\n    }\n  })\n\n  const nodesMatching = Array.from(rootNode.querySelectorAll(`[${attributeIndicatingAMatch}]`))\n  nodesMatching.forEach((nodeMatching) => {\n    const conditionAttributeValue = nodeMatching.getAttribute(attributeIndicatingAMatch)\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (!matches) {\n      renameAttribute(nodeMatching, attributeIndicatingAMatch, attributeIndicatingACondition)\n    }\n  })\n}\n\nconst testCondition = (conditionAttributeValue, variables) => {\n  const condition = parseCondition(conditionAttributeValue)\n  return Object.keys(variables).some((key) => {\n    if (condition.key !== key) {\n      return false\n    }\n    // the condition do not specify a value, any value is ok\n    if (condition.value === undefined) {\n      return true\n    }\n    if (condition.value === variables[key]) {\n      return true\n    }\n    return false\n  })\n}\n\nconst parseCondition = (conditionAttributeValue) => {\n  const colonIndex = conditionAttributeValue.indexOf(\":\")\n  if (colonIndex === -1) {\n    return {\n      key: conditionAttributeValue,\n      value: undefined,\n    }\n  }\n  return {\n    key: conditionAttributeValue.slice(0, colonIndex),\n    value: conditionAttributeValue.slice(colonIndex + 1),\n  }\n}\n\nconst attributeIndicatingACondition = `data-when`\nconst attributeIndicatingAMatch = `data-when-active`\n\nconst renameAttribute = (node, name, newName) => {\n  node.setAttribute(newName, node.getAttribute(name))\n  node.removeAttribute(name)\n}\n",
    "export const createHorizontalBreakpoint = (breakpointValue) => {\n  return createBreakpoint(windowWidthMeasure, breakpointValue)\n}\n\nconst createMeasure = ({ compute, register }) => {\n  let currentValue = compute()\n\n  const get = () => compute()\n\n  const changed = createSignal()\n\n  let unregister = () => {}\n  if (register) {\n    unregister = register(() => {\n      const value = compute()\n      if (value !== currentValue) {\n        const previousValue = value\n        currentValue = value\n        changed.notify(value, previousValue)\n      }\n    })\n  }\n\n  return { get, changed, unregister }\n}\n\nconst createSignal = () => {\n  const callbackArray = []\n\n  const listen = (callback) => {\n    callbackArray.push(callback)\n    return () => {\n      const index = callbackArray.indexOf(callback)\n      if (index > -1) {\n        callbackArray.splice(index, 1)\n      }\n    }\n  }\n\n  const notify = (...args) => {\n    callbackArray.slice().forEach((callback) => {\n      callback(...args)\n    })\n  }\n\n  return { listen, notify }\n}\n\nconst windowWidthMeasure = createMeasure({\n  name: \"window-width\",\n  compute: () => window.innerWidth,\n  register: (onchange) => {\n    window.addEventListener(\"resize\", onchange)\n    window.addEventListener(\"orientationchange\", onchange)\n    return () => {\n      window.removeEventListener(\"resize\", onchange)\n      window.removeEventListener(\"orientationchange\", onchange)\n    }\n  },\n})\n\nconst createBreakpoint = (measure, breakpointValue) => {\n  const getBreakpointState = () => {\n    const value = measure.get()\n\n    if (value < breakpointValue) {\n      return \"below\"\n    }\n    if (value > breakpointValue) {\n      return \"above\"\n    }\n    return \"equals\"\n  }\n\n  let currentBreakpointState = getBreakpointState()\n\n  const isAbove = () => {\n    return measure.get() > breakpointValue\n  }\n\n  const isBelow = () => {\n    return measure.get() < breakpointValue\n  }\n\n  const breakpointChanged = createSignal()\n\n  measure.changed.listen(() => {\n    const breakpointState = getBreakpointState()\n    if (breakpointState !== currentBreakpointState) {\n      const breakpointStatePrevious = currentBreakpointState\n      currentBreakpointState = breakpointState\n      breakpointChanged.notify(breakpointState, breakpointStatePrevious)\n    }\n  })\n\n  return {\n    isAbove,\n    isBelow,\n    changed: breakpointChanged,\n  }\n}\n\n// const windowScrollTop = createMeasure({\n//   name: \"window-scroll-top\",\n//   compute: () => window.scrollTop,\n//   register: (onchange) => {\n//     window.addEventListener(\"scroll\", onchange)\n//     return () => {\n//       window.removeEventListener(\"scroll\", onchange)\n//     }\n//   },\n// })\n",
    "import { removeForceHideElement, activateToolbarSection } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { toggleTooltip } from \"../tooltip/tooltip.js\"\nimport { notifyExecutionResult } from \"../notification/toolbar.notification.js\"\n\nconst WINDOW_MEDIUM_WIDTH = 570\n\nexport const renderExecutionInToolbar = ({ executedFileRelativeUrl }) => {\n  // reset file execution indicator ui\n  applyExecutionIndicator()\n  removeForceHideElement(document.querySelector(\"#execution-indicator\"))\n\n  // apply responsive design on fileInput if needed + add listener on resize screen\n  const input = document.querySelector(\"#file-input\")\n  const fileWidthBreakpoint = createHorizontalBreakpoint(WINDOW_MEDIUM_WIDTH)\n  const handleFileWidthBreakpoint = () => {\n    resizeInput(input, fileWidthBreakpoint)\n  }\n  handleFileWidthBreakpoint()\n  fileWidthBreakpoint.changed.listen(handleFileWidthBreakpoint)\n  input.value = executedFileRelativeUrl\n  resizeInput(input, fileWidthBreakpoint)\n\n  activateToolbarSection(document.querySelector(\"#file\"))\n  removeForceHideElement(document.querySelector(\"#file\"))\n\n  window.parent.__jsenv__.executionResultPromise.then(({ status, startTime, endTime }) => {\n    const execution = { status, startTime, endTime }\n    applyExecutionIndicator(execution)\n\n    const executionStorageKey = executedFileRelativeUrl\n    const previousExecution = sessionStorage.hasOwnProperty(executionStorageKey)\n      ? JSON.parse(sessionStorage.getItem(executionStorageKey))\n      : undefined\n    notifyExecutionResult(executedFileRelativeUrl, execution, previousExecution)\n\n    sessionStorage.setItem(executedFileRelativeUrl, JSON.stringify(execution))\n  })\n}\n\nconst applyExecutionIndicator = ({ status = \"running\", startTime, endTime } = {}) => {\n  const executionIndicator = document.querySelector(\"#execution-indicator\")\n  enableVariant(executionIndicator, { execution: status })\n  const variantNode = executionIndicator.querySelector(\"[data-when-active]\")\n\n  variantNode.querySelector(\"button\").onclick = () => toggleTooltip(executionIndicator)\n  variantNode.querySelector(\".tooltip\").textContent = computeText({\n    status,\n    startTime,\n    endTime,\n  })\n}\n\nconst computeText = ({ status, startTime, endTime }) => {\n  if (status === \"completed\") {\n    return `Execution completed in ${endTime - startTime}ms`\n  }\n\n  if (status === \"errored\") {\n    return `Execution failed in ${endTime - startTime}ms`\n  }\n\n  return \"\"\n}\n\nconst resizeInput = (input, fileWidthBreakpoint) => {\n  const size = fileWidthBreakpoint.isBelow() ? 20 : 40\n  if (input.value.length > size) {\n    input.style.width = `${size}ch`\n  } else {\n    input.style.width = `${input.value.length}ch`\n  }\n}\n",
    "// eslint-disable-next-line consistent-return\nexport default (arr) => {\n  if (Array.isArray(arr)) return arr\n}\n",
    "export default function _iterableToArrayLimit(arr, i) {\n  // this is an expanded form of \\`for...of\\` that properly supports abrupt completions of\n  // iterators etc. variable names have been minimised to reduce the size of this massive\n  // helper. sometimes spec compliance is annoying :(\n  //\n  // _n = _iteratorNormalCompletion\n  // _d = _didIteratorError\n  // _e = _iteratorError\n  // _i = _iterator\n  // _s = _step\n  var _i =\n    arr == null\n      ? null\n      : (typeof Symbol !== \"undefined\" && arr[Symbol.iterator]) || arr[\"@@iterator\"]\n  if (_i == null) return\n  var _arr = []\n  var _n = true\n  var _d = false\n  var _s, _e\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value)\n      if (i && _arr.length === i) break\n    }\n  } catch (err) {\n    _d = true\n    _e = err\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]()\n    } finally {\n      if (_d) throw _e\n    }\n  }\n  return _arr\n}\n",
    "export default () => {\n  throw new TypeError(\n    \"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\n  )\n}\n",
    "import arrayWithHoles from \"../arrayWithHoles/arrayWithHoles.js\"\nimport iterableToArrayLimit from \"../iterableToArrayLimit/iterableToArrayLimit.js\"\nimport unsupportedIterableToArray from \"../unsupportedIterableToArray/unsupportedIterableToArray.js\"\nimport nonIterableRest from \"../nonIterableRest/nonIterableRest.js\"\n\nexport default (arr, i) =>\n  arrayWithHoles(arr) ||\n  iterableToArrayLimit(arr, i) ||\n  unsupportedIterableToArray(arr, i) ||\n  nonIterableRest()\n",
    "export const COMPILE_ID_BEST = \"best\"\n\nexport const COMPILE_ID_OTHERWISE = \"otherwise\"\n\nexport const COMPILE_ID_BUILD_GLOBAL = \"otherwise-build-global\"\n\nexport const COMPILE_ID_BUILD_GLOBAL_FILES = \"otherwise-build-global-files\"\n\nexport const COMPILE_ID_BUILD_COMMONJS = \"otherwise-build-commonjs\"\n\nexport const COMPILE_ID_BUILD_COMMONJS_FILES = \"otherwise-build-commonjs-files\"\n",
    "import { createDetailedMessage } from \"@jsenv/logger\"\nimport { COMPILE_ID_OTHERWISE } from \"../CONSTANTS.js\"\n\nexport const computeCompileIdFromGroupId = ({ groupId, groupMap }) => {\n  if (typeof groupId === \"undefined\") {\n    if (COMPILE_ID_OTHERWISE in groupMap) {\n      return COMPILE_ID_OTHERWISE\n    }\n\n    const keys = Object.keys(groupMap)\n    if (keys.length === 1) {\n      return keys[0]\n    }\n\n    throw new Error(createUnexpectedGroupIdMessage({ groupMap }))\n  }\n\n  if (groupId in groupMap === false) {\n    throw new Error(createUnexpectedGroupIdMessage({ groupId, groupMap }))\n  }\n\n  return groupId\n}\n\nconst createUnexpectedGroupIdMessage = ({ compileId, groupMap }) =>\n  createDetailedMessage(`unexpected groupId.`, {\n    [\"expected compiled id\"]: Object.keys(groupMap),\n    [\"received compile id\"]: compileId,\n  })\n",
    "export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectAndroid = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/(android)/i.test(userAgent)) {\n    return {\n      name: \"android\",\n      version: firstMatch(/Android (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectInternetExplorer = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nexport const detectOpera = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) || firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version: firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) || userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n",
    "import { secondMatch } from \"./util.js\"\n\nexport const detectEdge = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectFirefox = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nexport const detectChrome = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  return null\n}\n",
    "import { userAgentToVersion } from \"./util.js\"\n\nexport const detectSafari = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n",
    "export const detectElectron = () => null // TODO\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectIOS = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/iPhone;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  if (/iPad;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "// https://github.com/Ahmdrza/detect-browser/blob/26254f85cf92795655a983bfd759d85f3de850c6/detect-browser.js#L1\n// https://github.com/lancedikson/bowser/blob/master/src/parser-browsers.js#L1\n\nimport { detectAndroid } from \"./detectAndroid.js\"\nimport { detectInternetExplorer } from \"./detectInternetExplorer.js\"\nimport { detectOpera } from \"./detectOpera.js\"\nimport { detectEdge } from \"./detectEdge.js\"\nimport { detectFirefox } from \"./detectFirefox.js\"\nimport { detectChrome } from \"./detectChrome.js\"\nimport { detectSafari } from \"./detectSafari.js\"\nimport { detectElectron } from \"./detectElectron.js\"\nimport { detectIOS } from \"./detectIOS.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  detectOpera,\n  detectInternetExplorer,\n  detectEdge,\n  detectFirefox,\n  detectChrome,\n  detectSafari,\n  detectElectron,\n  detectIOS,\n  detectAndroid,\n])\n\nexport const detectBrowser = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  if (version.indexOf(\".\") > -1) {\n    const parts = version.split(\".\")\n    // remove extraneous .\n    return parts.slice(0, 3).join(\".\")\n  }\n\n  if (version.indexOf(\"_\") > -1) {\n    const parts = version.split(\"_\")\n    // remove extraneous _\n    return parts.slice(0, 3).join(\"_\")\n  }\n\n  return version\n}\n",
    "export const valueToVersion = (value) => {\n  if (typeof value === \"number\") {\n    return numberToVersion(value)\n  }\n\n  if (typeof value === \"string\") {\n    return stringToVersion(value)\n  }\n\n  throw new TypeError(createValueErrorMessage({ version: value }))\n}\n\nconst numberToVersion = (number) => {\n  return {\n    major: number,\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst stringToVersion = (string) => {\n  if (string.indexOf(\".\") > -1) {\n    const parts = string.split(\".\")\n    return {\n      major: Number(parts[0]),\n      minor: parts[1] ? Number(parts[1]) : 0,\n      patch: parts[2] ? Number(parts[2]) : 0,\n    }\n  }\n\n  if (isNaN(string)) {\n    return {\n      major: 0,\n      minor: 0,\n      patch: 0,\n    }\n  }\n\n  return {\n    major: Number(string),\n    minor: 0,\n    patch: 0,\n  }\n}\n\nconst createValueErrorMessage = ({ value }) => `value must be a number or a string.\nvalue: ${value}`\n",
    "import { valueToVersion } from \"./valueToVersion.js\"\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = valueToVersion(versionA)\n  const semanticVersionB = valueToVersion(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n",
    "import { versionCompare } from \"./versionCompare.js\"\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n",
    "import { versionIsBelow } from \"./versionIsBelow.js\"\n\nexport const findHighestVersion = (...values) => {\n  if (values.length === 0) throw new Error(`missing argument`)\n\n  return values.reduce((highestVersion, value) => {\n    if (versionIsBelow(highestVersion, value)) {\n      return value\n    }\n    return highestVersion\n  })\n}\n",
    "import { findHighestVersion } from \"../semantic-versioning/index.js\"\n\nexport const resolveGroup = ({ name, version }, groupMap) => {\n  return Object.keys(groupMap).find((compileIdCandidate) => {\n    const { runtimeCompatMap } = groupMap[compileIdCandidate]\n    if (name in runtimeCompatMap === false) {\n      return false\n    }\n    const versionForGroup = runtimeCompatMap[name]\n\n    const highestVersion = findHighestVersion(version, versionForGroup)\n    return highestVersion === version\n  })\n}\n",
    "import { detectBrowser } from \"./detectBrowser/detectBrowser.js\"\nimport { resolveGroup } from \"./resolveGroup.js\"\n\nexport const resolveBrowserGroup = (groupMap) => resolveGroup(detectBrowser(), groupMap)\n",
    "import { fetchJson } from \"../../browser-utils/fetchJson.js\"\nimport { computeCompileIdFromGroupId } from \"../computeCompileIdFromGroupId.js\"\nimport { resolveBrowserGroup } from \"../resolveBrowserGroup.js\"\n\nexport const scanBrowserRuntimeFeatures = async ({\n  coverageInstrumentationRequired = true,\n} = {}) => {\n  const { outDirectoryRelativeUrl } = await fetchJson(\"/.jsenv/compile-meta.json\")\n  const groupMapUrl = `/${outDirectoryRelativeUrl}groupMap.json`\n  const envFileUrl = `/${outDirectoryRelativeUrl}env.json`\n  const [groupMap, envJson] = await Promise.all([fetchJson(groupMapUrl), fetchJson(envFileUrl)])\n\n  const compileId = computeCompileIdFromGroupId({\n    groupId: resolveBrowserGroup(groupMap),\n    groupMap,\n  })\n  const groupInfo = groupMap[compileId]\n  const { inlineImportMapIntoHTML, customCompilerNames, convertPatterns } = envJson\n\n  const featuresReport = {\n    babelPluginRequiredNames: babelPluginRequiredNamesFromGroupInfo(groupInfo, {\n      coverageInstrumentationRequired,\n    }),\n    ...(await getFeaturesReport({\n      groupInfo,\n      inlineImportMapIntoHTML,\n      customCompilerNames,\n      coverageInstrumentationRequired,\n    })),\n    customCompilerNames,\n    convertPatterns,\n  }\n\n  const canAvoidCompilation =\n    featuresReport.convertPatterns.length === 0 &&\n    featuresReport.customCompilerNames.length === 0 &&\n    featuresReport.jsenvPluginRequiredNames.length === 0 &&\n    featuresReport.babelPluginRequiredNames.length === 0 &&\n    featuresReport.importmapSupported &&\n    featuresReport.dynamicImportSupported &&\n    featuresReport.topLevelAwaitSupported\n\n  return {\n    featuresReport,\n    canAvoidCompilation,\n    inlineImportMapIntoHTML,\n    outDirectoryRelativeUrl,\n    compileId,\n  }\n}\n\nconst getFeaturesReport = async ({ groupInfo, inlineImportMapIntoHTML }) => {\n  const jsenvPluginRequiredNames = groupInfo.jsenvPluginRequiredNameArray\n  // start testing importmap support first and not in paralell\n  // so that there is not module script loaded beore importmap is injected\n  // it would log an error in chrome console and return undefined\n  const importmapSupported = await supportsImportmap({\n    // chrome supports inline but not remote importmap\n    // https://github.com/WICG/import-maps/issues/235\n\n    // at this stage we won't know if the html file will use\n    // an importmap or not and if that importmap is inline or specified with an src\n    // so we should test if browser support local and remote importmap.\n    // But there exploring server can inline importmap by transforming html\n    // and in that case we can test only the local importmap support\n    // so we test importmap support and the remote one\n    remote: !inlineImportMapIntoHTML,\n  })\n\n  const dynamicImportSupported = await supportsDynamicImport()\n\n  const topLevelAwaitSupported = await supportsTopLevelAwait()\n\n  return {\n    jsenvPluginRequiredNames,\n    importmapSupported,\n    dynamicImportSupported,\n    topLevelAwaitSupported,\n  }\n}\n\nconst babelPluginRequiredNamesFromGroupInfo = (groupInfo, { coverageInstrumentationRequired }) => {\n  const { babelPluginRequiredNameArray } = groupInfo\n\n  const babelPluginRequiredNames = babelPluginRequiredNameArray.slice()\n\n  // When instrumentation CAN be handed by playwright\n  // https://playwright.dev/docs/api/class-chromiumcoverage#chromiumcoveragestartjscoverageoptions\n  // coverageInstrumentationRequired is false and \"transform-instrument\" becomes non mandatory\n  const transformInstrumentIndex = babelPluginRequiredNames.indexOf(\"transform-instrument\")\n  if (transformInstrumentIndex > -1 && !coverageInstrumentationRequired) {\n    babelPluginRequiredNames.splice(transformInstrumentIndex, 1)\n  }\n\n  return babelPluginRequiredNames\n}\n\nconst supportsImportmap = async ({ remote = true } = {}) => {\n  const specifier = jsToTextUrl(`export default false`)\n\n  const importMap = {\n    imports: {\n      [specifier]: jsToTextUrl(`export default true`),\n    },\n  }\n\n  const importmapScript = document.createElement(\"script\")\n  const importmapString = JSON.stringify(importMap, null, \"  \")\n  importmapScript.type = \"importmap\"\n  if (remote) {\n    importmapScript.src = `data:application/json;base64,${window.btoa(importmapString)}`\n  } else {\n    importmapScript.textContent = importmapString\n  }\n\n  document.body.appendChild(importmapScript)\n\n  const scriptModule = document.createElement(\"script\")\n  scriptModule.type = \"module\"\n  scriptModule.src = jsToTextUrl(\n    `import supported from \"${specifier}\"; window.__importmap_supported = supported`,\n  )\n\n  return new Promise((resolve, reject) => {\n    scriptModule.onload = () => {\n      const supported = window.__importmap_supported\n      delete window.__importmap_supported\n      document.body.removeChild(scriptModule)\n      document.body.removeChild(importmapScript)\n      resolve(supported)\n    }\n    scriptModule.onerror = () => {\n      document.body.removeChild(scriptModule)\n      document.body.removeChild(importmapScript)\n      reject()\n    }\n    document.body.appendChild(scriptModule)\n  })\n}\n\nconst jsToTextUrl = (js) => {\n  return `data:text/javascript;base64,${window.btoa(js)}`\n}\n\nconst supportsDynamicImport = async () => {\n  const moduleSource = jsToTextUrl(`export default 42`)\n  try {\n    const namespace = await import(moduleSource)\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsTopLevelAwait = async () => {\n  const moduleSource = jsToTextUrl(`export default await Promise.resolve(42)`)\n  try {\n    const namespace = await import(moduleSource)\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n",
    "import { scanBrowserRuntimeFeatures } from \"../../runtime/createBrowserRuntime/scanBrowserRuntimeFeatures.js\"\nimport { removeForceHideElement } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nexport const renderCompilationInToolbar = ({ compileGroup }) => {\n  const browserSupportRootNode = document.querySelector(\"#browser_support\")\n  const filesCompilationRootNode = document.querySelector(\"#files_compilation\")\n\n  removeForceHideElement(browserSupportRootNode)\n  removeForceHideElement(filesCompilationRootNode)\n\n  scanBrowserRuntimeFeatures().then(\n    ({\n      featuresReport,\n      canAvoidCompilation,\n      inlineImportMapIntoHTML,\n      outDirectoryRelativeUrl,\n      compileId,\n    }) => {\n      const browserSupport = canAvoidCompilation\n        ? inlineImportMapIntoHTML\n          ? \"partial\"\n          : \"full\"\n        : \"no\"\n      enableVariant(browserSupportRootNode, {\n        browserSupport,\n      })\n      if (browserSupport === \"no\") {\n        browserSupportRootNode.querySelector(`a.no_support_read_more_link`).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files needs to be compiled to be executable in this browser because: ${getBrowserSupportMessage(\n              {\n                missingOnly: true,\n                featuresReport,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"partial\") {\n        browserSupportRootNode.querySelector(`a.partial_support_read_more_link`).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files (except html) can be executed directly in this browser because: ${getBrowserSupportMessage(\n              {\n                featuresReport,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"full\") {\n        browserSupportRootNode.querySelector(`a.full_support_read_more_link`).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files can be executed directly in this browser because: ${getBrowserSupportMessage(\n              {\n                featuresReport,\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      }\n\n      const filesCompilation = compileGroup.compileId\n        ? \"yes\"\n        : inlineImportMapIntoHTML\n        ? \"html_only\"\n        : \"no\"\n      enableVariant(filesCompilationRootNode, {\n        filesCompilation,\n        compiled: compileGroup.compileId ? \"yes\" : \"no\",\n      })\n      filesCompilationRootNode.querySelector(\"a.go_to_source_link\").onclick = () => {\n        window.parent.location = `/${compileGroup.fileRelativeUrl}`\n      }\n      filesCompilationRootNode.querySelector(\"a.go_to_compiled_link\").onclick = () => {\n        window.parent.location = `/${outDirectoryRelativeUrl}${compileId}/${compileGroup.fileRelativeUrl}`\n      }\n    },\n  )\n}\n\nconst getBrowserSupportMessage = ({ missingOnly, featuresReport, inlineImportMapIntoHTML }) => {\n  const parts = []\n\n  const { importmapSupported } = featuresReport\n  if (importmapSupported) {\n    if (!missingOnly) {\n      if (inlineImportMapIntoHTML) {\n        parts.push(`importmaps are supported (only when inlined in html files)`)\n      } else {\n        parts.push(`importmaps are supported`)\n      }\n    }\n  } else {\n    parts.push(`importmaps are not supported`)\n  }\n\n  const { dynamicImportSupported } = featuresReport\n  if (dynamicImportSupported) {\n    if (!missingOnly) {\n      parts.push(`dynamic imports are supported`)\n    }\n  } else {\n    parts.push(`dynamic imports are not supported`)\n  }\n\n  const { topLevelAwaitSupported } = featuresReport\n  if (topLevelAwaitSupported) {\n    if (!missingOnly) {\n      parts.push(`top level await is supported`)\n    }\n  } else {\n    parts.push(`top level await is not supported`)\n  }\n\n  const { babelPluginRequiredNames } = featuresReport\n  const babelPluginRequiredCount = babelPluginRequiredNames.length\n  if (babelPluginRequiredCount === 0) {\n    if (!missingOnly) {\n      parts.push(`all babel plugins are natively supported`)\n    }\n  } else {\n    parts.push(\n      `${babelPluginRequiredCount} babel plugins are mandatory: ${babelPluginRequiredNames}`,\n    )\n  }\n\n  const { convertPatterns } = featuresReport\n  const convertPatternCount = convertPatterns.length\n  if (convertPatternCount === 0) {\n    // no need to talk about something unused\n  } else {\n    parts.push(`convertMap is used with the following keys: ${convertPatterns}`)\n  }\n\n  const { customCompilerNames } = featuresReport\n  const customCompilerCount = customCompilerNames.length\n  if (customCompilerCount === 0) {\n    // no need to talk about something unused\n  } else {\n    parts.push(`${customCompilerCount} custom compilers enabled: ${customCompilerNames}`)\n  }\n\n  const { jsenvPluginRequiredNames } = featuresReport\n  const jsenvPluginRequiredCount = jsenvPluginRequiredNames.length\n  if (jsenvPluginRequiredCount === 0) {\n    // no need to talk about something unused\n  } else {\n    parts.push(\n      `${jsenvPluginRequiredCount} jsenv plugins are mandatory: ${jsenvPluginRequiredNames}`,\n    )\n  }\n\n  return `\n- ${parts.join(`\n- `)}`\n}\n",
    "export const createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\nexport const moveElement = (element, from, to) => {\n  to.appendChild(element)\n}\n\nexport const replaceElement = (elementToReplace, otherElement) => {\n  elementToReplace.parentNode.replaceChild(otherElement, elementToReplace)\n}\n",
    "export const connectEventSource = (\n  eventSourceUrl,\n  events = {},\n  {\n    connecting = () => {},\n    connected = () => {},\n    cancelled = () => {},\n    failed = () => {},\n    retryMaxAttempt = Infinity,\n    retryAllocatedMs = Infinity,\n    lastEventId,\n  } = {},\n) => {\n  const { EventSource } = window\n  if (typeof EventSource !== \"function\") {\n    return () => {}\n  }\n\n  const eventSourceOrigin = new URL(eventSourceUrl).origin\n\n  // will be either abort, disconnect or a third function calling cancelled\n  // depending on connectionStatus\n  let cancelCurrentConnection = () => {}\n\n  const reconnect = () => {\n    attemptConnection(\n      lastEventId ? addLastEventIdIntoUrlSearchParams(eventSourceUrl, lastEventId) : eventSourceUrl,\n    )\n  }\n\n  const attemptConnection = (url) => {\n    const eventSource = new EventSource(url, {\n      withCredentials: true,\n    })\n\n    let connectionStatus = \"connecting\"\n    const abort = () => {\n      if (connectionStatus !== \"connecting\") {\n        console.warn(`abort ignored because connection is ${connectionStatus}`)\n        return\n      }\n      connectionStatus = \"aborted\"\n      eventSource.onerror = undefined\n      eventSource.close()\n      cancelled({ connect: reconnect })\n    }\n    cancelCurrentConnection = abort\n    connecting({ cancel: abort })\n\n    eventSource.onopen = () => {\n      connectionStatus = \"connected\"\n      const disconnect = () => {\n        if (connectionStatus !== \"connected\") {\n          console.warn(`disconnect ignored because connection is ${connectionStatus}`)\n          return\n        }\n        connectionStatus = \"disconnected\"\n        eventSource.onerror = undefined\n        eventSource.close()\n        cancelled({ connect: reconnect })\n      }\n      cancelCurrentConnection = disconnect\n      connected({ cancel: disconnect })\n    }\n\n    let retryCount = 0\n    let firstRetryMs = Date.now()\n\n    eventSource.onerror = (errorEvent) => {\n      const considerFailed = () => {\n        connectionStatus = \"disconnected\"\n        failed({\n          cancel: () => {\n            if (connectionStatus !== \"failed\") {\n              console.warn(`disable ignored because connection is ${connectionStatus}`)\n              return\n            }\n            connectionStatus = \"disabled\"\n            cancelled({ connect: reconnect })\n          },\n          connect: reconnect,\n        })\n      }\n\n      if (errorEvent.target.readyState === EventSource.CONNECTING) {\n        if (retryCount > retryMaxAttempt) {\n          console.info(`could not connect after ${retryMaxAttempt} attempt`)\n          eventSource.onerror = undefined\n          eventSource.close()\n          considerFailed()\n          return\n        }\n\n        if (retryCount === 0) {\n          firstRetryMs = Date.now()\n        } else {\n          const allRetryDuration = Date.now() - firstRetryMs\n          if (retryAllocatedMs && allRetryDuration > retryAllocatedMs) {\n            console.info(`could not connect in less than ${retryAllocatedMs} ms`)\n            eventSource.onerror = undefined\n            eventSource.close()\n            considerFailed()\n            return\n          }\n        }\n\n        connectionStatus = \"connecting\"\n        retryCount++\n        connecting({ cancel: abort })\n        return\n      }\n\n      if (errorEvent.target.readyState === EventSource.CLOSED) {\n        considerFailed()\n        return\n      }\n    }\n    Object.keys(events).forEach((eventName) => {\n      eventSource.addEventListener(eventName, (e) => {\n        if (e.origin === eventSourceOrigin) {\n          if (e.lastEventId) {\n            lastEventId = e.lastEventId\n          }\n          events[eventName](e)\n        }\n      })\n    })\n    if (!events.hasOwnProperty(\"welcome\")) {\n      eventSource.addEventListener(\"welcome\", (e) => {\n        if (e.origin === eventSourceOrigin && e.lastEventId) {\n          lastEventId = e.lastEventId\n        }\n      })\n    }\n  }\n\n  attemptConnection(eventSourceUrl)\n  const disconnect = () => {\n    cancelCurrentConnection()\n  }\n\n  const removePageUnloadListener = listenPageUnload(() => {\n    disconnect()\n  })\n\n  return () => {\n    removePageUnloadListener()\n    disconnect()\n  }\n}\n\nconst addLastEventIdIntoUrlSearchParams = (url, lastEventId) => {\n  if (url.indexOf(\"?\") === -1) {\n    url += \"?\"\n  } else {\n    url += \"&\"\n  }\n  return `${url}last-event-id=${encodeURIComponent(lastEventId)}`\n}\n\n// const listenPageMightFreeze = (callback) => {\n//   const removePageHideListener = listenEvent(window, \"pagehide\", (pageHideEvent) => {\n//     if (pageHideEvent.persisted === true) {\n//       callback(pageHideEvent)\n//     }\n//   })\n//   return removePageHideListener\n// }\n\n// const listenPageFreeze = (callback) => {\n//   const removeFreezeListener = listenEvent(document, \"freeze\", (freezeEvent) => {\n//     callback(freezeEvent)\n//   })\n//   return removeFreezeListener\n// }\n\n// const listenPageIsRestored = (callback) => {\n//   const removeResumeListener = listenEvent(document, \"resume\", (resumeEvent) => {\n//     removePageshowListener()\n//     callback(resumeEvent)\n//   })\n//   const removePageshowListener = listenEvent(window, \"pageshow\", (pageshowEvent) => {\n//     if (pageshowEvent.persisted === true) {\n//       removePageshowListener()\n//       removeResumeListener()\n//       callback(pageshowEvent)\n//     }\n//   })\n//   return () => {\n//     removeResumeListener()\n//     removePageshowListener()\n//   }\n// }\n\nconst listenPageUnload = (callback) => {\n  const removePageHideListener = listenEvent(window, \"pagehide\", (pageHideEvent) => {\n    if (pageHideEvent.persisted !== true) {\n      callback(pageHideEvent)\n    }\n  })\n  return removePageHideListener\n}\n\nconst listenEvent = (emitter, event, callback) => {\n  emitter.addEventListener(event, callback)\n  return () => {\n    emitter.removeEventListener(event, callback)\n  }\n}\n",
    "import { connectEventSource } from \"./connectEventSource.js\"\nimport { jsenvLogger } from \"../util/jsenvLogger.js\"\n\nexport const connectCompileServerEventSource = (\n  fileRelativeUrl,\n  {\n    onFileModified,\n    onFileRemoved,\n    onConnecting,\n    onConnectionCancelled,\n    onConnectionFailed,\n    onConnected,\n    lastEventId,\n  },\n) => {\n  const eventSourceUrl = `${window.origin}/${fileRelativeUrl}`\n\n  let cancel = () => {}\n\n  const connect = () => {\n    return new Promise((resolve) => {\n      cancel = connectEventSource(\n        eventSourceUrl,\n        {\n          \"file-modified\": ({ data }) => {\n            jsenvLogger.debug(`${data} modified`)\n            onFileModified(data)\n          },\n          \"file-removed\": ({ data }) => {\n            jsenvLogger.debug(`${data} removed`)\n            onFileRemoved(data)\n          },\n        },\n        {\n          connecting: ({ cancel }) => {\n            jsenvLogger.debug(`connecting to ${eventSourceUrl}`)\n            onConnecting({\n              cancel: () => {\n                cancel()\n              },\n            })\n          },\n          connected: ({ cancel }) => {\n            jsenvLogger.debug(`connected to ${eventSourceUrl}`)\n            resolve(true)\n            onConnected({\n              cancel: () => {\n                cancel()\n              },\n            })\n          },\n          cancelled: ({ connect }) => {\n            jsenvLogger.debug(`disconnected from ${eventSourceUrl}`)\n            resolve(false)\n            onConnectionCancelled({ connect })\n          },\n          failed: ({ connect }) => {\n            jsenvLogger.debug(`disconnected from ${eventSourceUrl}`)\n            resolve(false)\n            onConnectionFailed({ connect })\n          },\n          retryMaxAttempt: Infinity,\n          retryAllocatedMs: 20 * 1000,\n          lastEventId,\n        },\n      )\n    })\n  }\n\n  return {\n    connect,\n    disconnect: () => cancel(),\n  }\n}\n",
    "import { removeForceHideElement } from \"../util/dom.js\"\nimport { createPromiseAndHooks } from \"../util/util.js\"\nimport { createPreference } from \"../util/preferences.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nimport { toggleTooltip, removeAutoShowTooltip, autoShowTooltip } from \"../tooltip/tooltip.js\"\nimport { connectCompileServerEventSource } from \"./connectCompileServerEventSource.js\"\n\nconst livereloadingPreference = createPreference(\"livereloading\")\nlet eventSourceState = \"default\"\nlet livereloadingAvailableOnServer = false\n\nexport const initToolbarEventSource = ({ executedFileRelativeUrl, livereloading }) => {\n  removeForceHideElement(document.querySelector(\"#eventsource-indicator\"))\n  connectEventSource(executedFileRelativeUrl)\n  livereloadingAvailableOnServer = livereloading\n  if (!livereloadingAvailableOnServer) {\n    disableLivereloadSetting()\n  }\n\n  const livereloadCheckbox = document.querySelector(\"#toggle-livereload\")\n  livereloadCheckbox.checked = shouldLivereload()\n  livereloadCheckbox.onchange = () => {\n    livereloadingPreference.set(livereloadCheckbox.checked)\n    updateEventSourceIndicator()\n  }\n  updateEventSourceIndicator()\n}\n\nconst shouldLivereload = () => {\n  return livereloadingAvailableOnServer && getLivereloadingPreference()\n}\n\nconst disableLivereloadSetting = () => {\n  document.querySelector(\".settings-livereload\").setAttribute(\"data-disabled\", \"true\")\n  document\n    .querySelector(\".settings-livereload\")\n    .setAttribute(\"title\", `Livereload not available: disabled by server`)\n  document.querySelector(\"#toggle-livereload\").disabled = true\n}\n\nconst parentEventSource = window.parent.__jsenv_eventsource__()\nconst latestChangeMap = parentEventSource.latestChangeMap\nlet eventSourceHooks = {}\nlet eventSourceConnection\nlet connectionReadyPromise\n\nconst handleFileChange = (file, type) => {\n  latestChangeMap[file] = type\n  updateEventSourceIndicator()\n  if (shouldLivereload()) {\n    if (file.endsWith(\".css\") || file.endsWith(\".scss\") || file.endsWith(\".sass\")) {\n      reloadAllCss()\n      delete latestChangeMap[file]\n      updateEventSourceIndicator()\n    } else {\n      reloadPage()\n    }\n  }\n}\n\nconst reloadAllCss = () => {\n  const links = Array.from(window.parent.document.getElementsByTagName(\"link\"))\n  links.forEach((link) => {\n    if (link.rel === \"stylesheet\") {\n      const url = new URL(link.href)\n      url.searchParams.set(\"t\", Date.now())\n      link.href = String(url)\n    }\n  })\n}\n\nconst reloadPage = () => {\n  window.parent.location.reload(true)\n}\n\nconst reloadChanges = () => {\n  const fullReloadRequired = Object.keys(latestChangeMap).some((key) => !key.endsWith(\".css\"))\n  if (fullReloadRequired) {\n    reloadPage()\n    return\n  }\n  const cssReloadRequired = Object.keys(latestChangeMap).some((key) => key.endsWith(\".css\"))\n  if (cssReloadRequired) {\n    reloadAllCss()\n    Object.keys(latestChangeMap).forEach((key) => {\n      if (key.endsWith(\".css\")) {\n        delete latestChangeMap[key]\n      }\n      updateEventSourceIndicator()\n    })\n  }\n}\n\nconst connectEventSource = (executedFileRelativeUrl) => {\n  updateEventSourceIndicator()\n  connectionReadyPromise = createPromiseAndHooks()\n\n  eventSourceConnection = connectCompileServerEventSource(executedFileRelativeUrl, {\n    onFileModified: (file) => {\n      handleFileChange(file, \"modified\")\n    },\n    onFileRemoved: (file) => {\n      handleFileChange(file, \"removed\")\n    },\n    onFileAdded: (file) => {\n      handleFileChange(file, \"added\")\n    },\n    onConnecting: ({ cancel }) => {\n      eventSourceState = \"connecting\"\n      eventSourceHooks = { abort: cancel }\n      updateEventSourceIndicator()\n    },\n    onConnectionCancelled: ({ connect }) => {\n      eventSourceState = \"disabled\"\n      eventSourceHooks = { connect }\n      updateEventSourceIndicator()\n    },\n    onConnectionFailed: ({ connect }) => {\n      eventSourceState = \"failed\"\n      eventSourceHooks = { reconnect: connect }\n      updateEventSourceIndicator()\n    },\n    onConnected: ({ cancel }) => {\n      eventSourceState = \"connected\"\n      eventSourceHooks = { disconnect: cancel }\n      updateEventSourceIndicator()\n      connectionReadyPromise.resolve()\n      parentEventSource.disconnect()\n    },\n    lastEventId: parentEventSource.lastEventId,\n  })\n\n  eventSourceConnection.connect()\n}\n\nconst getLivereloadingPreference = () => {\n  return livereloadingPreference.has() ? livereloadingPreference.get() : true\n}\n\nexport const disconnectEventSource = () => {\n  if (eventSourceConnection) {\n    eventSourceConnection.disconnect()\n    eventSourceConnection = undefined\n  }\n}\n\nexport const waitEventSourceReady = () => connectionReadyPromise\n\nconst updateEventSourceIndicator = () => {\n  const { connect, abort, reconnect } = eventSourceHooks\n\n  const eventSourceIndicator = document.querySelector(\"#eventsource-indicator\")\n  const changeCount = Object.keys(latestChangeMap).length\n  enableVariant(eventSourceIndicator, {\n    eventsource: eventSourceState,\n    livereload: shouldLivereload() ? \"on\" : \"off\",\n    changes: changeCount > 0 ? \"yes\" : \"no\",\n  })\n\n  const variantNode = document.querySelector(\"#eventsource-indicator > [data-when-active]\")\n  variantNode.querySelector(\"button\").onclick = () => {\n    toggleTooltip(eventSourceIndicator)\n  }\n\n  if (eventSourceState === \"disabled\") {\n    variantNode.querySelector(\"a\").onclick = connect\n  } else if (eventSourceState === \"connecting\") {\n    variantNode.querySelector(\"a\").onclick = abort\n  } else if (eventSourceState === \"connected\") {\n    removeAutoShowTooltip(eventSourceIndicator)\n    if (changeCount) {\n      const changeLink = variantNode.querySelector(\".eventsource-changes-link\")\n      changeLink.innerHTML = changeCount\n      changeLink.onclick = () => {\n        console.log(JSON.stringify(latestChangeMap, null, \"  \"), latestChangeMap)\n        // eslint-disable-next-line no-alert\n        window.parent.alert(JSON.stringify(latestChangeMap, null, \"  \"))\n      }\n      variantNode.querySelector(\".eventsource-reload-link\").onclick = reloadChanges\n    }\n  } else if (eventSourceState === \"failed\") {\n    autoShowTooltip(eventSourceIndicator)\n    variantNode.querySelector(\"a\").onclick = reconnect\n  }\n}\n",
    "import { forceHideElement, removeForceHideElement, deactivateToolbarSection } from \"../util/dom.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { hideTooltip } from \"../tooltip/tooltip.js\"\n\nconst WINDOW_SMALL_WIDTH = 420\n\nexport const makeToolbarResponsive = () => {\n  // apply responsive design on toolbar icons if needed + add listener on resize screen\n  // ideally we should listen breakpoint once, for now restore toolbar\n  const overflowMenuBreakpoint = createHorizontalBreakpoint(WINDOW_SMALL_WIDTH)\n  const handleOverflowMenuBreakpoint = () => {\n    responsiveToolbar(overflowMenuBreakpoint)\n  }\n  handleOverflowMenuBreakpoint()\n  overflowMenuBreakpoint.changed.listen(handleOverflowMenuBreakpoint)\n\n  // overflow menu\n  document.querySelector(\"#overflow-menu-button\").onclick = () => toggleOverflowMenu()\n}\n\nconst responsiveToolbar = (overflowMenuBreakpoint) => {\n  // close all tooltips in case opened\n  hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n  hideTooltip(document.querySelector(\"#execution-indicator\"))\n  // close settings box in case opened\n  deactivateToolbarSection(document.querySelector(\"#settings\"))\n\n  if (overflowMenuBreakpoint.isBelow()) {\n    enableOverflow()\n  } else {\n    disableOverflow()\n  }\n}\n\nlet moves = []\n\nconst enableOverflow = () => {\n  // move elements from toolbar to overflow menu\n  const responsiveToolbarElements = document.querySelectorAll(\"[data-responsive-toolbar-element]\")\n  const overflowMenu = document.querySelector(\"#overflow-menu\")\n\n  // keep a placeholder element to know where to move them back\n  moves = Array.from(responsiveToolbarElements).map((element) => {\n    const placeholder = document.createElement(\"div\")\n    placeholder.style.display = \"none\"\n    placeholder.setAttribute(\"data-placeholder\", \"\")\n    element.parentNode.replaceChild(placeholder, element)\n    overflowMenu.appendChild(element)\n    return { element, placeholder }\n  })\n\n  document.querySelector(\"#toolbar\").setAttribute(\"data-overflow-menu-enabled\", \"\")\n  removeForceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst disableOverflow = () => {\n  // close overflow menu in case it's open & unselect toggleOverflowMenu button in case it's selected\n  hideOverflowMenu()\n  deactivateToolbarSection(document.querySelector(\"#overflow-menu\"))\n  moves.forEach(({ element, placeholder }) => {\n    placeholder.parentNode.replaceChild(element, placeholder)\n  })\n  moves = []\n\n  document.querySelector(\"#toolbar\").removeAttribute(\"data-overflow-menu-enabled\")\n  forceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst toggleOverflowMenu = () => {\n  if (overflowMenuIsVisible()) {\n    hideOverflowMenu()\n  } else {\n    showOverflowMenu()\n  }\n}\n\nconst overflowMenuIsVisible = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  return toolbar.hasAttribute(\"data-overflow-menu-visible\")\n}\n\nconst showOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  document.querySelector(\"#overflow-menu\").setAttribute(\"data-animate\", \"\")\n  toolbar.setAttribute(\"data-overflow-menu-visible\", \"\")\n}\n\nconst hideOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  toolbar.removeAttribute(\"data-overflow-menu-visible\")\n  document.querySelector(\"#overflow-menu\").removeAttribute(\"data-animate\")\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport { urlIsInsideOf } from \"@jsenv/util/src/urlIsInsideOf.js\"\nimport { urlToRelativeUrl } from \"@jsenv/util/src/urlToRelativeUrl.js\"\n\nimport { fetchExploringJson } from \"../exploring/fetchExploringJson.js\"\nimport { startJavaScriptAnimation } from \"../toolbar/util/animation.js\"\nimport \"./focus/toolbar.focus.js\"\nimport { renderBackToListInToolbar } from \"./backtolist/toolbar.backtolist.js\"\nimport { getToolbarIframe, deactivateToolbarSection, setStyles } from \"./util/dom.js\"\nimport { createPreference } from \"./util/preferences.js\"\nimport { hideTooltip, hideAllTooltip } from \"./tooltip/tooltip.js\"\nimport { renderToolbarSettings, hideSettings } from \"./settings/toolbar.settings.js\"\nimport { renderToolbarNotification } from \"./notification/toolbar.notification.js\"\nimport { renderToolbarTheme } from \"./theme/toolbar.theme.js\"\nimport { renderToolbarAnimation } from \"./animation/toolbar.animation.js\"\nimport { renderExecutionInToolbar } from \"./execution/toolbar.execution.js\"\nimport { renderCompilationInToolbar } from \"./compilation/toolbar.compilation.js\"\nimport { initToolbarEventSource } from \"./eventsource/toolbar.eventsource.js\"\nimport { makeToolbarResponsive } from \"./responsive/toolbar.responsive.js\"\n\nconst toolbarVisibilityPreference = createPreference(\"toolbar\")\n\nconst renderToolbar = async () => {\n  const executedFileCompiledUrl = window.parent.location.href\n  const compileServerOrigin = window.parent.location.origin\n  // this should not block the whole toolbar rendering + interactivity\n  const exploringConfig = await fetchExploringJson()\n  const { outDirectoryRelativeUrl, livereloading } = exploringConfig\n  const compileGroup = getCompileGroup({\n    executedFileCompiledUrl,\n    outDirectoryRelativeUrl,\n    compileServerOrigin,\n  })\n  const executedFileRelativeUrl = compileGroup.fileRelativeUrl\n\n  const toolbarOverlay = document.querySelector(\"#toolbar-overlay\")\n  toolbarOverlay.onclick = () => {\n    hideAllTooltip()\n    hideSettings()\n  }\n\n  const toolbarElement = document.querySelector(\"#toolbar\")\n  exposeOnParentWindow({\n    toolbar: {\n      element: toolbarElement,\n      show: showToolbar,\n      hide: () => hideToolbar(),\n      toggle: toogleToolbar,\n    },\n  })\n\n  const toolbarVisible = toolbarVisibilityPreference.has()\n    ? toolbarVisibilityPreference.get()\n    : true\n\n  if (toolbarVisible) {\n    showToolbar({ animate: false })\n  } else {\n    hideToolbar({ animate: false })\n  }\n\n  renderBackToListInToolbar({\n    outDirectoryRelativeUrl,\n    exploringHtmlFileRelativeUrl: exploringConfig.exploringHtmlFileRelativeUrl,\n  })\n\n  renderToolbarNotification()\n  makeToolbarResponsive()\n  renderToolbarSettings()\n  renderToolbarAnimation()\n  renderToolbarTheme()\n  renderExecutionInToolbar({ executedFileRelativeUrl })\n  renderCompilationInToolbar({ compileGroup })\n  // this might become active but we need to detect this somehow\n  deactivateToolbarSection(document.querySelector(\"#file-list-link\"))\n  initToolbarEventSource({ executedFileRelativeUrl, livereloading })\n\n  // if user click enter or space quickly while closing toolbar\n  // it will cancel the closing\n  // that's why I used toggleToolbar and not hideToolbar\n  document.querySelector(\"#button-close-toolbar\").onclick = () => toogleToolbar()\n}\n\nconst exposeOnParentWindow = (object) => {\n  let { __jsenv__ } = window.parent\n  if (!__jsenv__) {\n    __jsenv__ = {}\n    window.parent.__jsenv__ = {}\n  }\n\n  Object.assign(__jsenv__, object)\n}\n\nconst toogleToolbar = () => {\n  if (toolbarIsVisible()) {\n    hideToolbar()\n  } else {\n    showToolbar()\n  }\n}\n\nconst toolbarIsVisible = () => document.documentElement.hasAttribute(\"data-toolbar-visible\")\n\nlet hideToolbar = () => {\n  // toolbar hidden by default, nothing to do to hide it by default\n  sendEventToParent(\"toolbar-visibility-change\", false)\n}\n\n// (by the way it might be cool to have the toolbar auto show when)\n// it has something to say (being disconnected from livereload server)\nconst showToolbar = ({ animate = true } = {}) => {\n  toolbarVisibilityPreference.set(true)\n  if (animate) {\n    document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n  } else {\n    document.documentElement.removeAttribute(\"data-toolbar-animation\")\n  }\n  document.documentElement.setAttribute(\"data-toolbar-visible\", \"\")\n\n  sendEventToParent(\"toolbar-visibility-change\", true)\n\n  const toolbarIframe = getToolbarIframe()\n  const toolbarIframeParent = toolbarIframe.parentNode\n  const parentWindow = window.parent\n  const parentDocumentElement =\n    parentWindow.document.compatMode === \"CSS1Compat\"\n      ? parentWindow.document.documentElement\n      : parentWindow.document.body\n\n  const scrollYMax = parentDocumentElement.scrollHeight - parentWindow.innerHeight\n  const scrollY = parentDocumentElement.scrollTop\n  const scrollYRemaining = scrollYMax - scrollY\n\n  setStyles(toolbarIframeParent, {\n    \"transition-property\": \"padding-bottom\",\n    \"transition-duration\": \"300ms\",\n  })\n  // maybe we should use js animation here because we would not conflict with css\n  const restoreToolbarIframeParentStyles = setStyles(toolbarIframeParent, {\n    \"scroll-padding-bottom\": \"40px\", // same here we should add 40px\n    \"padding-bottom\": \"40px\", // if there is already one we should add 40px\n  })\n  const restoreToolbarIframeStyles = setStyles(toolbarIframe, {\n    height: \"40px\",\n    visibility: \"visible\",\n  })\n\n  if (scrollYRemaining < 40 && scrollYMax > 0) {\n    const scrollEnd = scrollY + 40\n    startJavaScriptAnimation({\n      duration: 300,\n      onProgress: ({ progress }) => {\n        const value = scrollY + (scrollEnd - scrollY) * progress\n        parentDocumentElement.scrollTop = value\n      },\n    })\n  }\n\n  hideToolbar = () => {\n    restoreToolbarIframeParentStyles()\n    restoreToolbarIframeStyles()\n\n    hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n    hideTooltip(document.querySelector(\"#execution-indicator\"))\n    toolbarVisibilityPreference.set(false)\n    if (animate) {\n      document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n    } else {\n      document.documentElement.removeAttribute(\"data-toolbar-animation\")\n    }\n    document.documentElement.removeAttribute(\"data-toolbar-visible\")\n    sendEventToParent(\"toolbar-visibility-change\", false)\n  }\n}\n\nconst getCompileGroup = ({\n  executedFileCompiledUrl,\n  outDirectoryRelativeUrl,\n  compileServerOrigin,\n}) => {\n  const outDirectoryRemoteUrl = String(new URL(outDirectoryRelativeUrl, compileServerOrigin))\n  if (urlIsInsideOf(executedFileCompiledUrl, outDirectoryRemoteUrl)) {\n    const afterCompileDirectory = urlToRelativeUrl(executedFileCompiledUrl, outDirectoryRemoteUrl)\n    const slashIndex = afterCompileDirectory.indexOf(\"/\")\n    const fileRelativeUrl = afterCompileDirectory.slice(slashIndex + 1)\n    return {\n      fileRelativeUrl,\n      outDirectoryRelativeUrl,\n      compileId: afterCompileDirectory.slice(0, slashIndex),\n    }\n  }\n  return {\n    fileRelativeUrl: new URL(executedFileCompiledUrl).pathname.slice(1),\n    outDirectoryRelativeUrl,\n    compileId: null,\n  }\n}\n\nconst sendEventToParent = (type, value) => {\n  window.parent.postMessage(\n    {\n      jsenv: true,\n      type,\n      value,\n    },\n    \"*\",\n  )\n}\n\nwindow.renderToolbar = renderToolbar\n"
  ]
}