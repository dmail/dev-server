{
  "version": 3,
  "file": "redirector.html__inline__12.js",
  "sources": [
    "../../src/internal/browser_utils/fetch_using_xhr.js",
    "../../src/internal/browser_utils/fetch_browser.js",
    "../../src/internal/browser_utils/fetch_json.js",
    "../../src/internal/browser_detection/user_agent_data.js",
    "../../src/internal/browser_detection/util.js",
    "../../src/internal/browser_detection/detect_android.js",
    "../../src/internal/browser_detection/detect_internet_explorer.js",
    "../../src/internal/browser_detection/detect_opera.js",
    "../../src/internal/browser_detection/detect_edge.js",
    "../../src/internal/browser_detection/detect_firefox.js",
    "../../src/internal/browser_detection/detect_chrome.js",
    "../../src/internal/browser_detection/detect_safari.js",
    "../../src/internal/browser_detection/detect_electron.js",
    "../../src/internal/browser_detection/detect_ios.js",
    "../../src/internal/browser_detection/browser_detection.js",
    "../../src/internal/features/browser_feature_detection/execute_with_script_module.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_importmap.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_dynamic_import.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_top_level_await.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_import_assertions_json.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_import_assertions_css.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_new_stylesheet.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detection.js",
    "../../src/internal/redirector/redirector.html__inline__12.js"
  ],
  "sourcesContent": [
    "export const fetchUsingXHR = async (\n  url,\n  {\n    signal,\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  signal.addEventListener(\"abort\", () => {\n    xhr.abort()\n    const abortError = new Error(\"aborted\")\n    abortError.name = \"AbortError\"\n    failure(abortError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl =\n    \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    `error during xhr request on ${url}.\n--- error stack ---\n${error.stack}`,\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return (\n        value && viewClasses.includes(Object.prototype.toString.call(value))\n      )\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { fetchUsingXHR } from \"./fetch_using_xhr.js\"\n\nconst fetchNative = async (url, { mode = \"cors\", ...options } = {}) => {\n  const response = await window.fetch(url, {\n    mode,\n    ...options,\n  })\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" &&\n  typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch_browser.js\"\n\nexport const fetchJson = async (url, options = {}) => {\n  const response = await fetchUrl(url, options)\n  const object = await response.json()\n  return object\n}\n",
    "/*\n * Prefer window.navigator.userAgentData before resorting to\n * window.navigator.userAgent because of\n * https://blog.chromium.org/2021/09/user-agent-reduction-origin-trial-and-dates.html\n */\n\nexport const detectFromUserAgentData = () => {\n  const { userAgentData } = window.navigator\n  if (!userAgentData) {\n    return null\n  }\n  const { brands } = userAgentData\n  let i = 0\n  while (i < brands.length) {\n    const { brand, version } = brands[i]\n    i++\n    if (brand === \"chromium\" || brand === \"Google Chrome\") {\n      return {\n        name: \"chrome\",\n        version,\n      }\n    }\n  }\n  return null\n}\n",
    "export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectAndroid = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/(android)/i.test(userAgent)) {\n    return {\n      name: \"android\",\n      version: firstMatch(/Android (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectInternetExplorer = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nexport const detectOpera = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) ||\n        firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n",
    "import { secondMatch } from \"./util.js\"\n\nexport const detectEdge = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectFirefox = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(\n        /(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n  return null\n}\n",
    "import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nexport const detectChrome = () => {\n  return userAgentToBrowser(window.navigator.userAgent)\n}\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(\n        /(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n\n  return null\n}\n",
    "import { userAgentToVersion } from \"./util.js\"\n\nexport const detectSafari = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n",
    "export const detectElectron = () => null // TODO\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectIOS = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/iPhone;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  if (/iPad;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "// https://github.com/Ahmdrza/detect-browser/blob/26254f85cf92795655a983bfd759d85f3de850c6/detect-browser.js#L1\n// https://github.com/lancedikson/bowser/blob/master/src/parser-browsers.js#L1\n\nimport { detectFromUserAgentData } from \"./user_agent_data.js\"\nimport { detectAndroid } from \"./detect_android.js\"\nimport { detectInternetExplorer } from \"./detect_internet_explorer.js\"\nimport { detectOpera } from \"./detect_opera.js\"\nimport { detectEdge } from \"./detect_edge.js\"\nimport { detectFirefox } from \"./detect_firefox.js\"\nimport { detectChrome } from \"./detect_chrome.js\"\nimport { detectSafari } from \"./detect_safari.js\"\nimport { detectElectron } from \"./detect_electron.js\"\nimport { detectIOS } from \"./detect_ios.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  detectFromUserAgentData, // keep this first\n  detectOpera,\n  detectInternetExplorer,\n  detectEdge,\n  detectFirefox,\n  detectChrome,\n  detectSafari,\n  detectElectron,\n  detectIOS,\n  detectAndroid,\n])\n\nexport const detectBrowser = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  if (version.indexOf(\".\") > -1) {\n    const parts = version.split(\".\")\n    // remove extraneous .\n    return parts.slice(0, 3).join(\".\")\n  }\n  if (version.indexOf(\"_\") > -1) {\n    const parts = version.split(\"_\")\n    // remove extraneous _\n    return parts.slice(0, 3).join(\"_\")\n  }\n  return version\n}\n",
    "export const executeWithScriptModuleInjection = (code) => {\n  const scriptModule = document.createElement(\"script\")\n  scriptModule.type = \"module\"\n\n  const loadPromise = new Promise((resolve, reject) => {\n    scriptModule.onload = () => {\n      document.body.removeChild(scriptModule)\n      resolve()\n    }\n    scriptModule.onerror = () => {\n      document.body.removeChild(scriptModule)\n      reject()\n    }\n    document.body.appendChild(scriptModule)\n  })\n\n  scriptModule.src = asBase64Url(code)\n\n  return loadPromise\n}\n\nexport const asBase64Url = (text, mimeType = \"application/javascript\") => {\n  return `data:${mimeType};base64,${window.btoa(text)}`\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsImportmap = async ({ remote = true } = {}) => {\n  if (HTMLScriptElement.supports(\"importmap\")) {\n    return true\n  }\n  const specifier = asBase64Url(`export default false`)\n  const importMap = {\n    imports: {\n      [specifier]: asBase64Url(`export default true`),\n    },\n  }\n  const importmapScript = document.createElement(\"script\")\n  const importmapString = JSON.stringify(importMap, null, \"  \")\n  importmapScript.type = \"importmap\"\n  if (remote) {\n    importmapScript.src = `data:application/json;base64,${window.btoa(\n      importmapString,\n    )}`\n  } else {\n    importmapScript.textContent = importmapString\n  }\n  document.body.appendChild(importmapScript)\n\n  try {\n    await executeWithScriptModuleInjection(\n      `import supported from \"${specifier}\"; window.__jsenv_runtime_test_importmap__ = supported`,\n    )\n    document.body.removeChild(importmapScript)\n    const supported = window.__jsenv_runtime_test_importmap__\n    delete window.__jsenv_runtime_test_importmap__\n    return supported\n  } catch (e) {\n    document.body.removeChild(importmapScript)\n    return false\n  }\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsDynamicImport = async () => {\n  const moduleSource = asBase64Url(`export default 42`)\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_dynamic_import__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_dynamic_import__\n    delete window.__jsenv_runtime_test_dynamic_import__\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n",
    "import { executeWithScriptModuleInjection } from \"./execute_with_script_module.js\"\n\nexport const supportsTopLevelAwait = async () => {\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_top_level_await__ = await Promise.resolve(42)`,\n    )\n    const supported = window.__jsenv_runtime_test_top_level_await__ === 42\n    delete window.__jsenv_runtime_test_top_level_await__\n    return supported\n  } catch (e) {\n    return false\n  }\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsJsonImportAssertions = async () => {\n  const jsonBase64Url = asBase64Url(\"42\", \"application/json\")\n  const moduleSource = asBase64Url(\n    `import data from \"${jsonBase64Url}\" assert { type: \"json\" }\n  export default data`,\n  )\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_json_import_assertion__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_json_import_assertion__\n    const supported = namespace.default === 42\n    delete window.__jsenv_runtime_test_json_import_assertion__\n    return supported\n  } catch (e) {\n    return false\n  }\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsCssImportAssertions = async () => {\n  const cssBase64Url = asBase64Url(\"p { color: red; }\", \"text/css\")\n  const moduleSource = asBase64Url(\n    `import css from \"${cssBase64Url}\" assert { type: \"css\" }\n  export default css`,\n  )\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_css_import_assertion__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_css_import_assertion__\n    return namespace.default instanceof CSSStyleSheet\n  } catch (e) {\n    return false\n  }\n}\n",
    "export const supportsNewStylesheet = () => {\n  try {\n    // eslint-disable-next-line no-new\n    new CSSStyleSheet()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n",
    "import { fetchJson } from \"../../browser_utils/fetch_json.js\"\nimport { detectBrowser } from \"../../browser_detection/browser_detection.js\"\n\nimport { supportsImportmap } from \"./browser_feature_detect_importmap.js\"\nimport { supportsDynamicImport } from \"./browser_feature_detect_dynamic_import.js\"\nimport { supportsTopLevelAwait } from \"./browser_feature_detect_top_level_await.js\"\nimport { supportsJsonImportAssertions } from \"./browser_feature_detect_import_assertions_json.js\"\nimport { supportsCssImportAssertions } from \"./browser_feature_detect_import_assertions_css.js\"\nimport { supportsNewStylesheet } from \"./browser_feature_detect_new_stylesheet.js\"\n\nexport const scanBrowserRuntimeFeatures = async ({\n  coverageHandledFromOutside = false,\n  forceCompilation = false,\n  forceSource = false,\n} = {}) => {\n  const jsenvCompileProfileUrl = \"/__jsenv_compile_profile__\"\n  const {\n    jsenvDirectoryRelativeUrl,\n    inlineImportMapIntoHTML,\n    availableCompileIds,\n  } = await fetchJson(jsenvCompileProfileUrl)\n  const { name, version } = detectBrowser()\n  const featuresReport = await detectSupportedFeatures({\n    coverageHandledFromOutside,\n    inlineImportMapIntoHTML,\n  })\n  const runtimeReport = {\n    env: { browser: true },\n    name,\n    version,\n    featuresReport,\n    forceSource,\n    forceCompilation,\n  }\n  const { compileProfile, compileId } = await fetchJson(\n    jsenvCompileProfileUrl,\n    {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify(runtimeReport),\n    },\n  )\n  return {\n    jsenvDirectoryRelativeUrl,\n    inlineImportMapIntoHTML,\n    availableCompileIds,\n    runtimeReport,\n    compileProfile,\n    compileId,\n  }\n}\n\nconst detectSupportedFeatures = async ({\n  coverageHandledFromOutside,\n  inlineImportMapIntoHTML,\n}) => {\n  const featuresReport = {}\n  featuresReport[\"import_http\"] = true\n  featuresReport[\"coverage_js\"] = coverageHandledFromOutside\n  // new CSSStyleSheet\n  featuresReport[\"new_stylesheet\"] = supportsNewStylesheet()\n  // importmap\n  // start testing importmap support first and not in paralell\n  // so that there is not module script loaded beore importmap is injected\n  // it would log an error in chrome console and return undefined\n  featuresReport.importmap = await supportsImportmap({\n    // chrome supports inline but not remote importmap\n    // https://github.com/WICG/import-maps/issues/235\n    // at this stage we won't know if the html file will use\n    // an importmap or not and if that importmap is inline or specified with an src\n    // so we should test if browser support local and remote importmap.\n    // But there exploring server can inline importmap by transforming html\n    // and in that case we can test only the local importmap support\n    // so we test importmap support and the remote one\n    remote: !inlineImportMapIntoHTML,\n  })\n  // dynamic import\n  featuresReport[\"import_dynamic\"] = await supportsDynamicImport()\n  // top level await\n  featuresReport[\"top_level_await\"] = await supportsTopLevelAwait()\n  // import assertions\n  featuresReport[\"import_assertion_type_json\"] =\n    await supportsJsonImportAssertions()\n  featuresReport[\"import_assertion_type_css\"] =\n    await supportsCssImportAssertions()\n  return featuresReport\n}\n",
    "\n      import { scanBrowserRuntimeFeatures } from \"../features/browser_feature_detection/browser_feature_detection.js\"\n\n      const redirect = async () => {\n        const searchParams = new URLSearchParams(window.location.search)\n        const redirectTarget = searchParams.get(\"redirect\")\n        const forceCompilation = searchParams.get(\"force_compilation\")\n        const browserRuntimeProfile = await scanBrowserRuntimeFeatures({\n          forceCompilation: forceCompilation === \"1\",\n        })\n        const href = `${getDirectoryUrl(\n          browserRuntimeProfile,\n        )}${redirectTarget}`\n        // It's IMPORTANT to use location.replace and NOT location.href = url\n        // otherwise it would break the back button\n        window.location.replace(href)\n      }\n\n      const getDirectoryUrl = ({ jsenvDirectoryRelativeUrl, compileId }) => {\n        if (compileId) {\n          return `/${jsenvDirectoryRelativeUrl}${compileId}/`\n        }\n        return `/`\n      }\n\n      redirect()\n    "
  ],
  "names": [
    "fetchUsingXHR",
    "url",
    "signal",
    "method",
    "credentials",
    "headers",
    "body",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "error",
    "settled",
    "reject",
    "cleanup",
    "ontimeout",
    "onerror",
    "onload",
    "onreadystatechange",
    "Error",
    "createRequestError",
    "resolve",
    "addEventListener",
    "abort",
    "abortError",
    "name",
    "readyState",
    "open",
    "Object",
    "keys",
    "forEach",
    "key",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseUrl",
    "responseURL",
    "responseStatus",
    "status",
    "responseStatusText",
    "statusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "String",
    "json",
    "JSON",
    "parse",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "responseBlob",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "window",
    "FileReader",
    "e",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "stack",
    "promise",
    "Promise",
    "res",
    "rej",
    "value",
    "originSameAsGlobalOrigin",
    "location",
    "globalOrigin",
    "origin",
    "hrefToOrigin",
    "prototype",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "line",
    "parts",
    "shift",
    "join",
    "toLowerCase",
    "href",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "length",
    "pathnameSlashIndex",
    "indexOf",
    "slice",
    "colonIndex",
    "obj",
    "DataView",
    "isView",
    "viewClasses",
    "includes",
    "toString",
    "call",
    "form",
    "bytes",
    "replace",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "Array",
    "i",
    "fromCharCode",
    "result",
    "byteLength",
    "set",
    "fetchNative",
    "mode",
    "options",
    "fetch",
    "responseToHeaders",
    "fetchUrl",
    "AbortController",
    "fetchJson",
    "object",
    "detectFromUserAgentData",
    "userAgentData",
    "navigator",
    "brands",
    "brand",
    "version",
    "firstMatch",
    "regexp",
    "string",
    "match",
    "undefined",
    "secondMatch",
    "userAgentToVersion",
    "userAgent",
    "detectAndroid",
    "navigatorToBrowser",
    "appVersion",
    "test",
    "detectInternetExplorer",
    "userAgentToBrowser",
    "detectOpera",
    "detectEdge",
    "detectFirefox",
    "detectChrome",
    "detectSafari",
    "detectElectron",
    "detectIOS",
    "detectorCompose",
    "detectors",
    "detector",
    "detectBrowser",
    "normalizeName",
    "normalizeVersion",
    "executeWithScriptModuleInjection",
    "code",
    "scriptModule",
    "document",
    "createElement",
    "type",
    "loadPromise",
    "removeChild",
    "appendChild",
    "src",
    "asBase64Url",
    "mimeType",
    "btoa",
    "supportsImportmap",
    "remote",
    "HTMLScriptElement",
    "supports",
    "specifier",
    "importMap",
    "imports",
    "importmapScript",
    "importmapString",
    "stringify",
    "textContent",
    "supported",
    "__jsenv_runtime_test_importmap__",
    "supportsDynamicImport",
    "moduleSource",
    "namespace",
    "__jsenv_runtime_test_dynamic_import__",
    "default",
    "supportsTopLevelAwait",
    "__jsenv_runtime_test_top_level_await__",
    "supportsJsonImportAssertions",
    "jsonBase64Url",
    "__jsenv_runtime_test_json_import_assertion__",
    "supportsCssImportAssertions",
    "cssBase64Url",
    "__jsenv_runtime_test_css_import_assertion__",
    "CSSStyleSheet",
    "supportsNewStylesheet",
    "scanBrowserRuntimeFeatures",
    "coverageHandledFromOutside",
    "forceCompilation",
    "forceSource",
    "jsenvCompileProfileUrl",
    "jsenvDirectoryRelativeUrl",
    "inlineImportMapIntoHTML",
    "availableCompileIds",
    "featuresReport",
    "detectSupportedFeatures",
    "runtimeReport",
    "env",
    "browser",
    "compileProfile",
    "compileId",
    "importmap",
    "redirect",
    "searchParams",
    "search",
    "redirectTarget",
    "get",
    "browserRuntimeProfile",
    "getDirectoryUrl"
  ],
  "mappings": "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"
}