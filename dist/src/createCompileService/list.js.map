{"version":3,"sources":["../../../src/createCompileService/list.js"],"names":["list","rootLocation","cacheFolderRelativeLocation","cacheFolderLocation","visit","folderRelativeLocation","folders","folderLocation","then","names","includes","push","Promise","all","map","name"],"mappings":";;;;;;;AAAA;;AACA;;AAEO,IAAMA,sBAAO,SAAPA,IAAO,OAAmD;AAAA,MAAhDC,YAAgD,QAAhDA,YAAgD;AAAA,MAAlCC,2BAAkC,QAAlCA,2BAAkC;;AACrE,MAAMC,sBAAsB,0BAAYF,YAAZ,EAA0BC,2BAA1B,CAA5B;;AAEA,MAAME,QAAQ,SAARA,KAAQ,CAACC,sBAAD,EAA0C;AAAA,QAAjBC,OAAiB,uEAAP,EAAO;;AACtD,QAAMC,iBAAiB,0BAAYJ,mBAAZ,EAAiCE,sBAAjC,CAAvB;;AAEA,WAAO,yBAAWE,cAAX,EACJC,IADI,CACC,UAACC,KAAD,EAAW;AACf,UAAIA,MAAMC,QAAN,kBAAJ,EAA+B;AAC7BJ,gBAAQK,IAAR,CAAaN,sBAAb;AACA;AACD;AACD,aAAOO,QAAQC,GAAR,CAAYJ,MAAMK,GAAN,CAAU,UAACC,IAAD;AAAA,eAAUX,MAAM,0BAAYG,cAAZ,EAA4BQ,IAA5B,CAAN,EAAyCT,OAAzC,CAAV;AAAA,OAAV,CAAZ,CAAP;AACD,KAPI,EAQJE,IARI,CAQC;AAAA,aAAMF,OAAN;AAAA,KARD,CAAP;AASD,GAZD;;AAcA,SAAOF,MAAMD,mBAAN,CAAP;AACD,CAlBM","file":"list.js","sourcesContent":["import { JSON_FILE } from \"./cache.js\"\nimport { readFolder, resolvePath } from \"./helpers.js\"\n\nexport const list = ({ rootLocation, cacheFolderRelativeLocation }) => {\n  const cacheFolderLocation = resolvePath(rootLocation, cacheFolderRelativeLocation)\n\n  const visit = (folderRelativeLocation, folders = []) => {\n    const folderLocation = resolvePath(cacheFolderLocation, folderRelativeLocation)\n\n    return readFolder(folderLocation)\n      .then((names) => {\n        if (names.includes(JSON_FILE)) {\n          folders.push(folderRelativeLocation)\n          return\n        }\n        return Promise.all(names.map((name) => visit(resolvePath(folderLocation, name), folders)))\n      })\n      .then(() => folders)\n  }\n\n  return visit(cacheFolderLocation)\n}\n"]}