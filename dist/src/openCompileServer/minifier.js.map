{"version":3,"sources":["../../../src/openCompileServer/minifier.js"],"names":["minifier","code","ast","map","sourceMap","babelConfig","sourceMaps","inputSourceMap","babelrc"],"mappings":";;;;;;;AAAA;;AACA;;AAEO,IAAMA,8BAAW,SAAXA,QAAW,cAAuC;AAAA,MAApCC,IAAoC,QAApCA,IAAoC;AAAA,MAA9BC,GAA8B,QAA9BA,GAA8B;AAAA,MAAzBC,GAAyB,QAAzBA,GAAyB;AAAA,MAAhBC,SAAgB,SAAhBA,SAAgB;;AAC7D,MAAMC,cAAc,gCAClB,gCAAa,yCAAb,EAAqC;AACnCC,gBAAYF,SADuB;AAEnCG,oBAAgBJ,GAFmB;AAGnCK,aAAS,KAH0B,EAGnB;AAChBN,SAAK;AAJ8B,GAArC,CADkB,CAApB;;AASA,MAAIA,GAAJ,EAAS;AACP,WAAO,iCAAiBA,GAAjB,EAAsBD,IAAtB,EAA4BI,WAA5B,CAAP;AACD;AACD,SAAO,0BAAUJ,IAAV,EAAgBI,WAAhB,CAAP;AACD,CAdM","file":"minifier.js","sourcesContent":["import { createConfig, createMinifiyOptions, mergeOptions } from \"@dmail/shared-config\"\nimport { transform, transformFromAst } from \"babel-core\"\n\nexport const minifier = ({ code, ast, map }, { sourceMap }) => {\n  const babelConfig = createConfig(\n    mergeOptions(createMinifiyOptions(), {\n      sourceMaps: sourceMap,\n      inputSourceMap: map,\n      babelrc: false, // trust only these options, do not read any babelrc config file\n      ast: true,\n    }),\n  )\n\n  if (ast) {\n    return transformFromAst(ast, code, babelConfig)\n  }\n  return transform(code, babelConfig)\n}\n"]}