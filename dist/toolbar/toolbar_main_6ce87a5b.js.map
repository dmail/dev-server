{
  "version": 3,
  "file": "toolbar_main.js",
  "sources": [
    "../../node_modules/@jsenv/filesystem/src/urlIsInsideOf.js",
    "../../node_modules/@jsenv/filesystem/src/internal/getCommonPathname.js",
    "../../node_modules/@jsenv/filesystem/src/internal/pathnameToParentPathname.js",
    "../../node_modules/@jsenv/filesystem/src/urlToRelativeUrl.js",
    "../../src/internal/dev_server/toolbar/util/dom.js",
    "../../src/internal/dev_server/toolbar/util/animation.js",
    "../../src/internal/dev_server/toolbar/focus/toolbar_focus.js",
    "../../src/internal/dev_server/toolbar/util/iframe_to_parent_href.js",
    "../../src/internal/dev_server/toolbar/util/preferences.js",
    "../../src/internal/dev_server/toolbar/tooltip/tooltip.js",
    "../../src/internal/dev_server/toolbar/variant/variant.js",
    "../../src/internal/dev_server/toolbar/settings/toolbar_settings.js",
    "../../src/internal/dev_server/toolbar/notification/toolbar_notification.js",
    "../../src/internal/dev_server/toolbar/theme/toolbar_theme.js",
    "../../src/internal/dev_server/toolbar/animation/toolbar_animation.js",
    "../../src/internal/dev_server/toolbar/util/responsive.js",
    "../../src/internal/dev_server/toolbar/execution/toolbar_execution.js",
    "../../src/internal/browser_utils/fetch_using_xhr.js",
    "../../src/internal/browser_utils/fetch_browser.js",
    "../../src/internal/browser_utils/fetch_json.js",
    "../../src/internal/browser_detection/user_agent_data.js",
    "../../src/internal/browser_detection/util.js",
    "../../src/internal/browser_detection/detect_android.js",
    "../../src/internal/browser_detection/detect_internet_explorer.js",
    "../../src/internal/browser_detection/detect_opera.js",
    "../../src/internal/browser_detection/detect_edge.js",
    "../../src/internal/browser_detection/detect_firefox.js",
    "../../src/internal/browser_detection/detect_chrome.js",
    "../../src/internal/browser_detection/detect_safari.js",
    "../../src/internal/browser_detection/detect_electron.js",
    "../../src/internal/browser_detection/detect_ios.js",
    "../../src/internal/browser_detection/browser_detection.js",
    "../../src/internal/features/browser_feature_detection/execute_with_script_module.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_importmap.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_dynamic_import.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_top_level_await.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_import_assertions_json.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_import_assertions_css.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detect_new_stylesheet.js",
    "../../src/internal/features/browser_feature_detection/browser_feature_detection.js",
    "../../src/internal/dev_server/toolbar/compilation/toolbar_compilation.js",
    "../../src/internal/dev_server/toolbar/eventsource/toolbar_eventsource.js",
    "../../src/internal/dev_server/toolbar/responsive/toolbar_responsive.js",
    "../../src/internal/dev_server/toolbar/toolbar_main.js"
  ],
  "sourcesContent": [
    "export const urlIsInsideOf = (url, otherUrl) => {\n  const urlObject = new URL(url)\n  const otherUrlObject = new URL(otherUrl)\n\n  if (urlObject.origin !== otherUrlObject.origin) {\n    return false\n  }\n\n  const urlPathname = urlObject.pathname\n  const otherUrlPathname = otherUrlObject.pathname\n  if (urlPathname === otherUrlPathname) {\n    return false\n  }\n\n  const isInside = urlPathname.startsWith(otherUrlPathname)\n  return isInside\n}\n",
    "export const getCommonPathname = (pathname, otherPathname) => {\n  const firstDifferentCharacterIndex = findFirstDifferentCharacterIndex(\n    pathname,\n    otherPathname,\n  )\n\n  // pathname and otherpathname are exactly the same\n  if (firstDifferentCharacterIndex === -1) {\n    return pathname\n  }\n\n  const commonString = pathname.slice(0, firstDifferentCharacterIndex + 1)\n\n  // the first different char is at firstDifferentCharacterIndex\n  if (pathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  if (otherPathname.charAt(firstDifferentCharacterIndex) === \"/\") {\n    return commonString\n  }\n\n  const firstDifferentSlashIndex = commonString.lastIndexOf(\"/\")\n  return pathname.slice(0, firstDifferentSlashIndex + 1)\n}\n\nconst findFirstDifferentCharacterIndex = (string, otherString) => {\n  const maxCommonLength = Math.min(string.length, otherString.length)\n  let i = 0\n  while (i < maxCommonLength) {\n    const char = string.charAt(i)\n    const otherChar = otherString.charAt(i)\n    if (char !== otherChar) {\n      return i\n    }\n    i++\n  }\n  if (string.length === otherString.length) {\n    return -1\n  }\n  // they differ at maxCommonLength\n  return maxCommonLength\n}\n",
    "export const pathnameToParentPathname = (pathname) => {\n  const slashLastIndex = pathname.lastIndexOf(\"/\")\n  if (slashLastIndex === -1) {\n    return \"/\"\n  }\n\n  return pathname.slice(0, slashLastIndex + 1)\n}\n",
    "import { getCommonPathname } from \"./internal/getCommonPathname.js\"\nimport { pathnameToParentPathname } from \"./internal/pathnameToParentPathname.js\"\n\nexport const urlToRelativeUrl = (url, baseUrl) => {\n  const urlObject = new URL(url)\n  const baseUrlObject = new URL(baseUrl)\n\n  if (urlObject.protocol !== baseUrlObject.protocol) {\n    const urlAsString = String(url)\n    return urlAsString\n  }\n\n  if (\n    urlObject.username !== baseUrlObject.username ||\n    urlObject.password !== baseUrlObject.password ||\n    urlObject.host !== baseUrlObject.host\n  ) {\n    const afterUrlScheme = String(url).slice(urlObject.protocol.length)\n    return afterUrlScheme\n  }\n\n  const { pathname, hash, search } = urlObject\n  if (pathname === \"/\") {\n    const baseUrlRessourceWithoutLeadingSlash = baseUrlObject.pathname.slice(1)\n    return baseUrlRessourceWithoutLeadingSlash\n  }\n\n  const basePathname = baseUrlObject.pathname\n  const commonPathname = getCommonPathname(pathname, basePathname)\n  if (!commonPathname) {\n    const urlAsString = String(url)\n    return urlAsString\n  }\n\n  const specificPathname = pathname.slice(commonPathname.length)\n  const baseSpecificPathname = basePathname.slice(commonPathname.length)\n  if (baseSpecificPathname.includes(\"/\")) {\n    const baseSpecificParentPathname =\n      pathnameToParentPathname(baseSpecificPathname)\n    const relativeDirectoriesNotation = baseSpecificParentPathname.replace(\n      /.*?\\//g,\n      \"../\",\n    )\n    const relativeUrl = `${relativeDirectoriesNotation}${specificPathname}${search}${hash}`\n    return relativeUrl\n  }\n\n  const relativeUrl = `${specificPathname}${search}${hash}`\n  return relativeUrl\n}\n",
    "export const updateIframeOverflowOnParentWindow = () => {\n  if (!window.parent) {\n    // can happen while parent iframe reloads\n    return\n  }\n\n  const aTooltipIsOpened =\n    document.querySelector(\"[data-tooltip-visible]\") ||\n    document.querySelector(\"[data-tooltip-auto-visible]\")\n  const settingsAreOpened = document.querySelector(\"#settings[data-active]\")\n\n  if (aTooltipIsOpened || settingsAreOpened) {\n    enableIframeOverflowOnParentWindow()\n  } else {\n    disableIframeOverflowOnParentWindow()\n  }\n}\n\nlet iframeOverflowEnabled = false\nconst enableIframeOverflowOnParentWindow = () => {\n  if (iframeOverflowEnabled) return\n  iframeOverflowEnabled = true\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"100%\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nconst disableIframeOverflowOnParentWindow = () => {\n  if (!iframeOverflowEnabled) return\n  iframeOverflowEnabled = false\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"40px\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nexport const getToolbarIframe = () => {\n  const iframes = Array.from(window.parent.document.querySelectorAll(\"iframe\"))\n  return iframes.find((iframe) => iframe.contentWindow === window)\n}\n\nexport const forceHideElement = (element) => {\n  element.setAttribute(\"data-force-hide\", \"\")\n}\n\nexport const removeForceHideElement = (element) => {\n  element.removeAttribute(\"data-force-hide\")\n}\n\nexport const setStyles = (element, styles) => {\n  const elementStyle = element.style\n  const restoreStyles = Object.keys(styles).map((styleName) => {\n    let restore\n    if (styleName in elementStyle) {\n      const currentStyle = elementStyle[styleName]\n      restore = () => {\n        elementStyle[styleName] = currentStyle\n      }\n    } else {\n      restore = () => {\n        delete elementStyle[styleName]\n      }\n    }\n\n    elementStyle[styleName] = styles[styleName]\n\n    return restore\n  })\n  return () => {\n    restoreStyles.forEach((restore) => restore())\n  }\n}\n\nexport const setAttributes = (element, attributes) => {\n  Object.keys(attributes).forEach((name) => {\n    element.setAttribute(name, attributes[name])\n  })\n}\n\nexport const getDocumentScroll = () => {\n  return {\n    x: document.documentElement.scrollLeft,\n    y: document.documentElement.scrollTop,\n  }\n}\n\nexport const toolbarSectionIsActive = (element) => {\n  return element.hasAttribute(\"data-active\")\n}\n\nexport const activateToolbarSection = (element) => {\n  element.setAttribute(\"data-active\", \"\")\n}\n\nexport const deactivateToolbarSection = (element) => {\n  element.removeAttribute(\"data-active\")\n}\n",
    "import { setStyles } from \"./dom.js\"\n\nconst animateFallback = () => {\n  return Promise.resolve()\n}\n\nconst animateNative = (node, keyframes, { signal, ...options } = {}) => {\n  const animation = node.animate(keyframes, options)\n  if (signal) {\n    signal.addEventListener(\"abort\", () => {\n      animation.cancel()\n    })\n  }\n  return new Promise((resolve) => {\n    animation.onfinish = resolve\n  })\n}\n\nexport const canUseAnimation = () =>\n  typeof HTMLElement.prototype.animate === \"function\"\n\nexport const animateElement = canUseAnimation()\n  ? animateNative\n  : animateFallback\n\nexport const fadeIn = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 0,\n      },\n      {\n        opacity: 1,\n      },\n    ],\n    options,\n  )\n\nexport const fadeOut = (node, options) =>\n  animateElement(\n    node,\n    [\n      {\n        opacity: 1,\n      },\n      {\n        opacity: 0,\n      },\n    ],\n    options,\n  )\n\nexport const move = (fromNode, toNode, options) => {\n  const fromComputedStyle = window.getComputedStyle(fromNode)\n  const toComputedStyle = window.getComputedStyle(toNode)\n  // get positions of input in toolbar and aElement\n  const fromPosition = fromNode.getBoundingClientRect()\n  const toPosition = toNode.getBoundingClientRect()\n\n  // we'll do the animation in a div preventing overflow and pointer events\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.left = 0\n  div.style.top = 0\n  div.style.width = `${document.documentElement.scrollWidth}px`\n  div.style.height = `${document.documentElement.scrollHeight}px`\n  div.style.overflow = \"hidden\"\n  div.style.pointerEvents = \"none\"\n\n  const documentScroll = {\n    left: window.pageXOffset || document.documentElement.scrollLeft,\n    top: window.pageYOffset || document.documentElement.scrollTop,\n  }\n\n  // clone node and style it\n  const copy = fromNode.cloneNode(true)\n  copy.style.position = \"absolute\"\n  copy.style.left = `${documentScroll.left + fromPosition.left}px`\n  copy.style.top = `${documentScroll.top + fromPosition.top}px`\n  copy.style.maxWidth = `${fromPosition.right - fromPosition.left}px`\n  copy.style.overflow = toComputedStyle.overflow\n  copy.style.textOverflow = toComputedStyle.textOverflow\n  div.appendChild(copy)\n  document.body.appendChild(div)\n\n  const left =\n    toPosition.left -\n    fromPosition.left -\n    (parseInt(fromComputedStyle.paddingLeft) || 0)\n  const top =\n    toPosition.top -\n    fromPosition.top -\n    (parseInt(fromComputedStyle.paddingTop) || 0)\n  // define final position of new element and the duration\n  const translate = `translate(${left}px, ${top}px)`\n\n  // animate new element\n  return animateElement(\n    copy,\n    [\n      {\n        transform: \"translate(0px, 0px)\",\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n        fontSize: fromComputedStyle.fontSize,\n        height: `${fromPosition.bottom - fromPosition.top}px`,\n        width: \"100%\",\n      },\n      {\n        offset: 0.9,\n        backgroundColor: fromComputedStyle.backgroundColor,\n        color: fromComputedStyle.color,\n      },\n      {\n        transform: translate,\n        backgroundColor: toComputedStyle.backgroundColor,\n        color: toComputedStyle.color,\n        fontSize: toComputedStyle.fontSize,\n        height: `${toPosition.bottom - toPosition.top}px`,\n        width: toComputedStyle.width,\n      },\n    ],\n    options,\n  ).then(() => {\n    div.parentNode.removeChild(div)\n  })\n}\n\n// the whole point of this toolbar animation wass to flight a visual imperfection when it's done by css transition.\n// This imperfection is a white line sometimes flickering at the bottom of the page.\n// It got fixed by removing the usage of calc(100vh - 40px)\n// It was hapenning in chrome, safari but not inside Firefox\n// I assume it's because Firefox does not read parent element min-height while\n// chrome use it to compute min-height: 100%\nexport const createToolbarAnimation = () => {\n  const collapsedState = {\n    \"#page\": { paddingBottom: 0 },\n    \"footer\": { height: 0 },\n    \"#toolbar\": { visibility: \"hidden\" },\n  }\n  const expandedState = {\n    \"#page\": { paddingBottom: \"40px\" },\n    \"footer\": { height: \"40px\" },\n    \"#toolbar\": { visibility: \"visible\" },\n  }\n  const expandTransition = transit(collapsedState, expandedState, {\n    duration: 300,\n  })\n\n  const expand = () => {\n    expandTransition.play()\n  }\n\n  const collapse = () => {\n    expandTransition.reverse()\n  }\n\n  return { expand, collapse }\n}\n\nexport const transit = (\n  fromState,\n  toState,\n  { commitStyles = true, fill = \"both\", duration = 300 } = {},\n) => {\n  const steps = []\n  Object.keys(fromState).forEach((selector) => {\n    const fromStyles = {}\n    const toStyles = {}\n    const element = document.querySelector(selector)\n\n    const keyframes = []\n    const fromProperties = fromState[selector]\n    const toProperties = toState[selector]\n    Object.keys(fromProperties).forEach((propertyName) => {\n      const from = fromProperties[propertyName]\n      const to = toProperties[propertyName]\n      fromStyles[propertyName] = from\n      toStyles[propertyName] = to\n    })\n    keyframes.push(fromStyles, toStyles)\n\n    let animation\n    if (canUseAnimation()) {\n      const effect = new KeyframeEffect(element, keyframes, { fill, duration })\n      animation = new Animation(effect)\n    } else {\n      animation = {\n        playbackRate: 1,\n        play: () => {\n          animation.onfinish()\n        },\n        reverse: () => {\n          animation.playbackRate = -1\n          animation.onfinish()\n        },\n        finish: () => {},\n        onfinish: () => {},\n      }\n    }\n\n    steps.push({\n      element,\n      animation,\n      fromStyles,\n      toStyles,\n    })\n  })\n\n  const play = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, toStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, toStyles)\n            }\n            resolve()\n          }\n          if (animation.playbackRate === -1) {\n            animation.reverse()\n          } else {\n            animation.play()\n          }\n        })\n      }),\n    )\n  }\n\n  const reverse = async () => {\n    await Promise.all(\n      steps.map(({ animation, element, fromStyles }) => {\n        return new Promise((resolve) => {\n          animation.onfinish = () => {\n            if (commitStyles) {\n              setStyles(element, fromStyles)\n            }\n            resolve()\n          }\n          animation.reverse()\n        })\n      }),\n    )\n  }\n\n  const finish = async () => {\n    steps.forEach(({ animation }) => {\n      animation.finish()\n    })\n  }\n\n  return { play, reverse, finish }\n}\n\nexport const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t,\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    // console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "// handle data-last-interaction attr on html (focusring)\nwindow.addEventListener(\"mousedown\", (mousedownEvent) => {\n  if (mousedownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"touchstart\", (touchstartEvent) => {\n  if (touchstartEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"mouse\")\n})\nwindow.addEventListener(\"keydown\", (keydownEvent) => {\n  if (keydownEvent.defaultPrevented) {\n    return\n  }\n  document.documentElement.setAttribute(\"data-last-interaction\", \"keyboard\")\n})\n",
    "export const setLinkHrefForParentWindow = (a, href) => {\n  a.href = href\n  a.onclick = (e) => {\n    if (e.ctrlKey || e.metaKey) {\n      return\n    }\n    e.preventDefault()\n    window.parent.location.href = href\n  }\n}\n",
    "export const createPreference = (name) => {\n  return {\n    has: () => localStorage.hasOwnProperty(name),\n    get: () =>\n      localStorage.hasOwnProperty(name)\n        ? JSON.parse(localStorage.getItem(name))\n        : undefined,\n    set: (value) => localStorage.setItem(name, JSON.stringify(value)),\n  }\n}\n",
    "import { updateIframeOverflowOnParentWindow } from \"../util/dom.js\"\n\nexport const toggleTooltip = (element) => {\n  if (element.hasAttribute(\"data-tooltip-visible\")) {\n    hideTooltip(element)\n  } else {\n    showTooltip(element)\n  }\n}\n\nexport const hideTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-visible\")\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const autoShowTooltip = (element) => {\n  element.setAttribute(\"data-tooltip-auto-visible\", \"\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const removeAutoShowTooltip = (element) => {\n  element.removeAttribute(\"data-tooltip-auto-visible\")\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const hideAllTooltip = () => {\n  const elementsWithTooltip = Array.from(\n    document.querySelectorAll(\"[data-tooltip-visible]\"),\n  )\n  elementsWithTooltip.forEach((elementWithTooltip) => {\n    hideTooltip(elementWithTooltip)\n  })\n}\n",
    "export const enableVariant = (rootNode, variables) => {\n  const nodesNotMatching = Array.from(\n    rootNode.querySelectorAll(`[${attributeIndicatingACondition}]`),\n  )\n  nodesNotMatching.forEach((nodeNotMatching) => {\n    const conditionAttributeValue = nodeNotMatching.getAttribute(\n      attributeIndicatingACondition,\n    )\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (matches) {\n      renameAttribute(\n        nodeNotMatching,\n        attributeIndicatingACondition,\n        attributeIndicatingAMatch,\n      )\n    }\n  })\n\n  const nodesMatching = Array.from(\n    rootNode.querySelectorAll(`[${attributeIndicatingAMatch}]`),\n  )\n  nodesMatching.forEach((nodeMatching) => {\n    const conditionAttributeValue = nodeMatching.getAttribute(\n      attributeIndicatingAMatch,\n    )\n    const matches = testCondition(conditionAttributeValue, variables)\n    if (!matches) {\n      renameAttribute(\n        nodeMatching,\n        attributeIndicatingAMatch,\n        attributeIndicatingACondition,\n      )\n    }\n  })\n}\n\nconst testCondition = (conditionAttributeValue, variables) => {\n  const condition = parseCondition(conditionAttributeValue)\n  return Object.keys(variables).some((key) => {\n    if (condition.key !== key) {\n      return false\n    }\n    // the condition do not specify a value, any value is ok\n    if (condition.value === undefined) {\n      return true\n    }\n    if (condition.value === variables[key]) {\n      return true\n    }\n    return false\n  })\n}\n\nconst parseCondition = (conditionAttributeValue) => {\n  const colonIndex = conditionAttributeValue.indexOf(\":\")\n  if (colonIndex === -1) {\n    return {\n      key: conditionAttributeValue,\n      value: undefined,\n    }\n  }\n  return {\n    key: conditionAttributeValue.slice(0, colonIndex),\n    value: conditionAttributeValue.slice(colonIndex + 1),\n  }\n}\n\nconst attributeIndicatingACondition = `data-when`\nconst attributeIndicatingAMatch = `data-when-active`\n\nconst renameAttribute = (node, name, newName) => {\n  node.setAttribute(newName, node.getAttribute(name))\n  node.removeAttribute(name)\n}\n",
    "import {\n  toolbarSectionIsActive,\n  deactivateToolbarSection,\n  activateToolbarSection,\n  updateIframeOverflowOnParentWindow,\n} from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nexport const renderToolbarSettings = () => {\n  document.querySelector(\"#settings-button\").onclick = toggleSettings\n  document.querySelector(\"#button-close-settings\").onclick = toggleSettings\n}\n\nconst toggleSettings = () => {\n  if (settingsAreVisible()) {\n    hideSettings()\n  } else {\n    showSettings()\n  }\n}\n\nexport const enableWarningStyle = () => {\n  enableVariant(document.querySelector(\"#settings-button\"), {\n    has_warning: \"yes\",\n  })\n}\n\nexport const disableWarningStyle = () => {\n  enableVariant(document.querySelector(\"#settings-button\"), {\n    has_warning: \"no\",\n  })\n}\n\nexport const settingsAreVisible = () => {\n  return toolbarSectionIsActive(document.querySelector(`#settings`))\n}\n\nexport const hideSettings = () => {\n  deactivateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n\nexport const showSettings = () => {\n  activateToolbarSection(document.querySelector(`#settings`))\n  updateIframeOverflowOnParentWindow()\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\nimport { enableVariant } from \"../variant/variant.js\"\n\nconst notificationAvailable = typeof window.Notification === \"function\"\nconst notificationPreference = createPreference(\"notification\")\n\nconst arrayOfOpenedNotifications = []\nexport const renderToolbarNotification = () => {\n  if (!notificationAvailable) {\n    applyNotificationNotAvailableEffects()\n    return\n  }\n  updatePermission()\n}\n\nconst updatePermission = () => {\n  const notifPermission = Notification.permission\n  if (notifPermission === \"default\") {\n    applyNotificationDefaultEffects()\n    return\n  }\n  if (notifPermission === \"denied\") {\n    applyNotificationDeniedEffects()\n    return\n  }\n  if (notifPermission === \"granted\") {\n    applyNotificationGrantedEffects()\n    return\n  }\n}\n\nconst notifCheckbox = document.querySelector(\"#toggle-notifs\")\n\nconst applyNotificationNotAvailableEffects = () => {\n  const notifSetting = document.querySelector(\".settings-notification\")\n  notifSetting.setAttribute(\"data-disabled\", \"true\")\n  notifSetting.setAttribute(\n    \"title\",\n    `Notification not available in the browser`,\n  )\n  notifCheckbox.disabled = true\n}\nconst applyNotificationDefaultEffects = () => {\n  applyNotificationNOTGrantedEffects()\n  const notifSetting = document.querySelector(\".settings-notification\")\n  notifSetting.removeAttribute(\"data-disabled\")\n  notifSetting.removeAttribute(\"title\")\n}\nconst applyNotificationDeniedEffects = () => {\n  applyNotificationNOTGrantedEffects()\n  const notifSetting = document.querySelector(\".settings-notification\")\n  notifSetting.setAttribute(\"data-disabled\", \"true\")\n  notifSetting.setAttribute(\"title\", `Notification denied`)\n}\nconst applyNotificationGrantedEffects = () => {\n  enableVariant(document.querySelector(\".notification-text\"), {\n    notif_granted: \"yes\",\n  })\n  notifCheckbox.disabled = false\n  notifCheckbox.checked = getNotificationPreference()\n  notifCheckbox.onchange = () => {\n    setNotificationPreference(notifCheckbox.checked)\n    if (!notifCheckbox.checked) {\n      // slice because arrayOfOpenedNotifications can be mutated while looping\n      arrayOfOpenedNotifications.slice().forEach((notification) => {\n        notification.close()\n      })\n    }\n  }\n}\nconst applyNotificationNOTGrantedEffects = () => {\n  enableVariant(document.querySelector(\".notification-text\"), {\n    notif_granted: \"no\",\n  })\n  notifCheckbox.disabled = true\n  notifCheckbox.checked = false\n  document.querySelector(\"a.request_notification_permission\").onclick = () => {\n    requestPermission().then(() => {\n      setNotificationPreference(true)\n      updatePermission()\n    })\n  }\n}\n\nexport const notifyExecutionResult = (\n  executedFileRelativeUrl,\n  execution,\n  previousExecution,\n) => {\n  const notificationEnabled = getNotificationPreference()\n  if (!notificationEnabled) return\n\n  const notificationOptions = {\n    lang: \"en\",\n    icon: getFaviconHref(),\n    clickToFocus: true,\n    clickToClose: true,\n  }\n\n  if (execution.status === \"errored\") {\n    if (previousExecution) {\n      if (previousExecution.status === \"completed\") {\n        notify(\"Broken\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution now failing.`,\n        })\n      } else {\n        notify(\"Still failing\", {\n          ...notificationOptions,\n          body: `${executedFileRelativeUrl} execution still failing.`,\n        })\n      }\n    } else {\n      notify(\"Failing\", {\n        ...notificationOptions,\n        body: `${executedFileRelativeUrl} execution failed.`,\n      })\n    }\n  } else if (previousExecution && previousExecution.status === \"errored\") {\n    notify(\"Fixed\", {\n      ...notificationOptions,\n      body: `${executedFileRelativeUrl} execution fixed.`,\n    })\n  }\n}\n\nconst getNotificationPreference = () =>\n  notificationPreference.has() ? notificationPreference.get() : true\n\nconst setNotificationPreference = (value) => notificationPreference.set(value)\n\nconst getFaviconHref = () => {\n  const link = document.querySelector('link[rel=\"icon\"]')\n  return link ? link.href : undefined\n}\n\nlet permission = \"default\"\n\nconst notify = notificationAvailable\n  ? async (\n      title,\n      { clickToFocus = false, clickToClose = false, ...options } = {},\n    ) => {\n      if (permission !== \"granted\") {\n        return null\n      }\n\n      const notification = new Notification(title, options)\n      arrayOfOpenedNotifications.push(notification)\n      notification.onclick = () => {\n        // but if the user navigated inbetween\n        // focusing window will show something else\n        // in that case it could be great to do something\n        // maybe like showing a message saying this execution\n        // is no longer visible\n        // we could also navigauate to this file execution but\n        // there is no guarantee re-executing the file would give same output\n        // and it would also trigger an other notification\n        if (clickToFocus) window.focus()\n        if (clickToClose) notification.close()\n      }\n      notification.onclose = () => {\n        const index = arrayOfOpenedNotifications.indexOf(notification)\n        if (index > -1) {\n          arrayOfOpenedNotifications.splice(index, 1)\n        }\n      }\n      return notification\n    }\n  : () => {}\n\nlet requestPromise\nconst requestPermission = notificationAvailable\n  ? async () => {\n      if (requestPromise) return requestPromise\n      requestPromise = Notification.requestPermission()\n      permission = await requestPromise\n      requestPromise = undefined\n      return permission\n    }\n  : () => Promise.resolve(\"default\")\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst DARK_THEME = \"dark\"\nconst LIGHT_THEME = \"light\"\nconst themePreference = createPreference(\"theme\")\n\nexport const renderToolbarTheme = () => {\n  const theme = getThemePreference()\n  const checkbox = document.querySelector(\"#checkbox-dark-theme\")\n  checkbox.checked = theme === DARK_THEME\n  setTheme(theme)\n  checkbox.onchange = () => {\n    if (checkbox.checked) {\n      setThemePreference(DARK_THEME)\n      setTheme(DARK_THEME)\n    } else {\n      setThemePreference(LIGHT_THEME)\n      setTheme(LIGHT_THEME)\n    }\n  }\n}\n\nconst getThemePreference = () => {\n  return themePreference.has() ? themePreference.get() : DARK_THEME\n}\n\nconst setThemePreference = (value) => {\n  themePreference.set(value)\n  setTheme(value)\n}\n\nconst setTheme = (theme) => {\n  document.querySelector(\"html\").setAttribute(\"data-theme\", theme)\n}\n",
    "import { createPreference } from \"../util/preferences.js\"\n\nconst animationPreference = createPreference(\"animation\")\n\nexport const renderToolbarAnimation = () => {\n  const animCheckbox = document.querySelector(\"#toggle-anims\")\n  animCheckbox.checked = getAnimationPreference()\n  animCheckbox.onchange = () => {\n    setAnimationPreference(animCheckbox.checked)\n    onPreferenceChange(animCheckbox.checked)\n  }\n  onPreferenceChange()\n\n  // enable toolbar transition only after first render\n  setTimeout(() => {\n    document.querySelector(\"#toolbar\").setAttribute(\"data-animate\", \"\")\n  })\n}\n\nconst onPreferenceChange = (value = getAnimationPreference()) => {\n  if (value) {\n    enableAnimation()\n  } else {\n    disableAnimation()\n  }\n}\n\nconst getAnimationPreference = () =>\n  animationPreference.has() ? animationPreference.get() : true\n\nconst setAnimationPreference = (value) => animationPreference.set(value)\n\nconst enableAnimation = () => {\n  document.documentElement.removeAttribute(\"data-animation-disabled\")\n}\n\nconst disableAnimation = () => {\n  document.documentElement.setAttribute(\"data-animation-disabled\", \"\")\n}\n",
    "export const createHorizontalBreakpoint = (breakpointValue) => {\n  return createBreakpoint(windowWidthMeasure, breakpointValue)\n}\n\nconst createMeasure = ({ compute, register }) => {\n  let currentValue = compute()\n\n  const get = () => compute()\n\n  const changed = createSignal()\n\n  let unregister = () => {}\n  if (register) {\n    unregister = register(() => {\n      const value = compute()\n      if (value !== currentValue) {\n        const previousValue = value\n        currentValue = value\n        changed.notify(value, previousValue)\n      }\n    })\n  }\n\n  return { get, changed, unregister }\n}\n\nconst createSignal = () => {\n  const callbackArray = []\n\n  const listen = (callback) => {\n    callbackArray.push(callback)\n    return () => {\n      const index = callbackArray.indexOf(callback)\n      if (index > -1) {\n        callbackArray.splice(index, 1)\n      }\n    }\n  }\n\n  const notify = (...args) => {\n    callbackArray.slice().forEach((callback) => {\n      callback(...args)\n    })\n  }\n\n  return { listen, notify }\n}\n\nconst windowWidthMeasure = createMeasure({\n  name: \"window-width\",\n  compute: () => window.innerWidth,\n  register: (onchange) => {\n    window.addEventListener(\"resize\", onchange)\n    window.addEventListener(\"orientationchange\", onchange)\n    return () => {\n      window.removeEventListener(\"resize\", onchange)\n      window.removeEventListener(\"orientationchange\", onchange)\n    }\n  },\n})\n\nconst createBreakpoint = (measure, breakpointValue) => {\n  const getBreakpointState = () => {\n    const value = measure.get()\n\n    if (value < breakpointValue) {\n      return \"below\"\n    }\n    if (value > breakpointValue) {\n      return \"above\"\n    }\n    return \"equals\"\n  }\n\n  let currentBreakpointState = getBreakpointState()\n\n  const isAbove = () => {\n    return measure.get() > breakpointValue\n  }\n\n  const isBelow = () => {\n    return measure.get() < breakpointValue\n  }\n\n  const breakpointChanged = createSignal()\n\n  measure.changed.listen(() => {\n    const breakpointState = getBreakpointState()\n    if (breakpointState !== currentBreakpointState) {\n      const breakpointStatePrevious = currentBreakpointState\n      currentBreakpointState = breakpointState\n      breakpointChanged.notify(breakpointState, breakpointStatePrevious)\n    }\n  })\n\n  return {\n    isAbove,\n    isBelow,\n    changed: breakpointChanged,\n  }\n}\n\n// const windowScrollTop = createMeasure({\n//   name: \"window-scroll-top\",\n//   compute: () => window.scrollTop,\n//   register: (onchange) => {\n//     window.addEventListener(\"scroll\", onchange)\n//     return () => {\n//       window.removeEventListener(\"scroll\", onchange)\n//     }\n//   },\n// })\n",
    "import { removeForceHideElement, activateToolbarSection } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { toggleTooltip } from \"../tooltip/tooltip.js\"\nimport { notifyExecutionResult } from \"../notification/toolbar_notification.js\"\n\nconst WINDOW_MEDIUM_WIDTH = 570\n\nexport const renderExecutionInToolbar = ({ executedFileRelativeUrl }) => {\n  // reset file execution indicator ui\n  applyExecutionIndicator()\n  removeForceHideElement(document.querySelector(\"#execution-indicator\"))\n\n  // apply responsive design on fileInput if needed + add listener on resize screen\n  const input = document.querySelector(\"#file-input\")\n  const fileWidthBreakpoint = createHorizontalBreakpoint(WINDOW_MEDIUM_WIDTH)\n  const handleFileWidthBreakpoint = () => {\n    resizeInput(input, fileWidthBreakpoint)\n  }\n  handleFileWidthBreakpoint()\n  fileWidthBreakpoint.changed.listen(handleFileWidthBreakpoint)\n  input.value = executedFileRelativeUrl\n  resizeInput(input, fileWidthBreakpoint)\n\n  activateToolbarSection(document.querySelector(\"#file\"))\n  removeForceHideElement(document.querySelector(\"#file\"))\n\n  window.parent.__jsenv__.executionResultPromise.then(\n    ({ status, startTime, endTime }) => {\n      const execution = { status, startTime, endTime }\n      applyExecutionIndicator(execution)\n\n      const executionStorageKey = executedFileRelativeUrl\n      const previousExecution = sessionStorage.hasOwnProperty(\n        executionStorageKey,\n      )\n        ? JSON.parse(sessionStorage.getItem(executionStorageKey))\n        : undefined\n      notifyExecutionResult(\n        executedFileRelativeUrl,\n        execution,\n        previousExecution,\n      )\n\n      sessionStorage.setItem(executedFileRelativeUrl, JSON.stringify(execution))\n    },\n  )\n}\n\nconst applyExecutionIndicator = ({\n  status = \"running\",\n  startTime,\n  endTime,\n} = {}) => {\n  const executionIndicator = document.querySelector(\"#execution-indicator\")\n  enableVariant(executionIndicator, { execution: status })\n  const variantNode = executionIndicator.querySelector(\"[data-when-active]\")\n\n  variantNode.querySelector(\"button\").onclick = () =>\n    toggleTooltip(executionIndicator)\n  variantNode.querySelector(\".tooltip\").textContent = computeText({\n    status,\n    startTime,\n    endTime,\n  })\n}\n\nconst computeText = ({ status, startTime, endTime }) => {\n  if (status === \"completed\") {\n    return `Execution completed in ${endTime - startTime}ms`\n  }\n\n  if (status === \"errored\") {\n    return `Execution failed in ${endTime - startTime}ms`\n  }\n\n  if (status === \"running\") {\n    return \"Executing...\"\n  }\n\n  return \"\"\n}\n\nconst resizeInput = (input, fileWidthBreakpoint) => {\n  const size = fileWidthBreakpoint.isBelow() ? 20 : 40\n  if (input.value.length > size) {\n    input.style.width = `${size}ch`\n  } else {\n    input.style.width = `${input.value.length}ch`\n  }\n}\n",
    "export const fetchUsingXHR = async (\n  url,\n  {\n    signal,\n    method = \"GET\",\n    credentials = \"same-origin\",\n    headers = {},\n    body = null,\n  } = {},\n) => {\n  const headersPromise = createPromiseAndHooks()\n  const bodyPromise = createPromiseAndHooks()\n\n  const xhr = new XMLHttpRequest()\n\n  const failure = (error) => {\n    // if it was already resolved, we must reject the body promise\n    if (headersPromise.settled) {\n      bodyPromise.reject(error)\n    } else {\n      headersPromise.reject(error)\n    }\n  }\n\n  const cleanup = () => {\n    xhr.ontimeout = null\n    xhr.onerror = null\n    xhr.onload = null\n    xhr.onreadystatechange = null\n  }\n\n  xhr.ontimeout = () => {\n    cleanup()\n    failure(new Error(`xhr request timeout on ${url}.`))\n  }\n\n  xhr.onerror = (error) => {\n    cleanup()\n    // unfortunately with have no clue why it fails\n    // might be cors for instance\n    failure(createRequestError(error, { url }))\n  }\n\n  xhr.onload = () => {\n    cleanup()\n    bodyPromise.resolve()\n  }\n\n  signal.addEventListener(\"abort\", () => {\n    xhr.abort()\n    const abortError = new Error(\"aborted\")\n    abortError.name = \"AbortError\"\n    failure(abortError)\n  })\n\n  xhr.onreadystatechange = () => {\n    // https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest/readyState\n    const { readyState } = xhr\n\n    if (readyState === 2) {\n      headersPromise.resolve()\n    } else if (readyState === 4) {\n      cleanup()\n      bodyPromise.resolve()\n    }\n  }\n\n  xhr.open(method, url, true)\n  Object.keys(headers).forEach((key) => {\n    xhr.setRequestHeader(key, headers[key])\n  })\n  xhr.withCredentials = computeWithCredentials({ credentials, url })\n  if (\"responseType\" in xhr && hasBlob) {\n    xhr.responseType = \"blob\"\n  }\n  xhr.send(body)\n\n  await headersPromise\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL\n  const responseUrl =\n    \"responseURL\" in xhr ? xhr.responseURL : headers[\"x-request-url\"]\n  let responseStatus = xhr.status\n  const responseStatusText = xhr.statusText\n  const responseHeaders = getHeadersFromXHR(xhr)\n\n  const readBody = async () => {\n    await bodyPromise\n\n    const { status } = xhr\n    // in Chrome on file:/// URLs, status is 0\n    if (status === 0) {\n      responseStatus = 200\n    }\n\n    const body = \"response\" in xhr ? xhr.response : xhr.responseText\n\n    return {\n      responseBody: body,\n      responseBodyType: detectBodyType(body),\n    }\n  }\n\n  const text = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return blobToText(responseBody)\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as text\")\n    }\n    if (responseBodyType === \"dataView\") {\n      return arrayBufferToText(responseBody.buffer)\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return arrayBufferToText(responseBody)\n    }\n    // if (responseBodyType === \"text\" || responseBodyType === 'searchParams') {\n    //   return body\n    // }\n    return String(responseBody)\n  }\n\n  const json = async () => {\n    const responseText = await text()\n    return JSON.parse(responseText)\n  }\n\n  const blob = async () => {\n    if (!hasBlob) {\n      throw new Error(`blob not supported`)\n    }\n\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"blob\") {\n      return responseBody\n    }\n    if (responseBodyType === \"dataView\") {\n      return new Blob([cloneBuffer(responseBody.buffer)])\n    }\n    if (responseBodyType === \"arrayBuffer\") {\n      return new Blob([cloneBuffer(responseBody)])\n    }\n    if (responseBodyType === \"formData\") {\n      throw new Error(\"could not read FormData body as blob\")\n    }\n    return new Blob([String(responseBody)])\n  }\n\n  const arrayBuffer = async () => {\n    const { responseBody, responseBodyType } = await readBody()\n\n    if (responseBodyType === \"arrayBuffer\") {\n      return cloneBuffer(responseBody)\n    }\n    const responseBlob = await blob()\n    return blobToArrayBuffer(responseBlob)\n  }\n\n  const formData = async () => {\n    if (!hasFormData) {\n      throw new Error(`formData not supported`)\n    }\n    const responseText = await text()\n    return textToFormData(responseText)\n  }\n\n  return {\n    url: responseUrl,\n    status: responseStatus,\n    statusText: responseStatusText,\n    headers: responseHeaders,\n    text,\n    json,\n    blob,\n    arrayBuffer,\n    formData,\n  }\n}\n\nconst canUseBlob = () => {\n  if (typeof window.FileReader !== \"function\") return false\n\n  if (typeof window.Blob !== \"function\") return false\n\n  try {\n    // eslint-disable-next-line no-new\n    new Blob()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nconst hasBlob = canUseBlob()\n\nconst hasFormData = typeof window.FormData === \"function\"\n\nconst hasArrayBuffer = typeof window.ArrayBuffer === \"function\"\n\nconst hasSearchParams = typeof window.URLSearchParams === \"function\"\n\nconst createRequestError = (error, { url }) => {\n  return new Error(\n    `error during xhr request on ${url}.\n--- error stack ---\n${error.stack}`,\n  )\n}\n\nconst createPromiseAndHooks = () => {\n  let resolve\n  let reject\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      promise.settled = true\n      res(value)\n    }\n    reject = (value) => {\n      promise.settled = true\n      rej(value)\n    }\n  })\n  promise.resolve = resolve\n  promise.reject = reject\n  return promise\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\nconst computeWithCredentials = ({ credentials, url }) => {\n  if (credentials === \"same-origin\") {\n    return originSameAsGlobalOrigin(url)\n  }\n  return credentials === \"include\"\n}\n\nconst originSameAsGlobalOrigin = (url) => {\n  // if we cannot read globalOrigin from window.location.origin, let's consider it's ok\n  if (typeof window !== \"object\") return true\n  if (typeof window.location !== \"object\") return true\n  const globalOrigin = window.location.origin\n  if (globalOrigin === \"null\") return true\n  return hrefToOrigin(url) === globalOrigin\n}\n\nconst detectBodyType = (body) => {\n  if (!body) {\n    return \"\"\n  }\n  if (typeof body === \"string\") {\n    return \"text\"\n  }\n  if (hasBlob && Blob.prototype.isPrototypeOf(body)) {\n    return \"blob\"\n  }\n  if (hasFormData && FormData.prototype.isPrototypeOf(body)) {\n    return \"formData\"\n  }\n  if (hasArrayBuffer) {\n    if (hasBlob && isDataView(body)) {\n      return `dataView`\n    }\n    if (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body)) {\n      return `arrayBuffer`\n    }\n  }\n  if (hasSearchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n    return \"searchParams\"\n  }\n  return \"\"\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nconst getHeadersFromXHR = (xhr) => {\n  const headerMap = {}\n\n  const headersString = xhr.getAllResponseHeaders()\n  if (headersString === \"\") return headerMap\n\n  const lines = headersString.trim().split(/[\\r\\n]+/)\n  lines.forEach((line) => {\n    const parts = line.split(\": \")\n    const name = parts.shift()\n    const value = parts.join(\": \")\n    headerMap[name.toLowerCase()] = value\n  })\n\n  return headerMap\n}\n\nconst hrefToOrigin = (href) => {\n  const scheme = hrefToScheme(href)\n\n  if (scheme === \"file\") {\n    return \"file://\"\n  }\n\n  if (scheme === \"http\" || scheme === \"https\") {\n    const secondProtocolSlashIndex = scheme.length + \"://\".length\n    const pathnameSlashIndex = href.indexOf(\"/\", secondProtocolSlashIndex)\n\n    if (pathnameSlashIndex === -1) return href\n    return href.slice(0, pathnameSlashIndex)\n  }\n\n  return href.slice(0, scheme.length + 1)\n}\n\nconst hrefToScheme = (href) => {\n  const colonIndex = href.indexOf(\":\")\n  if (colonIndex === -1) return \"\"\n  return href.slice(0, colonIndex)\n}\n\nconst isDataView = (obj) => {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nconst isArrayBufferView =\n  ArrayBuffer.isView ||\n  (() => {\n    const viewClasses = [\n      \"[object Int8Array]\",\n      \"[object Uint8Array]\",\n      \"[object Uint8ClampedArray]\",\n      \"[object Int16Array]\",\n      \"[object Uint16Array]\",\n      \"[object Int32Array]\",\n      \"[object Uint32Array]\",\n      \"[object Float32Array]\",\n      \"[object Float64Array]\",\n    ]\n\n    return (value) => {\n      return (\n        value && viewClasses.includes(Object.prototype.toString.call(value))\n      )\n    }\n  })()\n\nconst textToFormData = (text) => {\n  const form = new FormData()\n  text\n    .trim()\n    .split(\"&\")\n    .forEach(function (bytes) {\n      if (bytes) {\n        const split = bytes.split(\"=\")\n        const name = split.shift().replace(/\\+/g, \" \")\n        const value = split.join(\"=\").replace(/\\+/g, \" \")\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nconst blobToArrayBuffer = async (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nconst blobToText = (blob) => {\n  const reader = new FileReader()\n  const promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nconst arrayBufferToText = (arrayBuffer) => {\n  const view = new Uint8Array(arrayBuffer)\n  const chars = new Array(view.length)\n  let i = 0\n  while (i < view.length) {\n    chars[i] = String.fromCharCode(view[i])\n\n    i++\n  }\n  return chars.join(\"\")\n}\n\nconst fileReaderReady = (reader) => {\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = function () {\n      reject(reader.error)\n    }\n  })\n}\n\nconst cloneBuffer = (buffer) => {\n  if (buffer.slice) {\n    return buffer.slice(0)\n  }\n  const view = new Uint8Array(buffer.byteLength)\n  view.set(new Uint8Array(buffer))\n  return view.buffer\n}\n",
    "import { fetchUsingXHR } from \"./fetch_using_xhr.js\"\n\nconst fetchNative = async (url, { mode = \"cors\", ...options } = {}) => {\n  const response = await window.fetch(url, {\n    mode,\n    ...options,\n  })\n\n  return {\n    url: response.url,\n    status: response.status,\n    statusText: \"\",\n    headers: responseToHeaders(response),\n    text: () => response.text(),\n    json: () => response.json(),\n    blob: () => response.blob(),\n    arrayBuffer: () => response.arrayBuffer(),\n    formData: () => response.formData(),\n  }\n}\n\nconst responseToHeaders = (response) => {\n  const headers = {}\n  response.headers.forEach((value, name) => {\n    headers[name] = value\n  })\n  return headers\n}\n\nexport const fetchUrl =\n  typeof window.fetch === \"function\" &&\n  typeof window.AbortController === \"function\"\n    ? fetchNative\n    : fetchUsingXHR\n",
    "import { fetchUrl } from \"./fetch_browser.js\"\n\nexport const fetchJson = async (url, options = {}) => {\n  const response = await fetchUrl(url, options)\n  const object = await response.json()\n  return object\n}\n",
    "/*\n * Prefer window.navigator.userAgentData before resorting to\n * window.navigator.userAgent because of\n * https://blog.chromium.org/2021/09/user-agent-reduction-origin-trial-and-dates.html\n */\n\nexport const detectFromUserAgentData = () => {\n  const { userAgentData } = window.navigator\n  if (!userAgentData) {\n    return null\n  }\n  const { brands } = userAgentData\n  let i = 0\n  while (i < brands.length) {\n    const { brand, version } = brands[i]\n    i++\n    if (brand === \"chromium\" || brand === \"Google Chrome\") {\n      return {\n        name: \"chrome\",\n        version,\n      }\n    }\n  }\n  return null\n}\n",
    "export const firstMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 0 ? match[1] || undefined : undefined\n}\n\nexport const secondMatch = (regexp, string) => {\n  const match = string.match(regexp)\n  return match && match.length > 1 ? match[2] || undefined : undefined\n}\n\nexport const userAgentToVersion = (userAgent) => {\n  return firstMatch(/version\\/(\\d+(\\.?_?\\d+)+)/i, userAgent) || undefined\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectAndroid = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/(android)/i.test(userAgent)) {\n    return {\n      name: \"android\",\n      version: firstMatch(/Android (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectInternetExplorer = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/msie|trident/i.test(userAgent)) {\n    return {\n      name: \"ie\",\n      version: firstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch, userAgentToVersion } from \"./util.js\"\n\nexport const detectOpera = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  // opera below 13\n  if (/opera/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        userAgentToVersion(userAgent) ||\n        firstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n\n  // opera above 13\n  if (/opr\\/|opios/i.test(userAgent)) {\n    return {\n      name: \"opera\",\n      version:\n        firstMatch(/(?:opr|opios)[\\s/](\\S+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  return null\n}\n",
    "import { secondMatch } from \"./util.js\"\n\nexport const detectEdge = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/edg([ea]|ios)/i.test(userAgent)) {\n    return {\n      name: \"edge\",\n      version: secondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, userAgent),\n    }\n  }\n  return null\n}\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectFirefox = () =>\n  userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/firefox|iceweasel|fxios/i.test(userAgent)) {\n    return {\n      name: \"firefox\",\n      version: firstMatch(\n        /(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n  return null\n}\n",
    "import { userAgentToVersion, firstMatch } from \"./util.js\"\n\nexport const detectChrome = () => {\n  return userAgentToBrowser(window.navigator.userAgent)\n}\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/chromium/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version:\n        firstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, userAgent) ||\n        userAgentToVersion(userAgent),\n    }\n  }\n\n  if (/chrome|crios|crmo/i.test(userAgent)) {\n    return {\n      name: \"chrome\",\n      version: firstMatch(\n        /(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,\n        userAgent,\n      ),\n    }\n  }\n\n  return null\n}\n",
    "import { userAgentToVersion } from \"./util.js\"\n\nexport const detectSafari = () => userAgentToBrowser(window.navigator.userAgent)\n\nconst userAgentToBrowser = (userAgent) => {\n  if (/safari|applewebkit/i.test(userAgent)) {\n    return {\n      name: \"safari\",\n      version: userAgentToVersion(userAgent),\n    }\n  }\n  return null\n}\n",
    "export const detectElectron = () => null // TODO\n",
    "import { firstMatch } from \"./util.js\"\n\nexport const detectIOS = () => navigatorToBrowser(window.navigator)\n\nconst navigatorToBrowser = ({ userAgent, appVersion }) => {\n  if (/iPhone;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  if (/iPad;/.test(userAgent)) {\n    return {\n      name: \"ios\",\n      version: firstMatch(/OS (\\d+(\\.?_?\\d+)+)/i, appVersion),\n    }\n  }\n  return null\n}\n",
    "// https://github.com/Ahmdrza/detect-browser/blob/26254f85cf92795655a983bfd759d85f3de850c6/detect-browser.js#L1\n// https://github.com/lancedikson/bowser/blob/master/src/parser-browsers.js#L1\n\nimport { detectFromUserAgentData } from \"./user_agent_data.js\"\nimport { detectAndroid } from \"./detect_android.js\"\nimport { detectInternetExplorer } from \"./detect_internet_explorer.js\"\nimport { detectOpera } from \"./detect_opera.js\"\nimport { detectEdge } from \"./detect_edge.js\"\nimport { detectFirefox } from \"./detect_firefox.js\"\nimport { detectChrome } from \"./detect_chrome.js\"\nimport { detectSafari } from \"./detect_safari.js\"\nimport { detectElectron } from \"./detect_electron.js\"\nimport { detectIOS } from \"./detect_ios.js\"\n\nconst detectorCompose = (detectors) => () => {\n  let i = 0\n  while (i < detectors.length) {\n    const detector = detectors[i]\n    i++\n    const result = detector()\n    if (result) {\n      return result\n    }\n  }\n  return null\n}\n\nconst detector = detectorCompose([\n  detectFromUserAgentData, // keep this first\n  detectOpera,\n  detectInternetExplorer,\n  detectEdge,\n  detectFirefox,\n  detectChrome,\n  detectSafari,\n  detectElectron,\n  detectIOS,\n  detectAndroid,\n])\n\nexport const detectBrowser = () => {\n  const { name = \"other\", version = \"unknown\" } = detector() || {}\n  return {\n    name: normalizeName(name),\n    version: normalizeVersion(version),\n  }\n}\n\nconst normalizeName = (name) => {\n  return name.toLowerCase()\n}\n\nconst normalizeVersion = (version) => {\n  if (version.indexOf(\".\") > -1) {\n    const parts = version.split(\".\")\n    // remove extraneous .\n    return parts.slice(0, 3).join(\".\")\n  }\n  if (version.indexOf(\"_\") > -1) {\n    const parts = version.split(\"_\")\n    // remove extraneous _\n    return parts.slice(0, 3).join(\"_\")\n  }\n  return version\n}\n",
    "export const executeWithScriptModuleInjection = (code) => {\n  const scriptModule = document.createElement(\"script\")\n  scriptModule.type = \"module\"\n\n  const loadPromise = new Promise((resolve, reject) => {\n    scriptModule.onload = () => {\n      document.body.removeChild(scriptModule)\n      resolve()\n    }\n    scriptModule.onerror = () => {\n      document.body.removeChild(scriptModule)\n      reject()\n    }\n    document.body.appendChild(scriptModule)\n  })\n\n  scriptModule.src = asBase64Url(code)\n\n  return loadPromise\n}\n\nexport const asBase64Url = (text, mimeType = \"application/javascript\") => {\n  return `data:${mimeType};base64,${window.btoa(text)}`\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsImportmap = async ({ remote = true } = {}) => {\n  const specifier = asBase64Url(`export default false`)\n  const importMap = {\n    imports: {\n      [specifier]: asBase64Url(`export default true`),\n    },\n  }\n  const importmapScript = document.createElement(\"script\")\n  const importmapString = JSON.stringify(importMap, null, \"  \")\n  importmapScript.type = \"importmap\"\n  if (remote) {\n    importmapScript.src = `data:application/json;base64,${window.btoa(\n      importmapString,\n    )}`\n  } else {\n    importmapScript.textContent = importmapString\n  }\n  document.body.appendChild(importmapScript)\n\n  try {\n    await executeWithScriptModuleInjection(\n      `import supported from \"${specifier}\"; window.__jsenv_runtime_test_importmap__ = supported`,\n    )\n    document.body.removeChild(importmapScript)\n    const supported = window.__jsenv_runtime_test_importmap__\n    delete window.__jsenv_runtime_test_importmap__\n    return supported\n  } catch (e) {\n    document.body.removeChild(importmapScript)\n    return false\n  }\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsDynamicImport = async () => {\n  const moduleSource = asBase64Url(`export default 42`)\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_dynamic_import__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_dynamic_import__\n    delete window.__jsenv_runtime_test_dynamic_import__\n    return namespace.default === 42\n  } catch (e) {\n    return false\n  }\n}\n",
    "import { executeWithScriptModuleInjection } from \"./execute_with_script_module.js\"\n\nexport const supportsTopLevelAwait = async () => {\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_top_level_await__ = await Promise.resolve(42)`,\n    )\n    const supported = window.__jsenv_runtime_test_top_level_await__ === 42\n    delete window.__jsenv_runtime_test_top_level_await__\n    return supported\n  } catch (e) {\n    return false\n  }\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsJsonImportAssertions = async () => {\n  const jsonBase64Url = asBase64Url(\"42\", \"application/json\")\n  const moduleSource = asBase64Url(\n    `import data from \"${jsonBase64Url}\" assert { type: \"json\" }\n  export default data`,\n  )\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_json_import_assertion__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_json_import_assertion__\n    const supported = namespace.default === 42\n    delete window.__jsenv_runtime_test_json_import_assertion__\n    return supported\n  } catch (e) {\n    return false\n  }\n}\n",
    "import {\n  asBase64Url,\n  executeWithScriptModuleInjection,\n} from \"./execute_with_script_module.js\"\n\nexport const supportsCssImportAssertions = async () => {\n  const cssBase64Url = asBase64Url(\"p { color: red; }\", \"text/css\")\n  const moduleSource = asBase64Url(\n    `import css from \"${cssBase64Url}\" assert { type: \"css\" }\n  export default css`,\n  )\n  try {\n    await executeWithScriptModuleInjection(\n      `window.__jsenv_runtime_test_css_import_assertion__ = import(${JSON.stringify(\n        moduleSource,\n      )})`,\n    )\n    const namespace = await window.__jsenv_runtime_test_css_import_assertion__\n    return namespace.default instanceof CSSStyleSheet\n  } catch (e) {\n    return false\n  }\n}\n",
    "export const supportsNewStylesheet = () => {\n  try {\n    // eslint-disable-next-line no-new\n    new CSSStyleSheet()\n    return true\n  } catch (e) {\n    return false\n  }\n}\n",
    "import { fetchJson } from \"../../browser_utils/fetch_json.js\"\nimport { detectBrowser } from \"../../browser_detection/browser_detection.js\"\n\nimport { supportsImportmap } from \"./browser_feature_detect_importmap.js\"\nimport { supportsDynamicImport } from \"./browser_feature_detect_dynamic_import.js\"\nimport { supportsTopLevelAwait } from \"./browser_feature_detect_top_level_await.js\"\nimport { supportsJsonImportAssertions } from \"./browser_feature_detect_import_assertions_json.js\"\nimport { supportsCssImportAssertions } from \"./browser_feature_detect_import_assertions_css.js\"\nimport { supportsNewStylesheet } from \"./browser_feature_detect_new_stylesheet.js\"\n\nexport const scanBrowserRuntimeFeatures = async ({\n  coverageHandledFromOutside = false,\n  forceCompilation = false,\n  forceSource = false,\n} = {}) => {\n  const jsenvCompileProfileUrl = \"/__jsenv_compile_profile__\"\n  const {\n    jsenvDirectoryRelativeUrl,\n    inlineImportMapIntoHTML,\n    availableCompileIds,\n  } = await fetchJson(jsenvCompileProfileUrl)\n  const { name, version } = detectBrowser()\n  const featuresReport = await detectSupportedFeatures({\n    coverageHandledFromOutside,\n    inlineImportMapIntoHTML,\n  })\n  const runtimeReport = {\n    env: { browser: true },\n    name,\n    version,\n    featuresReport,\n    forceSource,\n    forceCompilation,\n  }\n  const { compileProfile, compileId } = await fetchJson(\n    jsenvCompileProfileUrl,\n    {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify(runtimeReport),\n    },\n  )\n  return {\n    jsenvDirectoryRelativeUrl,\n    inlineImportMapIntoHTML,\n    availableCompileIds,\n    runtimeReport,\n    compileProfile,\n    compileId,\n  }\n}\n\nconst detectSupportedFeatures = async ({\n  coverageHandledFromOutside,\n  inlineImportMapIntoHTML,\n}) => {\n  const featuresReport = {}\n  featuresReport[\"import_http\"] = true\n  featuresReport[\"coverage_js\"] = coverageHandledFromOutside\n  // new CSSStyleSheet\n  featuresReport[\"new_stylesheet\"] = supportsNewStylesheet()\n  // importmap\n  // start testing importmap support first and not in paralell\n  // so that there is not module script loaded beore importmap is injected\n  // it would log an error in chrome console and return undefined\n  featuresReport.importmap = await supportsImportmap({\n    // chrome supports inline but not remote importmap\n    // https://github.com/WICG/import-maps/issues/235\n    // at this stage we won't know if the html file will use\n    // an importmap or not and if that importmap is inline or specified with an src\n    // so we should test if browser support local and remote importmap.\n    // But there exploring server can inline importmap by transforming html\n    // and in that case we can test only the local importmap support\n    // so we test importmap support and the remote one\n    remote: !inlineImportMapIntoHTML,\n  })\n  // dynamic import\n  featuresReport[\"import_dynamic\"] = await supportsDynamicImport()\n  // top level await\n  featuresReport[\"top_level_await\"] = await supportsTopLevelAwait()\n  // import assertions\n  featuresReport[\"import_assertion_type_json\"] =\n    await supportsJsonImportAssertions()\n  featuresReport[\"import_assertion_type_css\"] =\n    await supportsCssImportAssertions()\n  return featuresReport\n}\n",
    "import { scanBrowserRuntimeFeatures } from \"@jsenv/core/src/internal/features/browser_feature_detection/browser_feature_detection.js\"\n\nimport { setLinkHrefForParentWindow } from \"../util/iframe_to_parent_href.js\"\nimport { removeForceHideElement } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\nimport {\n  enableWarningStyle,\n  disableWarningStyle,\n} from \"../settings/toolbar_settings.js\"\n\nexport const renderCompilationInToolbar = ({ compileGroup }) => {\n  const browserSupportRootNode = document.querySelector(\"#browser_support\")\n  const filesCompilationRootNode = document.querySelector(\"#files_compilation\")\n\n  removeForceHideElement(browserSupportRootNode)\n  removeForceHideElement(filesCompilationRootNode)\n\n  scanBrowserRuntimeFeatures().then(\n    ({\n      jsenvDirectoryRelativeUrl,\n      inlineImportMapIntoHTML,\n      compileProfile,\n      compileId,\n      runtimeReport,\n    }) => {\n      const browserSupport = compileId\n        ? \"no\"\n        : inlineImportMapIntoHTML\n        ? \"partial\"\n        : \"full\"\n      enableVariant(browserSupportRootNode, {\n        browserSupport,\n      })\n      if (browserSupport === \"no\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files needs to be compiled to be executable in this browser because: ${listWhatIsMissing(\n              {\n                compileProfile,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"partial\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files (except html) can be executed directly in this browser because: ${listWhatIsSupported(\n              {\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      } else if (browserSupport === \"full\") {\n        browserSupportRootNode.querySelector(\n          `a.browser_support_read_more_link`,\n        ).onclick = () => {\n          // eslint-disable-next-line no-alert\n          window.alert(\n            `Source files can be executed directly in this browser because: ${listWhatIsSupported(\n              {\n                inlineImportMapIntoHTML,\n              },\n            )}`,\n          )\n        }\n      }\n\n      const actualCompileId = compileGroup.compileId\n      const expectedCompiledId = compileId\n      const shouldSwitchCompileId =\n        expectedCompiledId &&\n        actualCompileId &&\n        actualCompileId !== expectedCompiledId\n      const shouldCompile = !actualCompileId && browserSupport === \"no\"\n      const filesCompilation = shouldSwitchCompileId\n        ? \"mismatch\"\n        : actualCompileId\n        ? \"yes\"\n        : inlineImportMapIntoHTML\n        ? \"html_only\"\n        : \"no\"\n      const hasWarning = shouldCompile || shouldSwitchCompileId\n\n      enableVariant(filesCompilationRootNode, {\n        filesCompilation,\n        compilation_link: shouldSwitchCompileId\n          ? \"mismatch\"\n          : actualCompileId\n          ? \"source\"\n          : expectedCompiledId\n          ? \"compiled\"\n          : \"force\",\n      })\n      if (filesCompilation === \"yes\") {\n        document.querySelector(\n          \".files_compilation_text\",\n        ).innerHTML = `Files shown are compiled for ${runtimeReport.name}@${runtimeReport.version}`\n      }\n      setLinkHrefForParentWindow(\n        filesCompilationRootNode.querySelector(\"a.link_to_source_files\"),\n        `/${compileGroup.fileRelativeUrl}`,\n      )\n      setLinkHrefForParentWindow(\n        filesCompilationRootNode.querySelector(\"a.link_to_compiled_files\"),\n        `/${jsenvDirectoryRelativeUrl}${expectedCompiledId}/${compileGroup.fileRelativeUrl}`,\n      )\n      setLinkHrefForParentWindow(\n        filesCompilationRootNode.querySelector(\n          \"a.link_to_compilation_forced_files\",\n        ),\n        `/${jsenvDirectoryRelativeUrl}force/${compileGroup.fileRelativeUrl}`,\n      )\n      setLinkHrefForParentWindow(\n        filesCompilationRootNode.querySelector(\"a.link_to_appropriate_files\"),\n        `/${jsenvDirectoryRelativeUrl}${expectedCompiledId}/${compileGroup.fileRelativeUrl}`,\n      )\n\n      if (hasWarning) {\n        enableWarningStyle()\n        document\n          .querySelector(\".files_compilation_text\")\n          .setAttribute(\"data-warning\", \"\")\n        document\n          .querySelector(\".browser_support_text\")\n          .setAttribute(\"data-warning\", \"\")\n        document\n          .querySelector(\"#settings-button\")\n          .setAttribute(\"data-warning\", \"\")\n      } else {\n        disableWarningStyle()\n        document\n          .querySelector(\".files_compilation_text\")\n          .removeAttribute(\"data-warning\")\n        document\n          .querySelector(\".browser_support_text\")\n          .removeAttribute(\"data-warning\")\n        document\n          .querySelector(\"#settings-button\")\n          .removeAttribute(\"data-warning\")\n      }\n    },\n  )\n}\n\nconst listWhatIsSupported = ({ inlineImportMapIntoHTML }) => {\n  const parts = []\n  if (inlineImportMapIntoHTML) {\n    parts.push(`importmaps are supported (only when inlined in html files)`)\n  } else {\n    parts.push(`importmaps are supported`)\n  }\n  parts.push(`dynamic imports are supported`)\n  parts.push(`top level await is supported`)\n  parts.push(`all features are natively supported`)\n  return `\n- ${parts.join(`\n- `)}`\n}\n\nconst listWhatIsMissing = ({ compileProfile }) => {\n  const parts = []\n  const { missingFeatures } = compileProfile\n  if (missingFeatures.importmap) {\n    parts.push(`importmaps are not supported`)\n  }\n  if (missingFeatures.dynamicImport) {\n    parts.push(`dynamic imports are not supported`)\n  }\n  if (missingFeatures.topLevelAwait) {\n    parts.push(`top level await is not supported`)\n  }\n  const missingFeatureNames = Object.keys(missingFeatures).filter((name) => {\n    return (\n      name !== \"importmap\" &&\n      name !== \"dynamicImport\" &&\n      name !== \"topLevelAwait\" &&\n      name !== \"custom_compiler_patterns\"\n    )\n  })\n  const missingFeatureCount = missingFeatureNames.length\n  if (missingFeatureCount > 0) {\n    parts.push(\n      `${missingFeatureCount} features are missing: ${missingFeatureNames}`,\n    )\n  }\n  const { custom_compiler_patterns } = missingFeatures\n  if (custom_compiler_patterns) {\n    parts.push(\n      `${custom_compiler_patterns.length} custom compilers enabled: ${custom_compiler_patterns}`,\n    )\n  }\n  return `\n- ${parts.join(`\n- `)}`\n}\n",
    "import { removeForceHideElement } from \"../util/dom.js\"\nimport { enableVariant } from \"../variant/variant.js\"\nimport {\n  toggleTooltip,\n  removeAutoShowTooltip,\n  autoShowTooltip,\n} from \"../tooltip/tooltip.js\"\n\nlet livereloadingAvailableOnServer = false\nconst parentEventSourceClient = window.parent.__jsenv_event_source_client__\n\nexport const initToolbarEventSource = ({ livereloading }) => {\n  removeForceHideElement(document.querySelector(\"#eventsource-indicator\"))\n  livereloadingAvailableOnServer = livereloading\n  if (!livereloadingAvailableOnServer) {\n    disableLivereloadSetting()\n  }\n  parentEventSourceClient.status.onchange = () => {\n    updateEventSourceIndicator()\n  }\n  parentEventSourceClient.reloadMessagesSignal.onchange = () => {\n    updateEventSourceIndicator()\n  }\n  const livereloadCheckbox = document.querySelector(\"#toggle-livereload\")\n  livereloadCheckbox.checked = parentEventSourceClient.isLivereloadEnabled()\n  livereloadCheckbox.onchange = () => {\n    parentEventSourceClient.setLivereloadPreference(livereloadCheckbox.checked)\n    updateEventSourceIndicator()\n  }\n  updateEventSourceIndicator()\n}\n\nconst updateEventSourceIndicator = () => {\n  const eventSourceIndicator = document.querySelector(\"#eventsource-indicator\")\n  const reloadMessages = parentEventSourceClient.reloadMessages\n  const reloadMessageCount = reloadMessages.length\n\n  const eventSourceConnectionState = parentEventSourceClient.status.value\n  enableVariant(eventSourceIndicator, {\n    eventsource: eventSourceConnectionState,\n    livereload: parentEventSourceClient.isLivereloadEnabled() ? \"on\" : \"off\",\n    changes: reloadMessageCount > 0 ? \"yes\" : \"no\",\n  })\n\n  const variantNode = document.querySelector(\n    \"#eventsource-indicator > [data-when-active]\",\n  )\n  variantNode.querySelector(\"button\").onclick = () => {\n    toggleTooltip(eventSourceIndicator)\n  }\n\n  if (eventSourceConnectionState === \"connecting\") {\n    variantNode.querySelector(\"a\").onclick = () => {\n      parentEventSourceClient.disconnect()\n    }\n  } else if (eventSourceConnectionState === \"connected\") {\n    removeAutoShowTooltip(eventSourceIndicator)\n    if (reloadMessageCount > 0) {\n      const changeLink = variantNode.querySelector(\".eventsource-changes-link\")\n      changeLink.innerHTML = reloadMessageCount\n      changeLink.onclick = () => {\n        console.log(reloadMessages)\n        // eslint-disable-next-line no-alert\n        window.parent.alert(JSON.stringify(reloadMessages, null, \"  \"))\n      }\n\n      const somePending = reloadMessages.some((m) => m.status === \"pending\")\n      const applyLink = variantNode.querySelector(\".eventsource-reload-link\")\n      applyLink.innerHTML = somePending ? \"applying...\" : \"apply changes\"\n      applyLink.onclick = somePending\n        ? () => {}\n        : () => {\n            parentEventSourceClient.applyReloadMessageEffects()\n          }\n    }\n  } else if (eventSourceConnectionState === \"disconnected\") {\n    autoShowTooltip(eventSourceIndicator)\n    variantNode.querySelector(\"a\").onclick = () => {\n      parentEventSourceClient.connect()\n    }\n  }\n}\n\nconst disableLivereloadSetting = () => {\n  document\n    .querySelector(\".settings-livereload\")\n    .setAttribute(\"data-disabled\", \"true\")\n  document\n    .querySelector(\".settings-livereload\")\n    .setAttribute(\"title\", `Livereload not available: disabled by server`)\n  document.querySelector(\"#toggle-livereload\").disabled = true\n}\n",
    "import {\n  forceHideElement,\n  removeForceHideElement,\n  deactivateToolbarSection,\n} from \"../util/dom.js\"\nimport { createHorizontalBreakpoint } from \"../util/responsive.js\"\nimport { hideTooltip } from \"../tooltip/tooltip.js\"\n\nconst WINDOW_SMALL_WIDTH = 420\n\nexport const makeToolbarResponsive = () => {\n  // apply responsive design on toolbar icons if needed + add listener on resize screen\n  // ideally we should listen breakpoint once, for now restore toolbar\n  const overflowMenuBreakpoint = createHorizontalBreakpoint(WINDOW_SMALL_WIDTH)\n  const handleOverflowMenuBreakpoint = () => {\n    responsiveToolbar(overflowMenuBreakpoint)\n  }\n  handleOverflowMenuBreakpoint()\n  overflowMenuBreakpoint.changed.listen(handleOverflowMenuBreakpoint)\n\n  // overflow menu\n  document.querySelector(\"#overflow-menu-button\").onclick = () =>\n    toggleOverflowMenu()\n}\n\nconst responsiveToolbar = (overflowMenuBreakpoint) => {\n  // close all tooltips in case opened\n  hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n  hideTooltip(document.querySelector(\"#execution-indicator\"))\n  // close settings box in case opened\n  deactivateToolbarSection(document.querySelector(\"#settings\"))\n\n  if (overflowMenuBreakpoint.isBelow()) {\n    enableOverflow()\n  } else {\n    disableOverflow()\n  }\n}\n\nlet moves = []\n\nconst enableOverflow = () => {\n  // move elements from toolbar to overflow menu\n  const responsiveToolbarElements = document.querySelectorAll(\n    \"[data-responsive-toolbar-element]\",\n  )\n  const overflowMenu = document.querySelector(\"#overflow-menu\")\n\n  // keep a placeholder element to know where to move them back\n  moves = Array.from(responsiveToolbarElements).map((element) => {\n    const placeholder = document.createElement(\"div\")\n    placeholder.style.display = \"none\"\n    placeholder.setAttribute(\"data-placeholder\", \"\")\n    element.parentNode.replaceChild(placeholder, element)\n    overflowMenu.appendChild(element)\n    return { element, placeholder }\n  })\n\n  document\n    .querySelector(\"#toolbar\")\n    .setAttribute(\"data-overflow-menu-enabled\", \"\")\n  removeForceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst disableOverflow = () => {\n  // close overflow menu in case it's open & unselect toggleOverflowMenu button in case it's selected\n  hideOverflowMenu()\n  deactivateToolbarSection(document.querySelector(\"#overflow-menu\"))\n  moves.forEach(({ element, placeholder }) => {\n    placeholder.parentNode.replaceChild(element, placeholder)\n  })\n  moves = []\n\n  document\n    .querySelector(\"#toolbar\")\n    .removeAttribute(\"data-overflow-menu-enabled\")\n  forceHideElement(document.querySelector(\"#overflow-menu-button\"))\n}\n\nconst toggleOverflowMenu = () => {\n  if (overflowMenuIsVisible()) {\n    hideOverflowMenu()\n  } else {\n    showOverflowMenu()\n  }\n}\n\nconst overflowMenuIsVisible = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  return toolbar.hasAttribute(\"data-overflow-menu-visible\")\n}\n\nconst showOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  document.querySelector(\"#overflow-menu\").setAttribute(\"data-animate\", \"\")\n  toolbar.setAttribute(\"data-overflow-menu-visible\", \"\")\n}\n\nconst hideOverflowMenu = () => {\n  const toolbar = document.querySelector(\"#toolbar\")\n  toolbar.removeAttribute(\"data-overflow-menu-visible\")\n  document.querySelector(\"#overflow-menu\").removeAttribute(\"data-animate\")\n}\n",
    "import { urlIsInsideOf } from \"@jsenv/filesystem/src/urlIsInsideOf.js\"\nimport { urlToRelativeUrl } from \"@jsenv/filesystem/src/urlToRelativeUrl.js\"\n\nimport { startJavaScriptAnimation } from \"../toolbar/util/animation.js\"\nimport \"./focus/toolbar_focus.js\"\nimport { setLinkHrefForParentWindow } from \"./util/iframe_to_parent_href.js\"\nimport {\n  getToolbarIframe,\n  deactivateToolbarSection,\n  setStyles,\n} from \"./util/dom.js\"\nimport { createPreference } from \"./util/preferences.js\"\nimport { hideTooltip, hideAllTooltip } from \"./tooltip/tooltip.js\"\nimport {\n  renderToolbarSettings,\n  hideSettings,\n} from \"./settings/toolbar_settings.js\"\nimport { renderToolbarNotification } from \"./notification/toolbar_notification.js\"\nimport { renderToolbarTheme } from \"./theme/toolbar_theme.js\"\nimport { renderToolbarAnimation } from \"./animation/toolbar_animation.js\"\nimport { renderExecutionInToolbar } from \"./execution/toolbar_execution.js\"\nimport { renderCompilationInToolbar } from \"./compilation/toolbar_compilation.js\"\nimport { initToolbarEventSource } from \"./eventsource/toolbar_eventsource.js\"\nimport { makeToolbarResponsive } from \"./responsive/toolbar_responsive.js\"\n\nconst toolbarVisibilityPreference = createPreference(\"toolbar\")\n\nconst renderToolbar = async ({ exploringJSON }) => {\n  const executedFileCompiledUrl = window.parent.location.href\n  const compileServerOrigin = window.parent.location.origin\n  // this should not block the whole toolbar rendering + interactivity\n  const { jsenvDirectoryRelativeUrl, livereloading } = exploringJSON\n  const compileGroup = getCompileGroup({\n    executedFileCompiledUrl,\n    jsenvDirectoryRelativeUrl,\n    compileServerOrigin,\n  })\n  const executedFileRelativeUrl = compileGroup.fileRelativeUrl\n\n  const toolbarOverlay = document.querySelector(\"#toolbar-overlay\")\n  toolbarOverlay.onclick = () => {\n    hideAllTooltip()\n    hideSettings()\n  }\n\n  const toolbarVisible = toolbarVisibilityPreference.has()\n    ? toolbarVisibilityPreference.get()\n    : true\n\n  if (toolbarVisible) {\n    showToolbar({ animate: false })\n  } else {\n    hideToolbar({ animate: false })\n  }\n\n  setLinkHrefForParentWindow(\n    document.querySelector(\".toolbar-icon-wrapper\"),\n    \"/\",\n  )\n\n  renderToolbarNotification()\n  makeToolbarResponsive()\n  renderToolbarSettings()\n  renderToolbarAnimation()\n  renderToolbarTheme()\n  renderExecutionInToolbar({ executedFileRelativeUrl })\n  renderCompilationInToolbar({ compileGroup })\n  // this might become active but we need to detect this somehow\n  deactivateToolbarSection(document.querySelector(\"#file-list-link\"))\n  initToolbarEventSource({\n    executedFileRelativeUrl,\n    livereloading,\n  })\n\n  // if user click enter or space quickly while closing toolbar\n  // it will cancel the closing\n  // that's why I used toggleToolbar and not hideToolbar\n  document.querySelector(\"#button-close-toolbar\").onclick = () =>\n    toogleToolbar()\n}\n\nconst toogleToolbar = () => {\n  if (toolbarIsVisible()) {\n    hideToolbar()\n  } else {\n    showToolbar()\n  }\n}\n\nconst toolbarIsVisible = () =>\n  document.documentElement.hasAttribute(\"data-toolbar-visible\")\n\nlet hideToolbar = () => {\n  // toolbar hidden by default, nothing to do to hide it by default\n  sendEventToParent(\"toolbar-visibility-change\", false)\n}\n\n// (by the way it might be cool to have the toolbar auto show when)\n// it has something to say (being disconnected from livereload server)\nconst showToolbar = ({ animate = true } = {}) => {\n  toolbarVisibilityPreference.set(true)\n  if (animate) {\n    document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n  } else {\n    document.documentElement.removeAttribute(\"data-toolbar-animation\")\n  }\n  document.documentElement.setAttribute(\"data-toolbar-visible\", \"\")\n\n  sendEventToParent(\"toolbar-visibility-change\", true)\n\n  const toolbarIframe = getToolbarIframe()\n  const toolbarIframeParent = toolbarIframe.parentNode\n  const parentWindow = window.parent\n  const parentDocumentElement =\n    parentWindow.document.compatMode === \"CSS1Compat\"\n      ? parentWindow.document.documentElement\n      : parentWindow.document.body\n\n  const scrollYMax =\n    parentDocumentElement.scrollHeight - parentWindow.innerHeight\n  const scrollY = parentDocumentElement.scrollTop\n  const scrollYRemaining = scrollYMax - scrollY\n\n  setStyles(toolbarIframeParent, {\n    \"transition-property\": \"padding-bottom\",\n    \"transition-duration\": \"300ms\",\n  })\n  // maybe we should use js animation here because we would not conflict with css\n  const restoreToolbarIframeParentStyles = setStyles(toolbarIframeParent, {\n    \"scroll-padding-bottom\": \"40px\", // same here we should add 40px\n    \"padding-bottom\": \"40px\", // if there is already one we should add 40px\n  })\n  const restoreToolbarIframeStyles = setStyles(toolbarIframe, {\n    height: \"40px\",\n    visibility: \"visible\",\n  })\n\n  if (scrollYRemaining < 40 && scrollYMax > 0) {\n    const scrollEnd = scrollY + 40\n    startJavaScriptAnimation({\n      duration: 300,\n      onProgress: ({ progress }) => {\n        const value = scrollY + (scrollEnd - scrollY) * progress\n        parentDocumentElement.scrollTop = value\n      },\n    })\n  }\n\n  hideToolbar = () => {\n    restoreToolbarIframeParentStyles()\n    restoreToolbarIframeStyles()\n\n    hideTooltip(document.querySelector(\"#eventsource-indicator\"))\n    hideTooltip(document.querySelector(\"#execution-indicator\"))\n    toolbarVisibilityPreference.set(false)\n    if (animate) {\n      document.documentElement.setAttribute(\"data-toolbar-animation\", \"\")\n    } else {\n      document.documentElement.removeAttribute(\"data-toolbar-animation\")\n    }\n    document.documentElement.removeAttribute(\"data-toolbar-visible\")\n    sendEventToParent(\"toolbar-visibility-change\", false)\n  }\n}\n\nconst getCompileGroup = ({\n  executedFileCompiledUrl,\n  jsenvDirectoryRelativeUrl,\n  compileServerOrigin,\n}) => {\n  const jsenvDirectoryServerUrl = new URL(\n    jsenvDirectoryRelativeUrl,\n    compileServerOrigin,\n  ).href\n  if (urlIsInsideOf(executedFileCompiledUrl, jsenvDirectoryServerUrl)) {\n    const afterCompileDirectory = urlToRelativeUrl(\n      executedFileCompiledUrl,\n      jsenvDirectoryServerUrl,\n    )\n    const slashIndex = afterCompileDirectory.indexOf(\"/\")\n    const fileRelativeUrl = afterCompileDirectory.slice(slashIndex + 1)\n    return {\n      fileRelativeUrl,\n      compileId: afterCompileDirectory.slice(0, slashIndex),\n    }\n  }\n  return {\n    fileRelativeUrl: new URL(executedFileCompiledUrl).pathname.slice(1),\n    compileId: null,\n  }\n}\n\nconst addExternalCommandCallback = (command, callback) => {\n  const messageEventCallback = (messageEvent) => {\n    const { data } = messageEvent\n    if (typeof data !== \"object\") {\n      return\n    }\n    const { __jsenv__ } = data\n    if (!__jsenv__) {\n      return\n    }\n\n    if (__jsenv__.command !== command) {\n      return\n    }\n\n    callback(...__jsenv__.args)\n  }\n\n  window.addEventListener(\"message\", messageEventCallback)\n  return () => {\n    window.removeEventListener(\"message\", messageEventCallback)\n  }\n}\n\nconst sendEventToParent = (name, data) => {\n  window.parent.postMessage(\n    {\n      __jsenv__: {\n        event: name,\n        data,\n      },\n    },\n    \"*\",\n  )\n}\n\nwindow.toolbar = {\n  show: showToolbar,\n  hide: () => hideToolbar(),\n}\n\naddExternalCommandCallback(\"renderToolbar\", (data) => {\n  renderToolbar(data)\n})\naddExternalCommandCallback(\"showToolbar\", () => {\n  showToolbar()\n})\naddExternalCommandCallback(\"hideToolbar\", () => {\n  hideToolbar()\n})\nsendEventToParent(\"toolbar_ready\")\n"
  ],
  "names": [
    "urlIsInsideOf",
    "url",
    "otherUrl",
    "urlObject",
    "URL",
    "otherUrlObject",
    "origin",
    "urlPathname",
    "pathname",
    "otherUrlPathname",
    "isInside",
    "startsWith",
    "getCommonPathname",
    "otherPathname",
    "firstDifferentCharacterIndex",
    "findFirstDifferentCharacterIndex",
    "commonString",
    "slice",
    "charAt",
    "firstDifferentSlashIndex",
    "lastIndexOf",
    "string",
    "otherString",
    "maxCommonLength",
    "Math",
    "min",
    "length",
    "i",
    "char",
    "otherChar",
    "pathnameToParentPathname",
    "slashLastIndex",
    "urlToRelativeUrl",
    "baseUrl",
    "baseUrlObject",
    "protocol",
    "urlAsString",
    "String",
    "username",
    "password",
    "host",
    "afterUrlScheme",
    "hash",
    "search",
    "baseUrlRessourceWithoutLeadingSlash",
    "basePathname",
    "commonPathname",
    "specificPathname",
    "baseSpecificPathname",
    "includes",
    "baseSpecificParentPathname",
    "relativeDirectoriesNotation",
    "replace",
    "relativeUrl",
    "updateIframeOverflowOnParentWindow",
    "window",
    "parent",
    "aTooltipIsOpened",
    "document",
    "querySelector",
    "settingsAreOpened",
    "enableIframeOverflowOnParentWindow",
    "disableIframeOverflowOnParentWindow",
    "iframeOverflowEnabled",
    "iframe",
    "getToolbarIframe",
    "transitionDuration",
    "style",
    "setStyles",
    "setTimeout",
    "iframes",
    "Array",
    "from",
    "querySelectorAll",
    "find",
    "contentWindow",
    "forceHideElement",
    "element",
    "setAttribute",
    "removeForceHideElement",
    "removeAttribute",
    "styles",
    "elementStyle",
    "restoreStyles",
    "Object",
    "keys",
    "map",
    "styleName",
    "restore",
    "currentStyle",
    "forEach",
    "toolbarSectionIsActive",
    "hasAttribute",
    "activateToolbarSection",
    "deactivateToolbarSection",
    "startJavaScriptAnimation",
    "duration",
    "timingFunction",
    "t",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "parseInt",
    "startMs",
    "performance",
    "now",
    "currentRequestAnimationFrameId",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "nowMs",
    "requestAnimationFrame",
    "stop",
    "cancelAnimationFrame",
    "addEventListener",
    "mousedownEvent",
    "defaultPrevented",
    "documentElement",
    "touchstartEvent",
    "keydownEvent",
    "setLinkHrefForParentWindow",
    "a",
    "href",
    "onclick",
    "e",
    "ctrlKey",
    "metaKey",
    "preventDefault",
    "location",
    "createPreference",
    "name",
    "has",
    "localStorage",
    "hasOwnProperty",
    "get",
    "JSON",
    "parse",
    "getItem",
    "undefined",
    "set",
    "value",
    "setItem",
    "stringify",
    "toggleTooltip",
    "hideTooltip",
    "showTooltip",
    "autoShowTooltip",
    "removeAutoShowTooltip",
    "hideAllTooltip",
    "elementsWithTooltip",
    "elementWithTooltip",
    "enableVariant",
    "rootNode",
    "variables",
    "nodesNotMatching",
    "attributeIndicatingACondition",
    "nodeNotMatching",
    "conditionAttributeValue",
    "getAttribute",
    "matches",
    "testCondition",
    "renameAttribute",
    "attributeIndicatingAMatch",
    "nodesMatching",
    "nodeMatching",
    "condition",
    "parseCondition",
    "some",
    "key",
    "colonIndex",
    "indexOf",
    "node",
    "newName",
    "renderToolbarSettings",
    "toggleSettings",
    "settingsAreVisible",
    "hideSettings",
    "showSettings",
    "enableWarningStyle",
    "has_warning",
    "disableWarningStyle",
    "notificationAvailable",
    "Notification",
    "notificationPreference",
    "arrayOfOpenedNotifications",
    "renderToolbarNotification",
    "applyNotificationNotAvailableEffects",
    "updatePermission",
    "notifPermission",
    "permission",
    "applyNotificationDefaultEffects",
    "applyNotificationDeniedEffects",
    "applyNotificationGrantedEffects",
    "notifCheckbox",
    "notifSetting",
    "disabled",
    "applyNotificationNOTGrantedEffects",
    "notif_granted",
    "checked",
    "getNotificationPreference",
    "onchange",
    "setNotificationPreference",
    "notification",
    "close",
    "requestPermission",
    "then",
    "notifyExecutionResult",
    "executedFileRelativeUrl",
    "execution",
    "previousExecution",
    "notificationEnabled",
    "notificationOptions",
    "lang",
    "icon",
    "getFaviconHref",
    "clickToFocus",
    "clickToClose",
    "status",
    "notify",
    "body",
    "link",
    "title",
    "options",
    "push",
    "focus",
    "onclose",
    "index",
    "splice",
    "requestPromise",
    "Promise",
    "resolve",
    "DARK_THEME",
    "LIGHT_THEME",
    "themePreference",
    "renderToolbarTheme",
    "theme",
    "getThemePreference",
    "checkbox",
    "setTheme",
    "setThemePreference",
    "animationPreference",
    "renderToolbarAnimation",
    "animCheckbox",
    "getAnimationPreference",
    "setAnimationPreference",
    "onPreferenceChange",
    "enableAnimation",
    "disableAnimation",
    "createHorizontalBreakpoint",
    "breakpointValue",
    "createBreakpoint",
    "windowWidthMeasure",
    "createMeasure",
    "compute",
    "register",
    "currentValue",
    "changed",
    "createSignal",
    "unregister",
    "previousValue",
    "callbackArray",
    "listen",
    "callback",
    "args",
    "innerWidth",
    "removeEventListener",
    "measure",
    "getBreakpointState",
    "currentBreakpointState",
    "isAbove",
    "isBelow",
    "breakpointChanged",
    "breakpointState",
    "breakpointStatePrevious",
    "WINDOW_MEDIUM_WIDTH",
    "renderExecutionInToolbar",
    "applyExecutionIndicator",
    "input",
    "fileWidthBreakpoint",
    "handleFileWidthBreakpoint",
    "resizeInput",
    "__jsenv__",
    "executionResultPromise",
    "startTime",
    "endTime",
    "executionStorageKey",
    "sessionStorage",
    "executionIndicator",
    "variantNode",
    "textContent",
    "computeText",
    "size",
    "width",
    "fetchUsingXHR",
    "signal",
    "method",
    "credentials",
    "headers",
    "headersPromise",
    "createPromiseAndHooks",
    "bodyPromise",
    "xhr",
    "XMLHttpRequest",
    "failure",
    "error",
    "settled",
    "reject",
    "cleanup",
    "ontimeout",
    "onerror",
    "onload",
    "onreadystatechange",
    "Error",
    "createRequestError",
    "abort",
    "abortError",
    "readyState",
    "open",
    "setRequestHeader",
    "withCredentials",
    "computeWithCredentials",
    "hasBlob",
    "responseType",
    "send",
    "responseUrl",
    "responseURL",
    "responseStatus",
    "responseStatusText",
    "statusText",
    "responseHeaders",
    "getHeadersFromXHR",
    "readBody",
    "response",
    "responseText",
    "responseBody",
    "responseBodyType",
    "detectBodyType",
    "text",
    "blobToText",
    "arrayBufferToText",
    "buffer",
    "json",
    "blob",
    "Blob",
    "cloneBuffer",
    "arrayBuffer",
    "responseBlob",
    "blobToArrayBuffer",
    "formData",
    "hasFormData",
    "textToFormData",
    "canUseBlob",
    "FileReader",
    "FormData",
    "hasArrayBuffer",
    "ArrayBuffer",
    "hasSearchParams",
    "URLSearchParams",
    "stack",
    "promise",
    "res",
    "rej",
    "originSameAsGlobalOrigin",
    "globalOrigin",
    "hrefToOrigin",
    "prototype",
    "isPrototypeOf",
    "isDataView",
    "isArrayBufferView",
    "headerMap",
    "headersString",
    "getAllResponseHeaders",
    "lines",
    "trim",
    "split",
    "line",
    "parts",
    "shift",
    "join",
    "toLowerCase",
    "scheme",
    "hrefToScheme",
    "secondProtocolSlashIndex",
    "pathnameSlashIndex",
    "obj",
    "DataView",
    "isView",
    "viewClasses",
    "toString",
    "call",
    "form",
    "bytes",
    "append",
    "decodeURIComponent",
    "reader",
    "fileReaderReady",
    "readAsArrayBuffer",
    "readAsText",
    "view",
    "Uint8Array",
    "chars",
    "fromCharCode",
    "result",
    "byteLength",
    "fetchNative",
    "mode",
    "fetch",
    "responseToHeaders",
    "fetchUrl",
    "AbortController",
    "fetchJson",
    "object",
    "detectFromUserAgentData",
    "userAgentData",
    "navigator",
    "brands",
    "brand",
    "version",
    "firstMatch",
    "regexp",
    "match",
    "secondMatch",
    "userAgentToVersion",
    "userAgent",
    "detectAndroid",
    "navigatorToBrowser",
    "appVersion",
    "test",
    "detectInternetExplorer",
    "userAgentToBrowser",
    "detectOpera",
    "detectEdge",
    "detectFirefox",
    "detectChrome",
    "detectSafari",
    "detectElectron",
    "detectIOS",
    "detectorCompose",
    "detectors",
    "detector",
    "detectBrowser",
    "normalizeName",
    "normalizeVersion",
    "executeWithScriptModuleInjection",
    "code",
    "scriptModule",
    "createElement",
    "type",
    "loadPromise",
    "removeChild",
    "appendChild",
    "src",
    "asBase64Url",
    "mimeType",
    "btoa",
    "supportsImportmap",
    "remote",
    "specifier",
    "importMap",
    "imports",
    "importmapScript",
    "importmapString",
    "supported",
    "__jsenv_runtime_test_importmap__",
    "supportsDynamicImport",
    "moduleSource",
    "namespace",
    "__jsenv_runtime_test_dynamic_import__",
    "default",
    "supportsTopLevelAwait",
    "__jsenv_runtime_test_top_level_await__",
    "supportsJsonImportAssertions",
    "jsonBase64Url",
    "__jsenv_runtime_test_json_import_assertion__",
    "supportsCssImportAssertions",
    "cssBase64Url",
    "__jsenv_runtime_test_css_import_assertion__",
    "CSSStyleSheet",
    "supportsNewStylesheet",
    "scanBrowserRuntimeFeatures",
    "coverageHandledFromOutside",
    "forceCompilation",
    "forceSource",
    "jsenvCompileProfileUrl",
    "jsenvDirectoryRelativeUrl",
    "inlineImportMapIntoHTML",
    "availableCompileIds",
    "featuresReport",
    "detectSupportedFeatures",
    "runtimeReport",
    "env",
    "browser",
    "compileProfile",
    "compileId",
    "importmap",
    "renderCompilationInToolbar",
    "compileGroup",
    "browserSupportRootNode",
    "filesCompilationRootNode",
    "browserSupport",
    "alert",
    "listWhatIsMissing",
    "listWhatIsSupported",
    "actualCompileId",
    "expectedCompiledId",
    "shouldSwitchCompileId",
    "shouldCompile",
    "filesCompilation",
    "hasWarning",
    "compilation_link",
    "innerHTML",
    "fileRelativeUrl",
    "missingFeatures",
    "dynamicImport",
    "topLevelAwait",
    "missingFeatureNames",
    "filter",
    "missingFeatureCount",
    "custom_compiler_patterns",
    "livereloadingAvailableOnServer",
    "parentEventSourceClient",
    "__jsenv_event_source_client__",
    "initToolbarEventSource",
    "livereloading",
    "disableLivereloadSetting",
    "updateEventSourceIndicator",
    "reloadMessagesSignal",
    "livereloadCheckbox",
    "isLivereloadEnabled",
    "setLivereloadPreference",
    "eventSourceIndicator",
    "reloadMessages",
    "reloadMessageCount",
    "eventSourceConnectionState",
    "eventsource",
    "livereload",
    "changes",
    "disconnect",
    "changeLink",
    "console",
    "log",
    "somePending",
    "m",
    "applyLink",
    "applyReloadMessageEffects",
    "connect",
    "WINDOW_SMALL_WIDTH",
    "makeToolbarResponsive",
    "overflowMenuBreakpoint",
    "handleOverflowMenuBreakpoint",
    "responsiveToolbar",
    "toggleOverflowMenu",
    "enableOverflow",
    "disableOverflow",
    "moves",
    "responsiveToolbarElements",
    "overflowMenu",
    "placeholder",
    "display",
    "parentNode",
    "replaceChild",
    "hideOverflowMenu",
    "overflowMenuIsVisible",
    "showOverflowMenu",
    "toolbar",
    "toolbarVisibilityPreference",
    "renderToolbar",
    "exploringJSON",
    "executedFileCompiledUrl",
    "compileServerOrigin",
    "getCompileGroup",
    "toolbarOverlay",
    "toolbarVisible",
    "showToolbar",
    "animate",
    "hideToolbar",
    "toogleToolbar",
    "toolbarIsVisible",
    "sendEventToParent",
    "toolbarIframe",
    "toolbarIframeParent",
    "parentWindow",
    "parentDocumentElement",
    "compatMode",
    "scrollYMax",
    "scrollHeight",
    "innerHeight",
    "scrollY",
    "scrollTop",
    "scrollYRemaining",
    "restoreToolbarIframeParentStyles",
    "restoreToolbarIframeStyles",
    "height",
    "visibility",
    "scrollEnd",
    "jsenvDirectoryServerUrl",
    "afterCompileDirectory",
    "slashIndex",
    "addExternalCommandCallback",
    "command",
    "messageEventCallback",
    "messageEvent",
    "data",
    "postMessage",
    "event",
    "show",
    "hide"
  ],
  "mappings": "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"
}