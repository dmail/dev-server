{
  "version": 3,
  "file": "toolbar_injector_5e095ae3.js",
  "sources": [
    "../../helpers/babel/typeof/typeof.js",
    "../../src/internal/dev_server/toolbar/util/dom.js",
    "../../src/internal/dev_server/toolbar/toolbar.injector.js"
  ],
  "sourcesContent": [
    "const nativeTypeOf = (obj) => typeof obj\n\nconst customTypeOf = (obj) => {\n  return obj &&\n    typeof Symbol === \"function\" &&\n    obj.constructor === Symbol &&\n    obj !== Symbol.prototype\n    ? \"symbol\"\n    : typeof obj\n}\n\nexport default typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n  ? nativeTypeOf\n  : customTypeOf\n",
    "export const updateIframeOverflowOnParentWindow = () => {\n  if (!window.parent) {\n    // can happen while parent iframe reloads\n    return\n  }\n\n  const aTooltipIsOpened =\n    document.querySelector(\"[data-tooltip-visible]\") ||\n    document.querySelector(\"[data-tooltip-auto-visible]\")\n  const settingsAreOpened = document.querySelector(\"#settings[data-active]\")\n\n  if (aTooltipIsOpened || settingsAreOpened) {\n    enableIframeOverflowOnParentWindow()\n  } else {\n    disableIframeOverflowOnParentWindow()\n  }\n}\n\nlet iframeOverflowEnabled = false\nconst enableIframeOverflowOnParentWindow = () => {\n  if (iframeOverflowEnabled) return\n  iframeOverflowEnabled = true\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"100%\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nconst disableIframeOverflowOnParentWindow = () => {\n  if (!iframeOverflowEnabled) return\n  iframeOverflowEnabled = false\n\n  const iframe = getToolbarIframe()\n  const transitionDuration = iframe.style.transitionDuration\n  setStyles(iframe, { \"height\": \"40px\", \"transition-duration\": \"0ms\" })\n  if (transitionDuration) {\n    setTimeout(() => {\n      setStyles(iframe, { \"transition-duration\": transitionDuration })\n    })\n  }\n}\n\nexport const getToolbarIframe = () => {\n  const iframes = Array.from(window.parent.document.querySelectorAll(\"iframe\"))\n  return iframes.find((iframe) => iframe.contentWindow === window)\n}\n\nexport const forceHideElement = (element) => {\n  element.setAttribute(\"data-force-hide\", \"\")\n}\n\nexport const removeForceHideElement = (element) => {\n  element.removeAttribute(\"data-force-hide\")\n}\n\nexport const setStyles = (element, styles) => {\n  const elementStyle = element.style\n  const restoreStyles = Object.keys(styles).map((styleName) => {\n    let restore\n    if (styleName in elementStyle) {\n      const currentStyle = elementStyle[styleName]\n      restore = () => {\n        elementStyle[styleName] = currentStyle\n      }\n    } else {\n      restore = () => {\n        delete elementStyle[styleName]\n      }\n    }\n\n    elementStyle[styleName] = styles[styleName]\n\n    return restore\n  })\n  return () => {\n    restoreStyles.forEach((restore) => restore())\n  }\n}\n\nexport const setAttributes = (element, attributes) => {\n  Object.keys(attributes).forEach((name) => {\n    element.setAttribute(name, attributes[name])\n  })\n}\n\nexport const getDocumentScroll = () => {\n  return {\n    x: document.documentElement.scrollLeft,\n    y: document.documentElement.scrollTop,\n  }\n}\n\nexport const toolbarSectionIsActive = (element) => {\n  return element.hasAttribute(\"data-active\")\n}\n\nexport const activateToolbarSection = (element) => {\n  element.setAttribute(\"data-active\", \"\")\n}\n\nexport const deactivateToolbarSection = (element) => {\n  element.removeAttribute(\"data-active\")\n}\n",
    "import { setAttributes, setStyles } from \"./util/dom.js\"\n\n// eslint-disable-next-line no-undef\nconst TOOLBAR_BUILD_RELATIVE_URL = \"dist/toolbar/toolbar_87725116.html\"\nconst jsenvLogoSvgUrl = new URL(\"./jsenv-logo.svg\", import.meta.url)\n\nconst injectToolbar = async () => {\n  await new Promise((resolve) => {\n    if (window.requestIdleCallback) {\n      window.requestIdleCallback(resolve)\n    } else {\n      window.requestAnimationFrame(resolve)\n    }\n  })\n\n  const placeholder = getToolbarPlaceholder()\n\n  const iframe = document.createElement(\"iframe\")\n  setAttributes(iframe, {\n    tabindex: -1,\n    // sandbox: \"allow-forms allow-modals allow-pointer-lock allow-popups allow-presentation allow-same-origin allow-scripts allow-top-navigation-by-user-activation\",\n    // allow: \"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; microphone; midi; payment; vr\",\n    allowtransparency: true,\n  })\n  setStyles(iframe, {\n    \"position\": \"fixed\",\n    \"zIndex\": 1000,\n    \"bottom\": 0,\n    \"left\": 0,\n    \"width\": \"100%\",\n    \"height\": 0,\n    /* ensure toolbar children are not focusable when hidden */\n    \"visibility\": \"hidden\",\n    \"transition-duration\": \"300ms\",\n    \"transition-property\": \"height, visibility\",\n    \"border\": \"none\",\n  })\n  const iframeLoadedPromise = iframeToLoadedPromise(iframe)\n  const jsenvToolbarHtmlServerUrl = `/${TOOLBAR_BUILD_RELATIVE_URL}`\n  // set iframe src BEFORE putting it into the DOM (prevent firefox adding an history entry)\n  iframe.setAttribute(\"src\", jsenvToolbarHtmlServerUrl)\n  placeholder.parentNode.replaceChild(iframe, placeholder)\n\n  await iframeLoadedPromise\n  iframe.removeAttribute(\"tabindex\")\n\n  const div = document.createElement(\"div\")\n  div.innerHTML = `\n<div id=\"jsenv-toolbar-trigger\">\n  <svg id=\"jsenv-toolbar-trigger-icon\">\n    <use xlink:href=\"${jsenvLogoSvgUrl}#jsenv-logo\"></use>\n  </svg>\n  <style>\n    #jsenv-toolbar-trigger {\n      display: block;\n      overflow: hidden;\n      position: fixed;\n      z-index: 1000;\n      bottom: -32px;\n      right: 20px;\n      height: 40px;\n      width: 40px;\n      padding: 0;\n      margin: 0;\n      border-radius: 5px 5px 0 0;\n      border: 1px solid rgba(0, 0, 0, 0.33);\n      border-bottom: none;\n      box-shadow: 0px 0px 6px 2px rgba(0, 0, 0, 0.46);\n      background: transparent;\n      text-align: center;\n      transition: 600ms;\n    }\n\n    #jsenv-toolbar-trigger:hover {\n      cursor: pointer;\n    }\n\n    #jsenv-toolbar-trigger[data-expanded] {\n      bottom: 0;\n    }\n\n    #jsenv-toolbar-trigger-icon {\n      width: 35px;\n      height: 35px;\n      opacity: 0;\n      transition: 600ms;\n    }\n\n    #jsenv-toolbar-trigger[data-expanded] #jsenv-toolbar-trigger-icon {\n      opacity: 1;\n    }\n  </style>\n</div>`\n  const toolbarTrigger = div.firstElementChild\n  iframe.parentNode.appendChild(toolbarTrigger)\n\n  let timer\n  toolbarTrigger.onmouseenter = () => {\n    toolbarTrigger.setAttribute(\"data-animate\", \"\")\n    timer = setTimeout(expandToolbarTrigger, 500)\n  }\n  toolbarTrigger.onmouseleave = () => {\n    clearTimeout(timer)\n    collapseToolbarTrigger()\n  }\n  toolbarTrigger.onfocus = () => {\n    toolbarTrigger.removeAttribute(\"data-animate\")\n    expandToolbarTrigger()\n  }\n  toolbarTrigger.onblur = () => {\n    toolbarTrigger.removeAttribute(\"data-animate\")\n    clearTimeout(timer)\n    collapseToolbarTrigger()\n  }\n  toolbarTrigger.onclick = () => {\n    sendCommandToToolbar(iframe, \"showToolbar\")\n  }\n\n  const showToolbarTrigger = () => {\n    toolbarTrigger.style.display = \"block\"\n  }\n\n  const hideToolbarTrigger = () => {\n    toolbarTrigger.style.display = \"none\"\n  }\n\n  const expandToolbarTrigger = () => {\n    toolbarTrigger.setAttribute(\"data-expanded\", \"\")\n  }\n\n  const collapseToolbarTrigger = () => {\n    toolbarTrigger.removeAttribute(\"data-expanded\", \"\")\n  }\n\n  hideToolbarTrigger()\n  addToolbarEventCallback(iframe, \"toolbar-visibility-change\", (visible) => {\n    if (visible) {\n      hideToolbarTrigger()\n    } else {\n      showToolbarTrigger()\n    }\n  })\n  addToolbarEventCallback(iframe, \"toolbar_ready\", () => {\n    sendCommandToToolbar(iframe, \"renderToolbar\")\n  })\n\n  return iframe\n}\n\nconst addToolbarEventCallback = (iframe, eventName, callback) => {\n  const messageEventCallback = (messageEvent) => {\n    const { data } = messageEvent\n    if (typeof data !== \"object\") {\n      return\n    }\n    const { __jsenv__ } = data\n    if (!__jsenv__) {\n      return\n    }\n    if (__jsenv__.event !== eventName) {\n      return\n    }\n    callback(__jsenv__.data)\n  }\n\n  window.addEventListener(\"message\", messageEventCallback, false)\n  return () => {\n    window.removeEventListener(\"message\", messageEventCallback, false)\n  }\n}\n\nconst sendCommandToToolbar = (iframe, command, ...args) => {\n  iframe.contentWindow.postMessage(\n    {\n      __jsenv__: {\n        command,\n        args,\n      },\n    },\n    window.origin,\n  )\n}\n\nconst getToolbarPlaceholder = () => {\n  const placeholder = queryPlaceholder()\n  if (placeholder) {\n    if (document.body.contains(placeholder)) {\n      return placeholder\n    }\n    // otherwise iframe would not be visible because in <head>\n    console.warn(\n      \"element with [data-jsenv-toolbar-placeholder] must be inside document.body\",\n    )\n    return createTooolbarPlaceholder()\n  }\n  return createTooolbarPlaceholder()\n}\n\nconst queryPlaceholder = () => {\n  return document.querySelector(\"[data-jsenv-toolbar-placeholder]\")\n}\n\nconst createTooolbarPlaceholder = () => {\n  const placeholder = document.createElement(\"span\")\n  document.body.appendChild(placeholder)\n  return placeholder\n}\n\nconst iframeToLoadedPromise = (iframe) => {\n  return new Promise((resolve) => {\n    const onload = () => {\n      iframe.removeEventListener(\"load\", onload, true)\n      resolve()\n    }\n    iframe.addEventListener(\"load\", onload, true)\n  })\n}\n\nif (document.readyState === \"complete\") {\n  injectToolbar()\n} else {\n  window.addEventListener(\"load\", injectToolbar)\n}\n"
  ],
  "names": [
    "nativeTypeOf",
    "obj",
    "customTypeOf",
    "Symbol",
    "constructor",
    "prototype",
    "iterator",
    "setStyles",
    "element",
    "styles",
    "elementStyle",
    "style",
    "restoreStyles",
    "Object",
    "keys",
    "map",
    "styleName",
    "restore",
    "currentStyle",
    "forEach",
    "setAttributes",
    "attributes",
    "name",
    "setAttribute",
    "_await",
    "value",
    "then",
    "direct",
    "Promise",
    "resolve",
    "TOOLBAR_BUILD_RELATIVE_URL",
    "_async",
    "f",
    "args",
    "i",
    "arguments",
    "length",
    "apply",
    "e",
    "reject",
    "jsenvLogoSvgUrl",
    "injectToolbar",
    "window",
    "requestIdleCallback",
    "requestAnimationFrame",
    "placeholder",
    "getToolbarPlaceholder",
    "iframe",
    "document",
    "createElement",
    "tabindex",
    "allowtransparency",
    "iframeLoadedPromise",
    "iframeToLoadedPromise",
    "jsenvToolbarHtmlServerUrl",
    "parentNode",
    "replaceChild",
    "removeAttribute",
    "div",
    "innerHTML",
    "toolbarTrigger",
    "firstElementChild",
    "appendChild",
    "timer",
    "onmouseenter",
    "setTimeout",
    "expandToolbarTrigger",
    "onmouseleave",
    "clearTimeout",
    "collapseToolbarTrigger",
    "onfocus",
    "onblur",
    "onclick",
    "sendCommandToToolbar",
    "showToolbarTrigger",
    "display",
    "hideToolbarTrigger",
    "addToolbarEventCallback",
    "visible",
    "eventName",
    "callback",
    "messageEventCallback",
    "messageEvent",
    "data",
    "__jsenv__",
    "event",
    "addEventListener",
    "removeEventListener",
    "command",
    "contentWindow",
    "postMessage",
    "origin",
    "queryPlaceholder",
    "body",
    "contains",
    "console",
    "warn",
    "createTooolbarPlaceholder",
    "querySelector",
    "onload",
    "readyState"
  ],
  "mappings": "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"
}