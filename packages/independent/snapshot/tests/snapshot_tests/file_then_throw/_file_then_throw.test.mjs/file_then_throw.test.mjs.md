# [file_then_throw.test.mjs](../file_then_throw.test.mjs)

```js
try {
  await snapshotTests(
    import.meta.url,
    ({ test }) => {
      test("scenario", () => {
        throw new Error("here");
      });
    },
    {
      throwWhenDiff: true,
      outFilePattern: "./git_ignored/[filename]",
    },
  );
} catch (e) {
  replaceFileStructureSync({
    from: new URL("./scenario/", outDirectoryUrl),
    to: new URL("./result/second/", import.meta.url),
  });
  throw e;
}
```

```console
FileMissingAssertionError: snapshot comparison failed for "scenario/"
--- reason ---
"output" directory entry is missing
--- missing entry ---
@jsenv/core/packages/independent/snapshot/tests/snapshot_tests/file_then_throw/git_ignored/scenario/output
  at async snapshotSideEffects.throwWhenDiff (@jsenv/core/packages/independent/snapshot/tests/snapshot_tests/file_then_throw/file_then_throw.test.mjs:41:7)
  at async @jsenv/core/packages/independent/snapshot/tests/snapshot_tests/file_then_throw/file_then_throw.test.mjs:37:1
```

---

<sub>
  Generated by <a href="https://github.com/jsenv/core/tree/main/packages/independent/snapshot">@jsenv/snapshot</a>
</sub>
