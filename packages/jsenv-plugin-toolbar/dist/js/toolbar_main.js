import{startJavaScriptAnimation as o}from"/js/animation.js?v=4334e3fc";import"/js/toolbar_focus.js?v=736c7e1c";import{setLinkHrefForParentWindow as t}from"/js/iframe_to_parent_href.js?v=22da964e";import{getToolbarIframe as e,deactivateToolbarSection as r,setStyles as n}from"/js/dom.js?v=4435f890";import{createPreference as i}from"/js/preferences.js?v=7075848a";import{hideTooltip as a,hideAllTooltip as s}from"/js/tooltip.js?v=50fd376b";import{renderToolbarSettings as m,hideSettings as l}from"/js/toolbar_settings.js?v=eab840ee";import{renderToolbarNotification as c}from"/js/toolbar_notification.js?v=6af14793";import{renderToolbarTheme as d}from"/js/toolbar_theme.js?v=53adf4a2";import{renderToolbarAnimation as b}from"/js/toolbar_animation.js?v=235402b4";import{renderExecutionInToolbar as u}from"/js/toolbar_execution.js?v=2b0e0322";import{initToolbarEventSource as p}from"/js/toolbar_eventsource.js?v=c264728b";import{makeToolbarResponsive as j}from"/js/toolbar_responsive.js?v=67fe61d7";const f=i("toolbar"),v=()=>{_()?g():y()},_=()=>document.documentElement.hasAttribute("data-toolbar-visible");let g=()=>{w("toolbar-visibility-change",!1)};const y=({animate:t=!0}={})=>{f.set(!0),t?document.documentElement.setAttribute("data-toolbar-animation",""):document.documentElement.removeAttribute("data-toolbar-animation"),document.documentElement.setAttribute("data-toolbar-visible",""),w("toolbar-visibility-change",!0);const r=e(),i=r.parentNode,s=window.parent,m="CSS1Compat"===s.document.compatMode?s.document.documentElement:s.document.body,l=m.scrollHeight-s.innerHeight,c=m.scrollTop,d=l-c;n(i,{"transition-property":"padding-bottom","transition-duration":"300ms"});const b=n(i,{"scroll-padding-bottom":"40px","padding-bottom":"40px"}),u=n(r,{height:"40px",visibility:"visible"});if(d<40&&l>0){const t=c+40;o({duration:300,onProgress:({progress:o})=>{const e=c+(t-c)*o;m.scrollTop=e}})}g=()=>{b(),u(),a(document.querySelector("#eventsource-indicator")),a(document.querySelector("#execution-indicator")),f.set(!1),t?document.documentElement.setAttribute("data-toolbar-animation",""):document.documentElement.removeAttribute("data-toolbar-animation"),document.documentElement.removeAttribute("data-toolbar-visible"),w("toolbar-visibility-change",!1)}},h=(o,t)=>{const e=e=>{const{data:r}=e;if("object"!=typeof r)return;const{__jsenv__:n}=r;n&&n.command===o&&t(...n.args)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},w=(o,t)=>{window.parent.postMessage({__jsenv__:{event:o,data:t}},"*")};window.toolbar={show:y,hide:()=>g()},h("renderToolbar",(({logs:o})=>{(async()=>{document.querySelector("#toolbar-overlay").onclick=()=>{s(),l()},!f.has()||f.get()?y({animate:!1}):g({animate:!1}),t(document.querySelector(".toolbar-icon-wrapper"),"/"),c(),j(),m(),b(),d(),u(),r(document.querySelector("#file-list-link")),p(),document.querySelector("#button-close-toolbar").onclick=()=>v()})()})),h("showToolbar",(()=>{y()})),h("hideToolbar",(()=>{g()})),w("toolbar_ready");